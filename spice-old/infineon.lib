* Library of Infineon Semiconductors (formerly Siemens) 
*
* $Revision:   1.0  $
* $Author:   HIRASUNA  $
* $Date:   11 Jul 2001 $
*
*****************************************************************
* Simulation support: simulate@infineon.com                     *
*****************************************************************
*								*
* Models provided by INFINEON are not warranted by INFINEON as  *
* fully representing all of the specifications and operating    *
* characteristics of the semiconductor product to which the     *
* model relates. The model describe the characteristics of a    * 
* typical device.                                               * 
* In all cases, the current data sheet information for a given  *
* device is the final design guideline and the only actual      *
* performance specification.                                    *
* Altough models can be a useful tool in evaluating device      *
* performance, they cannot model exact device performance under *
* all conditions, nor are they intended to replace bread-       *
* boarding for final verification. INFINEON therefore does not  *
* assume any liability arising from their use.                  *
* INFINEON reserves the right to change models without prior    * 
* notice.                                                       *
*                                                               
*****************************************************************
* Infineon Technologies Discrete & RF Semiconductors          *
* SPICE Library Version 4.04                 29.03.1999       *
*********************************************************************
* This library contains the following Infineon Technologies Diodes: *
*                                                                   *
* BA582      BA592      BA595      BAL74      BAL99      BAR64      *
* BAR74      BAR99      BAS116     BAS125                BAS16      *
* BAS21      BAS28      BAS40      BAS70      BAT14-098  BAT15-03W  *
*            BAT15-098                        BAT18      BAT60A     *
* BAT62      BAT63      BAT64      BAT65      BAT66      BAT68      *
* BAT165     BAV70      BAV74      BAV99      BAW100     BAW101     *
* BAW56      BAW78D     BB515      BB535      BB545      BB639      *
* BB804      BB814      BB833      BB914      SMBD2835   SMBD2836   *
* SMBD2837   SMBD2838   SMBD6050   SMBD6100   SMBD7000   SMBD914    *
*                                                                   *
*********************************************************************
*                                                             *
*                                                             *
* This library contains the following Infineon Technologies   *
* RF- and SIEGET(R)25 / 45 -Transistors:                      *
*                                                             *
*  BFG19S     |  BFP183     |  BFR92P     |  BFR194  #        *
*  BFG135A    |  BFP183W    |  BFR92W     |  BFR280           *
*  BFG193     |  BFP193     |  BFR93A     |  BFR280W          *
*  BFG194  #  |  BFP193W    |  BFR93AW    |  BFS17            *
*  BFG196     |  BFP194  #  |  BFR106     |  BF517            *
*  BFG235     |  BFP196     |  BFR180     |                   *
*  BFP81      |  BFP196W    |  BFR180W    |  BFS480           *
*  BFP93A     |  BFP280     |  BFR181     |  BFS481           *
*  BFP136W    |  BFP280W    |  BFR181W    |  BFS482           *
*  BFP180     |  BFP405     |  BFR182     |  BFS483           *
*  BFP180W    |  BFP420     |  BFR182W    |  BFT92  #         *
*  BFP181     |  BFP450     |  BFR183     |  BFT92W #         *
*  BFP181W    |  BFP490     |  BFR183W    |  BFT93  #         *
*  BFP182     |  BFP520     |  BFR193     |                   *
*  BFP182W    |  BFQ81      |  BFR193W    |  #=PNP,others NPN *
*             |  BFR35AP    |                                 *
* Extracted on behalf of SIEMENS Small Signal Semiconductors  *
* by:                                                         *
* - Institut fuer Mobil- und Satellitenfunktechnik (IMST)     *
* - DANALYSE GMBH BERLIN                                      *
* - SIEMENS Semiconductor Group  HL HF SI CDB                 *
* (C) 1996, 1998 SIEMENS AG                                   *
***************************************************************
* Infineon Technologies  Discrete & RF Semiconductors         *
* SPICE Library Version 5.1                  29.03.1999       *
*                                                             *
* This library contains the following Infineon Technologies   *
* AF-Transistors:                                             *
*                                                             *
*  BC327     BC328     BC338     BC338     BC807     BC808    *
*  BC817     BC818     BC846     BC847     BC848     BC849    *
*  BC850     BC856     BC857     BC858     BC859     BC860    *
*  BCP72     BCV61     BCV62     BCW60     BCW61     BCW65    *
*  BCW66     BCW67     BCW68     BCX58     BCX59     BCX70    *
*  BCX71     BCX78     BCX79     BDP947    BDP948    BDP949   *
*  BDP950    BDP951    BDP952    BDP953    BDP954    BDP955   *
*  BDP956    BF517     BFS17     SMBT5086  SMBT5087  SMBT6428 *
*  SMBT6429  SMBTA05   SMBTA06   SMBTA20   SMBTA70   SMBTA55  *
*  SMBTA56                                                    *
*                                                             *
*  Extracted by: DAnalyse GmbH, Schkopauer Ring 5, Berlin     *
*                                                             *
*                                                             *
*  BC368     BC369     BC635     BC636     BC637     BC638    *
*  BC639     BC640     BCP51     BCP52     BCP53     BCP54    *
*  BCP55     BCP56     BCP68     BCP69     BCX41     BCX42    *
*  BCX51     BCX52     BCX53     BCX54     BCX55     BCX56    *
*  BCX68     BCX69     BF420     BF421     BF422     BF423    *
*  BF603     BF622     BF623     BF720     BF721     BF722    *
*  BF723     BF799     BFN16     BFN17     BFN18     BFN19    *
*  BFN21     BFN22     BFN23     BFN24     BFN25     BFN26    *
*  BFN27     BFN36     BFN37     BFN39     BFP22     BFP23    *
*  BFP25     BFP26     BSS63     BSS64     BSS79     BSS80    *
*  BSS81     BSS82     MPSA42    MPSA43    MPSA92    MPSA93   *
*  PZT2222   PZT2222A  PZT2907   PZT2907A  PZT3904   PZT3906  *
*  PZT43     PZTA42    PZTA92    PZTA93    SMBT2222A SMBT2907 *
*  SMBT2907A SMBT3904  SMBT4124  SMBT4126  SMBT4401  SMBT4403 *
*  SMBTA42   SMBTA43   SMBTA92   SMBTA93   SMT3906   SXT2222A *
*  SXT2907A  SXT3904   SXT3906   SXTA42    SXTA43    SXTA92   *
*  SXTA93                                                     *
*                                                             *
*  Extracted by: DAZIX Intergraph                             *
*                                                             *
***************************************************************
* Infineon Technologies  Discrete & RF Semiconductors         *
* SPICE Library Version 1.0                 July 1999         *
*                                                             *
* This library contains the following Infineon Technologies   *
* AF-Transistors (Chipdata):                                  *
*                                                             *
* BCV61A    BCV61B    BCV61C    BCV62A    BCV62B    BCV62C    *
***************************************************************

*********************************************************************
* Infineon Technologies Discrete & RF Semiconductors                *
* DIODE SPICE LIBRARY                                               *
*                  produced by danalyse gmbh   07/1999              *
*                                                                   *
* Rev: 99.1                             DAnalyse GmbH Berlin        *
*                                       Tel. 0049 30 93498230       *
*                                       Fax. 0049 30 93498231       *
*                                       email contact@danalyse.de   *
*                                                                   *
* Filename: sidi.lib                                                *
* Version:  5.0                                                     *
* Date:     July 1999                                               *
*********************************************************************
* *All diodes are designed as Makromodells in Subcircuits to        *
*  increase the model-capability's in SPICE2G6 and to include the   *
*  AC-parameters of the packages:                                   *
*  - For the PIN-diodes is a model applied, published from WALSTON. *
*    Only the BAR63/65 are with a model, consisting of two diodes   *
*    in parallel.                                                   *
*  - All diodes have parallel-resistors for a better reverse        *
*    behaviour. These resistors need a negative and non-linear      *
*    temperature dependency. In this case the model show's problems *
*    at higher temperatures. Therefor is no temperature-coefficient *
*    of the parallel-resistor in the model's and the model's have a *
*    too low temperature-dependence of the reverse current.         *
*  - Several diodes have a non-linear rising reverse current. This  *
*    behaviour is with the parallel-resistor not model-able.        *
* *The temperature-dependence of the reverse breakdown voltage and  *
*  the ohmic series resistance (parameter RS) are in SPICE2G6 not   *
*  adaptable.                                                       *
* *Several SI-varactor-diodes have a C/U-behaviour, which is not    *
*  exact model-able (BB439, BB831, BBY53, BBY57). In many other     *
*  cases is a parameter Vj with a very high value applyed.          *
* *Several Si-schottky-diodes and two PIN-diodes need a very low    *
*  parameter Vj(BAR63/65 and BAT14,15,60A,60B,62,63,68). The value  *
*  is limited to 0.224 for model-use at 85degC. This value can      *
*  produce simulator-warnings at higher temperatures.               *
*********************************************************************
* This library contains the following Infineon Technologies Diodes: *
*                                                                   *
*Si-PIN-diodes:                                                     *
*BA592 BA892                                                        *
*BA595                                                              *
*BA597                                                              *
*BAR63-03w BAR63-02w                                                *
*BAR64-03w BAR64-02w                                                *
*BAR65-03w BAR65-02w                                                *
*                                                                   *
*Si-schottky-diodes:                                                *
*BAS40-04w                                                          *
*BAS70-04w                                                          *
*BAT14-03w                                                          *
*BAT15-03w                                                          *
*BAT165                                                             *
*BAT60A                                                             *
*BAT60B                                                             *
*BAT62-03w BAT62-02w                                                *
*BAT63-03w BAT63-02w                                                *
*BAT68-03w                                                          *
*                                                                   *
*Si-varactor-diodes:                                                *
*BB439                                                              *
*BB535  BB555                                                       *
*BB545  BB565                                                       *
*BB639  BB659                                                       *
*BB639c BB659c                                                      *
*BB644  BB664                                                       *
*BB669  BB689                                                       *
*BB804                                                              *
*BB814                                                              *
*BB831                                                              *
*BB833                                                              *
*BB835                                                              *
*BB837  BB857                                                       *
*BB914                                                              *
*BBY51-03w BBY51-02w                                                *
*BBY52-03w BBY52-02w                                                *
*BBY53-03w BBY53-02w                                                *
*BBY55-03w BBY55-02w                                                *
*BBY56-03w BBY56-02w                                                *
*BBY57-03w BBY57-02w                                                *
*BBY58-03w BBY58-02w                                                *
*                                                                   *
*********************************************************************
* Infineon Technologies                    *
* Digital Transistors                      *
* SPICE Models (2G6 Syntax)                *
* Edition: 1.1                             *
* Date:    Oct. 1999                       *
* Author:  J.P. Schaffer                   *
********************************************
* This file contains the following types:  *
*                                          *
* Name       R1[kOhm] R2[kOhm] Package     *
*                                          *
* BCR103     2.2      2.2      SOT-23      *
* BCR108     2.2      47.0     SOT-23      *
* BCR108T    2.2      47.0     SC-75       *
* BCR108W    2.2      47.0     SOT-323     *
* BCR112     4.7      4.7      SOT-23      *
* BCR112W    4.7      4.7      SOT-323     *
* BCR116     4.7      47.0     SOT-23      *
* BCR116W    4.7      47.0     SOT-323     *
* BCR119     4.7      -        SOT-23      *
* BCR119W    4.7      -        SOT-323     *
* BCR129     10.0     -        SOT-23      *
* BCR129T    10.0     -        SC-75       *
* BCR133     10.0     10.0     SOT-23      *
* BCR133T    10.0     10.0     SC-75       *
* BCR133W    10.0     10.0     SOT-323     *
* BCR135     10.0     47.0     SOT-23      *
* BCR135T    10.0     47.0     SC-75       *
* BCR135W    10.0     47.0     SOT-323     *
* BCR139     22.0     -        SOT-23      *
* BCR141     22.0     22.0     SOT-23      *
* BCR141T    22.0     22.0     SC-75       *
* BCR141W    22.0     22.0     SOT-323     *
* BCR142     22.0     47.0     SOT-23      *
* BCR142T    22.0     47.0     SC-75       *
* BCR142W    22.0     47.0     SOT-323     *
* BCR146     47.0     22.0     SOT-23      *
* BCR146W    47.0     22.0     SOT-323     *
* BCR148     47.0     47.0     SOT-23      *
* BCR148T    47.0     47.0     SC-75       *
* BCR148W    47.0     47.0     SOT-323     *
* BCR153     2.2      2.2      SOT-23      *
* BCR158     2.2      47.0     SOT-23      *
* BCR158T    2.2      47.0     SC-75       *
* BCR158W    2.2      47.0     SOT-323     *
* BCR162     4.7       4.7     SOT-23      *
* BCR162T    4.7       4.7     SC-75       *
* BCR162W    4.7       4.7     SOT-323     *
* BCR166     4.7      47.0     SOT-23      *
* BCR166W    4.7      47.0     SOT-323     *
* BCR169     4.7      -        SOT-23      *
* BCR169W    4.7      -        SOT-323     *
* BCR179     10.0     -        SOT-23      *
* BCR183     10.0     10.0     SOT-23      *
* BCR183T    10.0     10.0     SC-75       *
* BCR183W    10.0     10.0     SOT-323     *
* BCR185     10.0     47.0     SOT-23      *
* BCR185W    10.0     47.0     SOT-323     *
* BCR189     22.0     -        SOT-23      *
* BCR191     22.0     22.0     SOT-23      *
* BCR191W    22.0     22.0     SOT-323     *
* BCR192     22.0     47.0     SOT-23      *
* BCR192T    22.0     47.0     SC-75       *
* BCR192W    22.0     47.0     SOT-323     *
* BCR196     47.0     22.0     SOT-23      *
* BCR196W    47.0     22.0     SOT-323     *
* BCR198     47.0     47.0     SOT-23      *
* BCR198T    47.0     47.0     SC-75       *
* BCR198W    47.0     47.0     SOT-323     *
* BCR503     2.2      2.2      SOT-23      *
* BCR505     2.2      10.0     SOT-23      *
* BCR512     4.7      4.7      SOT-23      *
* BCR519     4.7      -        SOT-23      *
* BCR521     1.0      1.0      SOT-23      *
* BCR523     1.0      10.0     SOT-23      *
* BCR533     10.0     10.0     SOT-23      *
* BCR553     2.2      2.2      SOT-23      *
* BCR555     2.2      10.0     SOT-23      *
* BCR562     4.7      4.7      SOT-23      *
* BCR569     4.7      -        SOT-23      *
* BCR571     1.0      1.0      SOT-23      *
* BCR573     1.0      10.0     SOT-23      *
* BCR583     10.0     10.0     SOT-23      *
**************************************************************
* Infineon Technologies                                      *
* Digital Transistor Arrays (including Package Parasitics)   *
* SPICE Models (2G6 Syntax)                                  *
* Edition: 1.0                                               *
* Date:    Oct. 1999                                         *
* Author:  J.P. Schaffer                                     *
**************************************************************
* This file contains the following types:                    *
*                                                            *
*            R1[kOhm] R2[kOhm] R1[kOhm] R2[kOhm]             *
* Name       T1       T1       T2       T2       Package     *
*                                                            *
* BCR08PN    2.2      47       2.2      47       SOT-363     *
* BCR10PN    10       10       10       10       SOT-363     *
* BCR19PN    4.7      -        4.7      -        SOT-363     *
* BCR22PN    22       22       22       22       SOT-363     *
* BCR35PN    10       47       10       47       SOT-363     *
* BCR39PN    2.2      47       2.2      47       SOT-363     *
* BCR48PN    2.2      47       2.2      47       SOT-363     *
* BCR108S    2.2      47.0     2.2      47.0     SOT-363     *
* BCR108U    2.2      47.0     2.2      47.0     SC-74       *
* BCR108UPN  2.2      47.0     2.2      47.0     SC-74       *
* BCR112S    4.7      4.7      4.7      4.7      SOT-363     *
* BCR112U    4.7      4.7      4.7      4.7      SC-74       *
* BCR112UPN  4.7      4.7      4.7      4.7      SC-74       *
* BCR116S    4.7      47.0     4.7      47.0     SOT-363     *
* BCR116U    4.7      47.0     4.7      47.0     SC-74       *
* BCR116UPN  4.7      47.0     4.7      47.0     SC-74       *
* BCR119S    4.7      -        4.7      -        SOT-363     *
* BCR119U    4.7      -        4.7      -        SC-74       *
* BCR119UPN  4.7      -        4.7      -        SC-74       *
* BCR129S    10.0     -        10.0     -        SOT-363     *
* BCR133S    10.0     10.0     10.0     10.0     SOT-363     *
* BCR133U    10.0     10.0     10.0     10.0     SC-74       *
* BCR133UPN  10.0     10.0     10.0     10.0     SC-74       *
* BCR135S    10.0     47.0     10.0     47.0     SOT-363     *
* BCR135U    10.0     47.0     10.0     47.0     SC-74       *
* BCR135UPN  10.0     47.0     10.0     47.0     SC-74       *
* BCR139U    22.0     -        22.0     -        SC-74       *
* BCR141S    22.0     22.0     22.0     22.0     SOT-363     *
* BCR141U    22.0     22.0     22.0     22.0     SC-74       *
* BCR141UPN  22.0     22.0     22.0     22.0     SC-74       *
* BCR142U    22.0     47.0     22.0     47.0     SC-74       *
* BCR142UPN  22.0     47.0     22.0     47.0     SC-74       *
* BCR146U    47.0     22.0     47.0     22.0     SC-74       *
* BCR146UPN  47.0     22.0     47.0     22.0     SC-74       *
* BCR148S    47.0     47.0     47.0     47.0     SOT-363     *
* BCR148U    47.0     47.0     47.0     47.0     SC-74       *
* BCR148UPN  47.0     47.0     47.0     47.0     SC-74       *
* BCR158S    2.2      47.0     2.2      47.0     SOT-363     *
* BCR158U    2.2      47.0     2.2      47.0     SC-74       *
* BCR162U    4.7      4.7      4.7      4.7      SC-74       *
* BCR166U    4.7      47.0     4.7      47.0     SC-74       *
* BCR169S    4.7      -        4.7      -        SOT-363     *
* BCR169U    4.7      -        4.7      -        SC-74       *
* BCR179S    10.0     -        10.0     -        SOT-363     *
* BCR183S    10.0     10.0     10.0     10.0     SOT-363     *
* BCR183U    10.0     10.0     10.0     10.0     SC-74       *
* BCR185S    10.0     47.0     10.0     47.0     SOT-363     *
* BCR185U    10.0     47.0     10.0     47.0     SC-74       *
* BCR189U    22.0     -        22.0     -        SC-74       *
* BCR191S    22.0     22.0     22.0     22.0     SOT-363     *
* BCR191U    22.0     22.0     22.0     22.0     SC-74       *
* BCR192U    22.0     47.0     22.0     47.0     SC-74       *
* BCR198S    47.0     47.0     47.0     47.0     SOT-363     *
* BCR198U    47.0     47.0     47.0     47.0     SC-74       *
**************************************************************
* SIEMENS SIPMOS Small Signal Components                        *
* SPICE Library Version 1.0                                     *
*                                                               *
*   BS170       BSP319       BSS138                             *
*   BSP125      BSP88        BSS145      BSS92                  *
*   BSP149      BSP89        BSS229      BSS98                  *
*   BSP171      BSS100       BSS295                             *
*   BSP295      BSS101       BSS296                             *
*   BSP299      BSS110       BSS297                             *
*   BSP315      BSS119       BSS84                              *
*   BSP316      BSS125       BSS87                              *
*   BSP317      BSS129       BSS88                              *
*   BSP318      BSS135       BSS89                              *
*                                                               *
*---------------------------------------------------------------*
*****************************************************************
* SIEMENS SIPMOS Power Transistors                              *
* SPICE Library Version 1.0                                     *
*  BUZ342KL    BUZ51       BUZ71LGE    BUZ74A                   *
*              BUZ91A      BUZ72       BUZ45B                   *
*  BUZ12       BUZ92       BUZ311      BUZ72GE                  *
*  BUZ323      BUZ344      BUZ50B      BUZ73AGE                 *
*  BUZ21       BUZ100      BUZ73       BUZ173                   *
*  BUZ10       BUZ61A      BUZ345      BUZ11GE                  *
*  BUZ40B      BUZ76                                            *
*  BUZ81       BUZ356      BUZ220      BUZ101                   *
*  BUZ20       BUZ22       BUZ78       BUZ102                   *
*              BUZ30A      BUZ10M      BUZ342                   *
*  BUZ358      BUZ325      BUZ305      BUZ104                   *
*  BUZ80A      BUZ60       BUZ272                               *
*  BUZ84A      BUZ326      BUZ77A                               *
*  BUZ171      BUZ11       BUZ341                               *
*  BUZ41A      BUZ346      BUZ331                               *
*  BUZ70       BUZ53A      BUZ350                               *
*  BUZ71L      BUZ271      BUZ310                               *
*  BUZ10L      BUZ334      BUZ31                                *
*  BUZ64       BUZ12AL     BUZ90                                *
*  BUZ71       BUZ73L      BUZ338                               *
*                                                               *
*                                                               *
*---------------------------------------------------------------*
*****************************************************************
* INFINEON Power Transistors                                    *
* SPICE Library for CoolMOS 800V Transistors                    *
* Version 301100                                                *
*            SPNA2N80C2                                         *
*            SPP04N80C2    =  SPB04N80C2                        * 
*            SPP06N80C2    =  SPB06N80C2                        * 
*                          =  SPD06N80C2                        *
*                          =  SPU06N80C2                        *
*            SPP08N80C2    =  SPB08N80C2                        *
*            SPP11N80C2    =  SPB11N80C2                        * 
*            SPP17N80C2    =  SPB17N80C2                        *
*                          =  SPW17N80C2                        *  
*            SIPC01N80C2                                        *
*            SIPC07N80C2                                        *
*            SIPC09N80C2                                        *
*            SIPC13N80C2                                        *
*            SIPC16N80C2                                        *
*            SIPC26N80C2                                        *
*****************************************************************
* INFINEON Power Transistors                                    *
* SPICE Library for CoolMOS 600V Transistors                    *
* Version 250101                                                *
*                                                               *
*            SPU01N60S5    =  SPD01N60S5                        *
*                          =  SPN01N60S5                        *
*            SPP02N60S5    =  SPB02N60S5                        *
*                          =  SPU02N60S5                        *
*                          =  SPD02N60S5                        *
*                          =  SPN02N60S5                        *
*            SPP03N60S5    =  SPB03N60S5                        *
*                          =  SPU03N60S5                        *
*                          =  SPD03N60S5                        *
*                          =  SPN03N60S5                        *
*                          =  SPA03N60S5                        *
*            SPP04N60S5    =  SPB04N60S5                        *
*                          =  SPU04N60S5                        *
*                          =  SPD04N60S5                        *
*                          =  SPN04N60S5                        *
*            SPP07N60S5    =  SPB07N60S5                        *
*                          =  SPI07N60S5                        *
*                          =  SPU07N60S5                        *
*                          =  SPD07N60S5                        *
*            SPP11P60S5    =  SPB11N60S5                        * 
*                          =  SPI11N60S5                        *
*                          =  SPW11N60S5                        *
*            SPP20N60S5    =  SPB20N60S5                        *
*                          =  SPW20N60S5                        *  
*            SPW47N60S5                                         *
*            SPP04N60C2    =  SPB04N60C2                        *
*                          =  SPU04N60C2                        *
*                          =  SPD04N60C2                        *
*                          =  SPN04N60C2                        *
*                          =  SPA04N60C2                        *
*            SPP07N60C2    =  SPB07N60C2                        *
*                          =  SPU07N60C2                        *
*                          =  SPD07N60C2                        * 
*                          =  SPA07N60C2                        *
*            SPP11P60C2    =  SPB11N60C2                        *
*                          =  SPW11N60C2                        *
*                          =  SPA11N60C2                        *
*            SPP20N60C2    =  SPB20N60C2                        *
*                          =  SPW20N60C2                        *
*                          =  SPA20N60C2                        * 
*            SPW47N60C2                                         *
*            SPP02N60M2    =  SPB02N60M2                        *
*            SPP03N60M2    =  SPB03N60M2                        *
*            SPP04N60M2    =  SPB04N60M2                        *
*            SPP07N60M2    =  SPB07N60M2                        *
*            SPP11N60M2    =  SPB11N60M2                        *
*            SPP20N60M2    =  SPB20N60M2                        *
*            SPW47N60M2                                         *
*            SIPC02N60S5                                        *
*            SIPC03N60S5                                        *
*            SIPC05N60S5                                        *
*            SIPC06N60S5                                        *
*            SIPC10N60S5                                        *
*            SIPC14N60S5                                        *
*            SIPC26N60S5                                        *
*            SIPC61N60S5                                        *
*            SIPC06N60C2                                        *
*            SIPC10N60C2                                        *
*            SIPC14N60C2                                        *
*            SIPC26N60C2                                        *
*            SIPC69N60C2                                        * 
*            SIPC03N60M2                                        *
*            SIPC05N60M2                                        *
*            SIPC06N60M2                                        *
*            SIPC10N60M2                                        *
*            SIPC14N60M2                                        *
*            SIPC26N60M2                                        *
*            SIPC69N60M2                                        * 
*****************************************************************
* INFINEON Power Transistors                                    *
* Level-1/2/3 SPICE Library for Dual Channel Transistors        *
* Version 310800                                                *
*          BSO315C                                              *
*          BSO615C                                              *
*          BSO612CV                                             *
*                                                               *
* Remarks:                                                      *
* Level1 : The models represent the electrical behaviour of the *
* (xx_L1)  devices, assuming a constant temperature which is to *
*          be set globally before the simulation.               *
* Level2 : This model is similar to the Level1 model. However,  *
* (xx_L2)  the temperature at the junctions of both transistors *
*          can be set independently and during the simulation.  *
*          Open Tj-nodes lead to a default temperature of 27 °C.*
* Level3 : Level3 models use a thermal network to compute the   *
* (xx_L3)  junction temperatures of both devices. Thermal       *
*          coupling between the transistors is also included.   *
*          The thermal model represents the device without      *
*          interaction with its environment. Ths means that the *
*          internal thermal network has to be connected to an   *
*          exterior network that models the heat flow from the  *
*          soldering points to the heat sink (e.g. the air).    *
*          In some cases it might be useful to add a resistor   *
*          between the nodes for the soldering points to        *
*          improve the thermal coupling between the transistors.*
* Nomenclature for thermal pins in SO-8 packages:               *
*          Transistor1: pins 1/2/7+8                            *
*          Transistor2: pins 3/4/5+6                            *
*          Tj1:    junction of transistor1                      *
*                  (should not be connected for Level3 models)  *
*          Tj2:    junction of transistor2                      *
*                  (should not be connected for Level3 models)  *
*          Tsolder_joint1:  7+8 (heat flow through both pins)   *
*          Tsolder_joint2:  5+6 (heat flow through both pins)   *
*          Tamb:   ambient (heat sink)                          *
*          In the thermal network temperatures are equivalent   *
*          to voltages, heat flux is equivalent to current.     *
*                                                               *
*****************************************************************
* INFINEON TECHNOLOGIES AG      		DUO_P_1200.LIB	
*								
* Model library for DUOPACKs  (V1.1)       	2/01   		
* devices/chip-models including lead inductances related to	
* packages:							
* SKP02N120							
* SKW07N120 							
* SKW15N120							
* SKW25N120 							
*								
*****************************************************************
* INFINEON TECHNOLOGIES AG      		DUO_P_600.LIB	
*								
* Model library for 600V DUOPACKs  (V1.0)       	2/01 
* devices/chip-models including lead inductances related to	
* packages:							
* devices/chip-models including lead inductances related to 	
* packages:							
* SKP02N60 = SKB02N60						
* SKP04N60 = SKB04N60						
* SKP06N60 = SKB06N60						
* SKP10N60 = SKB10N60 = SKW10N60				
* SKP15N60 = SKB15N60						
* SKW15N60							
* SKW20N60							
* SKW30N60							
*								
*****************************************************************
* INFINEON Power Transistors                                    *
* Level 1/2/3 SPICE Library for S-FET2 (OPTIMOS) Transistors    *
* Version 1.1  /  May 2000                                      *
*                   SIPC30S2N03                                 *
*                   SIPC30S2N03L                                *               
*                   SIPC30S2N04                                 *              
*****************************************************************
* INFINEON Power Transistors                                    *
* SPICE Library for OPTIMOS Transistors                         *
* Version 290800                                                *
*  normal level    / logic level                                *
*  SPP80N03S2-03   / SPP80N03S2L-03                             *
*                  / SPD30N03S2L-08                             *
*                  / IPB05N03L                                  *
*                  / IPB10N03L                                  *
*                  / IPD12N03L                                  *
*                  / IPB15N03L                                  *
*                  / BSO301SN                                   *
*                  / BSO4420                                    *
*  SPP80N04S2-04   / SPP80N04S2L-04                             *
*  SPP80N04S2-H4   /                                            *
*  SPP80N06S2-05   / SPP80N06S2L-05                             *
*  SPP80N06S2-08   / SPP80N06S2L-07                             *
*  SPD30N06S2-15   / SPD30N06S2L-13                             *
*                  / SPD30N06S2L-23                             *
*                  / BSP603S2L                                  *
*                  / BSO604NS2                                  *
*  SPP80N08S2-07   / SPP80N08S2L-07                             *
*  SPD30N08S2-22   / SPD30N08S2L-21                             *
*****************************************************************
* Level 2 models for the following	 
* INFINEON 1200 V second generation-IGBT's			
* included: devices/chip-models and lead inductances		
* 25A/1200V	-> BUP314					
* 15A/1200V	-> BUP313					
* 8A/1200V	-> BUP311D/BUP212				
* 								
* the model is based on the publication:			
* 								
* R.Kraus, P.Türkes, J.Sigg					
* Physics-based Models Of Power Semiconductor Devices 		
* For The Circuit Simulator Spice				
* 								
* Power Electronics Specialists Conference, 1998.		 
* PESC 98 Record. 29th Annual IEEE				
*								
* 								
* version 1.5 of march 2001					
* typical model call in PSPICE:					 
* XBUP anode gate cathode BUP212_L2 PARAMS: TJ ={my junction temperature} 
****************************************************************
* INFINEON HITFET Smart Power Switches                          *
* Level 3 SPICE Library for HITFET Version 1.0          11/98   *
*  BSP78                                                        *
*  BTS134                                                       * 
*****************************************************************
* INFINEON Power Transistors                                    *
* PSPICE Library for PFET                                       *
* Version 010900                                                *
*       SPP08P06P	/	SPD08P06P			                *
*       SPU08P06P	/	SPB08P06P                               *
*       SPP18P06P  /	SPD18P06P                               *
*       SPU18P06P  /	SPB18P06P                               *
*       SPU09P06PL                                              *
*       BSP613P                                                 *
*       BSO613SPV                                               *
*       BSS83P                                                  *
*       BSS84P 						                *
*       BSS84PW		                                        *
*       BSP170P                                                 *
*       BSP171P							          *
*       BSP315P                                                 *
*       SPD30P06P                                               *
*       SPP80P06P                                               *
*****************************************************************
* INFINEON Smart Power Switches                                 *
* PSPICE Library for PROFETs Version 3.03               2/99    *
*  BTS555                                                       *
*  BTS550P                                                      * 
*  BTS650P                                                      *
*****************************************************************
* INFINEON Power Transistors                                    *
* Level-1/2/3 SPICE Library for SFET Transistors                *
* Version 020900                                                *
*          BSO302SN                                             *
*          BSO304SN                                             *
*          BSO305N                                              *
*          BSO307N                                              *
*          BSO615N                                              *
*          BSO615NV                                             *
*          BSP308                                               *
*          BSP318S                                              *
*          BSP320S                                              *
*****************************************************************
* INFINEON SIPMOS Power Transistors                             *
* SPICE Library for S-FET Version 1.6                  10/98    *
*  BUZ100s / BUZ100sl                                           *
*  BUZ101s / BUZ101sl                                           *
*  BUZ102s / BUZ102sl                                           *
*  BUZ103s / BUZ103sl  =  SPD(U)31N05 / SPD(U)28N05L            *
*  BUZ104s / BUZ104sl  =  SPD(U)14N05 / SPD(U)13N05L            *
*  BUZ110s / BUZ110sl                                           *
*  BUZ111s / BUZ111sl                                           *
*  BSP320s / BSP318s                                            *  
*****************************************************************
* INFINEON Power Semiconductors      		SGxxN60.LIB	    *
* PSPICE Model library for S-IGBTs  (V1.1)       	02/99     *
*								                *
*  SGP02N60 / SGB02N60  /  SGD02N60  /  SGU02N60                *
*  SGP04N60 / SGB04N60  /  SGD04N60  /  SGU04N60                *
*  SGP06N60 / SGB06N60  /  SGD06N60  /  SGU06N60                *
*  SGP10N60 / SGB10N60  /  SGW10N60  		                *
*  SGP15N60 / SGB15N60  /  SGW15N60  		                *
*  SGP20N60 / SGB20N60  /  SGW20N60  		                *
*  SGP30N60 / SGB30N60  /  SGW30N60  		                *
*  			                                              * 
*****************************************************************
*$
.SUBCKT BA582/INF 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20 BA582
.ENDS
.MODEL BA582 D(IS=185F RS=.30 N=1.305 BV=70 IBV=.1N
+ CJO=1.17P VJ=.12 M=.096 TT=125N)
* SIEMENS 40 Volt 125ns  Si-PIN-Switch  17-03-1996 Moschovis
*****************************************************************
*$
.SUBCKT BA592/INF 100 200 
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 101.1054m
R2 3 4 1.7826k
R4 1 2 700e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 36.0461m
*Constant reverse-bias capacitance
C1 3 2 670.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=3.8637f N=1.0409 TT=140.0n
+ XTI=3.0 FC=0.5 EG=1.16 BV=69.5 IBV=1.0e-9)
.MODEL DIO2 D(IS=0.63606f N=1.09748)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BA595/INF 100 200 
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 124.8206m
R2 3 4 35.6857k
R4 1 2 200e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 73.7937m
*Constant reverse-bias capacitance
C1 3 2 34.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=33.7179p N=1.2196 TT=2.1u
+ XTI=3.0 FC=0.5 EG=1.16 BV=69.5 IBV=1.0e-9)
.MODEL DIO2 D(IS=1.7137p N=1.37029)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BA597/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 181.0956m
R2 3 4 10.0666k
R4 1 2 400e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 232.2403m
*Constant reverse-bias capacitance
C1 3 2 100.2f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=16.1921p N=1.0208 TT=2.5u
+ XTI=2.5 FC=0.5 EG=1.16 BV=59.0 IBV=0.2e-6)
.MODEL DIO2 D(IS=0.40557p N=1.17228)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BA892/INF 100 200 
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*RF Resistances: R1,R2,and G1
R1 1 3 101.1054m
R2 3 4 1.7826k
R4 1 2 700e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 36.0461m
*Constant reverse-bias capacitance
C1 3 2 670.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=3.8637f N=1.0409 TT=140.0n
+ XTI=3.0 FC=0.5 EG=1.16 BV=69.5 IBV=1.0e-9)
.MODEL DIO2 D(IS=0.63606f N=1.09748)
.MODEL DIO3 D(IS=1E-20)
.ENDS
*$
*
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAL74 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAL74/INF 1 2
D    3 4 BAL74_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAL74_1 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAL99 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAL99/INF 1 2
D    3 4 BAL99_1
L1   1 3 0.350N
L2   4 2 0.350N .ENDS
.MODEL BAL99_1 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
.SUBCKT BAR64/INF 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAR64
.ENDS
.MODEL BAR64 D(IS=880p RS=.9 N=1.305 BV=70 IBV=.1N
+ CJO=0.33P VJ=.8 M=.2 TT=1.25u)
* SIEMENS 40 Volt 125ns  Si-PIN-Switch  17-03-1996 Moschovis
*****************************************************************
*$
.SUBCKT BAR63-03w/INF 100 200 
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 100e9
.MODEL D1 D(IS=2.406e-16 N=1.0886 RS=610.2m XTI=4.0 EG=1.16
+ CJO=224.89f M=0.134846 VJ=0.224 FC=0.5 TT=95.0n)
.MODEL D2 D(IS=323.2287f N=1.5188 RS=100m XTI=4.0 EG=0.68
+ BV=84.0 IBV=10.0e-9 TT=170.0n)
.ENDS 
*$
*
.SUBCKT BAR63-02w/INF 100 200 
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 100e9
.MODEL D1 D(IS=2.406e-16 N=1.0886 RS=610.2m XTI=4.0 EG=1.16
+ CJO=224.89f M=0.134846 VJ=0.224 FC=0.5 TT=95.0n)
.MODEL D2 D(IS=323.2287f N=1.5188 RS=100m XTI=4.0 EG=0.68
+ BV=84.0 IBV=10.0e-9 TT=170.0n)
.ENDS 
*$
*
.SUBCKT BAR64-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 100.0m
R2 3 4 38.7897k
R4 1 2 200e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 198.3118m
*Constant reverse-bias capacitance
C1 3 2 138.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=3.7137p N=1.0371 TT=1.6u
+ XTI=2.5 FC=0.5 EG=1.16 BV=200.0 IBV=2.0e-6)
.MODEL DIO2 D(IS=0.10434p N=1.17786)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BAR64-02w/INF 100 200 
*Package SCD80:
 LAIL1  1   10    0.45nH 
 CACC2 10    2    90fF   
 LAOL2 10  100    0.15nH 
 LCOL3 2   200    0.1nH  
*RF Resistances: R1,R2,and G1
R1 1 3 10.0m
R2 3 4 24.7641k
R4 1 2 8e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 116.9433m
*Constant reverse-bias capacitance
C1 3 2 105.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=64.7476p N=1.3625 TT=1.6u
+ XTI=3.0 FC=0.5 EG=1.16 BV=200.0 IBV=30.0e-9)
.MODEL DIO2 D(IS=3.04922p N=1.539959)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BAR65-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 600e9
.MODEL D1 D(IS=4.490e-16 N=1.0856 RS=180.0m XTI=2.5 EG=1.16
+ CJO=451.35f M=0.103494 VJ=0.224 FC=0.5 TT=45.0n)
.MODEL D2 D(IS=57.3327f N=1.5375 RS=100m XTI=3.0 EG=1.05
+ BV=74.0 IBV=0.2e-9 TT=2.4u)
.ENDS 
*$
*
.SUBCKT BAR65-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 600e9
.MODEL D1 D(IS=4.490e-16 N=1.0856 RS=180.0m XTI=2.5 EG=1.16
+ CJO=451.35f M=0.103494 VJ=0.224 FC=0.5 TT=45.0n)
.MODEL D2 D(IS=57.3327f N=1.5375 RS=100m XTI=3.0 EG=1.05
+ BV=74.0 IBV=0.2e-9 TT=2.4u)
.ENDS 
*$
*
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAR74 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAR74/INF 1 2
D    3 4 BAR74_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAR74_1 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAR99 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAR99/INF 1 2
D    3 4 BAR99_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAR99_1 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
.MODEL BAS116/INF D(
+       AF= 1.00E+00    BV= 7.50E+01   CJO= 1.83E-12    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 1.48E-13    KF= 0.00E+00
+        M= 2.62E-01     N= 1.33E+00    RS= 8.48E-01    TT= 8.66E-09
+       VJ= 3.44E-01   XTI= 3.00E+00) 
*****************************************************************
*$
.SUBCKT BAS125/INF 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAS125
.ENDS
.MODEL BAS125 D(IS=1.45N RS=12 N=1.03 XTI=1.6 EG=.68
+ CJO=.95P M=.2 VJ=.24 FC=.5 BV=25 IBV=100n TT=25P)
* ISR=15n NR=4k IKF=10m
* for 27C reverse current simulation use GMIN=1e-9
* 17.12.1993 SIEMENS PD1 KURTH
*****************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAS16 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  * *****************************************************************
.SUBCKT BAS16/INF 1 2
D    3 4 BAS16_1
L1   1 3 0.350N
L2   4 2 0.350
.ENDS
.MODEL BAS16_1 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
.MODEL BAS21/INF D(
+       AF= 1.00E+00    BV= 2.50E+02   CJO= 6.64E-13    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 6.42E-09    KF= 0.00E+00
+        M= 1.00E-01     N= 1.98E+00    RS= 9.12E-01    TT= 7.21E-08
+       VJ= 2.00E+00   XTI= 3.00E+00)
*****************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAS28 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  * 
*****************************************************************
.SUBCKT BAS28/INF 1 2
D    3 4 BAS28_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAS28_1 D 
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000 
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$.SUBCKT BAS40/INF 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAS40_1
.ENDS
.MODEL BAS40_1 D(IS=8N RS=7.8 N=1.04 XTI=1.8 EG=.68 
+ CJO=3P M=.42 VJ=.4 FC=.5 BV=40 IBV=100n TT=25P)
* ISR=5n NR=1k IKF=10m
* for 27C reverse current simulation use: GMIN=1e-9
* 17.12.1993 SIEMENS PD1 KURTH
*****************************************************************
*$
.SUBCKT BAS40-04w/INF 100 200 300
*anode1:         100
*cathode2:       200
*common cathode1 and anode2: 300
*Package SOT323_2:
LIND1    1   10    0.50nH
LIND2    2   20    0.50nH
CAP1    10   20    61fF  
CAP2     3   10    140fF 
CAP3     3   20    140fF 
LIND3   10  100    0.45nH
LIND4   20  200    0.45nH
LIND5    3  300    0.41nH
*internal diodes:
D1 1 3 D1
D2 3 2 D1
R1 1 3 100e9
R2 3 2 100e9
.MODEL D1 D(IS=5.1307n N=1.0692 RS=6.6597 XTI=2.5 EG=0.69 
+CJO=2.74237p M=0.47 VJ=0.465 FC=0.5 TT=25.0p BV=59.0 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAS70-04w/INF 100 200 300
*anode1:         100
*cathode2:       200
*common cathode1 and anode2: 300
*Package SOT323_2:
LIND1    1   10    0.50nH
LIND2    2   20    0.50nH
CAP1    10   20    61fF  
CAP2     3   10    140fF 
CAP3     3   20    140fF 
LIND3   10  100    0.45nH
LIND4   20  200    0.45nH
LIND5    3  300    0.41nH
*internal diodes:
D1 1 3 D1
D2 3 2 D1
R1 1 3 100e9
R2 3 2 100e9
.MODEL D1 D(IS=1.8321n N=1.0681 RS=30.067 XTI=2.5 EG=0.69 
+CJO=1.388p M=0.327 VJ=0.342 FC=0.5 TT=25.0p BV=85.0 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BAS70/INF 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAS70_1
.ENDS
.MODEL BAS70_1 D(IS=3N N=1.06 RS=29 XTI=1.8 EG=.68 
+ CJO=1.55P M=.29 VJ=.36 FC=.5 BV=70 IBV=100n TT=25P)
* ISR=2.5n NR=1k IKF=5m
* for 27C reverse current simulation use: GMIN=.5e-9
* 17.12.1993 SIEMENS PD1 KURTH
*****************************************************************
*$
.SUBCKT BAT14-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 20e9
.MODEL D1 D(IS=45.2665p N=1.082 RS=4.9 XTI=2.5 EG=0.73
+ CJO=161.71f M=0.1397 VJ=0.224 FC=0.5 TT=3.0p BV=7.2 IBV=1.0u)
.ENDS 
*$
*
.SUBCKT BAT14-098/INF 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20 BAT14-098 
.ENDS
.MODEL BAT14-098 D(Is=77p N=1.027 Rs=4 Xti=1.8 Eg=.68 Cjo=270f M=.078
+ Vj=.25 Fc=.5 Bv=4 Ibv=5u Tt=25p)
* Case SOD123, single diode 
* Add R=3.3MEG parallel for better IR and R0 simulation
* 29.11.1994 SIEMENS HL EH PD1 Kurth
*****************************************************************
*$
.SUBCKT BAT15-03W/INF 100 200
L1    1   10   0.55nH
C1   10   20   110fF
L2   10  100   0.67nH
L3   20  200   0.55nH
D1    1    20 BAT15-03W 
.ENDS
.MODEL BAT15-03W D(Is=130n N=1.08 Rs=4.5 Xti=1.8 Eg=.68 Cjo=260f M=.047
+ Vj=.11 Fc=.5 Bv=4 Ibv=10u Tt=25p)
* Case SOD323, single diode
* Add R=3.3MEG parallel for better IR and R0 simulation
* 10.11.1994 SIEMENS HL EH PD1 Kurth
*****************************************************************
*$
.SUBCKT BAT15-098/INF 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20 BAT15-098 
.ENDS
.MODEL BAT15-098 D(Is=130n N=1.08 Rs=4.5 Xti=1.8 Eg=.68 Cjo=285f M=.043
+ Vj=.11 Fc=.5 Bv=4 Ibv=10u Tt=25p)
* Case SOD123, single diode 
* Add R=3.3MEG parallel for better IR and R0 simulation
* 10.11.1994 SIEMENS HL EH PD1 Kurth
*****************************************************************
*$
.SUBCKT BAT165/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 40e6
.MODEL D1 D(IS=50.19n N=1.0283 RS=260.0m XTI=2.5 EG=0.71
+ CJO=38.27p M=0.494 VJ=0.471 FC=0.5 TT=10.0p BV=42.95 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAT18/INF 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAT18_1
.ENDS
* BAT18 Diode Model
.MODEL BAT18_1 D(IS=185F RS=.30 N=1.305 BV=70 IBV=.1N
+ CJO=1.17P VJ=.12 M=.096 TT=125N)
* SIEMENS 40 Volt 125ns  Si-PIN-Switch  17-03-1996 Moschovis
*****************************************************************
*$
.SUBCKT BAT60A/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 3e5
*R1 1 2 1.5e6
.MODEL D1 D(IS=109.371u N=1.0853 RS=37.64m XTI=1.5 EG=0.54
+ CJO=52.1p M=0.241 VJ=0.224 FC=0.5 TT=10.0p BV=13.0 IBV=1.0m)
.ENDS 
*$
*
.SUBCKT BAT60B/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 3e7
.MODEL D1 D(IS=780.0n N=1.043 RS=91.3m XTI=1.1 EG=0.68
+ CJO=34.0p M=0.122 VJ=0.224 FC=0.5 TT=10.0p BV=19.1 IBV=1.0m)
.ENDS 
*$
*
.MODEL BAT62/INF   D(IS=120N RS=200 N=1.04 XTI=1.8 EG=.68
+ CJO=.35P M=.14 VJ=.4 FC=.5 BV=40 IBV=5U TT=25P)
* for 27C reverse current simulation use: GMIN=3e-8
* 20.12.1993 SIEMENS PD1 KURTH
*$
.SUBCKT BAT62-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Dioden:
D1 1 2 D1
R1 1 2 40e6
.MODEL D1 D(IS=250.0n N=1.04 RS=190.0 XTI=1.5 EG=0.53
+ CJO=284.2f M=0.17 VJ=0.224 FC=0.5 TT=25.0p BV=59.3 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAT62-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Dioden:
D1 1 2 D1
R1 1 2 40e6
.MODEL D1 D(IS=250.0n N=1.04 RS=190.0 XTI=1.5 EG=0.53
+ CJO=284.2f M=0.17 VJ=0.224 FC=0.5 TT=25.0p BV=59.3 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAT63-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 20e6
.MODEL D1 D(IS=761.0n N=1.06 RS=2.633 XTI=1.5 EG=0.59
+ CJO=628.0f M=0.185 VJ=0.224 FC=0.5 TT=25.0p BV=14.4 IBV=100.0u)
.ENDS 
*$
*
.SUBCKT BAT63-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Diode:
D1 1 2 D1
R1 1 2 20e6
.MODEL D1 D(IS=761.0n N=1.06 RS=2.633 XTI=1.5 EG=0.59
+ CJO=628.0f M=0.185 VJ=0.224 FC=0.5 TT=25.0p BV=14.4 IBV=100.0u)
.ENDS 
*$
*
.MODEL BAT64/INF D(
+       AF= 1.00E+00    BV= 3.00E+01   CJO= 6.59E-12    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 6.97E-09    KF= 0.00E+00
+        M= 3.96E-01     N= 1.01E+00    RS= 1.84E+00    TT= 1.00E-10
+       VJ= 3.42E-01   XTI= 3.00E+00)
*$
.SUBCKT BAT65/INF 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20  BAT65
.ENDS
* BAT65 Diode Model
.MODEL BAT65 D(Is=80n N=1.02 Rs=0.2152 Xti=5 Eg=1.11 Cjo=31.4p M=0.6196
+ Vj=.8 Fc=.5 Bv=40 Ibv=100u TT=60p)
* Case SOT223, single diode
* 26.09.1996 SIEMENS HL EH PD 1 Moschovis
*****************************************************************
*$
* BAT66 Diode Model
.MODEL BAT66/INF D(Is=243.5n N=1.001 Rs=0.1401 Xti=3 Eg=1.11 Cjo=170.5p M=0.548
+ Vj=.4803 Fc=.5 Bv=30 Ibv=100u TT=30p)
* Case SOT223, single diode
* 26.09.1996 SIEMENS HL EH PD 1 Moschovis
*****************************************************************
*$
.SUBCKT BAT68-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 400e6 .MODEL D1 D(IS=8.976n N=1.07 RS=1.49 XTI=1.5 EG=0.68 
+CJO=786.1f M=0.1096 VJ=0.224 FC=0.5 TT=3.0p BV=15.15 IBV=10.0u)
.ENDS 
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAV70 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAV70/INF 1 2
D    3 4 BAV70
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAV70 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAV74 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAV74/INF 1 2
D    3 4 BAV74
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAV74 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAV99 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAV99/INF 1 2
D    3 4 BAV99
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAV99 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAW101  (SOT-23)                  *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAW101/INF 1 2
D    3 4 BAW101_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAW101_1 D
+ IS  =  0.2583E-12
+ N   =  1.1790
+ RS  =  3.0000
+ EG  =  1.1073
+ XTI =  4.4349
+ CJO =  6.2000E-12
+ VJ  =  0.7000
+ M   =  0.5000
*****************************************************************
*$
*
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAW100 (SOT-23)                   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAW100/INF 1 2
D    3 4 BAW100
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAW100 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
.SUBCKT BB439/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 200e9
.MODEL D1 D(IS=2.9f N=1.0462 RS=113.0m XTI=4.0 EG=1.16
+ CJO=56.0p M=1.267 VJ=3.826 FC=0.5 TT=120.0n BV=40.6 IBV=0.3n)
.ENDS 
*$
*
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAW56 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAW56/INF 1 2
D    3 4 BAW56
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL BAW56 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
.SUBCKT BAT68/INF 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAT68
.ENDS
* BAT68 Diode Model
.MODEL BAT68 D(IS=8N RS=2 N=1.05 XTI=1.8 EG=.68
+ CJO=.77P M=.075 VJ=.1 FC=.5 BV=8 IBV=1U TT=25P)
* 23.12.1993 SIEMENS PD1 KURTH
*****************************************************************
*$
.MODEL BAW78D/INF D(
+       AF= 1.00E+00    BV= 4.00E+02   CJO= 5.40E-12    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 3.08E-11    KF= 0.00E+00
+        M= 4.62E-01     N= 1.51E+00    RS= 4.04E-01    TT= 1.44E-06
+       VJ= 8.00E-01   XTI= 3.00E+00)
*****************************************************************
*$
* BB515 Diode Model
.MODEL BB515/INF D(IS=2F RS=.05 N=1.045 BV=32 IBV=100N XTI=3 EG=1.11
+ CJO=25.5P VJ=2.5 M=1 TT=14.4N)
* Hyperabrupt Diode, M = f(VR)! Above approximation for Capacitance in 
* VR-range 1..28V
* VR-range 0..6V: CJO=25.82P VJ=1.59 M=0.722
* VR-range 0..5V: CJO=25.86P VJ=1.38 M=0.66
* VR-range 0..3V: CJO=25.87P VJ=1.167 M=0.59
* Reverse current simulation: ISR=4.1p NR=2
* For Capacitance Q-factor add RS=0.5 externally or (degrades VF/IF) 
* internally
* chip D190. 25.08.1994 SIEMENS HL EH PD1 Kurth
*****************************************************************
*$
.SUBCKT BB535/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 200e9
.MODEL D1 D(IS=1.05f N=1.02 RS=0.8 XTI=4.0 EG=1.16
+ CJO=26.05p M=1.2 VJ=3.68 FC=0.5 TT=120.0n BV=37.6 IBV=0.3e-9)
.ENDS 
*$
*
.SUBCKT BB555/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Diode:
D1 1 2 D1
R1 1 2 200e9
.MODEL D1 D(IS=1.05f N=1.02 RS=0.8 XTI=4.0 EG=1.16
+ CJO=26.05p M=1.2 VJ=3.68 FC=0.5 TT=120.0n BV=37.6 IBV=0.3e-9)
.ENDS 
*$
*
.SUBCKT BB545/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 250e9
.MODEL D1 D(IS=1.2f N=1.03 RS=300.0m XTI=3.5 EG=1.16
+ CJO=30.96p M=1.089 VJ=1.94 FC=0.5 TT=90.0n BV=33.6 IBV=0.2n)
.ENDS 
*$
*
.SUBCKT BB565/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 250e9
.MODEL D1 D(IS=1.2f N=1.03 RS=300.0m XTI=3.5 EG=1.16
+ CJO=30.96p M=1.089 VJ=1.94 FC=0.5 TT=90.0n BV=33.6 IBV=0.2n)
.ENDS 
*$
*
.SUBCKT BB639/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=2.5f N=1.0327 RS=120.9m XTI=4.0 EG=1.16
+ CJO=55.24p M=1.608 VJ=4.525 FC=0.5 TT=160.0n BV=36.0 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BB659/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=2.5f N=1.0327 RS=120.9m XTI=4.0 EG=1.16
+ CJO=55.24p M=1.608 VJ=4.525 FC=0.5 TT=160.0n BV=36.0 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BB639c/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=2.4745f N=1.036 RS=108.58m XTI=3.0 EG=1.16
+ CJO=57.3p M=1.606 VJ=4.0473 FC=0.5 TT=140.0n BV=37.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB659c/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=2.4745f N=1.036 RS=108.58m XTI=3.0 EG=1.16
+ CJO=57.3p M=1.606 VJ=4.0473 FC=0.5 TT=140.0n BV=37.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB644/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=3.2f N=1.04 RS=119.64m XTI=4.0 EG=1.16
+ CJO=61.21p M=1.83 VJ=4.64 FC=0.5 TT=80.0n BV=35.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB664/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=3.2f N=1.04 RS=119.64m XTI=4.0 EG=1.16
+ CJO=61.21p M=1.83 VJ=4.64 FC=0.5 TT=80.0n BV=35.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB669/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=6.0f N=1.04 RS=1.5 XTI=3.5 EG=1.16
+ CJO=79.64p M=2.167 VJ=6.467 FC=0.5 TT=120.0n BV=37.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB689/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=6.0f N=1.04 RS=1.5 XTI=3.5 EG=1.16
+ CJO=79.64p M=2.167 VJ=6.467 FC=0.5 TT=120.0n BV=37.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB804/INF 100 200 300
*anode1:         100
*anode2:         200
*common cathode: 300
*Package SOT23_2:
LIND1     1   10   0.77nH
LIND2     2   20   0.77nH
CAP2     10   20   73fF  
CAP3      3   10   120fF 
CAP4      3   20   120fF 
LIND10   10  100   0.56nH
LIND20   20  200   0.56nH
LIND30    3  300   0.49nH
*internal diodes:
D1 1 3 D1
D2 2 3 D1
R1 1 3 120e9
R2 2 3 120e9
.MODEL D1 D(IS=2.3251f N=1.01 RS=310.0m XTI=3.0 EG=1.16
+ CJO=78.5149p M=0.475854 VJ=0.872356 FC=0.5 TT=137.0n
+ BV=22.5 IBV=0.7e-9)
.ENDS 
*$
*
.SUBCKT BB814/INF 100 200 300
*anode1:         100
*anode2:         200
*common cathode: 300
*Package SOT23_2:
LIND1     1   10   0.77nH
LIND2     2   20   0.77nH
CAP2     10   20   73fF  
CAP3      3   10   120fF 
CAP4      3   20   120fF 
LIND10   10  100   0.56nH
LIND20   20  200   0.56nH
LIND30    3  300   0.49nH
*internal diodes:
D1 1 3 D1
D2 2 3 D1
R1 1 3 90e9
R2 2 3 90e9
.MODEL D1 D(IS=4.1f N=1.0 RS=260.0m XTI=3.5 EG=1.16
+ CJO=83.9p M=0.775 VJ=1.6 FC=0.5 TT=137.0n BV=33.5 IBV=1.0e-9)
.ENDS 
*$
*
.SUBCKT BB831/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=6.942e-16 N=1.0424 RS=150.0m XTI=3.5 EG=1.16
+ CJO=14.48p M=1.032 VJ=2.0093 FC=0.5 TT=80.0n BV=33.8 IBV=0.3n)
.ENDS 
*$
*
.SUBCKT BB833/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=113.2f N=1.22 RS=120.0m XTI=3.0 EG=1.16
+ CJO=14.79p M=1.464 VJ=2.594 FC=0.5 TT=120.0n BV=43.9 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB835/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode: D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=2.58f N=1.046 RS=220.0m XTI=3.5 EG=1.16
+ CJO=13.314p M=2.1498 VJ=4.968 FC=0.5 TT=45.0n BV=39.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB837/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=0.7f N=1.0462 RS=200.0m XTI=3.5 EG=1.16
+ CJO=9.997p M=1.508 VJ=3.334 FC=0.5 TT=70.0n BV=39.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB857/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=0.7f N=1.0462 RS=200.0m XTI=3.5 EG=1.16
+ CJO=9.997p M=1.508 VJ=3.334 FC=0.5 TT=70.0n BV=39.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB914/INF 100 200 300
*anode1:         100
*anode2:         200
*common cathode: 300
*Package SOT23_2:
LIND1     1   10   0.77nH
LIND2     2   20   0.77nH
CAP2     10   20   73fF  
CAP3      3   10   120fF 
CAP4      3   20   120fF 
LIND10   10  100   0.56nH
LIND20   20  200   0.56nH
LIND30    3  300   0.49nH
*internal diodes:
D1 1 3 D1
D2 2 3 D1
R1 1 3 150e9
R2 2 3 150e9
.MODEL D1 D(IS=4.8f N=1.01 RS=280.0m XTI=3.0 EG=1.16
+ CJO=84.7873p M=0.819203 VJ=1.57986 FC=0.5 TT=137n BV=35.5 IBV=0.3e-9)
.ENDS 
*$
*
.SUBCKT BBY51-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.06 RS=200.0m XTI=3.0 EG=1.16
+ CJO=7.318p M=0.9256 VJ=2.378 FC=0.5 TT=220.0n BV=10.6 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY51-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.06 RS=200.0m XTI=3.0 EG=1.16
+ CJO=7.318p M=0.9256 VJ=2.378 FC=0.5 TT=220.0n BV=10.6 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY52-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.1 RS=430.0m XTI=3.0 EG=1.16
+ CJO=2.49p M=0.71 VJ=1.559 FC=0.5 TT=220.0n BV=9.6 IBV=50.0n)
.ENDS 
*$
*
.SUBCKT BBY52-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.1 RS=430.0m XTI=3.0 EG=1.16
+ CJO=2.49p M=0.71 VJ=1.559 FC=0.5 TT=220.0n BV=9.6 IBV=50.0n)
.ENDS 
*$
*
.SUBCKT BBY53-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.6f N=1.065 RS=200.0m XTI=3.0 EG=1.16
+ CJO=8.65p M=0.838 VJ=1.025 FC=0.5 TT=290.0n BV=16.5 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY53-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.6f N=1.065 RS=200.0m XTI=3.0 EG=1.16
+ CJO=8.65p M=0.838 VJ=1.025 FC=0.5 TT=290.0n BV=16.5 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY55-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.8f N=1.02 RS=120.0m XTI=3.5 EG=1.16
+ CJO=26.66p M=0.717 VJ=1.573 FC=0.5 TT=100.0n BV=25.8 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BBY55-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.8f N=1.02 RS=120.0m XTI=3.5 EG=1.16
+ CJO=26.66p M=0.717 VJ=1.573 FC=0.5 TT=100.0n BV=25.8 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BBY56-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 80e9
.MODEL D1 D(IS=2.7f N=1.008 RS=80.0m XTI=3.5 EG=1.16
+ CJO=79.2p M=0.87 VJ=0.746 FC=0.5 TT=45.0n BV=12.5 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY56-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 80e9
.MODEL D1 D(IS=2.7f N=1.008 RS=80.0m XTI=3.5 EG=1.16
+ CJO=79.2p M=0.87 VJ=0.746 FC=0.5 TT=45.0n BV=12.5 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY57-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 30e9
.MODEL D1 D(IS=5.6f N=1.085 RS=95.86m XTI=3.5 EG=1.16
+ CJO=30.3p M=1.294 VJ=1.524 FC=0.5 TT=150.0n BV=20.0 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY57-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 30e9
.MODEL D1 D(IS=5.6f N=1.085 RS=95.86m XTI=3.5 EG=1.16
+ CJO=30.3p M=1.294 VJ=1.524 FC=0.5 TT=150.0n BV=20.0 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY58-03w/INF 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 15e9
.MODEL D1 D(IS=5.0f N=1.05 RS=160.0m XTI=3.0 EG=1.11
+ CJO=29.424p M=1.0836 VJ=1.472 FC=0.5 TT=45.0n BV=23.1 IBV=100.0n)
.ENDS
*$
*
.SUBCKT BBY58-02w/INF 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 15e9
.MODEL D1 D(IS=5.0f N=1.05 RS=160.0m XTI=3.0 EG=1.11
+ CJO=29.424p M=1.0836 VJ=1.472 FC=0.5 TT=45.0n BV=23.1 IBV=100.0n)
.ENDS 
*$
*
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC327 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC327/INF 1 2 3
Q    6 5 7 BC327 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC327 PNP (IS=0.230P NF=1.000 BF=504.327 VAF=26.000 IKF=0.780
+ ISE=39.284F NE=1.944 NR=1.002 BR=23.000 VAR=4.500 IKR=0.195
+ ISC=0.118F NC=3.025
+ RB=0.800 IRB=0.100M RBM=0.400
+ RE=0.203 RC=0.262
+ CJE=57.177P VJE=1.000 MJE=0.470 FC=0.750
+ CJC=28.600P VJC=1.000 MJC=0.520 XCJC=0.650
+ TF=0.664N TR=2.600N PTF=1.000
+ XTF=6.350 VTF=2.000 ITF=0.250
+ XTB=1.700 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC328 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC328/INF 1 2 3
Q    6 5 7 BC328 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC328 PNP (IS=0.230P NF=1.000 BF=504.327 VAF=26.000 IKF=0.780
+ ISE=39.284F NE=1.944 NR=1.002 BR=23.000 VAR=4.500 IKR=0.195
+ ISC=0.118F NC=3.025
+ RB=0.800 IRB=0.100M RBM=0.400
+ RE=0.203 RC=0.262
+ CJE=57.177P VJE=1.000 MJE=0.470 FC=0.750
+ CJC=28.600P VJC=1.000 MJC=0.520 XCJC=0.650
+ TF=0.664N TR=2.600N PTF=1.000
+ XTF=6.350 VTF=2.000 ITF=0.250
+ XTB=1.700 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC337 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC337/INF 1 2 3
Q    6 5 7 BC337 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC337 NPN (IS=0.180P NF=1.000 BF=449.302 VAF=95.000 IKF=0.820
+ ISE=8.480F NE=1.566 NR=1.005 BR=16.919 VAR=13.000 IKR=0.663
+ ISC=0.102P NC=1.764
+ RB=0.750 IRB=0.100M RBM=0.375
+ RE=0.170 RC=0.289
+ CJE=63.400P VJE=0.850 MJE=0.372 FC=0.750
+ CJC=16.600P VJC=0.780 MJC=0.433 XCJC=0.650
+ TF=0.810N TR=2.600N PTF=1.000
+ XTF=4.300 VTF=1.500 ITF=0.450
+ XTB=1.500 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC338 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC338/INF 1 2 3
Q    6 5 7 BC338 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC338 NPN (IS=0.180P NF=1.000 BF=449.302 VAF=95.000 IKF=0.820
+ ISE=8.480F NE=1.566 NR=1.005 BR=16.919 VAR=13.000 IKR=0.663
+ ISC=0.102P NC=1.764
+ RB=0.750 IRB=0.100M RBM=0.375
+ RE=0.170 RC=0.289
+ CJE=63.400P VJE=0.850 MJE=0.372 FC=0.750
+ CJC=16.600P VJC=0.780 MJC=0.433 XCJC=0.650
+ TF=0.810N TR=2.600N PTF=1.000
+ XTF=4.300 VTF=1.500 ITF=0.450
+ XTB=1.500 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
.MODEL BC368/INF NPN(
+       AF= 1.00E+00    BF= 1.61E+02    BR= 3.66E+00   CJC= 1.37E-10
+      CJE= 2.52E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 7.74E+00   IKR= 1.00E+00   IRB= 6.95E-02    IS= 9.77E-14
+      ISC= 4.11E-14   ISE= 1.49E-16   ITF= 1.00E+01    KF= 0.00E+00
+      MJC= 4.87E-01   MJE= 4.11E-01   MJS= 3.30E-01    NC= 1.02E+00
+       NE= 1.01E+00    NF= 9.64E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.91E+01   RBM= 3.03E+00    RC= 2.06E-01    RE= 1.01E-02
+       TF= 1.38E-09    TR= 0.00E+00   VAF= 5.63E+02   VAR= 3.49E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.26E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC369/INF PNP(
+       AF= 1.00E+00    BF= 2.25E+02    BR= 9.96E+00   CJC= 1.94E-10
+      CJE= 3.28E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.88E+00   IKR= 1.00E+00   IRB= 1.00E-06    IS= 7.82E-15
+      ISC= 1.00E-17   ISE= 3.05E-17   ITF= 4.21E+01    KF= 0.00E+00
+      MJC= 4.03E-01   MJE= 5.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.00E+00    NF= 8.54E-01    NR= 8.80E-01   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 2.17E-02    RE= 1.34E-01
+       TF= 1.39E-09    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 5.03E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.93E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC558B/INF PNP(
+       AF= 1.00E+00    BF= 2.38E+02    BR= 8.07E+00   CJC= 1.02E-11
+      CJE= 1.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 6.60E-01
+      IKF= 3.00E-01   IKR= 1.00E+00   IRB= 1.12E+00    IS= 1.69E-14 
+      ISC= 1.00E-13   ISE= 1.00E-17   ITF= 9.50E-01    KF= 0.00E+00
+      MJC= 3.45E-01   MJE= 4.19E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 2.00E+00    NF= 1.01E+00    NR= 1.00E+00   PTF= 0.00E+00
+       RB= 5.00E+01   RBM= 1.00E+01    RC= 1.49E+00    RE= 9.50E-02
+       TF= 5.64E-10    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 8.00E-01   VJS= 7.50E-01   VTF= 1.47E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.51E+01   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BC548C/INF NPN(
+       AF= 1.00E+00    BF= 4.66E+02    BR= 2.42E+00   CJC= 5.17E-12
+      CJE= 1.33E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 9.00E-01
+      IKF= 1.80E-01   IKR= 1.00E+00   IRB= 1.00E+01    IS= 1.95E-14
+      ISC= 1.00E-13   ISE= 1.31E-15   ITF= 1.03E+00    KF= 0.00E+00
+      MJC= 3.19E-01   MJE= 3.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.32E+00    NF= 9.93E-01    NR= 1.20E+00   PTF= 0.00E+00
+       RB= 2.65E+01   RBM= 1.00E+01    RC= 1.73E+00    RE= 1.00E+00
+       TF= 6.52E-10    TR= 0.00E+00   VAF= 9.17E+01   VAR= 2.47E+01
+      VJC= 3.39E-01   VJE= 6.32E-01   VJS= 7.50E-01   VTF= 1.65E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BC635/INF NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC636/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC637/INF NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC638/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC639/INF NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC640/INF PNP( 
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00 
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC807 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC807/INF 1 2 3
Q    6 5 7 BC807 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC807 PNP (IS=0.230P NF=1.000 BF=504.327 VAF=26.000 IKF=0.780
+ ISE=39.284F NE=1.944 NR=1.002 BR=23.000 VAR=4.500 IKR=0.195
+ ISC=0.118F NC=3.025
+ RB=0.800 IRB=0.100M RBM=0.400
+ RE=0.203 RC=0.262
+ CJE=57.177P VJE=1.000 MJE=0.470 FC=0.750
+ CJC=28.600P VJC=1.000 MJC=0.520 XCJC=0.650
+ TF=0.664N TR=2.600N PTF=1.000
+ XTF=6.350 VTF=2.000 ITF=0.250
+ XTB=1.700 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC808 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC808/INF 1 2 3
Q    6 5 7 BC808 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC808 PNP (IS=0.230P NF=1.000 BF=504.327 VAF=26.000 IKF=0.780
+ ISE=39.284F NE=1.944 NR=1.002 BR=23.000 VAR=4.500 IKR=0.195
+ ISC=0.118F NC=3.025
+ RB=0.800 IRB=0.100M RBM=0.400
+ RE=0.203 RC=0.262
+ CJE=57.177P VJE=1.000 MJE=0.470 FC=0.750
+ CJC=28.600P VJC=1.000 MJC=0.520 XCJC=0.650
+ TF=0.664N TR=2.600N PTF=1.000
+ XTF=6.350 VTF=2.000 ITF=0.250
+ XTB=1.700 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC817 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC817/INF 1 2 3
Q    6 5 7 BC817 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC817 NPN (IS=0.180P NF=1.000 BF=449.302 VAF=95.000 IKF=0.820
+ ISE=8.480F NE=1.566 NR=1.005 BR=16.919 VAR=13.000 IKR=0.663
+ ISC=0.102P NC=1.764
+ RB=0.750 IRB=0.100M RBM=0.375
+ RE=0.170 RC=0.289
+ CJE=63.400P VJE=0.850 MJE=0.372 FC=0.750
+ CJC=16.600P VJC=0.780 MJC=0.433 XCJC=0.650
+ TF=0.810N TR=2.600N PTF=1.000
+ XTF=4.300 VTF=1.500 ITF=0.450
+ XTB=1.500 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC818 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC818/INF 1 2 3
Q    6 5 7 BC818 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC818 NPN (IS=0.180P NF=1.000 BF=449.302 VAF=95.000 IKF=0.820
+ ISE=8.480F NE=1.566 NR=1.005 BR=16.919 VAR=13.000 IKR=0.663
+ ISC=0.102P NC=1.764
+ RB=0.750 IRB=0.100M RBM=0.375
+ RE=0.170 RC=0.289
+ CJE=63.400P VJE=0.850 MJE=0.372 FC=0.750
+ CJC=16.600P VJC=0.780 MJC=0.433 XCJC=0.650
+ TF=0.810N TR=2.600N PTF=1.000
+ XTF=4.300 VTF=1.500 ITF=0.450
+ XTB=1.500 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC846 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC846/INF 1 2 3
Q    6 5 7 BC846 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC846 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC847 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC847/INF 1 2 3
Q    6 5 7 BC847 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC847 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC848 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC848/INF 1 2 3
Q    6 5 7 BC848 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC848 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
.MODEL BC848C/INF NPN(
+       AF= 1.00E+00    BF= 5.27E+02    BR= 5.38E+00   CJC= 5.26E-12
+      CJE= 1.25E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 8.75E-01
+      IKF= 2.04E-01   IKR= 1.00E+00   IRB= 2.57E+00    IS= 7.58E-15
+      ISC= 1.00E-13   ISE= 1.25E-15   ITF= 1.20E+00    KF= 0.00E+00
+      MJC= 3.38E-01   MJE= 3.31E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.40E+00    NF= 9.50E-01    NR= 1.01E+00   PTF= 0.00E+00
+       RB= 7.26E+00   RBM= 1.00E+01    RC= 1.66E+00    RE= 9.80E-01
+       TF= 6.64E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 2.18E+01
+      VJC= 3.84E-01   VJE= 5.96E-01   VJS= 7.50E-01   VTF= 1.72E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC849 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC849/INF 1 2 3
Q    6 5 7 BC849 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC849 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC850 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC850/INF 1 2 3
Q    6 5 7 BC850 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC850 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC856 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC856/INF 1 2 3
Q    6 5 7 BC856 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC856 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC857 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC857/INF 1 2 3
Q    6 5 7 BC857 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC857 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC858 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC858/INF 1 2 3
Q    6 5 7 BC858 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC858 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC859 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC859/INF 1 2 3
Q    6 5 7 BC859 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC859 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC860 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC860/INF 1 2 3
Q    6 5 7 BC860 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BC860 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
.MODEL BCP51/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$ 
.MODEL BCP52/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP53/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP54/INF NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP55/INF NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01 
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP68/INF NPN(
+       AF= 1.00E+00    BF= 1.61E+02    BR= 3.66E+00   CJC= 1.37E-10
+      CJE= 2.52E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 7.74E+00   IKR= 1.00E+00   IRB= 6.95E-02    IS= 9.77E-14
+      ISC= 4.11E-14   ISE= 1.49E-16   ITF= 1.00E+01    KF= 0.00E+00
+      MJC= 4.87E-01   MJE= 4.11E-01   MJS= 3.30E-01    NC= 1.02E+00
+       NE= 1.01E+00    NF= 9.64E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.91E+01   RBM= 3.03E+00    RC= 2.06E-01    RE= 1.01E-02
+       TF= 1.38E-09    TR= 0.00E+00   VAF= 5.63E+02   VAR= 3.49E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.26E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP69/INF PNP(
+       AF= 1.00E+00    BF= 2.25E+02    BR= 9.96E+00   CJC= 1.94E-10
+      CJE= 3.28E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.88E+00   IKR= 1.00E+00   IRB= 1.00E-06    IS= 7.82E-15
+      ISC= 1.00E-17   ISE= 3.05E-17   ITF= 4.21E+01    KF= 0.00E+00
+      MJC= 4.03E-01   MJE= 5.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.00E+00    NF= 8.54E-01    NR= 8.80E-01   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 2.17E-02    RE= 1.34E-01
+       TF= 1.39E-09    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 5.03E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.93E+02   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCP70 (SOT-223)  *
* REV: 98.2                  DANALYSE GMBH BERLIN (17.06.1998)  *
*****************************************************************
.SUBCKT BCP70/INF 1 2 3
Q    4 5 6 BCP70 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BCP70 PNP (IS=0.750P NF=1.010 BF=228.200 VAF=16.500 IKF=1.220
+ ISE=1.850F NE=2.004 NR=1.007 BR=130.000 VAR=5.000 IKR=2.200
+ ISC=25.000F NC=1.078
+ RB=0.500 IRB=10.000M RBM=0.300
+ RE=35.000M RC=39.961M
+ CJE=0.295N VJE=1.200 MJE=0.600 FC=0.500
+ CJC=0.228N VJC=0.720 MJC=0.320 XCJC=0.723
+ TF=0.275N TR=0.100U PTF=1.000
+ XTF=0.800 VTF=2.500 ITF=2.500
+ XTB=2.100 EG=1.120 XTI=5.000
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCP72 (SOT-223)  *
* REV: 98.2                  DANALYSE GMBH BERLIN (17.06.1998)  *
*****************************************************************
.SUBCKT BCP72/INF 1 2 3
Q    4 5 6 BCP72 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BCP72 PNP (IS=0.750P NF=1.010 BF=228.200 VAF=16.500 IKF=1.220
+ ISE=1.850F NE=2.004 NR=1.007 BR=130.000 VAR=5.000 IKR=2.200
+ ISC=25.000F NC=1.078
+ RB=0.500 IRB=10.000M RBM=0.300
+ RE=35.000M RC=39.961M
+ CJE=0.295N VJE=1.200 MJE=0.600 FC=0.500
+ CJC=0.228N VJC=0.720 MJC=0.320 XCJC=0.723
+ TF=0.275N TR=0.100U PTF=1.000
+ XTF=0.800 VTF=2.500 ITF=2.500
+ XTB=2.100 EG=1.120 XTI=5.000
+ KF=1.000F AF=1.000)
*$

* RESISTORS                                *
********************************************
.MODEL RPLMOD RES (R=1 TC1=-2.1E-3 TC2=6.0E-6)
********************************************
*$
**************************************************************
* BCR08PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR08PN/INF 100 200 300 400 500 600
*                    E1   B1   C2   E2   B2   C1
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$

********************************************
* BCR103      SUBCIRCUIT                   *
********************************************
.subckt BCR103/INF 3 1 2
*                  C B E
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR108      SUBCIRCUIT                   *
********************************************
.subckt BCR108/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR108S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR108S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
********************************************
* BCR108T     SUBCIRCUIT                   *
********************************************
.subckt BCR108T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR108U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR108U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR108UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR108UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR108W     SUBCIRCUIT                   *
********************************************
.subckt BCR108W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 2.2k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR10PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR10PN/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10k 
R21   1   2 RPLMOD 10k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10k 
R22   4   5 RPLMOD 10k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR112      SUBCIRCUIT                   *
********************************************
.subckt BCR112/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR112S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR112S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR112U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR112U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR112UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR112UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR112W     SUBCIRCUIT                   *
********************************************
.subckt BCR112W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 4.7k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR116      SUBCIRCUIT                   *
********************************************
.subckt BCR116/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR116S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR116S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR116U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR116U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR116UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR116UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR116W     SUBCIRCUIT                   *
********************************************
.subckt BCR116W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR119      SUBCIRCUIT                   *
********************************************
.subckt BCR119/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR119S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR119S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR119U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR119U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR119UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR119UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR119W     SUBCIRCUIT                   *
********************************************
.subckt BCR119W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR129      SUBCIRCUIT                   *
********************************************
.subckt BCR129/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR129S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR129S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
********************************************
* BCR129T     SUBCIRCUIT                   *
********************************************
.subckt BCR129T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR133      SUBCIRCUIT                   *
********************************************
.subckt BCR133/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR133S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR133S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
********************************************
* BCR133T     SUBCIRCUIT                   *
********************************************
.subckt BCR133T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR133U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR133U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR133UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR133UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR133W     SUBCIRCUIT                   *
********************************************
.subckt BCR133W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 10.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR135      SUBCIRCUIT                   *
********************************************
.subckt BCR135/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR135S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR135S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
********************************************
* BCR135T     SUBCIRCUIT                   *
********************************************
.subckt BCR135T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR135U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR135U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR135UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR135UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR135W     SUBCIRCUIT                   *
********************************************
.subckt BCR135W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR139      SUBCIRCUIT                   *
********************************************
.subckt BCR139/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR139U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR139U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
********************************************
* BCR141      SUBCIRCUIT                   *
********************************************
.subckt BCR141/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR141S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR141S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
********************************************
* BCR141T     SUBCIRCUIT                   *
********************************************
.subckt BCR141T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR141U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR141U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR141UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR141UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR141W     SUBCIRCUIT                   *
********************************************
.subckt BCR141W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR142      SUBCIRCUIT                   *
********************************************
.subckt BCR142/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR142T     SUBCIRCUIT                   *
********************************************
.subckt BCR142T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR142U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR142U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR142UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR142UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR142W     SUBCIRCUIT                   *
********************************************
.subckt BCR142W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR146      SUBCIRCUIT                   *
********************************************
.subckt BCR146/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR146U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR146U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR146UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR146UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR146W     SUBCIRCUIT                   *
********************************************
.subckt BCR146W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR148      SUBCIRCUIT                   *
********************************************
.subckt BCR148/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR148S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR148S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
********************************************
* BCR148T     SUBCIRCUIT                   *
********************************************
.subckt BCR148T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
**************************************************************
* BCR148U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR148U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR148UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR148UPN/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR148W     SUBCIRCUIT                   *
********************************************
.subckt BCR148W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k  
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR153      SUBCIRCUIT                   *
********************************************
.subckt BCR153/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR158      SUBCIRCUIT                   *
********************************************
.subckt BCR158/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR158S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR158S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$********************************************
* BCR158T     SUBCIRCUIT                   *
********************************************
.subckt BCR158T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR158U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR158U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$********************************************
* BCR158W     SUBCIRCUIT                   *
********************************************
.subckt BCR158W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 2.2k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR162      SUBCIRCUIT                   *
********************************************
.subckt BCR162/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR162T     SUBCIRCUIT                   *
********************************************
.subckt BCR162T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR162U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR162U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR162W     SUBCIRCUIT                   *
********************************************
.subckt BCR162W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 4.7k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR166      SUBCIRCUIT                   *
********************************************
.subckt BCR166/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR166U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR166U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR166W     SUBCIRCUIT                   *
********************************************
.subckt BCR166W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR169      SUBCIRCUIT                   *
********************************************
.subckt BCR169/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR169S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR169S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR169U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR169U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR169W     SUBCIRCUIT                   *
********************************************
.subckt BCR169W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR179      SUBCIRCUIT                   *
********************************************
.subckt BCR179/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
****************************************************************
* BCR179S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR179S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR183      SUBCIRCUIT                   *
********************************************
.subckt BCR183/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR183S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR183S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR183T     SUBCIRCUIT                   *
********************************************
.subckt BCR183T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR183W     SUBCIRCUIT                   *
********************************************
.subckt BCR183W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 10.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR185      SUBCIRCUIT                   *
********************************************
.subckt BCR185/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR183U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR183U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR185S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR185S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR185U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR185U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR185W     SUBCIRCUIT                   *
********************************************
.subckt BCR185W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR189      SUBCIRCUIT                   *
********************************************
.subckt BCR189/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR189U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR189U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR191      SUBCIRCUIT                   *
********************************************
.subckt BCR191/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR191W     SUBCIRCUIT                   *
********************************************
.subckt BCR191W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$

**************************************************************
* BCR191S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR191S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0358 Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR191U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR191U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358 .ends 
*$
********************************************
* BCR192      SUBCIRCUIT                   *
********************************************
.subckt BCR192/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR192T     SUBCIRCUIT                   *
********************************************
.subckt BCR192T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR192U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR192U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR192W     SUBCIRCUIT                   *
********************************************
.subckt BCR192W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR196      SUBCIRCUIT                   *
********************************************
.subckt BCR196/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR196W     SUBCIRCUIT                   *
********************************************
.subckt BCR196W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR198      SUBCIRCUIT                   *
********************************************
.subckt BCR198/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR198S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR198S/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR198T     SUBCIRCUIT                   *
********************************************
.subckt BCR198T/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR198W     SUBCIRCUIT                   *
********************************************
.subckt BCR198W/INF 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
**************************************************************
* BCR198U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR198U/INF 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR19PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR19PN/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR22PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR22PN/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 22k 
R21   1   2 RPLMOD 22k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 22k 
R22   4   5 RPLMOD 22k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR35PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR35PN/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR39PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR39PN/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR48PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR48PN/INF 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
********************************************
* BCR503      SUBCIRCUIT                   *
********************************************
.subckt BCR503/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR505      SUBCIRCUIT                   *
********************************************
.subckt BCR505/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR512      SUBCIRCUIT                   *
********************************************
.subckt BCR512/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR519      SUBCIRCUIT                   *
********************************************
.subckt BCR519/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR521      SUBCIRCUIT                   *
********************************************
.subckt BCR521/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 1.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR523      SUBCIRCUIT                   *
********************************************
.subckt BCR523/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR533      SUBCIRCUIT                   *
********************************************
.subckt BCR533/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR553      SUBCIRCUIT                   *
********************************************
.subckt BCR553/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR555      SUBCIRCUIT                   *
********************************************
.subckt BCR555/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR562      SUBCIRCUIT                   *
********************************************
.subckt BCR562/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR569      SUBCIRCUIT                   *
********************************************
.subckt BCR569/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR571      SUBCIRCUIT                   *
********************************************
.subckt BCR571/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 1.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR573      SUBCIRCUIT                   *
********************************************
.subckt BCR573/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR583      SUBCIRCUIT                   *
********************************************
.subckt BCR583/INF 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCV61 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCV61/INF 1 2 3
Q    6 5 7 BCV61 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCV61 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCV62 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
 .SUBCKT BCV62/INF 1 2 3
Q    6 5 7 BCV62 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCV62 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCW60 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW60/INF 1 2 3
Q    6 5 7 BCW60 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCW60 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCW61 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW61/INF 1 2 3
Q    6 5 7 BCW61 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCW61 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCW65 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW65/INF 1 2 3
Q    6 5 7 BCW65 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCW65 NPN (IS=0.180P NF=1.000 BF=449.302 VAF=95.000 IKF=0.820
+ ISE=8.480F NE=1.566 NR=1.005 BR=16.919 VAR=13.000 IKR=0.663
+ ISC=0.102P NC=1.764
+ RB=0.750 IRB=0.100M RBM=0.375
+ RE=0.170 RC=0.289
+ CJE=63.400P VJE=0.850 MJE=0.372 FC=0.750
+ CJC=16.600P VJC=0.780 MJC=0.433 XCJC=0.650
+ TF=0.810N TR=2.600N PTF=1.000
+ XTF=4.300 VTF=1.500 ITF=0.450
+ XTB=1.500 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCW66 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW66/INF 1 2 3
Q    6 5 7 BCW66 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCW66 NPN (IS=0.180P NF=1.000 BF=449.302 VAF=95.000 IKF=0.820
+ ISE=8.480F NE=1.566 NR=1.005 BR=16.919 VAR=13.000 IKR=0.663
+ ISC=0.102P NC=1.764
+ RB=0.750 IRB=0.100M RBM=0.375
+ RE=0.170 RC=0.289
+ CJE=63.400P VJE=0.850 MJE=0.372 FC=0.750
+ CJC=16.600P VJC=0.780 MJC=0.433 XCJC=0.650
+ TF=0.810N TR=2.600N PTF=1.000
+ XTF=4.300 VTF=1.500 ITF=0.450
+ XTB=1.500 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
.MODEL BCW66G/INF NPN(
+       AF= 1.00E+00    BF= 6.16E+02    BR= 2.64E+00   CJC= 3.14E-11
+      CJE= 6.75E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.18E-01   IKR= 1.00E+00   IRB= 2.14E-02    IS= 2.41E-13
+      ISC= 1.00E-10   ISE= 2.82E-15   ITF= 1.82E+00    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.12E+00    NF= 1.04E+00    NR= 1.08E+00   PTF= 0.00E+00
+       RB= 2.90E+01   RBM= 1.00E-02    RC= 3.09E-01    RE= 1.00E-02
+       TF= 8.68E-10    TR= 0.00E+00   VAF= 1.97E+02   VAR= 3.04E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.00E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.67E+01   XTI= 3.00E+00)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCW67 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW67/INF 1 2 3
Q    6 5 7 BCW67 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCW67 PNP (IS=0.230P NF=1.000 BF=504.327 VAF=26.000 IKF=0.780
+ ISE=39.284F NE=1.944 NR=1.002 BR=23.000 VAR=4.500 IKR=0.195
+ ISC=0.118F NC=3.025
+ RB=0.800 IRB=0.100M RBM=0.400
+ RE=0.203 RC=0.262
+ CJE=57.177P VJE=1.000 MJE=0.470 FC=0.750
+ CJC=28.600P VJC=1.000 MJC=0.520 XCJC=0.650
+ TF=0.664N TR=2.600N PTF=1.000
+ XTF=6.350 VTF=2.000 ITF=0.250
+ XTB=1.700 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCW68 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW68/INF 1 2 3
Q    6 5 7 BCW68 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCW68 PNP (IS=0.230P NF=1.000 BF=504.327 VAF=26.000 IKF=0.780
+ ISE=39.284F NE=1.944 NR=1.002 BR=23.000 VAR=4.500 IKR=0.195
+ ISC=0.118F NC=3.025
+ RB=0.800 IRB=0.100M RBM=0.400
+ RE=0.203 RC=0.262
+ CJE=57.177P VJE=1.000 MJE=0.470 FC=0.750
+ CJC=28.600P VJC=1.000 MJC=0.520 XCJC=0.650
+ TF=0.664N TR=2.600N PTF=1.000
+ XTF=6.350 VTF=2.000 ITF=0.250
+ XTB=1.700 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************************************
.MODEL BCW68G/INF PNP(
+       AF= 1.00E+00    BF= 3.25E+02    BR= 1.45E+01   CJC= 4.28E-11
+      CJE= 3.79E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.14E-01   IKR= 1.00E+00   IRB= 4.50E+00    IS= 1.34E-13
+      ISC= 1.00E-10   ISE= 6.82E-16   ITF= 2.68E+00    KF= 0.00E+00
+      MJC= 4.75E-01   MJE= 7.00E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.16E+00    NF= 9.91E-01    NR= 1.00E+00   PTF= 0.00E+00
+       RB= 1.96E+01   RBM= 1.00E+01    RC= 3.90E-01    RE= 1.00E-02
+       TF= 6.85E-10    TR= 0.00E+00   VAF= 4.65E+01   VAR= 1.00E+01
+      VJC= 3.00E-01   VJE= 4.78E-01   VJS= 7.50E-01   VTF= 4.55E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.54E+01   XTI= 3.00E+00)
*$ 
*****************************************************************
.MODEL BCX41/INF NPN(
+       AF= 1.00E+00    BF= 1.70E+02    BR= 9.55E-02   CJC= 2.58E-11
+      CJE= 4.69E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.13E-01   IKR= 1.00E+00   IRB= 6.59E-02    IS= 1.69E-12
+      ISC= 9.92E-13   ISE= 3.23E-14   ITF= 6.20E+00    KF= 0.00E+00
+      MJC= 5.11E-01   MJE= 3.97E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.28E+00    NF= 1.20E+00    NR= 1.41E+00   PTF= 0.00E+00
+       RB= 7.17E+00   RBM= 1.00E+01    RC= 5.54E-01    RE= 1.00E-02
 +       TF= 1.50E-09    TR= 0.00E+00   VAF= 7.00E+02   VAR= 8.58E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.00E+06
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX42/INF PNP(
+       AF= 1.00E+00    BF= 1.52E+02    BR= 1.16E-01   CJC= 3.90E-11
+      CJE= 5.74E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.18E-01   IKR= 1.00E+00   IRB= 8.03E-02    IS= 7.59E-14
+      ISC= 1.72E-12   ISE= 1.90E-14   ITF= 1.28E+00    KF= 0.00E+00
+      MJC= 4.85E-01   MJE= 4.41E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.27E+00    NF= 1.01E+00    NR= 1.21E+00   PTF= 0.00E+00
+       RB= 2.42E+00   RBM= 4.95E+00    RC= 8.89E-01    RE= 1.00E-02
+       TF= 8.18E-10    TR= 0.00E+00   VAF= 3.28E+02   VAR= 2.61E+01
+      VJC= 3.00E-01   VJE= 3.15E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.01E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX51/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX52/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX53/INF PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
 +     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
********************************************************************* 
*$
.MODEL BCX54/INF NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX55/INF NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX56/INF NPN( +       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00 
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCX58 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX58/INF 1 2 3
Q    6 5 7 BCX58 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCX58 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCX59 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX59/INF 1 2 3
Q    6 5 7 BCX59 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCX59 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
.MODEL BCX68/INF NPN(
+       AF= 1.00E+00    BF= 1.61E+02    BR= 3.66E+00   CJC= 1.37E-10
+      CJE= 2.52E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 7.74E+00   IKR= 1.00E+00   IRB= 6.95E-02    IS= 9.77E-14
+      ISC= 4.11E-14   ISE= 1.49E-16   ITF= 1.00E+01    KF= 0.00E+00
+      MJC= 4.87E-01   MJE= 4.11E-01   MJS= 3.30E-01    NC= 1.02E+00
+       NE= 1.01E+00    NF= 9.64E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.91E+01   RBM= 3.03E+00    RC= 2.06E-01    RE= 1.01E-02
+       TF= 1.38E-09    TR= 0.00E+00   VAF= 5.63E+02   VAR= 3.49E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.26E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX69/INF PNP(
+       AF= 1.00E+00    BF= 2.25E+02    BR= 9.96E+00   CJC= 1.94E-10
+      CJE= 3.28E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.88E+00   IKR= 1.00E+00   IRB= 1.00E-06    IS= 7.82E-15
+      ISC= 1.00E-17   ISE= 3.05E-17   ITF= 4.21E+01    KF= 0.00E+00
+      MJC= 4.03E-01   MJE= 5.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.00E+00    NF= 8.54E-01    NR= 8.80E-01   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 2.17E-02    RE= 1.34E-01
+       TF= 1.39E-09    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 5.03E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.93E+02   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCX70 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX70/INF 1 2 3 Q    6 5 7 BCX70 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCX70 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
.MODEL BCX70J/INF NPN(
+       AF= 1.00E+00    BF= 3.20E+02    BR= 1.47E+01   CJC= 7.16E-12
+      CJE= 1.03E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.79E-01   IKR= 1.00E+00   IRB= 3.37E-03    IS= 3.71E-13
+      ISC= 1.71E-13   ISE= 2.77E-15   ITF= 2.26E+00    KF= 0.00E+00
+      MJC= 4.60E-01   MJE= 3.86E-01   MJS= 3.30E-01    NC= 1.21E+00
+       NE= 1.37E+00    NF= 1.14E+00    NR= 1.21E+00   PTF= 0.00E+00
+       RB= 1.00E+02   RBM= 1.00E+01    RC= 1.75E+00    RE= 1.00E-02
+       TF= 5.65E-10    TR= 0.00E+00   VAF= 2.49E+02   VAR= 3.31E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.10E+02   XTI= 3.00E+00)
*$
*****************************************************************
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCX71 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX71/INF 1 2 3
Q    6 5 7 BCX71 1.000 LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCX71 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
.MODEL BCX71J/INF PNP(
+       AF= 1.00E+00    BF= 3.72E+02    BR= 2.85E-02   CJC= 1.13E-11
+      CJE= 1.13E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.33E-01   IKR= 1.00E+00   IRB= 2.46E-03    IS= 1.63E-13
+      ISC= 7.42E-13   ISE= 4.39E-13   ITF= 2.78E+00    KF= 0.00E+00
+      MJC= 3.98E-01   MJE= 5.98E-01   MJS= 3.30E-01    NC= 1.52E+00
+       NE= 2.00E+00    NF= 1.06E+00    NR= 1.51E+00   PTF= 0.00E+00
+       RB= 5.00E+01   RBM= 1.00E+01    RC= 3.83E+00    RE= 1.00E-02
+       TF= 5.30E-10    TR= 0.00E+00   VAF= 2.68E+01   VAR= 1.00E+01
+      VJC= 3.00E-01   VJE= 7.38E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.39E-01   XTI= 3.00E+00)
*$
*****************************************************************
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCX78 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX78/INF 1 2 3
Q    6 5 7 BCX78 1.000
LC   1 6 0.350N L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCX78 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCX79 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX79/INF 1 2 3
Q    6 5 7 BCX79 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BCX79 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP947 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP947/INF 1 2 3
Q    4 5 6 BDP947 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP947 NPN (IS=0.650P NF=1.004 BF=237.934 VAF=135.000 IKF=3.900
+ ISE=0.178P NE=1.649 NR=1.015 BR=25.000 VAR=22.000 IKR=3.200
+ ISC=38.669F NC=1.062
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=45.000M RC=0.173
+ CJE=0.430N VJE=0.800 MJE=0.350 FC=0.500
+ CJC=88.500P VJC=0.730 MJC=0.435 XCJC=0.723
+ TF=1.010N TR=0.100U PTF=1.000
+ XTF=0.900 VTF=0.350 ITF=0.900
+ XTB=2.400 EG=1.110 XTI=4.900
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP948 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP948/INF 1 2 3
Q    4 5 6 BDP948 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP948 NPN (IS=0.650P NF=1.004 BF=237.934 VAF=135.000 IKF=3.900
+ ISE=0.178P NE=1.649 NR=1.015 BR=25.000 VAR=22.000 IKR=3.200
+ ISC=38.669F NC=1.062
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=45.000M RC=0.173
+ CJE=0.430N VJE=0.800 MJE=0.350 FC=0.500
+ CJC=88.500P VJC=0.730 MJC=0.435 XCJC=0.723
+ TF=1.010N TR=0.100U PTF=1.000
+ XTF=0.900 VTF=0.350 ITF=0.900
+ XTB=2.400 EG=1.110 XTI=4.900
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP949 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP949/INF 1 2 3
Q    4 5 6 BDP949 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP949 NPN (IS=0.650P NF=1.004 BF=237.934 VAF=135.000 IKF=3.900
+ ISE=0.178P NE=1.649 NR=1.015 BR=25.000 VAR=22.000 IKR=3.200
+ ISC=38.669F NC=1.062
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=45.000M RC=0.173
+ CJE=0.430N VJE=0.800 MJE=0.350 FC=0.500
+ CJC=88.500P VJC=0.730 MJC=0.435 XCJC=0.723
+ TF=1.010N TR=0.100U PTF=1.000
+ XTF=0.900 VTF=0.350 ITF=0.900
+ XTB=2.400 EG=1.110 XTI=4.900
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP950 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP950/INF 1 2 3
Q    4 5 6 BDP950 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP950 NPN (IS=0.650P NF=1.004 BF=237.934 VAF=135.000 IKF=3.900
+ ISE=0.178P NE=1.649 NR=1.015 BR=25.000 VAR=22.000 IKR=3.200
+ ISC=38.669F NC=1.062
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=45.000M RC=0.173
+ CJE=0.430N VJE=0.800 MJE=0.350 FC=0.500
+ CJC=88.500P VJC=0.730 MJC=0.435 XCJC=0.723
+ TF=1.010N TR=0.100U PTF=1.000
+ XTF=0.900 VTF=0.350 ITF=0.900
+ XTB=2.400 EG=1.110 XTI=4.900
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP951 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP951/INF 1 2 3
Q    4 5 6 BDP951 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP951 NPN (IS=0.650P NF=1.004 BF=237.934 VAF=135.000 IKF=3.900
+ ISE=0.178P NE=1.649 NR=1.015 BR=25.000 VAR=22.000 IKR=3.200
+ ISC=38.669F NC=1.062
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=45.000M RC=0.173
+ CJE=0.430N VJE=0.800 MJE=0.350 FC=0.500
+ CJC=88.500P VJC=0.730 MJC=0.435 XCJC=0.723
+ TF=1.010N TR=0.100U PTF=1.000
+ XTF=0.900 VTF=0.350 ITF=0.900
+ XTB=2.400 EG=1.110 XTI=4.900
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP952 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP952/INF 1 2 3
Q    4 5 6 BDP952 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP952 PNP (IS=0.800P NF=0.995 BF=250.000 VAF=70.500 IKF=0.700
+ ISE=0.309P NE=2.330 NR=1.000 BR=44.000 VAR=7.840 IKR=1.000
+ ISC=0.200P NC=1.079
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=50.000M RC=59.947M
+ CJE=0.390N VJE=0.921 MJE=0.430 FC=0.500
+ CJC=0.139N VJC=0.775 MJC=0.490 XCJC=0.720
+ TF=0.730N TR=0.100U PTF=1.000
+ XTF=1.000 VTF=2.000 ITF=0.600
+ XTB=2.000 EG=1.125 XTI=5.000
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP953 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP953/INF 1 2 3
Q    4 5 6 BDP953 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP953 PNP (IS=0.800P NF=0.995 BF=250.000 VAF=70.500 IKF=0.700
+ ISE=0.309P NE=2.330 NR=1.000 BR=44.000 VAR=7.840 IKR=1.000
+ ISC=0.200P NC=1.079
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=50.000M RC=59.947M
+ CJE=0.390N VJE=0.921 MJE=0.430 FC=0.500
+ CJC=0.139N VJC=0.775 MJC=0.490 XCJC=0.720
+ TF=0.730N TR=0.100U PTF=1.000
+ XTF=1.000 VTF=2.000 ITF=0.600
+ XTB=2.000 EG=1.125 XTI=5.000
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP954 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP954/INF 1 2 3
Q    4 5 6 BDP954 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP954 PNP (IS=0.800P NF=0.995 BF=250.000 VAF=70.500 IKF=0.700
+ ISE=0.309P NE=2.330 NR=1.000 BR=44.000 VAR=7.840 IKR=1.000
+ ISC=0.200P NC=1.079
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=50.000M RC=59.947M
+ CJE=0.390N VJE=0.921 MJE=0.430 FC=0.500
+ CJC=0.139N VJC=0.775 MJC=0.490 XCJC=0.720
+ TF=0.730N TR=0.100U PTF=1.000
+ XTF=1.000 VTF=2.000 ITF=0.600
+ XTB=2.000 EG=1.125 XTI=5.000
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP955 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP955/INF 1 2 3
Q    4 5 6 BDP955 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP955 PNP (IS=0.800P NF=0.995 BF=250.000 VAF=70.500 IKF=0.700
+ ISE=0.309P NE=2.330 NR=1.000 BR=44.000 VAR=7.840 IKR=1.000
+ ISC=0.200P NC=1.079
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=50.000M RC=59.947M
+ CJE=0.390N VJE=0.921 MJE=0.430 FC=0.500
+ CJC=0.139N VJC=0.775 MJC=0.490 XCJC=0.720
+ TF=0.730N TR=0.100U PTF=1.000
+ XTF=1.000 VTF=2.000 ITF=0.600
+ XTB=2.000 EG=1.125 XTI=5.000
+ KF=1.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP956 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP956/INF 1 2 3
Q    4 5 6 BDP956 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
.MODEL BDP956 PNP (IS=0.800P NF=0.995 BF=250.000 VAF=70.500 IKF=0.700
+ ISE=0.309P NE=2.330 NR=1.000 BR=44.000 VAR=7.840 IKR=1.000
+ ISC=0.200P NC=1.079
+ RB=0.250 IRB=10.000M RBM=0.200
+ RE=50.000M RC=59.947M
+ CJE=0.390N VJE=0.921 MJE=0.430 FC=0.500
+ CJC=0.139N VJC=0.775 MJC=0.490 XCJC=0.720
+ TF=0.730N TR=0.100U PTF=1.000
+ XTF=1.000 VTF=2.000 ITF=0.600
+ XTB=2.000 EG=1.125 XTI=5.000
+ KF=1.000F AF=1.000)
*$
.MODEL BF420/INF NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF421/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF422/INF NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01 
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF423/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BF517 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BF517/INF 1 2 3
Q    6 5 7 BF517 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BF517 NPN (IS=0.480F NF=1.008 BF=99.655 VAF=90.000 IKF=0.190
+ ISE=7.490F NE=1.762 NR=1.010 BR=38.400 VAR=7.000 IKR=93.200M
+ ISC=0.200F NC=1.042
+ RB=1.500 IRB=0.100M RBM=1.200
+ RE=0.500 RC=2.680
+ CJE=1.325P VJE=0.700 MJE=0.220 FC=0.890
+ CJC=1.050P VJC=0.610 MJC=0.240 XCJC=0.400
+ TF=56.940P TR=1.000N PTF=21.000
+ XTF=68.398 VTF=0.600 ITF=0.700
+ XTB=1.600 EG=1.110 XTI=3.000
+ KF=1.000F AF=1.000)
*****************************************************************
*$
.MODEL BF603/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF622/INF NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF623/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF720/INF NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00 
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF721/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF722/INF NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF723/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF775A/INF NPN(
+ BF = 312  BR = 1  NF = 0.97  NE = 2.6  NR = 1  NC = 2
+ IS = 2.2E-016  ISE = 2.1E-015  ISC = 1E-017  IKR = 0.5
+ XTI = 3  IKF = 0.02  RE = 0.9  RC = 3.2 RBM = 2.2
+ RB = 26  IRB = 0.25  TR = 0  TF = 0  ITF = 0
+ XTF = 0  VTF = 1E+030  FC = 0.5  VJE = 0.85  MJE = 0.33
+ CJE = 2.5E-012  XCJC = 0.3  CJC = 1E-014  VJC = 0.75
+ MJC = 0.33  XTB = 0  VAF = 36  VAR = 60)
*$
*****************************************************************
.MODEL BF799/INF NPN(
+       AF= 1.00E+00    BF= 1.39E+02    BR= 1.00E-02   CJC= 2.37E-12
+      CJE= 3.85E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 7.64E-01
+      IKF= 2.34E-01   IKR= 1.00E+00   IRB= 2.25E-04    IS= 9.72E-16
+      ISC= 1.00E-13   ISE= 2.26E-13   ITF= 4.64E-01    KF= 0.00E+00
+      MJC= 2.40E-01   MJE= 2.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.75E+00    NF= 9.94E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 1.56E+00    RE= 3.22E-02
+       TF= 1.37E-10    TR= 0.00E+00   VAF= 6.40E+01   VAR= 1.29E+01
+      VJC= 3.00E-01   VJE= 4.75E-01   VJS= 7.50E-01   VTF= 3.43E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.SUBCKT BFG135A/INF 200 100 300
L1    1   10    1.02nH 
L2    2   20    1.01nH 
L3    3   30    0.67nH 
C1   10   20    8fF         
C2   20   30    311fF 
C3   30   10    190fF 
C4    1    3    95fF
C5    2    3    228fF
L4   10  100    0.9nH 
L5   20  200    0.25nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG135A 
.ENDS
.MODEL BFG135A NPN(
+ IS = 9.6952e-15     BF = 86.665       NF = 0.46449
+ VAF = 33.548        IKF = 1.9049      ISE = 3.7545e-15
+ NE = 0.74837        BR = 61.012       NR = 1.1471
+ VAR = 45.693        IKR = 0.019155    ISC = 4.5491e-18
+ NC = 1.2809         RBM = 0           IRB = 0.00020816
+ RB = 1.0193         RE = 1.4768       RC = 0.075508
+ CJE = 3.2968e-14    VJE = 0.87721     MJE = 0.51738
+ TF = 4.2719e-11     XTF = 0.26853     VTF = 0.11783
+ ITF = 0.0047293     PTF = 0           CJC = 2.9998e-12
+ VJC = 1.0086        MJC = 0.39102     XCJC = 0.020778
+ TR = 1.3578e-10     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.56371)
***************************************************************
*$
.SUBCKT BFG193/INF 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG193
.ENDS
.MODEL BFG193 NPN(
+ IS = 2.738e-16      BF = 125          NF = 0.95341
+ VAF = 24            IKF = 0.26949     ISE = 1.0627e-14
+ NE = 1.935          BR = 14.267       NR = 1.4289
+ VAR = 3.8742        IKR = 0.037925    ISC = 3.7409e-17
+ NC = 0.94371        RBM = 1           IRB = 0.00091763
+ RB = 1.8368         RE = 0.76534      RC = 0.11938
+ CJE = 1.1824e-15    VJE = 0.70276     MJE = 0.48654
+ TF = 1.8828e-11     XTF = 0.69477     VTF = 0.8
+ ITF = 0.00096893    PTF = 0           CJC = 9.3503e-13
+ VJC = 1.1828        MJC = 0.30002     XCJC = 0.053563
+ TR = 1.0037e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.72063)
***************************************************************
*$
.SUBCKT BFG194/INF 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG194
.ENDS
.MODEL BFG194 PNP(
+ IS = 4.574e-15      BF = 111.78       NF = 0.66503
+ VAF = 9.1007        IKF = 0.84785     ISE = 2.1629e-14
+ NE = 0.841          BR = 92.296       NR = 0.43618
+ VAR = 1.7871        IKR = 0.012843    ISC = 7.8447e-18
+ NC = 1.6            RBM = 0.75304     IRB = 6.1674e-05
+ RB = 4.1356         RE = 0.15908      RC = 0.10833
+ CJE = 1.7699e-14    VJE = 0.84843     MJE = 0.48212
+ TF = 5.311e-11      XTF = 0.65766     VTF = 0.10323
+ ITF = 0.010453      PTF = 0           CJC = 3.5856e-12
+ VJC = 0.71631       MJC = 0.40003     XCJC = 0.063742
+ TR = 9.7481e-10     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.90755)
***************************************************************
*$
.SUBCKT BFG196/INF 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG196
.ENDS
.MODEL BFG196 NPN(
+ IS = 1.7264e-15     BF = 125          NF = 0.80012
+ VAF = 20            IKF = 0.4294      ISE = 1.1922e-13
+ NE = 1.1766         BR = 10.584       NR = 0.94288
+ VAR = 3.8128        IKR = 0.019511    ISC = 4.8666e-15
+ NC = 0.88299        RB = 1.2907       IRB = 8.4011e-05
+ RBM = 1             RE = 0.75103      RC = 0.27137
+ CJE = 1.3325e-14    VJE = 0.7308      MJE = 0.33018
+ TF = 2.3994e-11     XTF = 0.44322     VTF = 0.1
+ ITF = 0.0019775     PTF = 0           CJC = 1.667e-12
+ VJC = 0.73057       MJC = 0.3289      XCJC = 0.29998
+ TR = 2.2413e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.50922)
***************************************************************
*$
.SUBCKT BFG19S/INF 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3  BFG19S
.ENDS
.MODEL BFG19S NPN(
+ IS = 1.8998e-15     BF = 132.75       NF = 0.89608
+ VAF = 15            IKF = 0.44125     ISE = 7.1424e-14
+ NE = 1.3235         BR = 11.407       NR = 0.91008
+ VAR = 4.1613        IKR = 0.010016    ISC = 2.0992e-15
+ NC = 1.4602         RB = 1.2652       IRB = 2.8135e-05
+ RBM = 1.0893        RE = 1.1351       RC = 0.27485
+ CJE = 5.0933e-15    VJE = 0.85909     MJE = 0.69062
+ TF = 3.5786e-11     XTF = 0.44444     VTF = 0.10681
+ ITF = 0.062059      PTF = 0           CJC = 2.3278e-12
+ VJC = 0.81533       MJC = 0.46849     XCJC = 0.14496
+ TR = 1.2466e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.92887)
***************************************************************
*$
.SUBCKT BFG235/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
*              C B E            TWO CHIPS IN PARALLEL
Q1  2 1 3  T236
Q1b  2 1 3  T236
.MODEL T236 NPN(
+ IS = 9.6952e-15     BF = 86.665       NF = 0.46449
+ VAF = 33.548        IKF = 1.9049      ISE = 3.7545e-15
+ NE = 0.74837        BR = 61.012       NR = 1.1471
+ VAR = 45.693        IKR = 0.019155    ISC = 4.5491e-18
+ NC = 1.2809         RBM = 0           IRB = 0.00020816
+ RB = 1.0193         RE = 1.4768       RC = 0.075508
+ CJE = 3.2968e-14    VJE = 0.87721     MJE = 0.51738 
+ TF = 4.2719e-11     XTF = 0.26853     VTF = 0.11783
+ ITF = 0.0047293     PTF = 0           CJC = 2.9998e-12
+ VJC = 1.0086        MJC = 0.39102     XCJC = 0.020778
+ TR = 1.3578e-10     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.56371)
.ENDS
***************************************************************
*$
.MODEL BFN16/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN17/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN18/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN19/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN21/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00 
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN22/INF NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN23/INF PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN24/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN25/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN26/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN27/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN36/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN37/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN39/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.SUBCKT BFP136W/INF 200 100 300
L1    1   10    0.5nH 
L2    2   20    0.05nH 
L3    3   30    0.18nH 
C1   10   20    48fF         
C2   20   30    244fF 
C3   30   10    78fF 
L4   10  100    0.51nH 
L5   20  200    0.35nH 
L6   30  300    0.14nH 
Q1   2 1 3 BFP136W 
.ENDS
.MODEL BFP136W NPN(
+ IS = 1.5813e-15     BF = 113.32       NF = 1.0653
+ VAF = 12.331        IKF = 1.4907      ISE = 4.637e-14
+ NE = 1.4254         BR = 86.718       NR = 1.8047
+ VAR = 31.901        IKR = 0.033605    ISC = 8.0864e-18
+ NC = 1.8821         RBM = 0           IRB = 0.00083992
+ RB = 1.0078         RE = 0.22081      RC = 0.01636
+ CJE = 3.3904e-14    VJE = 0.71518     MJE = 0.36824
+ TF = 2.0691e-11     XTF = 0.31338     VTF = 0.10174
+ ITF = 0.0045579     PTF = 0           CJC = 2.9774e-12
+ VJC = 1.1381        MJC = 0.31461     XCJC = 0.02899
+ TR = 1.0033e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11 + XTI = 3  FC = 0.99886)
***************************************************************
*$
.SUBCKT BFP180/INF 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP180
.ENDS
.MODEL BFP180 NPN(
+ IS = 1.8519e-16     BF = 94.687       NF = 1.0236
+ VAF = 26.867        IKF = 0.025252    ISE = 1.3093e-13
+ NE = 1.9818         BR = 20.325       NR = 0.93013
+ VAR = 3.2134        IKR = 0.012138    ISC = 6.1852e-15
+ NC = 1.6195         RBM = 1.4255      IRB = 1e-05
+ RB = 60             RE = 3.7045       RC = 0.56
+ CJE = 3.2473e-15    VJE = 1.1812      MJE = 0.41827
+ TF = 1.4866e-11     XTF = 0.3062      VTF = 0.22023
+ ITF = 0.0010202     PTF = 0           CJC = 1.8369e-13
+ VJC = 1.1812        MJC = 0.30423     XCJC = 0.08334
+ TR = 2.2648e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.87906)
***************************************************************
*$
.SUBCKT BFP180W/INF 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP180W 
.ENDS
.MODEL BFP180W NPN(
+ IS = 1.8519e-16     BF = 94.687       NF = 1.0236
+ VAF = 26.867        IKF = 0.025252    ISE = 1.3093e-13
+ NE = 1.9818         BR = 20.325       NR = 0.93013
+ VAR = 3.2134        IKR = 0.012138    ISC = 6.1852e-15
+ NC = 1.6195         RBM = 1.4255      IRB = 1e-05
+ RB = 60             RE = 3.7045       RC = 0.56
+ CJE = 3.2473e-15    VJE = 1.1812      MJE = 0.41827
+ TF = 1.4866e-11     XTF = 0.3062      VTF = 0.22023
+ ITF = 0.0010202     PTF = 0           CJC = 1.8369e-13
+ VJC = 1.1812        MJC = 0.30423     XCJC = 0.08334
+ TR = 2.2648e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.87906)
***************************************************************
*$
.SUBCKT BFP181/INF 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP181
.ENDS .MODEL BFP181 NPN(
+ IS = 1.0519e-18     BF = 96.461       NF = 0.90617
+ VAF = 22.403        IKF = 0.12146     ISE = 1.2603e-14
+ NE = 1.7631         BR = 16.504       NR = 0.87757
+ VAR = 5.1127        IKR = 0.24951     ISC = 1.1195e-17
+ NC = 1.6528         RB = 9.9037       IRB = 0.00069278
+ RBM = 6.6315        RE = 2.1372       RC = 2.2171
+ CJE = 1.8168e-15    VJE = 0.73155     MJE = 0.43619
+ TF = 1.7028e-11     XTF = 0.33814     VTF = 0.12571
+ ITF = 0.0010549     PTF = 0           CJC = 3.1969e-13
+ VJC = 1.1633        MJC = 0.30013     XCJC = 0.082903
+ TR = 2.7449e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99768)
***************************************************************
*$
.SUBCKT BFP181W/INF 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP181W 
.ENDS
.MODEL BFP181W NPN(
+ IS = 1.0519e-18     BF = 96.461       NF = 0.90617
+ VAF = 22.403        IKF = 0.12146     ISE = 1.2603e-14
+ NE = 1.7631         BR = 16.504       NR = 0.87757
+ VAR = 5.1127        IKR = 0.24951     ISC = 1.1195e-17
+ NC = 1.6528         RB = 9.9037       IRB = 0.00069278
+ RBM = 6.6315        RE = 2.1372       RC = 2.2171
+ CJE = 1.8168e-15    VJE = 0.73155     MJE = 0.43619
+ TF = 1.7028e-11     XTF = 0.33814     VTF = 0.12571
+ ITF = 0.0010549     PTF = 0           CJC = 3.1969e-13
+ VJC = 1.1633        MJC = 0.30013     XCJC = 0.082903
+ TR = 2.7449e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99768)
***************************************************************
*$
.SUBCKT BFP182/INF 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP182
.ENDS
.MODEL BFP182 NPN(
+ IS = 4.8499e-15     BF = 84.113       NF = 0.56639
+ VAF = 21.742        IKF = 0.14414     ISE = 8.4254e-15
+ NE = 0.91624        BR = 10.004       NR = 0.54818
+ VAR = 2.2595        IKR = 0.039478    ISC = 5.9438e-15
+ NC = 0.5641         RBM = 2.8263      IRB = 7.1955e-05
+ RB = 3.4217         RE = 2.1858       RC = 1.8159
+ CJE = 8.8619e-15    VJE = 1.0378      MJE = 0.40796
+ TF = 2.272e-11      XTF = 0.43147     VTF = 0.34608
+ ITF = 0.0065523     PTF = 0           CJC = 4.9025e-13
+ VJC = 1.0132        MJC = 0.31068     XCJC = 0.19281
+ TR = 1.7541e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.64175)
***************************************************************
*$
.SUBCKT BFP182W/INF 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP182W 
.ENDS
.MODEL BFP182W NPN(
+ IS = 4.8499e-15     BF = 84.113       NF = 0.56639
+ VAF = 21.742        IKF = 0.14414     ISE = 8.4254e-15
+ NE = 0.91624        BR = 10.004       NR = 0.54818
+ VAR = 2.2595        IKR = 0.039478    ISC = 5.9438e-15
+ NC = 0.5641         RBM = 2.8263      IRB = 7.1955e-05
+ RB = 3.4217         RE = 2.1858       RC = 1.8159
+ CJE = 8.8619e-15    VJE = 1.0378      MJE = 0.40796
+ TF = 2.272e-11      XTF = 0.43147     VTF = 0.34608
+ ITF = 0.0065523     PTF = 0           CJC = 4.9025e-13
+ VJC = 1.0132        MJC = 0.31068     XCJC = 0.19281
+ TR = 1.7541e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.64175)
***************************************************************
*$
.MODEL BFP183/INF NPN(
+ IS = 1.0345e-15     BF = 115.98       NF = 0.80799
+ VAF = 14.772        IKF = 0.14562     ISE = 1.6818e-14
+ NE = 1.2149         BR = 10.016       NR = 0.99543
+ VAR = 3.4276        IKR = 0.013483    ISC = 1.3559e-15
+ NC = 0.85331        RBM = 1.0112      IRB = 0.00043801
+ RB = 2.5426         RE = 1.3435       RC = 0.20486
+ CJE = 2.3077e-14    VJE = 1.0792      MJE = 0.45354
+ TF = 2.2746e-11     XTF = 0.36823     VTF = 0.50905
+ ITF = 0.0018773     PTF = 0           CJC = 4.6011e-13
+ VJC = 1.1967        MJC = 0.3         XCJC = 0.053823
+ TR = 1.0553e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.54852)
***************************************************************
*$
.SUBCKT BFP183W/INF 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP183W 
.ENDS
.MODEL BFP183W NPN(
+ IS = 1.0345e-15     BF = 115.98       NF = 0.80799
+ VAF = 14.772        IKF = 0.14562     ISE = 1.6818e-14
+ NE = 1.2149         BR = 10.016       NR = 0.99543
+ VAR = 3.4276        IKR = 0.013483    ISC = 1.3559e-15
+ NC = 0.85331        RBM = 1.0112      IRB = 0.00043801
+ RB = 2.5426         RE = 1.3435       RC = 0.20486
+ CJE = 2.3077e-14    VJE = 1.0792      MJE = 0.45354
+ TF = 2.2746e-11     XTF = 0.36823     VTF = 0.50905
+ ITF = 0.0018773     PTF = 0           CJC = 4.6011e-13
+ VJC = 1.1967        MJC = 0.3         XCJC = 0.053823
+ TR = 1.0553e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.54852)
***************************************************************
*$
.SUBCKT BFP193/INF 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP193 
.ENDS
.MODEL BFP193 NPN(
+ IS = 2.738e-16      BF = 125          NF = 0.95341
+ VAF = 24            IKF = 0.26949     ISE = 1.0627e-14
+ NE = 1.935          BR = 14.267       NR = 1.4289
+ VAR = 3.8742        IKR = 0.037925    ISC = 3.7409e-17
+ NC = 0.94371        RBM = 1           IRB = 0.00091763
+ RB = 1.8368         RE = 0.76534      RC = 0.11938
+ CJE = 1.1824e-15    VJE = 0.70276     MJE = 0.48654
+ TF = 1.8828e-11     XTF = 0.69477     VTF = 0.8
+ ITF = 0.00096893    PTF = 0           CJC = 9.3503e-13
+ VJC = 1.1828        MJC = 0.30002     XCJC = 0.053563
+ TR = 1.0037e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.72063)
***************************************************************
*$
.SUBCKT BFP193W/INF 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP193W 
.ENDS
.MODEL BFP193W NPN(
+ IS = 2.738e-16      BF = 125          NF = 0.95341
+ VAF = 24            IKF = 0.26949     ISE = 1.0627e-14
+ NE = 1.935          BR = 14.267       NR = 1.4289
+ VAR = 3.8742        IKR = 0.037925    ISC = 3.7409e-17
+ NC = 0.94371        RBM = 1           IRB = 0.00091763
+ RB = 1.8368         RE = 0.76534      RC = 0.11938
+ CJE = 1.1824e-15    VJE = 0.70276     MJE = 0.48654
+ TF = 1.8828e-11     XTF = 0.69477     VTF = 0.8
+ ITF = 0.00096893    PTF = 0           CJC = 9.3503e-13
+ VJC = 1.1828        MJC = 0.30002     XCJC = 0.053563
+ TR = 1.0037e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11 + XTI = 3  FC = 0.72063)
***************************************************************
*$
.SUBCKT BFP194/INF 200 100 300
L1    1   10    0.84nH 
L2    2   20    0.07nH 
L3    3   30    0.31nH 
C1   10   20    19fF 
C2   20   30    281fF 
C3   30   10    145fF 
L4   10  100    0.65nH 
L5   20  200    0.42nH 
L6   30  300    0.14nH 
Q1   2 1 3 BFP194
.ENDS
.MODEL BFP194 PNP(
+ IS = 4.574e-15      BF = 111.78       NF = 0.66503
+ VAF = 9.1007        IKF = 0.84785     ISE = 2.1629e-14
+ NE = 0.841          BR = 92.296       NR = 0.43618
+ VAR = 1.7871        IKR = 0.012843    ISC = 7.8447e-18
+ NC = 1.6            RBM = 0.75304     IRB = 6.1674e-05
+ RB = 4.1356         RE = 0.15908      RC = 0.10833
+ CJE = 1.7699e-14    VJE = 0.84843     MJE = 0.48212
+ TF = 5.311e-11      XTF = 0.65766     VTF = 0.10323
+ ITF = 0.010453      PTF = 0           CJC = 3.5856e-12
+ VJC = 0.71631       MJC = 0.40003     XCJC = 0.063742
+ TR = 9.7481e-10     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.90755)
***************************************************************
*$
.SUBCKT BFP196/INF 200 100 300
L1    1   10    0.84nH 
L2    2   20    0.07nH 
L3    3   30    0.31nH 
C1   10   20    19fF 
C2   20   30    281fF 
C3   30   10    145fF 
L4   10  100    0.65nH 
L5   20  200    0.42nH 
L6   30  300    0.14nH 
Q1   2 1 3 BFP196
.ENDS
.MODEL BFP196 NPN(
+ IS = 1.7264e-15     BF = 125          NF = 0.80012
+ VAF = 20            IKF = 0.4294      ISE = 1.1922e-13
+ NE = 1.1766         BR = 10.584       NR = 0.94288
+ VAR = 3.8128        IKR = 0.019511    ISC = 4.8666e-15
+ NC = 0.88299        RB = 1.2907       IRB = 8.4011e-05
+ RBM = 1             RE = 0.75103      RC = 0.27137
+ CJE = 1.3325e-14    VJE = 0.7308      MJE = 0.33018
+ TF = 2.3994e-11     XTF = 0.44322     VTF = 0.1
+ ITF = 0.0019775     PTF = 0           CJC = 1.667e-12
+ VJC = 0.73057       MJC = 0.3289      XCJC = 0.29998
+ TR = 2.2413e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.50922)
***************************************************************
*$
.SUBCKT BFP196W/INF 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP196W 
.ENDS
.MODEL BFP196W NPN(
+ IS = 1.7264e-15     BF = 125          NF = 0.80012
+ VAF = 20            IKF = 0.4294      ISE = 1.1922e-13
+ NE = 1.1766         BR = 10.584       NR = 0.94288
+ VAR = 3.8128        IKR = 0.019511    ISC = 4.8666e-15
+ NC = 0.88299        RB = 1.2907       IRB = 8.4011e-05
+ RBM = 1             RE = 0.75103      RC = 0.27137
+ CJE = 1.3325e-14    VJE = 0.7308      MJE = 0.33018
+ TF = 2.3994e-11     XTF = 0.44322     VTF = 0.1
+ ITF = 0.0019775     PTF = 0           CJC = 1.667e-12
+ VJC = 0.73057       MJC = 0.3289      XCJC = 0.29998
+ TR = 2.2413e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.50922)
***************************************************************
*$
.MODEL BFP22/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFP23/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFP25/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFP26/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02 
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.SUBCKT BFP280/INF 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP280
.ENDS
.MODEL BFP280 NPN(
+ IS = 6.472e-15      BF = 89.888       NF = 1.0801
+ VAF = 25.609        IKF = 0.073457    ISE = 1.5596e-14
+ NE = 1.6163         BR = 20.238       NR = 0.83403
+ VAR = 5.6909        IKR = 0.012696    ISC = 1.409e-15
+ NC = 1.0651         RB = 15           IRB = 3.1958e-05
+ RBM = 14.999        RE = 2.4518       RC = 6.989
+ CJE = 3.6218e-14    VJE = 0.70035     MJE = 0.69773
+ TF = 1.1744e-11     XTF = 0.21585     VTF = 0.2035
+ ITF = 0.0062179     PTF = 0           CJC = 2.5299e-13
+ VJC = 1.1943        MJC = 0.30017     XCJC = 0.19188
+ TR = 2.3693e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.96275)
***************************************************************
*$
.SUBCKT BFP280W/INF 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP280W 
.ENDS
.MODEL BFP280W NPN(
+ IS = 6.472e-15      BF = 89.888       NF = 1.0801
+ VAF = 25.609        IKF = 0.073457    ISE = 1.5596e-14
+ NE = 1.6163         BR = 20.238       NR = 0.83403
+ VAR = 5.6909        IKR = 0.012696    ISC = 1.409e-15
+ NC = 1.0651         RB = 15           IRB = 3.1958e-05
+ RBM = 14.999        RE = 2.4518       RC = 6.989
+ CJE = 3.6218e-14    VJE = 0.70035     MJE = 0.69773
+ TF = 1.1744e-11     XTF = 0.21585     VTF = 0.2035
+ ITF = 0.0062179     PTF = 0           CJC = 2.5299e-13
+ VJC = 1.1943        MJC = 0.30017     XCJC = 0.19188
+ TR = 2.3693e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.96275)
***************************************************************
*$
.SUBCKT BFP405/INF 200 100 300
L1    1   10    0.47nH 
L2    2   20    0.56nH 
L3    3   30    0.23nH 
C1   10   20    6.9fF         
C2   20   30    134fF 
C3   30   10    136fF 
L4   10  100    0.53nH 
L5   20  200    0.58nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP405
.ENDS
.MODEL BFP405 NPN(
+ IS = 2.1024e-16     BF = 83.23        NF = 1.0405
+ VAF = 39.251        IKF = 0.16493     ISE = 1.5761e-14
+ NE = 1.7763         BR = 10.526       NR = 0.96647
+ VAR = 34.368        IKR = 0.25052     ISC = 3.7223e-17
+ NC = 1.3152         RB = 15           IRB = 0.00021215
+ RBM = 1.3491        RE = 1.9289       RC = 0.12691
+ CJE = 3.7265e-15    VJE = 0.70367     MJE = 0.37747
+ TF = 4.5899e-12     XTF = 0.3641      VTF = 0.19762
+ ITF = 0.0013364     PTF = 0           CJC = 9.6941e-14
+ VJC = 0.99532       MJC = 0.48652     XCJC = 0.08161
+ TR = 1.4935e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99469)
***************************************************************
*$
.SUBCKT BFP420/INF 200 100 300
L1    1   10    0.47nH 
L2    2   20    0.56nH 
L3    3   30    0.23nH 
C1   10   20    6.9fF         
C2   20   30    134fF 
C3   30   10    136fF 
L4   10  100    0.53nH 
L5   20  200    0.58nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP420
.ENDS
.MODEL BFP420 NPN(
+ IS = 2.0045e-16     BF = 72.534       NF = 1.2432
+ VAF = 28.383        IKF = 0.48731     ISE = 1.9049e-14
+ NE = 2.0518         BR = 7.8287       NR = 1.3325
+ VAR = 19.705        IKR = 0.69141     ISC = 1.9237e-17
+ NC = 1.1724         RBM = 3.4849      IRB = 0.00072983
+ RB = 8.5757         RE = 0.31111      RC = 0.10105
+ CJE = 1.8063e-15    VJE = 0.8051      MJE = 0.46576
+ TF = 6.7661e-12     XTF = 0.42199     VTF = 0.23794
+ ITF = 0.001         PTF = 0           CJC = 2.3453e-13
+ VJC = 0.81969       MJC = 0.30232     XCJC = 0.3
+ TR = 2.3249e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.73234)
***************************************************************
*$
.SUBCKT BFP450/INF 200 100 300
L1    1   10    0.31nH 
L2    2   20    0.29nH 
L3    3   30    0.20nH 
C1   10   20    3.2fF         
C2   20   30    213fF 
C3   30   10    208fF 
L4   10  100    0.63nH 
L5   20  200    0.68nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP450
.ENDS
.MODEL BFP450 NPN(
+ IS = 1.3125e-16     BF = 76.123       NF = 0.79652
+ VAF = 24.165        IKF = 0.58905     ISE = 2.8341e-14
+ NE = 1.5563         BR = 21.254       NR = 1.2966
+ VAR = 13.461        IKR = 0.25878     ISC = 1.2292e-17
+ NC = 0.70543        RBM = 2.1659      IRB = 1.3181e-05
+ RB = 5.403          RE = 0.45346      RC = 0.50084
+ CJE = 3.2276e-15    VJE = 0.95292     MJE = 0.48672
+ TF = 7.5068e-12     XTF = 0.69972     VTF = 0.66148
+ ITF = 1.7655e-05    PTF = 0           CJC = 1.0495e-12
+ VJC = 1.1487        MJC = 0.50644     XCJC = 0.28285
+ TR = 2.6912e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.91274)
***************************************************************
*$
.SUBCKT BFP490/INF 200 100 300
L1    1   10    0.85nH       ; LBI
L2    2   20    0.39nH       ; LCI
L3    3   30    0.15nH       ; LEI
C1   10   20    2.2fF        ; CCB
C2   20   30    500fF        ; CCE
C3   30   10    150fF        ; CBE
L4   10  100    0.3nH        ; LBO
L5   20  200    0.2nH        ; LCO
L6   30  300    0.04nH       ; LEO
Q1   2 1 3 BFP490
.ENDS
.MODEL BFP490 NPN(
+ IS = 4.5104e-16     BF = 114.96       NF = 1.1472
+ VAF = 24.664        IKF = 0.76939     ISE = 1.591e-12
+ NE = 1.9962         BR = 21.04        NR = 1.3531
+ VAR = 16.035        IKR = 0.090033    ISC = 3.7479e-15
+ NC = 1.339          RBM = 1.0754      IRB = 0.00017683
+ RB = 2.1262         RE = 0.32476      RC = 0.10737
+ CJE = 1.227e-15     VJE = 0.93266     MJE = 0.36885
+ TF = 3.9147e-12     XTF = 0.61664     VTF = 0.27348
+ ITF = 0.0032793     PTF = 0           CJC = 6.1521e-12
+ VJC = 0.9832        MJC = 0.34153     XCJC = 0.3
+ TR = 1.115e-09      CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.75835)
***************************************************************
*$
.SUBCKT BFP520/INF 200 100 300
L1    1   10    0.47nH 
L2    2   20    0.56nH 
L3    3   30    0.23nH 
C1   10   20    6.9fF         
C2   20   30    134fF 
C3   30   10    136fF 
L4   10  100    0.53nH 
L5   20  200    0.58nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP520
.ENDS
.MODEL BFP520 NPN(
+ IS =1.5E-17      NF =1            NR =1        
+ ISE=2.5E-14      NE =2            ISC=2E-14
+ NC =2            BF =235          BR =1.5
+ VAF=25           VAR=2            IKF=0.4
+ IKR=0.01         RB =11           RBM=7.5
+ RE =0.6          RC =7.6          CJE=2.35E-13
+ VJE=0.958        MJE=0.335        CJC=9.3E-14
+ VJC=0.661        MJC=0.236        CJS=0
+ VJS=0.75         MJS=0.333        FC=0.5
+ XCJC=1           TF=1.7E-12       TR=5E-08
+ XTF=10           ITF=0.7          VTF=5
+ PTF=50           XTB=-0.25        XTI=0.035
+ EG=1.11)
***************************************************************
*$
.SUBCKT BFP81/INF 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP81
.ENDS
.MODEL BFP81 NPN(
+ IS = 1.703e-14      BF = 110          NF = 0.80846
+ VAF = 35            IKF = 0.22241     ISE = 5.8728e-15
+ NE = 1.0668         BR = 25.974       NR = 0.36321
+ VAR = 2.3785        IKR = 0.011566    ISC = 1.6977e-13
+ NC = 1.2237         RB = 5.7058       IRB = 0.00011894
+ RBM = 1.5489        RE = 1.1731       RC = 0.3715
+ CJE = 3.3977e-14    VJE = 0.4318      MJE = 1.7707
+ TF = 2.1842e-11     XTF = 0.26781     VTF = 0.48042
+ ITF = 0.014701      PTF = 0           CJC = 6.9381e-13
+ VJC = 0.26339       MJC = 0.24448     XCJC = 0.1254
+ TR = 1.2554e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.74346)
***************************************************************
*$
.SUBCKT BFP93A/INF 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP93A 
.ENDS
.MODEL BFP93A NPN(
+ IS = 8.6752e-15     BF = 137.63       NF = 0.93633
+ VAF = 20.011        IKF = 0.33395     ISE = 2.6193e-12
+ NE = 1.5466         BR = 59           NR = 0.88761
+ VAR = 26.834        IKR = 0.015129    ISC = 7.0823e-16
+ NC = 1.95           RB = 7.2326       IRB = 4.3806e-05
+ RBM = 3.4649        RE = 1.0075       RC = 0.13193
+ CJE = 3.1538e-15    VJE = 0.70393     MJE = 0.5071
+ TF = 3.3388e-11     XTF = 0.28319     VTF = 0.17765
+ ITF = 0.0025184     PTF = 0           CJC = 1.0395e-12
+ VJC = 0.72744       MJC = 0.34565     XCJC = 0.21422
+ TR = 1.1061e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.75935)
**************************************************************
*$
.MODEL BFQ74/INF NPN(
+ BF = 312  BR = 1  NF = 0.97  NE = 2.6  NR = 1  NC = 2
+ IS = 2.2E-016  ISE = 2.1E-015  ISC = 1E-017  IKR = 0.5
+ XTI = 3  IKF = 0.02  RE = 0.9  RC = 3.2 RBM = 2.2
+ RB = 26  IRB = 0.25  TR = 0  TF = 0  ITF = 0
+ XTF = 0  VTF = 1E+030  FC = 0.5  VJE = 0.85  MJE = 0.33
+ CJE = 2.5E-012  XCJC = 0.3  CJC = 1E-014  VJC = 0.75
+ MJC = 0.33  XTB = 0  VAF = 36  VAR = 60)
*$
*****************************************************************
.SUBCKT BFQ81/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFQ81
.ENDS
.MODEL BFQ81 NPN(
+ IS = 1.703e-14      BF = 110          NF = 0.80846
+ VAF = 35            IKF = 0.22241     ISE = 5.8728e-15
+ NE = 1.0668         BR = 25.974       NR = 0.36321
+ VAR = 2.3785        IKR = 0.011566    ISC = 1.6977e-13
+ NC = 1.2237         RB = 5.7058       IRB = 0.00011894
+ RBM = 1.5489        RE = 1.1731       RC = 0.3715
+ CJE = 3.3977e-14    VJE = 0.4318      MJE = 1.7707
+ TF = 2.1842e-11     XTF = 0.26781     VTF = 0.48042
+ ITF = 0.014701      PTF = 0           CJC = 6.9381e-13
+ VJC = 0.26339       MJC = 0.24448     XCJC = 0.1254
+ TR = 1.2554e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.74346)
***************************************************************
*$
.MODEL BFQ82/INF NPN(
+ BF = 100  BR = 1  NF = 0.96  NE = 2.43  NR = 1  NC = 2  VAF = 41
+ IS = 9.3E-016  ISE = 3.9E-015  ISC = 1E-017  IKR = 0.5  VAR = 217
+ IKF = 0.055  RE = 0.18  RC = 2.8  RBM = 0.82  RB = 29
+ IRB = 0.25  TR = 0  TF = 0  ITF = 0  XTF = 0  VTF = 1E+030
+ FC = 0.5  VJE = 0.85  MJE = 0.33  CJE = 2.4E-011  XCJC = 0.01
+ CJC = 5E-013  VJC = 0.75  MJC = 0.33  XTB = 0  XTI = 3)
*$
*****************************************************************
.MODEL BFQ181/INF NPN(
+ BF = 100  BR = 1 NF = 1 NE = 4.95 NR = 1 NC = 2  VAF = 35
+ IS = 2.8E-016  ISE = 1.3E-014  ISC = 1E-017  IKR = 0.5
+ IKF = 0.018  RE = 1  RC = 4.5  RBM = 1.9 RB = 35.2  VAR = 360
+ IRB = 0.25  TR = 0  TF = 0  ITF = 0  XTF = 0  VTF = 1E+030
+ FC = 0.5  VJE = 0.85  MJE = 0.33  CJE = 1E-012  XCJC = 0.3
+ CJC = 1E-013  VJC = 0.75  MJC = 0.33  XTB = 0  XTI = 3)
*$
*****************************************************************
.MODEL BFQ182/INF NPN(
+ BF = 70.22 BR = 1 NF = 0.9 NE = 1.775 NR = 1 NC = 2 VAF = 32.284
+ IS = 2E-016 ISE = 1.95E-015 ISC = 1E-017 IKR = 0.5 VAR = 3.22
+ IKF = 0.32 RE = 0.45 RC = 2.147 RBM = 0.9 RB = 9 IRB = 0.251
+ TR = 0 TF = 1.11E-11 ITF = 0.1 XTF = 19.761 VTF = 1.705
+ FC = 0.497 VJE = 1.02 MJE = 0.353 CJE = 8.66E-013 XCJC = 0.495
+ CJC = 1.2E-013 VJC = 0.629 MJC = 0.734 XTB = 0 XTI = 2)
*$
*****************************************************************
.MODEL BFQ196/INF NPN(
+ BF = 141  BR = 1  NF = 0.95  NE = 2.17  NR = 1  NC = 2  VAF = 120
+ IS = 1.5E-015  ISE = 5.3E-015  ISC = 1E-017  IKR = 0.5  VAR = 365
+ IKF = 0.067  RE = 0.11  RC = 2.2  RBM = 1.8  RB = 20
+ IRB = 0.25  TR = 0  TF = 0  ITF = 0  XTF = 0  VTF = 1E+030
+ FC = 0.5  VJE = 0.85  MJE = 0.33  CJE = 3E-012  XCJC = 0.9
+ CJC = 1E-013  VJC = 0.75  MJC = 0.33  XTB = 0  XTI = 3)
*$
*****************************************************************
.SUBCKT BFR106/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR106
.ENDS .MODEL BFR106 NPN(
+ IS = 1.8998e-15     BF = 132.75       NF = 0.89608
+ VAF = 15            IKF = 0.44125     ISE = 7.1424e-14
+ NE = 1.3235         BR = 11.407       NR = 0.91008
+ VAR = 4.1613        IKR = 0.010016    ISC = 2.0992e-15
+ NC = 1.4602         RB = 1.2652       IRB = 2.8135e-05
+ RBM = 1.0893        RE = 1.1351       RC = 0.27485
+ CJE = 5.0933e-15    VJE = 0.85909     MJE = 0.69062
+ TF = 3.5786e-11     XTF = 0.44444     VTF = 0.10681
+ ITF = 0.062059      PTF = 0           CJC = 2.3278e-12
+ VJC = 0.81533       MJC = 0.46849     XCJC = 0.14496
+ TR = 1.2466e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.92887)
***************************************************************
*$
.SUBCKT BFR180/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR180
.ENDS
.MODEL BFR180 NPN(
+ IS = 1.8519e-16     BF = 94.687       NF = 1.0236
+ VAF = 26.867        IKF = 0.025252    ISE = 1.3093e-13
+ NE = 1.9818         BR = 20.325       NR = 0.93013
+ VAR = 3.2134        IKR = 0.012138    ISC = 6.1852e-15
+ NC = 1.6195         RBM = 1.4255      IRB = 1e-05
+ RB = 60             RE = 3.7045       RC = 0.56
+ CJE = 3.2473e-15    VJE = 1.1812      MJE = 0.41827
+ TF = 1.4866e-11     XTF = 0.3062      VTF = 0.22023
+ ITF = 0.0010202     PTF = 0           CJC = 1.8369e-13
+ VJC = 1.1812        MJC = 0.30423     XCJC = 0.08334
+ TR = 2.2648e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.87906)
 ***************************************************************
*$
.SUBCKT BFR180W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR180W 
.ENDS
.MODEL BFR180W NPN(
+ IS = 1.8519e-16     BF = 94.687       NF = 1.0236
+ VAF = 26.867        IKF = 0.025252    ISE = 1.3093e-13
+ NE = 1.9818         BR = 20.325       NR = 0.93013
+ VAR = 3.2134        IKR = 0.012138    ISC = 6.1852e-15
+ NC = 1.6195         RBM = 1.4255      IRB = 1e-05
+ RB = 60             RE = 3.7045       RC = 0.56
+ CJE = 3.2473e-15    VJE = 1.1812      MJE = 0.41827
+ TF = 1.4866e-11     XTF = 0.3062      VTF = 0.22023
+ ITF = 0.0010202     PTF = 0           CJC = 1.8369e-13
+ VJC = 1.1812        MJC = 0.30423     XCJC = 0.08334
+ TR = 2.2648e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.87906)
***************************************************************
*$
.SUBCKT BFR181/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR181
.ENDS
.MODEL BFR181 NPN(
+ IS = 1.0519e-18     BF = 96.461       NF = 0.90617
+ VAF = 22.403        IKF = 0.12146     ISE = 1.2603e-14
+ NE = 1.7631         BR = 16.504       NR = 0.87757
+ VAR = 5.1127        IKR = 0.24951     ISC = 1.1195e-17
+ NC = 1.6528         RB = 9.9037       IRB = 0.00069278
+ RBM = 6.6315        RE = 2.1372       RC = 2.2171
+ CJE = 1.8168e-15    VJE = 0.73155     MJE = 0.43619
+ TF = 1.7028e-11     XTF = 0.33814     VTF = 0.12571 
+ ITF = 0.0010549     PTF = 0           CJC = 3.1969e-13
+ VJC = 1.1633        MJC = 0.30013     XCJC = 0.082903
+ TR = 2.7449e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99768)
***************************************************************
*$
.SUBCKT BFR181W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR181W 
.ENDS
.MODEL BFR181W NPN(
+ IS = 1.0519e-18     BF = 96.461       NF = 0.90617
+ VAF = 22.403        IKF = 0.12146     ISE = 1.2603e-14
+ NE = 1.7631         BR = 16.504       NR = 0.87757
+ VAR = 5.1127        IKR = 0.24951     ISC = 1.1195e-17
+ NC = 1.6528         RB = 9.9037       IRB = 0.00069278
+ RBM = 6.6315        RE = 2.1372       RC = 2.2171
+ CJE = 1.8168e-15    VJE = 0.73155     MJE = 0.43619 
+ TF = 1.7028e-11     XTF = 0.33814     VTF = 0.12571
+ ITF = 0.0010549     PTF = 0           CJC = 3.1969e-13
+ VJC = 1.1633        MJC = 0.30013     XCJC = 0.082903
+ TR = 2.7449e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99768)
***************************************************************
*$
.SUBCKT BFR182/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR182
.ENDS
.MODEL BFR182 NPN(
+ IS = 4.8499e-15     BF = 84.113       NF = 0.56639
+ VAF = 21.742        IKF = 0.14414     ISE = 8.4254e-15
+ NE = 0.91624        BR = 10.004       NR = 0.54818
+ VAR = 2.2595        IKR = 0.039478    ISC = 5.9438e-15
+ NC = 0.5641         RBM = 2.8263      IRB = 7.1955e-05
+ RB = 3.4217         RE = 2.1858       RC = 1.8159
+ CJE = 8.8619e-15    VJE = 1.0378      MJE = 0.40796
+ TF = 2.272e-11      XTF = 0.43147     VTF = 0.34608
+ ITF = 0.0065523     PTF = 0           CJC = 4.9025e-13
+ VJC = 1.0132        MJC = 0.31068     XCJC = 0.19281
+ TR = 1.7541e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.64175)
***************************************************************
*$
.SUBCKT BFR182W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR182W 
.ENDS
.MODEL BFR182W NPN(
+ IS = 4.8499e-15     BF = 84.113       NF = 0.56639
+ VAF = 21.742        IKF = 0.14414     ISE = 8.4254e-15
+ NE = 0.91624        BR = 10.004       NR = 0.54818
+ VAR = 2.2595        IKR = 0.039478    ISC = 5.9438e-15
+ NC = 0.5641         RBM = 2.8263      IRB = 7.1955e-05
+ RB = 3.4217         RE = 2.1858       RC = 1.8159
+ CJE = 8.8619e-15    VJE = 1.0378      MJE = 0.40796
+ TF = 2.272e-11      XTF = 0.43147     VTF = 0.34608
+ ITF = 0.0065523     PTF = 0           CJC = 4.9025e-13
+ VJC = 1.0132        MJC = 0.31068     XCJC = 0.19281
+ TR = 1.7541e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.64175)
***************************************************************
*$
.SUBCKT BFR183/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR183 
.ENDS
.MODEL BFR183 NPN(
+ IS = 1.0345e-15     BF = 115.98       NF = 0.80799
+ VAF = 14.772        IKF = 0.14562     ISE = 1.6818e-14
+ NE = 1.2149         BR = 10.016       NR = 0.99543
+ VAR = 3.4276        IKR = 0.013483    ISC = 1.3559e-15
+ NC = 0.85331        RBM = 1.0112      IRB = 0.00043801
+ RB = 2.5426         RE = 1.3435       RC = 0.20486
+ CJE = 2.3077e-14    VJE = 1.0792      MJE = 0.45354
+ TF = 2.2746e-11     XTF = 0.36823     VTF = 0.50905
+ ITF = 0.0018773     PTF = 0           CJC = 4.6011e-13
+ VJC = 1.1967        MJC = 0.3         XCJC = 0.053823
+ TR = 1.0553e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.54852)
***************************************************************
*$
.SUBCKT BFR183W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR183W 
.ENDS
.MODEL BFR183W NPN(
+ IS = 1.0345e-15     BF = 115.98       NF = 0.80799
+ VAF = 14.772        IKF = 0.14562     ISE = 1.6818e-14
+ NE = 1.2149         BR = 10.016       NR = 0.99543
+ VAR = 3.4276        IKR = 0.013483    ISC = 1.3559e-15
+ NC = 0.85331        RBM = 1.0112      IRB = 0.00043801
+ RB = 2.5426         RE = 1.3435       RC = 0.20486
+ CJE = 2.3077e-14    VJE = 1.0792      MJE = 0.45354
+ TF = 2.2746e-11     XTF = 0.36823     VTF = 0.50905
+ ITF = 0.0018773     PTF = 0           CJC = 4.6011e-13
+ VJC = 1.1967        MJC = 0.3         XCJC = 0.053823
+ TR = 1.0553e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.54852)
***************************************************************
*$
.SUBCKT BFR193/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR193 .ENDS
.MODEL BFR193 NPN(
+ IS = 2.738e-16      BF = 125          NF = 0.95341
+ VAF = 24            IKF = 0.26949     ISE = 1.0627e-14
+ NE = 1.935          BR = 14.267       NR = 1.4289
+ VAR = 3.8742        IKR = 0.037925    ISC = 3.7409e-17
+ NC = 0.94371        RBM = 1           IRB = 0.00091763
+ RB = 1.8368         RE = 0.76534      RC = 0.11938
+ CJE = 1.1824e-15    VJE = 0.70276     MJE = 0.48654
+ TF = 1.8828e-11     XTF = 0.69477     VTF = 0.8
+ ITF = 0.00096893    PTF = 0           CJC = 9.3503e-13
+ VJC = 1.1828        MJC = 0.30002     XCJC = 0.053563
+ TR = 1.0037e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.72063)
***************************************************************
*$
.SUBCKT BFR193W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR193W  .ENDS
.MODEL BFR193W NPN(
+ IS = 2.738e-16      BF = 125          NF = 0.95341
+ VAF = 24            IKF = 0.26949     ISE = 1.0627e-14
+ NE = 1.935          BR = 14.267       NR = 1.4289
+ VAR = 3.8742        IKR = 0.037925    ISC = 3.7409e-17
+ NC = 0.94371        RBM = 1           IRB = 0.00091763
+ RB = 1.8368         RE = 0.76534      RC = 0.11938
+ CJE = 1.1824e-15    VJE = 0.70276     MJE = 0.48654
+ TF = 1.8828e-11     XTF = 0.69477     VTF = 0.8
+ ITF = 0.00096893    PTF = 0           CJC = 9.3503e-13
+ VJC = 1.1828        MJC = 0.30002     XCJC = 0.053563
+ TR = 1.0037e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.72063)
***************************************************************
*$
.SUBCKT BFR194/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR194
.ENDS
.MODEL BFR194 PNP(
+ IS = 4.574e-15      BF = 111.78       NF = 0.66503
+ VAF = 9.1007        IKF = 0.84785     ISE = 2.1629e-14
+ NE = 0.841          BR = 92.296       NR = 0.43618
+ VAR = 1.7871        IKR = 0.012843    ISC = 7.8447e-18
+ NC = 1.6            RBM = 0.75304     IRB = 6.1674e-05
+ RB = 4.1356         RE = 0.15908      RC = 0.10833
+ CJE = 1.7699e-14    VJE = 0.84843     MJE = 0.48212
+ TF = 5.311e-11      XTF = 0.65766     VTF = 0.10323
+ ITF = 0.010453      PTF = 0           CJC = 3.5856e-12
+ VJC = 0.71631       MJC = 0.40003     XCJC = 0.063742
+ TR = 9.7481e-10     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.90755)
***************************************************************
*$
.SUBCKT BFR280/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR280
.ENDS
.MODEL BFR280 NPN(
+ IS = 6.472e-15      BF = 89.888       NF = 1.0801
+ VAF = 25.609        IKF = 0.073457    ISE = 1.5596e-14
+ NE = 1.6163         BR = 20.238       NR = 0.83403
+ VAR = 5.6909        IKR = 0.012696    ISC = 1.409e-15
+ NC = 1.0651         RB = 15           IRB = 3.1958e-05
+ RBM = 14.999        RE = 2.4518       RC = 6.989
+ CJE = 3.6218e-14    VJE = 0.70035     MJE = 0.69773
+ TF = 1.1744e-11     XTF = 0.21585     VTF = 0.2035
+ ITF = 0.0062179     PTF = 0           CJC = 2.5299e-13
+ VJC = 1.1943        MJC = 0.30017     XCJC = 0.19188
+ TR = 2.3693e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.96275)
***************************************************************
*$
.SUBCKT BFR280W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR280W 
.ENDS
.MODEL BFR280W NPN(
+ IS = 6.472e-15      BF = 89.888       NF = 1.0801
+ VAF = 25.609        IKF = 0.073457    ISE = 1.5596e-14
+ NE = 1.6163         BR = 20.238       NR = 0.83403
+ VAR = 5.6909        IKR = 0.012696    ISC = 1.409e-15
+ NC = 1.0651         RB = 15           IRB = 3.1958e-05
+ RBM = 14.999        RE = 2.4518       RC = 6.989
+ CJE = 3.6218e-14    VJE = 0.70035     MJE = 0.69773
+ TF = 1.1744e-11     XTF = 0.21585     VTF = 0.2035
+ ITF = 0.0062179     PTF = 0           CJC = 2.5299e-13
+ VJC = 1.1943        MJC = 0.30017     XCJC = 0.19188
+ TR = 2.3693e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.96275)
***************************************************************
*$
.MODEL BFR35AP/INF NPN(
+ IS = 1.213e-16      BF = 94.733       NF = 1.0947
+ VAF = 30            IKF = 0.46227     ISE = 1.2955e-13
+ NE = 1.9052         BR = 10.729       NR = 0.8983
+ VAR = 14.599        IKR = 0.01        ISC = 7.5557e-16
+ NC = 1.371          RB = 14.998       IRB = 1.652e-05
+ RBM = 7.8145        RE = 0.29088      RC = 0.13793
+ CJE = 1.0416e-14    VJE = 0.70618     MJE = 0.34686
+ TF = 2.6796e-11     XTF = 0.3817      VTF = 0.32861
+ ITF = 0.0044601     PTF = 0           CJC = 9.4647e-13
+ VJC = 0.84079       MJC = 0.4085      XCJC = 0.13464
+ TR = 1.2744e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99545)
***************************************************************
*$
.SUBCKT BFR92P/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH  L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR92P 
.ENDS
.MODEL BFR92P NPN(
+ IS = 1.213e-16      BF = 94.733       NF = 1.0947
+ VAF = 30            IKF = 0.46227     ISE = 1.2955e-13
+ NE = 1.9052         BR = 10.729       NR = 0.8983
+ VAR = 14.599        IKR = 0.01        ISC = 7.5557e-16
+ NC = 1.371          RB = 14.998       IRB = 1.652e-05
+ RBM = 7.8145        RE = 0.29088      RC = 0.13793
+ CJE = 1.0416e-14    VJE = 0.70618     MJE = 0.34686
+ TF = 2.6796e-11     XTF = 0.3817      VTF = 0.32861
+ ITF = 0.0044601     PTF = 0           CJC = 9.4647e-13
+ VJC = 0.84079       MJC = 0.4085      XCJC = 0.13464
+ TR = 1.2744e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99545)
***************************************************************
*$
.SUBCKT BFR92W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH  Q1   2 1 3 BFR92W 
.ENDS
.MODEL BFR92W NPN(
+ IS = 1.213e-16      BF = 94.733       NF = 1.0947
+ VAF = 30            IKF = 0.46227     ISE = 1.2955e-13
+ NE = 1.9052         BR = 10.729       NR = 0.8983
+ VAR = 14.599        IKR = 0.01        ISC = 7.5557e-16
+ NC = 1.371          RB = 14.998       IRB = 1.652e-05
+ RBM = 7.8145        RE = 0.29088      RC = 0.13793
+ CJE = 1.0416e-14    VJE = 0.70618     MJE = 0.34686
+ TF = 2.6796e-11     XTF = 0.3817      VTF = 0.32861
+ ITF = 0.0044601     PTF = 0           CJC = 9.4647e-13
+ VJC = 0.84079       MJC = 0.4085      XCJC = 0.13464
+ TR = 1.2744e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99545)
***************************************************************
*$
.SUBCKT BFR93A/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR93A 
.ENDS
.MODEL BFR93A NPN(
+ IS = 8.6752e-15     BF = 137.63       NF = 0.93633
+ VAF = 20.011        IKF = 0.33395     ISE = 2.6193e-12
+ NE = 1.5466         BR = 59           NR = 0.88761
+ VAR = 26.834        IKR = 0.015129    ISC = 7.0823e-16
+ NC = 1.95           RB = 7.2326       IRB = 4.3806e-05
+ RBM = 3.4649        RE = 1.0075       RC = 0.13193
+ CJE = 3.1538e-15    VJE = 0.70393     MJE = 0.5071
+ TF = 3.3388e-11     XTF = 0.28319     VTF = 0.17765
+ ITF = 0.0025184     PTF = 0           CJC = 1.0395e-12
+ VJC = 0.72744       MJC = 0.34565     XCJC = 0.21422
+ TR = 1.1061e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.75935)
**************************************************************
*$
.SUBCKT BFR93AW/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR93AW 
.ENDS
.MODEL BFR93AW NPN(
+ IS = 8.6752e-15     BF = 137.63       NF = 0.93633
+ VAF = 20.011        IKF = 0.33395     ISE = 2.6193e-12
+ NE = 1.5466         BR = 59           NR = 0.88761
+ VAR = 26.834        IKR = 0.015129    ISC = 7.0823e-16
+ NC = 1.95           RB = 7.2326       IRB = 4.3806e-05
+ RBM = 3.4649        RE = 1.0075       RC = 0.13193
+ CJE = 3.1538e-15    VJE = 0.70393     MJE = 0.5071
+ TF = 3.3388e-11     XTF = 0.28319     VTF = 0.17765
+ ITF = 0.0025184     PTF = 0           CJC = 1.0395e-12
+ VJC = 0.72744       MJC = 0.34565     XCJC = 0.21422
+ TR = 1.1061e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.75935)
**************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BFS17 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BFS17/INF 1 2 3
Q    6 5 7 BFS17 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL BFS17 NPN (IS=0.480F NF=1.008 BF=99.655 VAF=90.000 IKF=0.190
+ ISE=7.490F NE=1.762 NR=1.010 BR=38.400 VAR=7.000 IKR=93.200M
+ ISC=0.200F NC=1.042
+ RB=1.500 IRB=0.100M RBM=1.200
+ RE=0.500 RC=2.680
+ CJE=1.325P VJE=0.700 MJE=0.220 FC=0.890
+ CJC=1.050P VJC=0.610 MJC=0.240 XCJC=0.400
+ TF=56.940P TR=1.000N PTF=21.000
+ XTF=68.398 VTF=0.600 ITF=0.700
+ XTB=1.600 EG=1.110 XTI=3.000
+ KF=1.000F AF=1.000)
*$
*****************************************************************
.MODEL BFS17P/INF NPN(
+       AF= 1.00E+00    BF= 1.03E+02    BR= 1.73E-01   CJC= 1.26E-12
+      CJE= 1.42E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 9.00E-01
+      IKF= 5.04E-02   IKR= 1.00E+00   IRB= 1.00E+01    IS= 1.72E-17
+      ISC= 1.00E-13   ISE= 1.44E-15   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 2.00E-01   MJE= 2.00E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.33E+00    NF= 9.19E-01    NR= 1.00E+00   PTF= 0.00E+00
+       RB= 1.15E+01   RBM= 8.04E+00    RC= 2.60E+00    RE= 2.91E-02
+       TF= 4.90E-11    TR= 0.00E+00   VAF= 3.50E+01   VAR= 1.00E+01
+      VJC= 8.00E-01   VJE= 6.65E-01   VJS= 7.50E-01   VTF= 1.32E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*$
.SUBCKT BFS480/INF 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS480
.ENDS
.MODEL BFS480 NPN(
+ IS = 6.472e-15      BF = 89.888       NF = 1.0801
+ VAF = 25.609        IKF = 0.073457    ISE = 1.5596e-14
+ NE = 1.6163         BR = 20.238       NR = 0.83403
+ VAR = 5.6909        IKR = 0.012696    ISC = 1.409e-15
+ NC = 1.0651         RB = 15           IRB = 3.1958e-05
+ RBM = 14.999        RE = 2.4518       RC = 6.989
+ CJE = 3.6218e-14    VJE = 0.70035     MJE = 0.69773
+ TF = 1.1744e-11     XTF = 0.21585     VTF = 0.2035
+ ITF = 0.0062179     PTF = 0           CJC = 2.5299e-13
+ VJC = 1.1943        MJC = 0.30017     XCJC = 0.19188
+ TR = 2.3693e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.96275)
***************************************************************
*$
.SUBCKT BFS482/INF 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS482
.ENDS
.MODEL BFS482 NPN(
+ IS = 4.8499e-15     BF = 84.113       NF = 0.56639
+ VAF = 21.742        IKF = 0.14414     ISE = 8.4254e-15
+ NE = 0.91624        BR = 10.004       NR = 0.54818
+ VAR = 2.2595        IKR = 0.039478    ISC = 5.9438e-15 
+ NC = 0.5641         RBM = 2.8263      IRB = 7.1955e-05
+ RB = 3.4217         RE = 2.1858       RC = 1.8159
+ CJE = 8.8619e-15    VJE = 1.0378      MJE = 0.40796
+ TF = 2.272e-11      XTF = 0.43147     VTF = 0.34608
+ ITF = 0.0065523     PTF = 0           CJC = 4.9025e-13
+ VJC = 1.0132        MJC = 0.31068     XCJC = 0.19281
+ TR = 1.7541e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.64175)
***************************************************************
*$
.SUBCKT BFS481/INF 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS481
.ENDS
.MODEL BFS481 NPN(
+ IS = 1.0519e-18     BF = 96.461       NF = 0.90617
+ VAF = 22.403        IKF = 0.12146     ISE = 1.2603e-14
+ NE = 1.7631         BR = 16.504       NR = 0.87757
+ VAR = 5.1127        IKR = 0.24951     ISC = 1.1195e-17
+ NC = 1.6528         RB = 9.9037       IRB = 0.00069278
+ RBM = 6.6315        RE = 2.1372       RC = 2.2171
+ CJE = 1.8168e-15    VJE = 0.73155     MJE = 0.43619
+ TF = 1.7028e-11     XTF = 0.33814     VTF = 0.12571
+ ITF = 0.0010549     PTF = 0           CJC = 3.1969e-13
+ VJC = 1.1633        MJC = 0.30013     XCJC = 0.082903
+ TR = 2.7449e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99768)
***************************************************************
*$
.SUBCKT BFS483/INF 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS483
.ENDS
.MODEL BFS483 NPN(
+ IS = 1.0345e-15     BF = 115.98       NF = 0.80799
+ VAF = 14.772        IKF = 0.14562     ISE = 1.6818e-14
+ NE = 1.2149         BR = 10.016       NR = 0.99543
+ VAR = 3.4276        IKR = 0.013483    ISC = 1.3559e-15
+ NC = 0.85331        RBM = 1.0112      IRB = 0.00043801
+ RB = 2.5426         RE = 1.3435       RC = 0.20486
+ CJE = 2.3077e-14    VJE = 1.0792      MJE = 0.45354
+ TF = 2.2746e-11     XTF = 0.36823     VTF = 0.50905
+ ITF = 0.0018773     PTF = 0           CJC = 4.6011e-13
+ VJC = 1.1967        MJC = 0.3         XCJC = 0.053823
+ TR = 1.0553e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.54852)
***************************************************************
*$
.SUBCKT BFT92/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFT92
.ENDS
.MODEL BFT92 PNP(
+ IS = 4.5354e-15     BF = 98.533       NF = 0.90551
+ VAF = 10.983        IKF = 0.016123    ISE = 1.2196e-14
+ NE = 1.1172         BR = 10.297       NR = 1.2703
+ VAR = 47.577        IKR = 0.019729    ISC = 2.4709e-17
+ NC = 1.206          RB = 7.9562       IRB = 0.00079584
+ RBM = 1.5939        RE = 1.5119       RC = 0.66749
+ CJE = 1.7785e-15    VJE = 0.79082     MJE = 0.32167
+ TF = 3.2171e-11     XTF = 0.30227     VTF = 0.21451
+ ITF = 1.3277e-05    PTF = 0           CJC = 9.2207e-13
+ VJC = 1.2           MJC = 0.3         XCJC = 0.3
+ TR = 2.0779e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.75167)
***************************************************************
*$
.SUBCKT BFT92W/INF 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFT92W 
.ENDS
.MODEL BFT92W PNP(
+ IS = 4.5354e-15     BF = 98.533       NF = 0.90551
+ VAF = 10.983        IKF = 0.016123    ISE = 1.2196e-14
+ NE = 1.1172         BR = 10.297       NR = 1.2703
+ VAR = 47.577        IKR = 0.019729    ISC = 2.4709e-17
+ NC = 1.206          RB = 7.9562       IRB = 0.00079584
+ RBM = 1.5939        RE = 1.5119       RC = 0.66749
+ CJE = 1.7785e-15    VJE = 0.79082     MJE = 0.32167
+ TF = 3.2171e-11     XTF = 0.30227     VTF = 0.21451
+ ITF = 1.3277e-05    PTF = 0           CJC = 9.2207e-13
+ VJC = 1.2           MJC = 0.3         XCJC = 0.3
+ TR = 2.0779e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.75167)
***************************************************************
*$
.SUBCKT BFT93/INF 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFT93
.ENDS
.MODEL BFT93 PNP(
+ IS = 1.0366e-15     BF = 80           NF = 1.0313
+ VAF = 8.4866        IKF = 0.47497     ISE = 1.6295e-14
+ NE = 1.3702         BR = 16.116       NR = 1.2907
+ VAR = 9.5149        IKR = 0.012081    ISC = 9.4971e-17
+ NC = 1.038          RB = 3.2133       IRB = 0.00046855
+ RBM = 2.0822        RE = 1.9597       RC = 1.1393
+ CJE = 2.0636e-14    VJE = 0.84456     MJE = 0.68352
+ TF = 5.4303e-11     XTF = 0.27447     VTF = 0.19311
+ ITF = 0.0030573     PTF = 0           CJC = 2.6904e-12
+ VJC = 1.0282        MJC = 0.5401      XCJC = 0.075977
+ TR = 3.4233e-10     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.54298)
***************************************************************
*$

*---------------------------------------------------------------*
* connections:    gate                                          *
*                 | source                                      *
*                 | | drain                                     *
*                 | | |                                         *
*.subckt BS-170   1 2 3                                         *
*---------------------------------------------------------------*
 *n-MOSFET*60V 300mA 5 Ohm*Add_in_Line
.SUBCKT BS170/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 1117M
D170 76 95 DREV
.MODEL DREV D CJO=0.025N RS=50M TT=30N IS=300P BV=60
M170 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.235 KP=0.158
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.09N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.287N M=0.539 VJ=0.985
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.7 KP=0.135
LG 4 1 7N
.ENDS
*$
.SUBCKT BSO302SN/L1/INF drain gate source 
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1  c=0.85  
.PARAM Vth=2.6  Rs=0.004  Rd=0.001  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.054312
+ Cox=2.78910067090909E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=60320191.9384616  
.PARAM g13=77098.7147183496  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-26.4678703061229  g17=1.73577861576469E-09  al=0.6  Fm=0.03
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
.ENDS
*$
.SUBCKT BSO304SN/L1/INF drain gate source 
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.006  Rd=0.0055  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.7883408  
+Cox=1.07031893563636E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=23147831.6676923  
.PARAM g13=77098.4889870177  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.4256342862036  g17=6.66103835529768E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+ Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(
+ -Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.2
Cgs g s 475p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
.ENDS
*$
.SUBCKT BSO305N/L1/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.008  Rd=0.00525  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.8088496  
+Cox=1.09824721854545E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=23750025.8584615  
.PARAM g13=77093.2149097062  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.3999093949652  g17=6.83432623209047E-10  al=0.6  Fm=0.03
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 487p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),
+ -500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 487p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$
.SUBCKT BSO307N/L1/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  
+Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(
+ -Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 487p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),
+ -500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 487p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$
.SUBCKT BSO615N/L1/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+ 1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+ Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+ (vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(
+ -Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),
+ -500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 256p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$
.SUBCKT BSP308/L1/INF drain gate source 
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  
+ Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588 
+ g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
.ENDS
*$
.SUBCKT BSP318S_1/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.6  Rs=0.012  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 5n
LS so1 source 2n
.ENDS
*$
.SUBCKT BSO615NV/L1/INF drain1 gate1 source1 drain1a drain2 gate2 
+ source2 drain2a
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),
+ -500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 241p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$
.SUBCKT BSP320S_1/L1/INF drain gate source 
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,
+Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(
+ -Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
.ENDS
*$
.SUBCKT BSO302SN/L2/INF drain gate source Tj 
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1  c=0.85  
.PARAM Vth=2.6  Rs=0.004  Rd=0.001  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.054312  
+Cox=2.78910067090909E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=60320191.9384616  
.PARAM g13=77098.7147183496  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-26.4678703061229  g17=1.73577861576469E-09  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO304SN/L2/INF drain gate source Tj
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.006  Rd=0.0055  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.7883408  
+Cox=1.07031893563636E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=23147831.6676923  
.PARAM g13=77098.4889870177  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.4256342862036  g17=6.66103835529768E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 475p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO305N/L2/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a 
+Tj1  Tj2 
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.008  Rd=0.00525  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.8088496  
+Cox=1.09824721854545E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=23750025.8584615  
.PARAM g13=77093.2149097062  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.3999093949652  g17=6.83432623209047E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 487p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
Vref1 Tja 0 27
Rdummy1 Tja Tj1 1
Cdummy1 Tja 0 1p
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 487p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
Vref2 Tjb 0 27
Rdummy2 Tjb Tj2 1
Cdummy2 Tj2 0 1p
.ENDS
*$
.SUBCKT BSO307N/L2/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a 
+Tj1  Tj2 
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  
+Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
Vref Tja 0 27
Rdummy Tja Tj1 1
Cdummy Tj1 0 1p
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 486p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
Vref2 Tjb 0 27
Rdummy2 Tjb Tj2 1
Cdummy2 Tj2 0 1p
.ENDS
*$
.SUBCKT BSO615N/L2/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a 
+Tj1 Tj2 
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.6  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
Vref Tja 0 27
Rdummy Tja Tj1 1
Cdummy Tj1 0 1p
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 256p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
Vref2 Tjb 0 27
Rdummy2 Tjb Tj2 1
Cdummy2 Tj2 0 1p
.ENDS
*$
.SUBCKT BSP308/L2/INF drain gate source Tj 
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  
+Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSP318S/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.6  Rs=0.012  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO615NV/L2/INF drain1 gate1 source1 drain1a drain2 gate2 source2 
+drain2a Tj1 Tj2 
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
Vref Tja 0 27
Rdummy Tja Tj1 1
Cdummy Tj1 0 1p
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 241p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
Vref2 Tjb 0 27
Rdummy2 Tjb Tj2 1
Cdummy2 Tj2 0 1p
.ENDS
*$
.SUBCKT BSP320S/L2/INF drain gate source Tj 
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO302SN/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1  c=0.85  
.PARAM Vth=2.6  Rs=0.004  Rd=0.001  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.054312  
+Cox=2.78910067090909E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=60320191.9384616  
.PARAM g13=77098.7147183496  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-26.4678703061229  g17=1.73577861576469E-09  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 54.8u
C_TH2 Tj2 Tamb 70.2u
C_TH3 Tj3 Tamb 2.43m
C_TH4 Tj4 Tamb 9.42m
C_TH5 Tj5 Tamb 69.5m
R_TH1 Tj Tj2 2.7m
R_TH2 Tj2 Tj3 53.5m
R_TH3 Tj3 Tj4 846m
R_TH4 Tj4 Tj5 7.73
R_TH5 Tj5 Tsolder_joint 12.8
.ENDS
*$
.SUBCKT BSO304SN/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.006  Rd=0.0055  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.7883408  
+Cox=1.07031893563636E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=23147831.6676923  
.PARAM g13=77098.4889870177  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.4256342862036  g17=6.66103835529768E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 475p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 21u
C_TH2 Tj2 Tamb 27.6u
C_TH3 Tj3 Tamb 1.02m
C_TH4 Tj4 Tamb 8.1m
C_TH5 Tj5 Tamb 148m
R_TH1 Tj Tj2 7.1m
R_TH2 Tj2 Tj3 144m
R_TH3 Tj3 Tj4 2.4
R_TH4 Tj4 Tj5 10.4
R_TH5 Tj5 Tsolder_joint 10.6
.ENDS
*$
.SUBCKT BSO305N/L3/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a 
+Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.008  Rd=0.00525  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.8088496  
+Cox=1.09824721854545E-09  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=23750025.8584615  
.PARAM g13=77093.2149097062  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.3999093949652  g17=6.83432623209047E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 487p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 487p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 Tamb 21.2u
C_TH12 Tj12 Tamb 27.2u
C_TH13 Tj13 Tamb 950u
C_TH14 Tj14 Tamb 4.64u
C_TH15 Tj15 Tamb 38.6m
R_TH11 Tj1 Tj12 6.94m
R_TH12 Tj12 Tj13 138.3m
R_TH13 Tj13 Tj14 1.84
R_TH14 Tj14 Tj15 18.9
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s,so2)/Rs,0,100k)}
C_TH21 Tj2 Tamb 21.2u
C_TH22 Tj22 Tamb 27.2u
C_TH23 Tj23 Tamb 950u
C_TH24 Tj24 Tamb 4.64m
C_TH25 Tj25 Tamb 38.6m
R_TH21 Tj2 Tj22 6.94m
R_TH22 Tj22 Tj23 138.3m
R_TH23 Tj23 Tj24 1.84
R_TH24 Tj24 Tj25 18.9
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup Tamb 3m
Rk1 Tj14 Tcoup 114
Rk2 Tj24 Tcoup 114
.ENDS
*$
.SUBCKT BSO307N/L3/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a 
+ Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  
+Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 486p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 Tamb 12.6u
C_TH12 Tj12 Tamb 16.4u
C_TH13 Tj13 Tamb 598u
C_TH14 Tj14 Tamb 3.91m
C_TH15 Tj15 Tamb 38.6m
R_TH11 Tj1 Tj12 12.06m
R_TH12 Tj12 Tj13 254m
R_TH13 Tj13 Tj14 4.05
R_TH14 Tj14 Tj15 19.67
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s2,so2)/Rs,0,100k)}
C_TH21 Tj2 Tamb 12.6u
C_TH22 Tj22 Tamb 16.4u
C_TH23 Tj23 Tamb 598u
C_TH24 Tj24 Tamb 3.91m
C_TH25 Tj25 Tamb 38.6m
R_TH21 Tj2 Tj22 12.06m
R_TH22 Tj22 Tj23 254m
R_TH23 Tj23 Tj24 4.05
R_TH24 Tj24 Tj25 19.67
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup Tamb 3m
Rk1 Tj14 Tcoup 123
Rk2 Tj24 Tcoup 123
.ENDS
*$
.SUBCKT BSO615N/L3/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a 
+Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 256p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 Tamb 16.1u
C_TH12 Tj12 Tamb 15.2u
C_TH13 Tj13 Tamb 524u
C_TH14 Tj14 Tamb 3.95m
C_TH15 Tj15 Tamb 39.5m
R_TH11 Tj1 Tj12 18.6m
R_TH12 Tj12 Tj13 280m
R_TH13 Tj13 Tj14 3.22
R_TH14 Tj14 Tj15 21.1
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s2,so2)/Rs,0,100k)}
C_TH21 Tj2 Tamb 16.1u
C_TH22 Tj22 Tamb 15.2u
C_TH23 Tj23 Tamb 524u
C_TH24 Tj24 Tamb 3.95m
C_TH25 Tj25 Tamb 39.5m
R_TH21 Tj2 Tj22 18.6m
R_TH22 Tj22 Tj23 280m
R_TH23 Tj23 Tj24 3.22
R_TH24 Tj24 Tj25 21.1
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup Tamb 3m
Rk1 Tj14 Tcoup 125
Rk2 Tj24 Tcoup 125
.ENDS
*$
.SUBCKT BSP308/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.6  Rs=0.009  Rd=0.0075  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.475072  
+Cox=6.44966116363636E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=13949407.0153846  
.PARAM g13=77101.9498901508  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-27.9321262087125  g17=4.01409239954088E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 286p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  5nH
LS so1 source 2nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 12.5u
C_TH2 Tj2 Tamb 15.5u
C_TH3 Tj3 Tamb 439u
C_TH4 Tj4 Tamb 8.17m
C_TH5 Tj5 Tamb 14.9m
R_TH1 Tj Tj2 10.5m
R_TH2 Tj2 Tj3 212m
R_TH3 Tj3 Tj4 1.04
R_TH4 Tj4 Tj5 4.09
R_TH5 Tj5 Tsolder_joint 7.51
.ENDS
*$
.SUBCKT BSP318S/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.012  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 17.6u
C_TH2 Tj2 Tamb 16.9u
C_TH3 Tj3 Tamb 599u
C_TH4 Tj4 Tamb 6.34m
C_TH5 Tj5 Tamb 400m
R_TH1 Tj Tj2 17.2m
R_TH2 Tj2 Tj3 260m
R_TH3 Tj3 Tj4 3.57
R_TH4 Tj4 Tj5 7.4
R_TH5 Tj5 Tsolder_joint 2.41
.ENDS
*$
.SUBCKT BSO615NV/L3/INF drain1 gate1 source1 drain1a drain2 gate2 source2 
+drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.5
Cgs2 g2 s2 241p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 Tamb 16.1u
C_TH12 Tj12 Tamb 15.2u
C_TH13 Tj13 Tamb 524u
C_TH14 Tj14 Tamb 3.95m
C_TH15 Tj15 Tamb 39.5m
R_TH11 Tj1 Tj12 18.6m
R_TH12 Tj12 Tj13 280m
R_TH13 Tj13 Tj14 3.22
R_TH14 Tj14 Tj15 21.1
R_TH15 Tj15 Tsolder_joint1 22
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s2,so2)/Rs,0,100k)}
C_TH21 Tj2 Tamb 16.1u
C_TH22 Tj22 Tamb 15.2u
C_TH23 Tj23 Tamb 524u
C_TH24 Tj24 Tamb 3.95m
C_TH25 Tj25 Tamb 39.5m
R_TH21 Tj2 Tj22 18.6m
R_TH22 Tj22 Tj23 280m
R_TH23 Tj23 Tj24 3.22
R_TH24 Tj24 Tj25 21.1
R_TH25 Tj25 Tsolder_joint2 22
Ck1 Tcoup Tamb 3m
Rk1 Tj14 Tcoup 125
Rk2 Tj24 Tcoup 125
.ENDS
*$
.SUBCKT BSP320S/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 17.6u
C_TH2 Tj2 Tamb 16.9u
C_TH3 Tj3 Tamb 599u
C_TH4 Tj4 Tamb 6.34m
C_TH5 Tj5 Tamb 400m
R_TH1 Tj Tj2 17.2m
R_TH2 Tj2 Tj3 260m
R_TH3 Tj3 Tj4 3.57
R_TH4 Tj4 Tj5 7.4
R_TH5 Tj5 Tsolder_joint 2.41
.ENDS
*$
.SUBCKT BSO315C/L1/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.45  Rs=0.019  Rd=0.013  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.2246816  
+Cox=3.05067416727273E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=6597263.33538462  
.PARAM g13=77093.8548710156  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-28.6808432404272  g17=1.89843371715589E-10  al=0.6  Fm=0.03    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*max(Uds,0)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)} 
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-
+1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
.PARAM Lp=0.0000007  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=2.65  Rsp=0.012  Rdp=0.00475  Tp=300  Trefp=273  authp=0.0025  
+aubrp=0.027  
.PARAM Ibrp=0.0000000001  Ubrp=31.7  k1p=0.5  k2p=1.5  Acfgs2p=1  Acfdgp=1.45  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.336375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.35186  
+Coxp=2.72229218181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=6.4715625E-14  Vnp=0.420686657974794  
+g10p=1339960  
.PARAM g13p=87482.1570409299  g14p=15625  g15p=-0.917264038295183  g16p=-
+28.8308359101058  
.PARAM g17p=3.66217261878034E-10  alp=0.6  Fmp=0.2    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.PARAM h1p={Lp*vmp/(g2p*(Trefp/(Trefp+TEMP))**1.5)}
.PARAM h4p={g10p*(Trefp/(Trefp+TEMP))**1.5}
.PARAM Isp={exp(min(g16p+((TEMP+Trefp)/Tp-
+1)*(1.12/(Unp*(TEMP+Trefp))),23))*((TEMP+Trefp)/Tp)**3}
.FUNC  Uep(Uds,Ugs)  {Ugs-Vthp+authp*(TEMP+Trefp-Tp)+Fmp*SQRT(max(Uds,0))}
.FUNC  Udssatp(Uds,Ugs)  {-
+h1p+SQRT(max(h1p**2+MAX(psip,Uep(Uds,Ugs))*h1p/cp,0))}
.FUNC  Lshortp(Uds,Ugs))  {if(Uds>Udssatp(Uds,Ugs),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs)  
+{Wp/(Lshortp(Uds,Ugs)*((1+thetap*Uep(Uds,Ugs))*(1/(g2p*
+(Trefp/(Trefp+TEMP))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs)  {min(Udssatp(Uds,Ugs),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs)  {(psip*enp(Uds,Ugs)-
+cp*enp(Uds,Ugs)**2)*exp(min(h7p(Uep(Uds,Ugs))/psip-1,23))}
.FUNC  I2p(Uds,Ugs)  {if(Uds>0,(Uep(Uds,Ugs)-cp*enp(Uds,Ugs))*enp(Uds,Ugs),0)}
.FUNC  h3p(Uds,Ugs)  {(3-2*(Uep(Uds,Ugs)/psip-k1p))*((Uep(Uds,Ugs)/psip-
+k1p))**2}
.FUNC  blep(Uds,Ugs) {h3p(Uds,Ugs)*I2p(Uds,Ugs)+(1-h3p(Uds,Ugs))*I1p(Uds,Ugs)}
.FUNC  I3p(Uds,Ugs)  
+{if(Uep(Uds,Ugs)/psip<k2p,if(Uep(Uds,Ugs)/psip<k1p,I1p(Uds,Ugs),blep(Uds,Ugs)),
+I2p(Uds,Ugs))}
.FUNC  Igp(Uds,Ugs) {betap(Uds,Ugs)*I3p(Uds,Ugs)}
.FUNC  Irdp(Usd)  {-Isp+exp(min(log(Isp)+Usd/(Unp*(TEMP+Trefp)),23))}
.FUNC  Idbrp(Uds)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(TEMP+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs)+Idbrp(Uds)-
+Irdp(-Uds),-Igp(-Uds,Ugs)-Irdp(-Uds))}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x)  {if(x<0,Rdiodp(-x),g13p)/h4p}
.FUNC  Rdrp(x)  {RSip(x)+(Rdp+Rsp)*(1+0.0039*(TEMP+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x) {30n*Irdp(-x)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x) {Cdiffp(h6p(x))+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)>-
+1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs)  {SL(Igesp(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.0
Cgs g s 135p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp))-
+if(Time>100p,SL(DDT(V(sp,dp))*Cds(V(sp,dp)),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 69
Cgsp gp sp 171p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
.ENDS
*$
.SUBCKT BSO315C/L2/INF drain1 gate1 source1 drain1a drain2 gate2 
+ source2 drain2a Tj1 Tj2
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.45  Rs=0.019  Rd=0.013  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.2246816  
+Cox=3.05067416727273E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588   +g10=6597263.33538462  
.PARAM g13=77093.8548710156  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-28.6808432404272  g17=1.89843371715589E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  {-
+h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*
+(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-
+1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
.PARAM Lp=0.0000007  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=2.65  Rsp=0.012  Rdp=0.00475  Tp=300  Trefp=273  authp=0.0025  
+aubrp=0.027  
.PARAM Ibrp=0.0000000001  Ubrp=31.7  k1p=0.5  k2p=1.5  Acfgs2p=1  Acfdgp=1.45  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.336375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.35186  
+Coxp=2.72229218181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=6.4715625E-14  Vnp=0.420686657974794  
+g10p=1339960  
.PARAM g13p=87482.1570409299  g14p=15625  g15p=-0.917264038295183  
+g16p=-28.8308359101058  
.PARAM g17p=3.66217261878034E-10  alp=0.6  Fmp=0.2 
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)+Fmp*SQRT(max(Uds,0))}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  
+{-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  
+{Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*
+(Trefp/(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-
+k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-
+h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  
+{if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),
+bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-
+1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-
+1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-
+VSWp(Ugs-Ugd)>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*
+Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.0
Cgs g s 135p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
Vref Tja 0 27
Rdummy Tja Tj1 1
Cdummy Tj1 0 1p
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,
+SL(DDT(V(sp,dp))*Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 69
Cgsp gp sp 171p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
Vrefp Tjap 0 27
Rdummyp Tjap Tj2 1
Cdummyp Tj2 0 1p
.ENDS
*$
.SUBCKT BSO315C/L3/INF drain1 gate1 source1 drain1a drain2 gate2 source2
+ drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.0000008  g2=0.0695  vm=330000  theta=0.05  kappa=1.2  c=0.85  
.PARAM Vth=2.45  Rs=0.019  Rd=0.013  T=300  Tref=273  auth=0.004  aubr=0.029  
.PARAM Ibr=0.0000000001  Ubr=32.6  k1=0.5  k2=1.5  Acfgs2=1.4  Acfdg=1  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.2246816  
+Cox=3.05067416727273E-10  
.PARAM h2=3.23578125E-14  Fn=3.23578125E-14  Vn=0.841373315949588  
+g10=6597263.33538462  
.PARAM g13=77093.8548710156  g14=23809.5238095238  g15=-1.29720724323416  
.PARAM g16=-28.6808432404272  g17=1.89843371715589E-10  al=0.6  Fm=0.03  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*max(Uds,0)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*
+(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)
+/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)
+-1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*
+(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
.PARAM Lp=0.0000007  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=2.65  Rsp=0.012  Rdp=0.00475  Tp=300  Trefp=273  authp=0.0025  
+aubrp=0.027  
.PARAM Ibrp=0.0000000001  Ubrp=31.7  k1p=0.5  k2p=1.5  Acfgs2p=1  Acfdgp=1.45  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.336375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.35186  
+Coxp=2.72229218181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=6.4715625E-14  Vnp=0.420686657974794  
+g10p=1339960  
.PARAM g13p=87482.1570409299  g14p=15625  g15p=-0.917264038295183  
+g16p=-28.8308359101058  
.PARAM g17p=3.66217261878034E-10  alp=0.6  Fmp=0.2 
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)+Fmp*SQRT(max(Uds,0))}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  
+{-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  
+{Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*
+(Trefp/(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-
+k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-
+h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  
+{if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),
+bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-
+1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs,Tj)+
+ Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)
+>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*
+ Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 135p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*
+ Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 69
Cgsp gp sp 171p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr1p,so1p)*V(sp,so1p)/Rsp,0,100k)}
C11 Tj1 Tamb 5.97u
C12 T12 Tamb 7.91u
C13 T13 Tamb 326u
C14 T14 Tamb 3.52m
C15 T15 Tamb 39.4m
C21 Tj2 Tamb 8.22u
C22 T22 Tamb 11u
C23 T23 Tamb 246u
C24 T24 Tamb 3.97m
C25 T25 Tamb 47.46m
Ck T3 Tamb 3m
R11 Tj1 T12 24.8m
R12 T12 T13 514m
R13 T13 T14 5.92
R14 T14 T15 22.3
R15 T15 Tsolder_joint1 23
R21 Tj2 T22 18.1m
R22 T22 T23 370m
R23 T23 T24 5.18
R24 T24 T25 20.2
R25 T25 Tsolder_joint2 23
Rk1 T14 T3 132
Rk2 T24 T3 132
.ENDS
*$
.SUBCKT BSO615C/L1/INF drain1 gate1 source1 drain1a drain2 gate2 source2 drain2a
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/
+(Tref+TEMP))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*
+(x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=1.92  Rsp=0.007  Rdp=0.00075  Tp=300  Trefp=273  authp=0.0025  
+aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=1.25  Acfdgp=0.7  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  
+Coxp=8.08840826181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.273446327683616  
+g10p=591209.256  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-0.739521909998096  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.PARAM h1p={Lp*vmp/(g2p*(Trefp/(Trefp+TEMP))**1.5)}
.PARAM h4p={g10p*(Trefp/(Trefp+TEMP))**1.5}
.PARAM Isp={exp(min(g16p+((TEMP+Trefp)/Tp-
+1)*(1.12/(Unp*(TEMP+Trefp))),23))*((TEMP+Trefp)/Tp)**3}
.FUNC  Uep(Uds,Ugs)  {Ugs-Vthp+authp*(TEMP+Trefp-Tp)}
.FUNC  Udssatp(Uds,Ugs)  
+{-h1p+SQRT(max(h1p**2+MAX(psip,Uep(Uds,Ugs))*h1p/cp,0))}
.FUNC  Lshortp(Uds,Ugs))  {if(Uds>Udssatp(Uds,Ugs),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs)  
+{Wp/(Lshortp(Uds,Ugs)*((1+thetap*Uep(Uds,Ugs))*(1/(g2p*(Trefp/
+(Trefp+TEMP))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs)  {min(Udssatp(Uds,Ugs),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs)  {(psip*enp(Uds,Ugs)-
+cp*enp(Uds,Ugs)**2)*exp(min(h7p(Uep(Uds,Ugs))/psip-1,23))}
.FUNC  I2p(Uds,Ugs)  {if(Uds>0,(Uep(Uds,Ugs)-cp*enp(Uds,Ugs))*enp(Uds,Ugs),0)}
.FUNC  h3p(Uds,Ugs)  {(3-2*(Uep(Uds,Ugs)/psip-k1p))*((Uep(Uds,Ugs)/psip-
+k1p))**2}
.FUNC  blep(Uds,Ugs) {h3p(Uds,Ugs)*I2p(Uds,Ugs)+(1-h3p(Uds,Ugs))*I1p(Uds,Ugs)}
.FUNC  I3p(Uds,Ugs)  
+{if(Uep(Uds,Ugs)/psip<k2p,if(Uep(Uds,Ugs)/psip<k1p,I1p(Uds,Ugs),
+blep(Uds,Ugs)),I2p(Uds,Ugs))}
.FUNC  Igp(Uds,Ugs) {betap(Uds,Ugs)*I3p(Uds,Ugs)}
.FUNC  Irdp(Usd)  {-Isp+exp(min(log(Isp)+Usd/(Unp*(TEMP+Trefp)),23))}
.FUNC  Idbrp(Uds)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(TEMP+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs)+Idbrp(Uds)-
+Irdp(-Uds),-Igp(-Uds,Ugs)-Irdp(-Uds))}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x)  {if(x<0,Rdiodp(-x),g13p)/h4p}
.FUNC  Rdrp(x)  {RSip(x)+(Rdp+Rsp)*(1+0.0039*(TEMP+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x) {30n*Irdp(-x)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x) {Cdiffp(h6p(x))+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)
+>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs)  {SL(Igesp(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp))-if(Time>100p,SL(DDT(V(sp,dp))*
+ Cds(V(sp,dp)),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 80.1
Cgsp gp sp 338p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
.ENDS
*$
.SUBCKT BSO615C/L2/INF drain1 gate1 source1 drain1a drain2 gate2 
+source2 drain2a Tj1 Tj2
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6    
  .PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/
+(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=1.92  Rsp=0.007  Rdp=0.00075  Tp=300  Trefp=273  authp=0.0025  
+aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=1.25  Acfdgp=0.7  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  
+Coxp=8.08840826181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.273446327683616  
+g10p=591209.256  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-0.739521909998096  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6   
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  
+{-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  
+{Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*(Trefp/
+(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-
+k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-
+h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  
+{if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),
+bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-
+1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-
+1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-Ugd))**2+0.75*
+ (Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)
+>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*
+ Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
Vref Tja 0 27
Rdummy Tja Tj1 1
Cdummy Tj1 0 1p
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*
+ Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 80.1
Cgsp gp sp 338p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
Vrefp Tjap 0 27
Rdummyp Tjap Tj2 1
Cdummyp Tj2 0 1p
.ENDS
*$
.SUBCKT BSO615C/L3/INF drain1 gate1 source1 drain1a drain2 gate2 source2 
+drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.000001  g2=0.0695  vm=330000  theta=0.05  kappa=1.4  c=0.85  
.PARAM Vth=2.5  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.004  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=1.2  
.PARAM coxi=6.27545454545454E-04  Ep=4748201.43884892  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.37185364556962  
.PARAM Cox=5.52270630573072E-10  h2=3.23578125E-14  Fn=9.95625E-14  
.PARAM Vn=0.273446327683616  g10=2636070.49344304  g13=101855.446366528  
.PARAM g14=11160.7142857143  g15=-0.739521909998096  g16=-28.2868725117448  
.PARAM g17=2.10221971915528E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/
+(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.07  kappap=1.4  cp=0.85  
.PARAM Vthp=1.92  Rsp=0.007  Rdp=0.00075  Tp=300  Trefp=273  authp=0.0025  
+aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=1.25  Acfdgp=0.7  
.PARAM coxip=6.27545454545454E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  
+Coxp=8.08840826181818E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.273446327683616  
+g10p=591209.256  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-0.739521909998096  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  
+{-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  
+{Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*(Trefp/
+(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-
+k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-
+h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  
+{if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),
+bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-
+1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-
+1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)
+>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*
+ Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 256p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*
+ Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 80.1
Cgsp gp sp 338p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr1p,so1p)*V(sp,so1p)/Rsp,0,100k)}
C11 Tj1 Tamb 16.1u
C12 T12 Tamb 15.2u
C13 T13 Tamb 524u
C14 T14 Tamb 3.95m
C15 T15 Tamb 39.5m
C21 Tj2 Tamb 23.9u
C22 T22 Tamb 25.5u C23 T23 Tamb 683u
C24 T24 Tamb 5.81m
C25 T25 Tamb 39.5m
Ck T3 Tamb 3m
R11 Tj1 T12 18.6m
R12 T12 T13 280m
R13 T13 T14 3.22
R14 T14 T15 21.45
R15 T15 Tsolder_joint1 22
R21 Tj2 T22 13.8m
R22 T22 T23 164m
R23 T23 T24 3.83
R24 T24 T25 20
R25 T25 Tsolder_joint2 22
Rk1 T14 T3 115
Rk2 T24 T3 115
.ENDS
*$
.SUBCKT BSO612CV/L1/INF drain1 gate1 source1 drain1a drain2 gate2 
+source2 drain2a
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888   .PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.09  kappap=1.2  cp=0.85  
.PARAM Vthp=3.55  Rsp=0.007  Rdp=0.001  Tp=300  Trefp=273  authp=0.0048  
+aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=0.9  Acfdgp=0.7  
.PARAM coxip=4.26111111111111E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  
+Coxp=5.49212906666667E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.593084745762712  
+g10p=627040.12  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-1.08911408563356  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6 
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.PARAM h1p={Lp*vmp/(g2p*(Trefp/(Trefp+TEMP))**1.5)}
.PARAM h4p={g10p*(Trefp/(Trefp+TEMP))**1.5}
.PARAM Isp={exp(min(g16p+((TEMP+Trefp)/Tp-
+1)*(1.12/(Unp*(TEMP+Trefp))),23))*((TEMP+Trefp)/Tp)**3}
.FUNC  Uep(Uds,Ugs)  {Ugs-Vthp+authp*(TEMP+Trefp-Tp)}
.FUNC  Udssatp(Uds,Ugs)  
+{-h1p+SQRT(max(h1p**2+MAX(psip,Uep(Uds,Ugs))*h1p/cp,0))}
.FUNC  Lshortp(Uds,Ugs))  {if(Uds>Udssatp(Uds,Ugs),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs)  
+{Wp/(Lshortp(Uds,Ugs)*((1+thetap*Uep(Uds,Ugs))*(1/(g2p*(Trefp/
+(Trefp+TEMP))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs)  {min(Udssatp(Uds,Ugs),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs)  {(psip*enp(Uds,Ugs)-
+cp*enp(Uds,Ugs)**2)*exp(min(h7p(Uep(Uds,Ugs))/psip-1,23))}
.FUNC  I2p(Uds,Ugs)  {if(Uds>0,(Uep(Uds,Ugs)-cp*enp(Uds,Ugs))*enp(Uds,Ugs),0)}
.FUNC  h3p(Uds,Ugs)  {(3-2*(Uep(Uds,Ugs)/psip-k1p))*((Uep(Uds,Ugs)/psip-
+k1p))**2}
.FUNC  blep(Uds,Ugs) {h3p(Uds,Ugs)*I2p(Uds,Ugs)+(1-h3p(Uds,Ugs))*I1p(Uds,Ugs)}
.FUNC  I3p(Uds,Ugs)  
+{if(Uep(Uds,Ugs)/psip<k2p,if(Uep(Uds,Ugs)/psip<k1p,I1p(Uds,Ugs),
+blep(Uds,Ugs)),I2p(Uds,Ugs))}
.FUNC  Igp(Uds,Ugs) {betap(Uds,Ugs)*I3p(Uds,Ugs)}
.FUNC  Irdp(Usd)  {-Isp+exp(min(log(Isp)+Usd/(Unp*(TEMP+Trefp)),23))}
.FUNC  Idbrp(Uds)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(TEMP+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-1)/2/alp,Ugs)+Idbrp(Uds)-
+Irdp(-Uds),-Igp(-Uds,Ugs)-Irdp(-Uds))}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x)  {if(x<0,Rdiodp(-x),g13p)/h4p}
.FUNC  Rdrp(x)  {RSip(x)+(Rdp+Rsp)*(1+0.0039*(TEMP+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x) {30n*Irdp(-x)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x) {Cdiffp(h6p(x))+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)
+>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs)  {SL(Igesp(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp))-if(Time>100p,SL(DDT(V(sp,dp))*
+ Cds(V(sp,dp)),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 75.3
Cgsp gp sp 272p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
.ENDS
*$
.SUBCKT BSO612CV/L2/INF drain1 gate1 source1 drain1a drain2 gate2 
+source2 drain2a Tj1 Tj2
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6      
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.09  kappap=1.2  cp=0.85  
.PARAM Vthp=3.55  Rsp=0.007  Rdp=0.001  Tp=300  Trefp=273  authp=0.0048  
+aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=0.9  Acfdgp=0.7  
.PARAM coxip=4.26111111111111E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  
+Coxp=5.49212906666667E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.593084745762712  
+g10p=627040.12  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-1.08911408563356  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  {-
+h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  
+{Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*(Trefp/
+(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-
+k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-
+h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  
+{if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,
+I1p(Uds,Ugs,Tj),bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-
+1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-
+1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)
+>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*
+ Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
Vref Tja 0 27
Rdummy Tja Tj1 1
Cdummy Tj1 0 1p
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*
+ Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 75.3
Cgsp gp sp 272p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
Vrefp Tjap 0 27
Rdummyp Tjap Tj2 1
Cdummyp Tj2 0 1p
.ENDS
*$
.SUBCKT BSO612CV/L3/INF drain1 gate1 source1 drain1a drain2 gate2 
+source2 drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.0000013  g2=0.0695  vm=330000  theta=0.05  kappa=2  c=0.85  
.PARAM Vth=3.93  Rs=0.01  Rd=0.006  T=300  Tref=273  auth=0.0065  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=60.4  k1=0.5  k2=1.5  Acfgs2=1  Acfdg=1.3  
.PARAM coxi=0.0004314375  Ep=4748201.43884892  psi=0.2975625  Un=0.00008625  
.PARAM Utn=0.025875  Utnbr=0.207  W=0.3831864  Cox=3.51590499E-10  
+h2=3.23578125E-14  
.PARAM Fn=9.95625E-14  Vn=0.578531073446328  g10=2838038.616  
+g13=117130.889901888  
.PARAM g14=11160.7142857143  g15=-1.0756682327245  g16=-28.2868725117448  
.PARAM g17=2.26328573424711E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*
+(Tref/(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
.PARAM Lp=0.000001  g2p=0.0232  vmp=330000  thetap=0.09  kappap=1.2  cp=0.85  
.PARAM Vthp=3.55  Rsp=0.007  Rdp=0.001  Tp=300  Trefp=273  authp=0.0048  
+aubrp=0.061  
.PARAM Ibrp=0.0000000001  Ubrp=69.4  k1p=0.5  k2p=1.5  Acfgs2p=0.9  Acfdgp=0.7  
.PARAM coxip=4.26111111111111E-04  Epp=14224137.9310345  psip=0.2199375  
.PARAM Unp=0.00008625  Utnp=0.025875  Utnbrp=0.207  Wp=0.451108  
+Coxp=5.49212906666667E-10  
.PARAM h2p=3.23578125E-14  Fnp=9.95625E-14  Vnp=0.593084745762712  
+g10p=627040.12  
.PARAM g13p=85459.4252233038  g14p=11160.7142857143  g15p=-1.08911408563356  
.PARAM g16p=-27.7057446621245  g17p=2.9588579141072E-10  alp=0.6    
.PARAM t02p={1/((1+2/Vnp)**1.5*Vnp)}
.PARAM t01p={1/SQRT(1+2/Vnp)}
.PARAM t3p ={0.25*(t01p-Acfgs2p+t02p)}
.PARAM t2p ={-0.25*t02p}
.PARAM t1p ={0.25*(-3*t01p+3*Acfgs2p-t02p)}
.PARAM t0p ={0.25*(2*t01p+2*Acfgs2p+t02p)}
.FUNC  Uep(Uds,Ugs,Tj)  {Ugs-Vthp+authp*(Tj+Trefp-Tp)}
.FUNC  h1p(Tj) {Lp*vmp/(g2p*(Trefp/(Trefp+Tj))**1.5)}
.FUNC  Udssatp(Uds,Ugs,Tj)  
+{-h1p(Tj)+SQRT(max(h1p(Tj)**2+MAX(psip,Uep(Uds,Ugs,Tj))*h1p(Tj)/cp,0))}
.FUNC  Lsp(Uds,Ugs,Tj))  {if(Uds>Udssatp(Uds,Ugs,Tj),Lp-
+((Epp*h2p)**2+2*kappap*h2p*(Uds-Udssatp(Uds,Ugs,Tj)))**0.5+Epp*h2p,Lp)}
.FUNC  betap(Uds,Ugs,Tj)  
+{Wp/(Lsp(Uds,Ugs,Tj)*((1+thetap*Uep(Uds,Ugs,Tj))*(1/(g2p*(Trefp/
+(Trefp+Tj))**1.5)+Uds/(vmp*Lp))))*coxip}
.FUNC  enp(Uds,Ugs,Tj)  {min(Udssatp(Uds,Ugs,Tj),Uds)}
.FUNC  h7p(x)  {x+min(0,x*x*x)}
.FUNC  I1p(Uds,Ugs,Tj)  {(psip*enp(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj)**2)*exp(min(h7p(Uep(Uds,Ugs,Tj))/psip-1,23))}
.FUNC  I2p(Uds,Ugs,Tj)  {if(Uds>0,(Uep(Uds,Ugs,Tj)-
+cp*enp(Uds,Ugs,Tj))*enp(Uds,Ugs,Tj),0)}
.FUNC  h3p(Uds,Ugs,Tj)  {(3-2*(Uep(Uds,Ugs,Tj)/psip-
+k1p))*((Uep(Uds,Ugs,Tj)/psip-k1p))**2}
.FUNC  bp(Uds,Ugs,Tj) {h3p(Uds,Ugs,Tj)*I2p(Uds,Ugs,Tj)+(1-
+h3p(Uds,Ugs,Tj))*I1p(Uds,Ugs,Tj)}
.FUNC  I3p(Uds,Ugs,Tj)  
+{if(Uep(Uds,Ugs,Tj)/psip<k2p,if(Uep(Uds,Ugs,Tj)/psip<k1p,I1p(Uds,Ugs,Tj),
+bp(Uds,Ugs,Tj)),I2p(Uds,Ugs,Tj))}
.FUNC  Igp(Uds,Ugs,Tj) {betap(Uds,Ugs,Tj)*I3p(Uds,Ugs,Tj)}
.FUNC  Isp(Tj) {exp(min(g16p+((Tj+Trefp)/Tp-
+1)*(1.12/(Unp*(Tj+Trefp))),23))*((Tj+Trefp)/Tp)**3}
.FUNC  Irdp(Usd,Tj)  {-Isp(Tj)+exp(min(log(Isp(Tj))+Usd/(Unp*(Tj+Trefp)),23))}
.FUNC  Idbp(Uds,Tj)  {exp(min(log(IBrp)+(Uds-UBrp-aubrp*(Tj+Trefp-
+Tp))/UTnbrp,23))}
.FUNC  Igesp(Uds,Ugs,Tj) {if(Uds>0,Igp((SQRT(1+4*alp*Uds)-
+1)/2/alp,Ugs,Tj)+Idbp(Uds,Tj),-Igp(-Uds,Ugs,Tj))-Irdp(-Uds,Tj)}
.FUNC  h4p(Tj)  {g10p*(Trefp/(Trefp+Tj))**1.5}
.FUNC  Rdiodp(x) {if(x<0.5,g13p-(g13p-g14p)*(12*x*x-16*x*x*x),g14p)}
.FUNC  RSip(x,Tj)  {if(x<0,Rdiodp(-x),g13p)/h4p(Tj)}
.FUNC  Rdrp(x,Tj)  {RSip(x,Tj)+(Rdp+Rsp)*(1+0.0039*(Tj+Trefp-Tp))-Rsp}
.FUNC  Cdiffp(x,Tj) {30n*Irdp(-x,Tj)/UTnp}
.FUNC  h6p(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cdsp(x,Tj) {Cdiffp(h6p(x),Tj)+g17p/SQRT(max(x+1,1))}
.FUNC  Cdg1p(Ugd) {Coxp*Acfdgp*(if(Ugd>1,Acfgs2p,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vnp),t3p*Ugd*Ugd**2+t2p*Ugd**2+t1p*Ugd+t0p)))}
.FUNC  hdgp(Ugs,Ugd) {(-0.25*(Ugs-VSWp(Ugs-Ugd))*(Ugs-VSWp(Ugs-
+Ugd))**2+0.75*(Ugs-VSWp(Ugs-Ugd))+0.5)*Cdg1p(Ugd)}
.FUNC  Cdgp(Ugs,Ugd) {if(Ugs-VSWp(Ugs-Ugd)<1,if(Ugs-VSWp(Ugs-Ugd)
+>-1,hdgp(Ugs,Ugd),0),Cdg1p(Ugd))}
.FUNC  VSWp(y) {g15p*SQRT(max(y+0.5,0))}
.FUNC  Cgs2p(x,y) {if(x-VSWp(y)<1,if(x-VSWp(y)>-1,(0.25*(x-VSWp(y))*(x-
+VSWp(y))**2-0.75*(x-VSWp(y))+0.5)*Coxp,Coxp)*Acfgs2p,0)}
.FUNC  li1p(Uds,Ugs,Tj)  {SL(Igesp(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*
+ Cds(V(d,s),lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 0.8
Cgs g s 241p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drainn 2nH
LDa dr1 drainna 2nH
LG ga1 gate1  3nH
LS so1 source1 2nH
Rpin drainn drain1 500u
Rpin1 drainna drain1a 500u
G_G1p dp sp VALUE={-li1p(V(sp,dp),V(sp,gp),lm(V(Tj2)))-if(Time>100p,SL(DDT(V(sp,dp))*
+ Cds(V(sp,dp),lm(V(Tj2))),-500,500),0)}
R1p gate2 source2 2G
Rd0p dp sp 500Meg
C_h2p dp gp 0.3p
Gdp dr1p dp VALUE = {V(dr1p,dp)/Rdrp(V(sp,dp),lm(V(Tj2)))}
R99p dr1p dp 1k  
Rsp so1p sp {Rsp}
RGp ga1p gp 75.3
Cgsp gp sp 272p
G_G5p sp gp VALUE = {if(Time>100p,DDT(V(sp,gp))*Cgs2p(V(sp,gp),V(sp,dp)),0)}
G_G7p dp gp VALUE = {if(Time>100p,DDT(V(dp,gp))*Cdgp(V(sp,gp),V(dp,gp)),0)}
LDp dr1p drainp 2nH
LDap dr1p drainpa 2nH
LGp ga1p gate2  3nH
LSp so1p source2 2nH
Rpinp drainp drain2 500u
Rpin1p drainpa drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr1p,so1p)*V(sp,so1p)/Rsp,0,100k)}
C11 Tj1 Tamb 16.1u
C12 T12 Tamb 15.2u
C13 T13 Tamb 524u
C14 T14 Tamb 3.95m
C15 T15 Tamb 39.5m
C21 Tj2 Tamb 23.9u
C22 T22 Tamb 25.5u
C23 T23 Tamb 683u
C24 T24 Tamb 5.81m
C25 T25 Tamb 39.5m
Ck T3 Tamb 3m
R11 Tj1 T12 18.6m
R12 T12 T13 280m
R13 T13 T14 3.22
R14 T14 T15 21.45
R15 T15 Tsolder_joint1 22
R21 Tj2 T22 13.8m
R22 T22 T23 164m
R23 T23 T24 3.83
R24 T24 T25 20
R25 T25 Tsolder_joint2 22
Rk1 T14 T3 115
Rk2 T24 T3 115
.ENDS
*$
*n-MOSFET*600V 120mA 45 Ohm*Add_in_Line
.SUBCKT BSP125/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 593M
D125 76 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=80N IS=300P BV=600
M125 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.972 KP=0.185
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=1
M3 86 11 8 8 MSW
COX 11 8 0.012N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.012N M=0.409 VJ=0.981
CGS 76 11 0.085N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-18.35 KP=0.00175
LG 4 1 7N
.ENDS
*$
*Depl-MOS*200V 480mA 3.5 Ohm*Add_in_Line
.SUBCKT BSP149/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 578M
D149 76 97 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=35N IS=300P BV=200
M149 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.334 KP=1.022
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.08N
DGD 8 98 DCGD
.MODEL DCGD D CJO=59P M=0.542 VJ=0.979
CGS 76 99 225P
VGC 87 99 3
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-16.18 KP=0.34
LG 95 1 7N
.ENDS
*$
*p-MOSFET*60V 1700mA 0.35 Ohm*Add_in_Line
.SUBCKT BSP171/INF 1 2 3
LS 5 2 7N
LD 102 3 5N
RG 4 95 33.1
RS 5 76 92M
D171 102 76 DREV
.MODEL DREV D CJO=1N RS=20M TT=100N IS=300P BV=60
M171 117 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.582 KP=0.858
M2 11 117 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.3
M3 117 11 8 8 MSW
COX 11 8 0.5N
DGD 117 8 DCGD
.MODEL DCGD D CJO=758P M=0.635 VJ=1.015
CGS 76 95 0.6N
V8 11 95 -14
RH 117 102 10M
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 1800mA 0.3 Ohm*Add_in_Line
.SUBCKT BSP295/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 130M
D295 76 95 DREV
.MODEL DREV D CJO=0.2N RS=50M TT=30N IS=300P BV=50
M295 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.38 KP=1.27
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.287N M=0.539 VJ=0.985
CGS 76 11 0.26N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.51 KP=1.7
LG 4 1 7N
.ENDS
*$
*n-MOSFET*500V 400mA 4 Ohm*Add_in_Line
.SUBCKT BSP299/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 8.9
RS 5 76 0.383
D299 76 97 DREV
.MODEL DREV D CJO=0.13N RS=20M TT=150N IS=300P BV=500
M299 99 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.946 KP=0.973
M2 96 99 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 99 96 8 8 MSW
COX 96 8 0.6N
DGD 8 99 DCGD
.MODEL DCGD D CJO=0.098N M=0.57 VJ=1.032
CGS 76 96 0.32N
MRDR 99 99 97 99 MVRD
.MODEL MVRD NMOS VTO=-27.83 KP=0.0138
LG 95 1 7N
.ENDS
*$
*p-MOSFET*50V 1100mA 0.8 Ohm*Add_in_Line
.SUBCKT BSP315/INF 1 2 3
LS 5 2 7N
LD 102 3 5N
RG 4 95 5.5M
RS 5 76 252M
D315 102 76 DREV
.MODEL DREV D CJO=300P RS=20M TT=100N IS=300P BV=50
M315 102 95 76 76 MBUZ
.MODEL MBUZ PMOS  VTO=-1.246 KP=0.37
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 102 11 8 8 MSW
COX 11 8 180P
DGD 102 8 DCGD
.MODEL DCGD D CJO=527P M=0.605 VJ=0.913
CGS 76 95 215P
VGC 11 95 -20
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
LG 4 1 7N
.ENDS
*$
*p-MOSFET*100V 650mA 2.2 Ohm*Add_in_Line 
.SUBCKT BSP316/INF 1 2 3
LS 5 2 7N
LD 117 3 5N
RG 4 95 18.4
RS 5 76 485M
D316 117 76 DREV
.MODEL DREV D CJO=250P RS=20M TT=100N IS=300P BV=100
M316 116 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.415 KP=0.413
M2 11 116 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 116 11 8 8 MSW
COX 11 8 0.15N
DGD 116 8 DCGD
.MODEL DCGD D CJO=405P M=0.725 VJ=1.021
CGS 76 95 0.31N
R15 116 117 280M
V8 11 95 -12
LG 4 1 7N
.ENDS
*$
*p-MOSFET*200V 370mA 6 Ohm*Add_in_Line
.SUBCKT BSP317/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 95 5.5M
RS 5 76 322M
D317 86 76 DREV
.MODEL DREV D CJO=100P RS=20M TT=60N IS=300P BV=200
M317 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.419 KP=0.321
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 102 11 8 8 MSW
COX 11 8 340P
DGD 102 8 DCGD
.MODEL DCGD D CJO=98P M=0.477 VJ=0.971
CGS 76 95 225P
VGC 11 95 -13
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
MHELP 86 102 102 102 MVRD
.MODEL MVRD PMOS VTO=57.7 KP=7M
LG 4 1 7N
.ENDS
*$
*n-MOSFET*60V 2600mA 0.15 Ohm*Add_in_Line
.SUBCKT BSP318/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 8.2
RS 5 76 0.066
D318 76 97 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=150N IS=300P BV=60
M318 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.286 KP=14.9
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.6N
DGD 8 98 DCGD
.MODEL DCGD D CJO=343P M=0.505 VJ=1.032
CGS 76 99 0.55N
VGC 87 99 2
RD 98 97 0.045
LG 95 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BSP318S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.067N Cox=0.726N Kgd=0.257N VSW=-1.61 cjo_ds=0.246n
.PARAM   W=0.323 L=1.025U VTH=2.29 alpha=0.5 RG=1.5 RD=58M RS=2M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =67 trr=50n ISE=.13n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
*n-MOSFET*50V 3800mA 0.07 Ohm*Add_in_Line
.SUBCKT BSP319/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 15.5
RS 5 76 0.051
D318 76 97 DREV
.MODEL DREV D CJO=0.65N RS=20M TT=150N IS=300P BV=50
M319 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.851 KP=31.25
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.55N
DGD 8 98 DCGD
.MODEL DCGD D CJO=435P M=0.433 VJ=1.004
CGS 76 99 0.8N
VGC 87 99 4
RD 98 97 0.005
LG 95 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BSP320S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.0732N Cox=0.493N Kgd=0.227N VSW=-1.61 cjo_ds=0.252n
.PARAM   W=0.314 L=1.025U VTH=3.68 alpha=0.5 RG=1.5 RD=63M RS=2M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =67 trr=50n ISE=.13n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BSP78/INF GATE DRAIN SOURCE TJ Tsp Tamb
.PARAM   Cgs=0.643N Cox=2.1N Kgd=0.65N VSW=-1.61 cjo_ds=0.598n
.PARAM   W=0.68 L=1.025U VTH=2.29 alpha=0.5 RG=10 RD=19.26M RS=5M LG=7N 
+LD=5N LS=5N
.PARAM   uo=515 vmax=1.25E5 bv =62 trr=58n ISE=.32n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL DZE2 D (IS=1E-12,RS=5.5,BV=38,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.1M) 
.MODEL DZE3 D (VJ=0.2)
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub=nsub=3.3E17,tox=55E-9,vmax={vmax},u0={uo})
.MODEL	MND	NMOS (LEVEL=3,W={50U},L={20U},VTO=-0.97,nsub=2E16,
+tox=55E-9,vmax={vmax},u0={uo})
.MODEL	MNDD    NMOS (LEVEL=3,W={15U},L={45U},VTO=-16,nsub=2E16,
+tox=200E-9,vmax={vmax},u0={uo})
.MODEL	MNDD2   NMOS (LEVEL=3,W={90U},L={12U},VTO=-16,nsub=2E16,
+tox=200E-9,vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.043}  Rth2={0.067}  Rth3={0.142}  Rth4={0.222}  
+Rth5={0.091}  Rth6={5.018} Rth7={5.00}
.PARAM  CZth1={2.167E-4} CZth2={2.069E-4} CZth3={4.403E-4} CZth4={1.264E-3} 
+CZth5={2.8116E-3} CZth6={2.611E-3} CZth7={0.58E-3}
L_LS         SOURCE 7  {LS}  
V_VDR         Vdrain dr DC 0V AC 0V 
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
R_R8         DSB vg  1E12  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
E_ABM27         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
S_S3         gi DSB $N_0002 0 S3
RS_S3        $N_0002 0 1G
.MODEL S3 VSWITCH Roff=1e6 Ron=100 Voff=3.5 Von=4
R_RS         7 DSB  {Rs}  
R_RG         8 d12  {RG}  
L_LG         GATE 8  {LG}  
E_ABM22         OT 0 VALUE { if (V(TJ)<155 | V(OTN)>3.5 ,0,5)    }
E_ABM23         OTN 0 VALUE { if (V(TJ)>165 | V(OT)>3.5 ,0,5)    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY 
M_M3         sg12 sg12 d12 DSB MND
M_M2         sg12 sg12 d12 DSB MNDD
D_ZD2         gi clb DZE2 
D_ZD1         DCB clb DZE3 
M_M4         gi sg12 sg12 DSB MNDD2
E_ABM28         $N_0002 0 VALUE { if (I(V_VID)>(23-(V(TJ)-25)*0.067)|V(OT)>3.5,
+  5,0)    }
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(V_VID)*{selfh},0) }
R_Rth2         1 2  {Rth2}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 6  {Rth6}  
R_Rth1         TJ 1  {Rth1}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth7         6 Tsp  {Rth7}  
C_CZth7         Tamb 6  {CZth7}  
.ENDS    
*$
*n-MOSFET*240V 320mA 8 Ohm*Add_in_Line
.SUBCKT BSP88/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 183M
D88 76 95 DREV
.MODEL DREV D CJO=0.05N RS=20M TT=20N IS=300P BV=240
M88 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=0.849 KP=0.149
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.025N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.025N M=0.454 VJ=0.974
CGS 76 11 0.08N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-8.953 KP=0.0305
LG 4 1 7N
.ENDS
*$
*n-MOSFET*240V 360mA 6 Ohm*Add_in_Line
.SUBCKT BSP89/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 249M
DSP89 76 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=30N IS=300P BV=240
MSP89 86 11 76 98 MBUZ
.MODEL MBUZ NMOS VTO=1.487 KP=0.225
M2 96 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 96 8 8 MSW
COX 96 8 0.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.04N M=0.495 VJ=0.98
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.76 KP=0.039
VGC 96 11 -3
LG 4 1 7N
.ENDS
*$
*n-MOSFET*100V 220mA 6 Ohm*Add_in_Line
.SUBCKT BSS100/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 796M
D100 100 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=50N IS=300P BV=100
M100 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=1.162 KP=0.157
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.025N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.013N M=0.506 VJ=0.997
CGS 100 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-5.72 KP=0.07
V7 99 11 4.5
LG 76 11 7N
.ENDS
*$
*n-MOSFET*240V 130mA 16 Ohm*Add_in_Line
.SUBCKT BSS101/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 213M
D101 76 95 DREV
.MODEL DREV D CJO=0.017N RS=20M TT=20N IS=300P BV=240
M101 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.448 KP=0.104
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.09N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.012N M=0.383 VJ=0.948
CGS 76 11 0.055N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-9.707 KP=.015
LG 4 1 7N
.ENDS
*$
*p-MOSFET*50V 170mA 10 Ohm*Add_in_Line
.SUBCKT BSS110/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 3246M
D110 86 76 DREV
.MODEL DREV D CJO=0.035N RS=20M TT=60N IS=300P BV=50
M110 86 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.462 KP=0.04
M2 11 86 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.183N
DGD 86 8 DCGD
.MODEL DCGD D CJO=0.183N M=0.439 VJ=1.097
CGS 76 11 0.02N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*100V 170mA 6 Ohm*Add_in_Line
.SUBCKT BSS119/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 59
RS 5 76 1.045
D119 76 97 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=30N IS=300P BV=100
M119 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.999 KP=0.134
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.025N
DGD 8 98 DCGD
.MODEL DCGD D CJO=22.4P M=0.688 VJ=1.082
CGS 76 99 0.039N
VGC 87 99 2
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-4.859 KP=0.073
LG 95 1 7N
.ENDS
*$
*n-MOSFET*600V 100mA 45 Ohm*Add_in_Line
.SUBCKT BSS125/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 160M
D125 76 95 DREV
.MODEL DREV D CJO=0.02N RS=50M TT=150N IS=300P BV=600
M125 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.012 KP=0.168
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 0.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.011N M=0.371 VJ=0.969
CGS 76 11 0.095N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-17.18 KP=0.00215
LG 4 1 7N
.ENDS
*$
*Depl-MOS*240V 150mA 20 Ohm*Add_in_Line
.SUBCKT BSS129/INF 1 2 3
LS 5 2 7N
LD 83 3 5N
RG 4 11 5
RS 5 76 1M
DBSS129 76 83 DREV
.MODEL DREV D CJO=30P RS=20M TT=50N IS=30P BV=240
+
MBSS129 90 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.30 KP=0.165
M2 11 90 8 8 MSW
.MODEL MSW NMOS VTO=5 KP=25
+
M3 90 11 8 8 MSW
COX 11 8 66P
DGD 8 90 DCGD
.MODEL DCGD D CJO=13.57P M=0.475 VJ=1.062
CGS 76 11 25P
RDR 90 83 2
LG 4 1 7N
.ENDS
*$
*Depl-MOS*600V 80mA 60 Ohm*Add_in_Line
.SUBCKT BSS135/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 392M
D135 76 97 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=50N IS=300P BV=600
M135 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.164 KP=0.159
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.025N
DGD 8 98 DCGD
.MODEL DCGD D CJO=37P M=0.833 VJ=1.147
CGS 76 99 0.065N
VGC 87 99 8
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-17.03 KP=0.0018
LG 95 1 7N
.ENDS
*$
*n-MOSFET*50V 220mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS138/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 871M
D138 76 95 DREV
.MODEL DREV D CJO=0.06N RS=20M TT=15N IS=300P BV=50
M138 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.281 KP=0.186
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.08N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.062N M=0.791 VJ=1.174
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-48.9 KP=.045
LG 4 1 7N
.ENDS
*$
*n-MOSFET*65V 220mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS145/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 96 385M
D145 96 95 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=70N IS=300P BV=65
M145 86 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=1.93 KP=0.145
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.044N M=0.857 VJ=1.077
CGS 96 11 0.059N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-70.541 KP=0.034
LG 4 1 7N
.ENDS
*$
*Depl-MOS*250V 70mA 100 Ohm*Add_in_Line
.SUBCKT BSS229/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 40
RS 5 76 349M
D229 76 97 DREV
.MODEL DREV D CJO=0.02N RS=20M TT=50N IS=300P BV=250
M229 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-0.85 KP=0.107
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.01N
DGD 8 98 DCGD
.MODEL DCGD D CJO=8P M=0.545 VJ=1.004
CGS 76 99 0.07N
VGC 87 99 5
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-8.608 KP=0.0046
LG 95 1 7N
.ENDS
*$
*n-MOSFET*50V 1400mA 0.3 Ohm*Add_in_Line
.SUBCKT BSS295/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 137M
D295 100 95 DREV
.MODEL DREV D CJO=0.25N RS=20M TT=300N IS=300P BV=50
M295 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=1.174 KP=0.924
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.55N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.167N M=0.522 VJ=0.996
CGS 100 11 0.33N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-7.196 KP=5
V7 99 11 3.5
LG 76 11 7N
.ENDS
*$
*n-MOSFET*100V 800mA 0.8 Ohm*Add_in_Line
.SUBCKT BSS296/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 18.4
RS 5 76 0.163
D296 76 97 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=150N IS=300P BV=100
M296 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.28 KP=0.82
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.15N
DGD 8 98 DCGD
.MODEL DCGD D CJO=83.8P M=0.518 VJ=0.994
CGS 76 99 0.37N
VGC 87 99 4
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-8.21 KP=0.29
LG 95 1 7N
.ENDS
*$
*n-MOSFET*200V 480mA 2 Ohm*Add_in_Line
.SUBCKT BSS297/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 20.8
RS 5 76 0.092
D297 76 97 DREV
.MODEL DREV D CJO=0.22N RS=20M TT=150N IS=300P BV=200
M297 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.47 KP=0.998
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.12N
DGD 8 98 DCGD
.MODEL DCGD D CJO=65.74P M=0.533 VJ=0.989
CGS 76 99 0.32N
VGC 87 99 4
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-9.5 KP=0.11
LG 95 1 7N
.ENDS
*$
.MODEL BSS63/INF PNP(
+       AF= 1.00E+00    BF= 1.52E+02    BR= 1.16E-01   CJC= 3.90E-11
+      CJE= 5.74E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.18E-01   IKR= 1.00E+00   IRB= 8.03E-02    IS= 7.59E-14
+      ISC= 1.72E-12   ISE= 1.90E-14   ITF= 1.28E+00    KF= 0.00E+00
+      MJC= 4.85E-01   MJE= 4.41E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.27E+00    NF= 1.01E+00    NR= 1.21E+00   PTF= 0.00E+00
+       RB= 2.42E+00   RBM= 4.95E+00    RC= 8.89E-01    RE= 1.00E-02
+       TF= 8.18E-10    TR= 0.00E+00   VAF= 3.28E+02   VAR= 2.61E+01
+      VJC= 3.00E-01   VJE= 3.15E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.01E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS64/INF NPN(
+       AF= 1.00E+00    BF= 1.70E+02    BR= 9.55E-02   CJC= 2.58E-11
+      CJE= 4.69E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.13E-01   IKR= 1.00E+00   IRB= 6.59E-02    IS= 1.69E-12
+      ISC= 9.92E-13   ISE= 3.23E-14   ITF= 6.20E+00    KF= 0.00E+00
+      MJC= 5.11E-01   MJE= 3.97E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.28E+00    NF= 1.20E+00    NR= 1.41E+00   PTF= 0.00E+00
+       RB= 7.17E+00   RBM= 1.00E+01    RC= 5.54E-01    RE= 1.00E-02
+       TF= 1.50E-09    TR= 0.00E+00   VAF= 7.00E+02   VAR= 8.58E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.00E+06
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS79/INF NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS80/INF NPN( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02 
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS81/INF NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS82/INF NPN( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
*p-MOSFET*50V 130mA 10 Ohm*Add_in_Line
.SUBCKT BSS84/INF 1 2 3
LS 5 2 7N
LD 87 3 5N
RG 4 11 5.5M
RS 5 76 3759M
D84 87 76 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=45N IS=300P BV=50
M84 87 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.585 KP=0.041
M2 11 87 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 87 11 8 8 MSW
COX 11 8 0.1N
DGD 87 8 DCGD
.MODEL DCGD D CJO=0.183N M=0.439 VJ=1.097
CGS 76 11 0.021N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*240V 290mA 6 Ohm*Add_in_Line
.SUBCKT BSS87/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 193M
D87 76 95 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=30N IS=300P BV=240
M87 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.475 KP=0.212
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.032N M=0.448 VJ=0.974
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.44 KP=0.026
LG 4 1 7N
.ENDS
*$
*n-MOSFET*240V 250mA 8 Ohm*Add_in_Line
.SUBCKT BSS88/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 242M
D88 100 95 DREV
.MODEL DREV D CJO=0.05N RS=20M TT=20N IS=300P BV=240
M88 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=0.782 KP=0.195
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.06N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.25N M=0.44 VJ=0.968
CGS 100 11 0.08N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-8.481 KP=0.037
V7 99 11 5.5
LG 76 11 7N
.ENDS
*$
*n-MOSFET*240V 290mA 6 Ohm*Add_in_Line
.SUBCKT BSS89/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 164M
DSS89 76 95 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=30N IS=300P BV=240
MSS89 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.651 KP=0.227
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.035N M=0.493 VJ=0.983
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.86 KP=0.032
LG 4 1 7N
.ENDS
*$
*p-MOSFET*240V 150mA 20 Ohm*Add_in_Line
.SUBCKT BSS92/INF  1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 1084M
D92 97 76 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=35N IS=300P BV=240
M92 98 99 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.721 KP=0.071
M2 87 98 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.2N
DGD 98 8 DCGD
.MODEL DCGD D CJO=59P M=0.542 VJ=0.979
CGS 76 99 0.085N
VGC 87 99 -20
MHELP 98 98 97 98 MVRD
.MODEL MVRD PMOS VTO=31.5 KP=0.006
LG 95 1 7N
.ENDS
*$
*n-MOSFET*50V 300mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS98/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 663M
D98 76 95 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=2.2N IS=300P BV=50
M98 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.099 KP=0.15
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.062N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.062N M=0.791 VJ=1.174
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-48.9 KP=.2
LG 4 1 7N
.ENDS
*$
*
.SUBCKT BTS114A/INF  DRAIN GATE SOURCE TC TJ PWR
***************************************************
* Siemens Microelectronics
* Developmental Pre-Release Model for BTS114A TEMPFET with synthetic 
* capacitor CGD
***************************************************
.PARAM  cgs=370P cox=1.57n cjo=0.5n  cjo_ds=0.430n rg=1.36 rs=4m  bv=69 
+nsub=1.75E17 tox=57E-9 kappa=0.05
***************************************************
.MODEL QNSCR NPN  (TF=400N TR=1.6U CJC=2P CJE=16P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=200 BR=25 ISC=3N NC=2)
.MODEL QPSCR PNP (TF=90N TR=180N CJC=2P CJE=8P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=80 BR=25 ISC=3N NC=2 RE=48)
.MODEL DZE1 D (RS=5.5 BV=5.47 CJO=36.6P TT=50N M=0.33 VJ=0.75 IS=1E-10 N=1.27 
+IBV=2M)
.MODEL D114G  D (IS=3.42E-10 RS=30M TT=375N BV={bv} N=1.2)
.MODEL D114C  D (CJO={cjo_ds} VJ=0.464 M=0.251)
.MODEL M114A NMOS (LEVEL=3 VTO=0
+   nsub={nsub}
+   RS={rs} RD=2M
+   UO=600
+   VMAX=1.75E5
+   kappa={kappa}
+   tox={tox})
*
*
*
*
GPWR    0   TJ  PWR  0          1.0 
Rsurf  TJ    1                0.085 
Repi    1    2                0.172 
Rsub    2    3               0.4674 
Rsoldr  3    4             0.565897 
Rhdr    4   TC                 1.3 
C1     TJ    1                0.3M 
C2      1    2               1.535M 
C3      2    3                13.27M 
C4      3    4                  29M 
C5      4   TC               98.76M 
R17     0   PWR                 1E6 
E2    PWR    0     VALUE =  {ABS((V(DCB,DSB))*I(VIP))} 
Lg   GATE    5                  7NH 
LD      6  DRAIN                5NH 
LS  SOURCE   7                  7NH 
RG      5   gi                 1.36 
RD1    di   DCB                 36M 
RLKG   gi   DSB                1E12 
RS1   DSB    7                   4M 
CGS    gi   DSB               {cgs} 
MBUZ   di   11   DSB   DSB     M114A L=2.5E-6  W=0.68
E_ABM31   ox   0  VALUE = { if( V(dcb) - V(gi) > 0.0, V(dcb)
+    -V(gi) +2*(cjo/cox)^2*(1-sqrt(1+((V(dcb)-V(gi)) /(cjo/cox)^2))),0) }
G_ABM3I1  di  gi  VALUE = { if ( time >50n,DDT(cox*(V(dcb) -V(gi) -V(ox)) ), 0) } 
VIP     6   DCB                0.0 
EGfs   11   DSB    VALUE =  {(V(VG,DSB))*(2.038-((V(TJ)+273)*0.00346))} 
EVTH   gi   VG     VALUE =  {4.68-((V(TJ)+273)*0.005)} 
R8     VG   DSB                 1E9 
DBODY1 DSB  di                D114C 
DBODY2 DSB  DCB               D114G 
E3      0   12    TJ    0       1.0 
E4   TSNS    0     0   13       1E6 
R19    TJ    0                  1E6 
R20    12   13                 1MEG 
R21    13  TSNS                1MEG 
C6     13  TSNS                2.8N 
Q1     14   15   16          QPSCR 0.7  OFF 
Q2     17   15   16          QPSCR 0.3  OFF 
Q3     15   14   18          QNSCR 0.7 
Q4     15   17   18          QNSCR 0.3 
R22    14   18                 100K 
R23    14   17                  330 
D2     18   14                 DZE1 
L1     16  GATE               3.2NH 
L2     18 SOURCE              2.3NH 
GTSENS 19   14      VALUE =  {2U+0.12M/(1+EXP(-(V(TSNS)-160))/0.272)} 
E5     19   18   16   18        1.0
.ENDS                       
*$
*
.SUBCKT BTS115A/INF  DRAIN GATE SOURCE TC TJ PWR
***************************************************
* Siemens Microelectronics
* Developmental Pre-Release Model for BTS115A TEMPFET with synthetic 
*  capacitor CGD
***************************************************
.PARAM  cgs=380P cox=1.75n cjo=0.5n  cjo_ds=0.477n rg=1.36 rs=4m  bv=69 
+nsub=1.75E17 tox=50E-9 kappa=0.05
***************************************************
.MODEL QNSCR NPN  (TF=400N TR=1.6U CJC=2P CJE=16P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=200 BR=25 ISC=3N NC=2)
.MODEL QPSCR PNP (TF=90N TR=180N CJC=2P CJE=8P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=80 BR=25 ISC=3N NC=2 RE=48)
.MODEL DZE1 D (RS=5.5 BV=5.47 CJO=36.6P TT=50N M=0.33 VJ=0.75 IS=1E-10 N=1.27 
+IBV=2M)
.MODEL D115G  D (IS=3.42E-10 RS=30M TT=375N BV={bv} N=1.2)
.MODEL D115C  D (CJO={cjo_ds} VJ=0.464 M=0.251)
.MODEL M115A NMOS (LEVEL=3 VTO=0
+   nsub={nsub}
+   RS={rs} RD=2M
+   UO=600
+   VMAX=1.75E5
+   kappa={kappa}
+   tox={tox})
*
*
*
*
GPWR    0   TJ  PWR  0          1.0 
Rsurf  TJ    1                0.085 
Repi    1    2                0.172 
Rsub    2    3               0.4674 
Rsoldr  3    4             0.565897 
Rhdr    4   TC                 1.3 
C1     TJ    1                0.3M 
C2      1    2               1.535M 
C3      2    3                13.27M 
C4      3    4                  29M 
C5      4   TC               98.76M 
R17     0   PWR                 1E6 
E2    PWR    0     VALUE =  {ABS((V(DCB,DSB))*I(VIP))} 
Lg   GATE    5                  7NH 
LD      6  DRAIN                5NH 
LS  SOURCE   7                  7NH 
RG      5   gi                 1.36 
RD1    di   DCB                 36M 
RLKG   gi   DSB                1E12 
RS1   DSB    7                   4M 
CGS    gi   DSB               {cgs} 
MBUZ   di   11   DSB   DSB     M115A L=2.5E-6  W=0.68
E_ABM31   ox   0  VALUE = { if( V(dcb) - V(gi) > 0.0, V(dcb)
+    -V(gi) +2*(cjo/cox)^2*(1-sqrt(1+((V(dcb)-V(gi)) /(cjo/cox)^2))),0) }
G_ABM3I1  di  gi  VALUE = { if ( time >50n,DDT(cox*(V(dcb) -V(gi) -V(ox)) ), 0) } 
VIP     6   DCB                0.0 
EGfs   11   DSB    VALUE =  {(V(VG,DSB))*(2.038-((V(TJ)+273)*0.00346))} 
EVTH   gi   VG     VALUE =  {3.40-((V(TJ)+273)*0.005)} 
R8     VG   DSB                 1E9 
DBODY1 DSB  di                D115C 
DBODY2 DSB  DCB               D115G 
E3      0   12    TJ    0       1.0 
E4   TSNS    0     0   13       1E6 
R19    TJ    0                  1E6 
R20    12   13                 1MEG 
R21    13  TSNS                1MEG 
C6     13  TSNS                2.8N 
Q1     14   15   16          QPSCR 0.7  OFF 
Q2     17   15   16          QPSCR 0.3  OFF 
Q3     15   14   18          QNSCR 0.7 
Q4     15   17   18          QNSCR 0.3 
R22    14   18                 100K 
R23    14   17                  330 
D2     18   14                 DZE1 
L1     16  GATE               3.2NH 
L2     18 SOURCE              2.3NH 
GTSENS 19   14      VALUE =  {2U+0.12M/(1+EXP(-(V(TSNS)-160))/0.272)} 
E5     19   18   16   18        1.0
.ENDS                       
*$
*
*
.SUBCKT BTS130/INF  DRAIN GATE SOURCE TC TJ PWR
***************************************************
* Siemens Microelectronics
* Developmental Pre-Release Model for BTS130 TEMPFET with synthetic 
* capacitor CGD
***************************************************
.PARAM  cgs=740P cox=3.97n cjo=1.0n  cjo_ds=0.953n rg=1.36 rs=4m  bv=69 
+nsub=1.75E17 tox=57E-9 kappa=0.05
***************************************************
.MODEL QNSCR NPN  (TF=400N TR=1.6U CJC=2P CJE=16P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=200 BR=25 ISC=3N NC=2)
.MODEL QPSCR PNP (TF=90N TR=180N CJC=2P CJE=8P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=80 BR=25 ISC=3N NC=2 RE=48)
.MODEL DZE1 D (RS=5.5 BV=5.47 CJO=36.6P TT=50N M=0.33 VJ=0.75 IS=1E-10 N=1.27 
+IBV=2M)
.MODEL D130G  D (IS=3.42E-10 RS=15M TT=375N BV={bv} N=1.2)
.MODEL D130C  D (CJO={cjo_ds} VJ=0.464 M=0.251)
.MODEL M130 NMOS (LEVEL=3 VTO=0
+   nsub={nsub}
+   RS={rs} RD=2M
+   UO=600
+   VMAX=1.75E5
+   kappa={kappa}
+   tox={tox})
*
*
*
*
GPWR    0   TJ  PWR  0          1.0 
Rsurf  TJ    1               0.785 
Repi    1    2             0.172344 
Rsub    2    3               0.3674 
Rsoldr  3    4             0.265897 
Rhdr    4   TC              0.77655 
C1     TJ    1                0.12M 
C2      1    2               1.635M 
C3      2    3                5.27M 
C4      3    4                  24M 
C5      4   TC               88.76M 
R17     0   PWR                 1E6 
E2    PWR    0     VALUE =  {ABS((V(DCB,DSB))*I(VIP))} 
Lg   GATE    5                  7NH 
LD      6  DRAIN                5NH 
LS  SOURCE   7                  7NH 
RG      5   gi                 1.36 
RD1    di   DCB                 36M 
RLKG   gi   DSB                1E12 
RS1   DSB    7                   4M 
CGS    gi   DSB               {cgs} 
MBUZ   di   11   DSB   DSB     M130 L=2.5E-6  W=1.37
E_ABM31   ox   0  VALUE = { if( V(dcb) - V(gi) > 0.0, V(dcb)
+    -V(gi) +2*(cjo/cox)^2*(1-sqrt(1+((V(dcb)-V(gi)) /(cjo/cox)^2))),0) }
G_ABM3I1  di  gi  VALUE = { if ( time >50n,DDT(cox*(V(dcb) -V(gi) -V(ox)) ), 0) } 
VIP     6   DCB                0.0 
EGfs   11   DSB    VALUE =  {(V(VG,DSB))*(2.038-((V(TJ)+273)*0.00346))} 
EVTH   gi   VG     VALUE =  {4.68-((V(TJ)+273)*0.005)} 
R8     VG   DSB                 1E9 
DBODY1 DSB  di                D130C 
DBODY2 DSB  DCB               D130G 
E3      0   12    TJ    0       1.0 
E4   TSNS    0     0   13       1E6 
R19    TJ    0                  1E6 
R20    12   13                 1MEG 
R21    13  TSNS                1MEG 
C6     13  TSNS                2.8N 
Q1     14   15   16          QPSCR 0.7  OFF 
Q2     17   15   16          QPSCR 0.3  OFF 
Q3     15   14   18          QNSCR 0.7 
Q4     15   17   18          QNSCR 0.3 
R22    14   18                 100K 
R23    14   17                  330 
D2     18   14                 DZE1 
L1     16  GATE               3.2NH 
L2     18 SOURCE              2.3NH 
GTSENS 19   14      VALUE =  {2U+0.12M/(1+EXP(-(V(TSNS)-160))/0.272)} 
E5     19   18   16   18        1.0
.ENDS                       
*$
*
.SUBCKT BTS131/INF  DRAIN GATE SOURCE TC TJ PWR
***************************************************
* Siemens Microelectronics
* Developmental Pre-Release Model for BTS131 TEMPFET with synthetic 
* capacitor CGD
***************************************************
.PARAM  cgs=815P cox=3.97n cjo=1.0n  cjo_ds=0.953n rg=1.36 rs=4m  bv=69 
+nsub=1.75E17 tox=44E-9 kappa=0.05
***************************************************
.MODEL QNSCR NPN  (TF=400N TR=1.6U CJC=2P CJE=16P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=200 BR=25 ISC=3N NC=2)
.MODEL QPSCR PNP (TF=90N TR=180N CJC=2P CJE=8P XTB=2.5
+ IS=1F ISE=0.3N NE=2 BF=80 BR=25 ISC=3N NC=2 RE=48)
.MODEL DZE1 D (RS=5.5 BV=5.47 CJO=36.6P TT=50N M=0.33 VJ=0.75 IS=1E-10 N=1.27 
+IBV=2M)
.MODEL D130G  D (IS=3.42E-10 RS=15M TT=375N BV={bv} N=1.2)
.MODEL D130C  D (CJO={cjo_ds} VJ=0.464 M=0.251)
.MODEL M131 NMOS (LEVEL=3 VTO=0
+   nsub={nsub}
+   RS={rs} RD=2M
+   UO=600
+   VMAX=1.75E5
+   kappa={kappa}
+   tox={tox})
*
*
*
*
GPWR    0   TJ  PWR  0          1.0 
Rsurf  TJ    1               0.785 
Repi    1    2             0.172344 
Rsub    2    3               0.3674 
Rsoldr  3    4             0.265897 
Rhdr    4   TC              0.77655 
C1     TJ    1                0.12M 
C2      1    2               1.635M 
C3      2    3                5.27M 
C4      3    4                  24M 
C5      4   TC               88.76M 
R17     0   PWR                 1E6 
E2    PWR    0     VALUE =  {ABS((V(DCB,DSB))*I(VIP))} 
Lg   GATE    5                  7NH 
LD      6  DRAIN                5NH 
LS  SOURCE   7                  7NH 
RG      5   gi                 1.36 
RD1    di   DCB                 36M 
RLKG   gi   DSB                1E12 
RS1   DSB    7                   4M 
CGS    gi   DSB               {cgs} 
MBUZ   di   11   DSB   DSB     M131 L=2.5E-6  W=1.37
E_ABM31   ox   0  VALUE = { if( V(dcb) - V(gi) > 0.0, V(dcb)
+    -V(gi) +2*(cjo/cox)^2*(1-sqrt(1+((V(dcb)-V(gi)) /(cjo/cox)^2))),0) }
G_ABM3I1  di  gi  VALUE = { if ( time >50n,DDT(cox*(V(dcb) -V(gi) -V(ox)) ), 0) } 
VIP     6   DCB                0.0 
EGfs   11   DSB    VALUE =  {(V(VG,DSB))*(2.038-((V(TJ)+273)*0.00346))} 
EVTH   gi   VG     VALUE =  {3.40-((V(TJ)+273)*0.0055)} 
R8     VG   DSB                 1E9 
DBODY1 DSB  di                D130C 
DBODY2 DSB  DCB               D130G 
E3      0   12    TJ    0       1.0 
E4   TSNS    0     0   13       1E6 
R19    TJ    0                  1E6 
R20    12   13                 1MEG 
R21    13  TSNS                1MEG 
C6     13  TSNS                2.8N 
Q1     14   15   16          QPSCR 0.7  OFF 
Q2     17   15   16          QPSCR 0.3  OFF 
Q3     15   14   18          QNSCR 0.7 
Q4     15   17   18          QNSCR 0.3 
R22    14   18                 100K 
R23    14   17                  330 
D2     18   14                 DZE1 
L1     16  GATE               3.2NH 
L2     18 SOURCE              2.3NH 
GTSENS 19   14      VALUE =  {2U+0.12M/(1+EXP(-(V(TSNS)-160))/0.272)} 
E5     19   18   16   18        1.0
.ENDS                       
*$
* Base chip for the BTS550P
.SUBCKT BC550 GATE DRAIN SOURCE IS TJ Tcase Tamb 
.PARAM   Cgs=6.14N Cox=12.65N Kgd=5.59N VSW=-1.61 cjo_ds=3.2n
.PARAM   W=9.1 L=1.025U VTH=2.29 alpha=0.8 RG=10 RD=2.1M RS=0.4M LG=7N 
+LD=5N LS=3.5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =49 trr=190n ISE=2.3n  
.MODEL D_BODY   D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL DZE3 D (VJ=0.2) 
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})  
.PARAM  selfh={1} Rth1={0.001794}  Rth2={0.0041547}  Rth3={0.023}  Rth4={0.042}  
+Rth5={0.065}  Rth6={0.033}
.PARAM  CZth1={6.022E-4} CZth2={6.428E-4} CZth3={1.624E-3} CZth4={0.012} 
+CZth5={0.031} CZth6={0.41} RATIO={21500}
R_RDUMMY         RDM RDP  1E12  
V_VDR         Vdrain $N_0001 DC 0V AC 0V 
R_RKLEIN         RDM RKP  .01m  
G_G6         DCB gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
E_E5         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_Rth2         a b  {Rth2}  
R_Rth3         b c  {Rth3}  
C_CZth2         Tamb a  {CZth2}  
C_CZth3         Tamb b  {CZth3}  
R_Rth4         c d  {Rth4}  
C_CZth6         Tamb e  {CZth6}  
R_Rth6         e Tcase  {Rth6}  
R_Rth5         d e  {Rth5}  
C_CZth5         Tamb d  {CZth5}  
C_CZth4         c Tamb  {CZth4}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth1         TJ a  {Rth1}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM24         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
G_ABMII3         DCB IS VALUE { if (I(V_VID)/
+ {RATIO}<0.01*(300/(V(TJ)+273))**1.5,   
+ I(V_VID)/{RATIO},0.01*(300/(V(TJ)+273))**1.5)   }
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {Rs}  
D_ZD1         IS n2 DZE3 
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
E_E7         Vdrain DSB RDM DSB 1
M_X2         $N_0001 vg DSB DSB NMOS_L3
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
D_DBODY1         DSB DCB D_BODY 
R_R8         DSB vg  1E12  
G_G5         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(V_VID)*{selfh},0) }
E_ABM25         Vdg 0 VALUE { V(DCB)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
L_LG         GATE 5  {LG}  
R_RG         5 gi  {RG}  
E_Eis         n2 0 VALUE { if ( V(Vpcl)>0,V(Vpcl),0) }
E_ABM15         Vpcl 0 VALUE { if ( (V(gi)-3)>V(DCB),V(DCB),V(gi)-3)    }
.ENDS    
*$
*
.SUBCKT BTS550P/INF IN Vbb Out IS Tj Tcase Tamb 
.MODEL DZE1 D (IS=1E-12,RS=5.5,BV=6.25,N=1.27,CJO=0.1P,VJ=0.75,M=0.33,IBV=.1M) 
.MODEL DZE2 D (IS=1E-12,RS=5.5,BV=38,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.1M) 
.MODEL DZE3 D (VJ=0.2) 
.MODEL DZE4 D (IS=1E-12,RS=5.5,BV=9,N=1.27,CJO=0.1P,VJ=0.75,M=0.33,IBV=.1M)
.MODEL DZE5 D (IS=1E-12,RS=5.5,BV=72,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.1M)
.MODEL QNSCR NPN (TF=400N,TR=1.6U,CJC=2P,CJE=16P,XTB=2.5,
+ IS=1F,ISE=0.3N,NE=2,BF=300,BR=60,ISC=3N,NC=2) 
R_Rvcont         vcon vcont  100k  
C_ccon         0 vcont  .05n  
R_Rvc2         cpi cp  4k  
R_Rcp         cp vcp  120k  
R_Ren         en enable  100k  
C_cen         0 enable  .05n  
E_ABM24         OTCN 0 VALUE { if (V(Tj)>190 | V(OTC)>3.5 ,0,5)    }
R_Rth1         Ts Tj  1meg  
E_ABM25         OTC 0 VALUE { if (V(Tj)<180 | V(OTCN)>3.5 ,0,5)    }
C_CZth1         Ts 0  2.8n  
E_ABM27         OTS 0 VALUE { if (V(Ts)<155 | V(OTSN)>3.5 ,0,5)    }
E_ABM26         OTSN 0 VALUE { if (V(Ts)>165 | V(OTS)>3.5 ,0,5)    }
E_ABM28         OT 0 VALUE { if (V(OTC)>3.5 | V(OTS)>3.5 ,5,0)    }
C_cscd         0 scd  1n  
E_ABM210         sc 0 VALUE { if (V(sci)>3.5 & V(scd)>3,5,0)    }
R_rscd         sci scd  150k  
S_S2         cpi Out vcont 0 S2
RS_S2        vcont 0 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=3.5 Von=4
R_Rsbl         Out sbl  300  
E_ABM211         con 0 VALUE { if (V(Out)>2.0 & V(ine)>3.5,0,5)    }
R_Rvdd         Vbb Vbr  100  
E_ABM11         vcp 0 VALUE { if (2*V(cp)>V(Vbr)+12,   
+ V(Vbr)+12,2*V(cp))   }
R_Rin         IN Vbr  120k  
E_ABM212         ine 0 VALUE { if (V(Vbr)-V(IN)>3.9,5,0)    }
R_Rbo         Out n1  20k  
S_S5         Vbr n1 enable 0 S5
RS_S5        enable 0 1G
.MODEL S5 VSWITCH Roff=10e6 Ron=2k Voff=3.5 Von=4
R_Rrb         Rbat Rbatv  100k  
S_S3         cp sbl SBd 0 S3
RS_S3        SBd 0 1G
.MODEL S3 VSWITCH Roff=1e6 Ron=3k Voff=3.5 Von=4
R_Rsb         SBcont SBd  100k  
C_csb         0 SBd  .05n  
E_ABM33         SBcont 0 VALUE { if ((V(Svg)+V(Sbq))>7.5 & V(enable)>3.5,5,0)  
+   }
E_ABM32         vcon 0 VALUE { if (V(con)>2.5 | V(sc)>2.5 | V(OT)>2.5,5,0)    }
E_ABM34         en 0 VALUE { if (V(OT)<3.5 & V(sc)<3.5 & V(ine)>3.5,5,0)    }
E_ABM29         sci 0 VALUE { if ((V(Vbr)-V(Out))>7 & (V(Vbr)-V(IN))>4  
+ & V(OT)<3.5,5,0)   }
E_Eref         Nscref 0 VALUE { if ( V(Out)+4.65<V(Vbr),V(Out)+4.65,V(Vbr)) }
E_ABM22         Sbq 0 VALUE { if ((V(Vbr)-V(Out))>4.2,5,0)    }
E_ABM21         Svg 0 VALUE { if ((V(g)-V(Out))>3.0,5,0)    }
S_S4         n1 Nscref SBd 0 S4
RS_S4        SBd 0 1G
.MODEL S4 VSWITCH Roff=1e6 Ron=10 Voff=3.5 Von=4
Q_Q4         Vbr n1 cp QNSCR
Q_Q3         Vbr cl g QNSCR
D_ZD3         IN Vbr DZE5 
D_ZD1         Out n1 DZE1 
D_ZD2         cl clb DZE2 
D_ZD6         Vbr clb DZE3 
S_S1         Vbr n1 Rbatv 0 S1
RS_S1        Rbatv 0 1G
.MODEL S1 VSWITCH Roff=10e6 Ron=500 Voff=3.5 Von=4
E_ABM213         Rbat 0 VALUE { if (V(IN)-V(Vbr)>3.9,5,0)    }
R_Rclamp         cl Out  100k  
X_X4         g Vbb Out $N_0001 Tj Tcase Tamb BC550
R_Rgate         g cp  1.3k  
D_ZD4         IS CLis DZE3 
D_ZD5         cl CLis DZE4 
C_crb         0 Rbatv  .05n  
S_S6         $N_0001 IS ine 0 S6
RS_S6        ine 0 1G
.MODEL S6 VSWITCH Roff=10e6 Ron=1 Voff=3.5 Von=4
.ENDS    
*$
* Base chip for the BTS555
.SUBCKT BC555 GATE DRAIN SOURCE IS TJ Tcase Tamb 
.PARAM   Cgs=8.66N Cox=17.85N Kgd=7.88N VSW=-1.61 cjo_ds=4.5n
.PARAM   W=12.83 L=1.025U VTH=2.29 alpha=0.8 RG=10 RD=1.49M RS=0.27M LG=7N 
+ LD=5N LS=2.5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =49 trr=190n ISE=2.3n  
.MODEL D_BODY   D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL DZE3 D (VJ=0.2) 
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})  
.PARAM  selfh={1} Rth1={0.001177}  Rth2={0.00273}  Rth3={0.016}  Rth4={0.021}  
+Rth5={0.049}  Rth6={0.0328}
.PARAM  CZth1={9.18E-4} CZth2={9.789E-4} CZth3={2.468E-3} CZth4={0.019} 
+CZth5={0.004917} CZth6={0.596} RATIO={28000}
R_RDUMMY         RDM RDP  1E12  
V_VDR         Vdrain $N_0001 DC 0V AC 0V 
R_RKLEIN         RDM RKP  .01m  
G_G6         DCB gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
E_E5         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_Rth2         a b  {Rth2}  
R_Rth3         b c  {Rth3}  
C_CZth2         Tamb a  {CZth2}  
C_CZth3         Tamb b  {CZth3}  
R_Rth4         c d  {Rth4}  
C_CZth6         Tamb e  {CZth6}  
R_Rth6         e Tcase  {Rth6}  
R_Rth5         d e  {Rth5}  
C_CZth5         Tamb d  {CZth5}  
C_CZth4         c Tamb  {CZth4}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth1         TJ a  {Rth1}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM24         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
G_ABMII3         DCB IS VALUE { if (I(V_VID)/
+ {RATIO}<0.01*(300/(V(TJ)+273))**1.5,   
+ I(V_VID)/{RATIO},0.01*(300/(V(TJ)+273))**1.5)   }
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {Rs}  
D_ZD1         IS n2 DZE3 
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
E_E7         Vdrain DSB RDM DSB 1
M_X2         $N_0001 vg DSB DSB NMOS_L3
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
D_DBODY1         DSB DCB D_BODY 
R_R8         DSB vg  1E12  
G_G5         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(V_VID)*{selfh},0) }
E_ABM25         Vdg 0 VALUE { V(DCB)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
L_LG         GATE 5  {LG}  
R_RG         5 gi  {RG}  
E_Eis         n2 0 VALUE { if ( V(Vpcl)>0,V(Vpcl),0) }
E_ABM15         Vpcl 0 VALUE { if ( (V(gi)-3)>V(DCB),V(DCB),V(gi)-3)    }
.ENDS    
*$
*
.SUBCKT BTS555/INF IN Vbb Out IS Tj Tcase Tamb 
.MODEL DZE1 D (IS=1E-12,RS=5.5,BV=6.25,N=1.27,CJO=0.1P,VJ=0.75,M=0.33,IBV=.1M) 
.MODEL DZE2 D (IS=1E-12,RS=5.5,BV=38,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.1M) 
.MODEL DZE3 D (VJ=0.2) 
.MODEL DZE4 D (IS=1E-12,RS=5.5,BV=9,N=1.27,CJO=0.1P,VJ=0.75,M=0.33,IBV=.1M)
.MODEL DZE5 D (IS=1E-12,RS=5.5,BV=72,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.1M)
.MODEL QNSCR NPN (TF=400N,TR=1.6U,CJC=2P,CJE=16P,XTB=2.5,
+ IS=1F,ISE=0.3N,NE=2,BF=300,BR=60,ISC=3N,NC=2) 
R_Rvcont         vcon vcont  100k  
C_ccon         0 vcont  .05n  
R_Rvc2         cpi cp  4k  
R_Rcp         cp vcp  120k  
R_Ren         en enable  100k  
C_cen         0 enable  .05n  
E_ABM24         OTCN 0 VALUE { if (V(Tj)>190 | V(OTC)>3.5 ,0,5)    }
R_Rth1         Ts Tj  1meg  
E_ABM25         OTC 0 VALUE { if (V(Tj)<180 | V(OTCN)>3.5 ,0,5)    }
C_CZth1         Ts 0  2.8n  
E_ABM27         OTS 0 VALUE { if (V(Ts)<155 | V(OTSN)>3.5 ,0,5)    }
E_ABM26         OTSN 0 VALUE { if (V(Ts)>165 | V(OTS)>3.5 ,0,5)    }
E_ABM28         OT 0 VALUE { if (V(OTC)>3.5 | V(OTS)>3.5 ,5,0)    }
C_cscd         0 scd  1n  
E_ABM210         sc 0 VALUE { if (V(sci)>3.5 & V(scd)>3,5,0)    }
R_rscd         sci scd  150k  
S_S2         cpi Out vcont 0 S2
RS_S2        vcont 0 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=3.5 Von=4
R_Rsbl         Out sbl  300  
E_ABM211         con 0 VALUE { if (V(Out)>2.0 & V(ine)>3.5,0,5)    }
R_Rvdd         Vbb Vbr  100  
E_ABM11         vcp 0 VALUE { if (2*V(cp)>V(Vbr)+12,   
+ V(Vbr)+12,2*V(cp))   }
R_Rin         IN Vbr  120k  
E_ABM212         ine 0 VALUE { if (V(Vbr)-V(IN)>3.9,5,0)    }
R_Rbo         Out n1  20k  
S_S5         Vbr n1 enable 0 S5
RS_S5        enable 0 1G
.MODEL S5 VSWITCH Roff=10e6 Ron=2k Voff=3.5 Von=4
R_Rrb         Rbat Rbatv  100k  
S_S3         cp sbl SBd 0 S3
RS_S3        SBd 0 1G
.MODEL S3 VSWITCH Roff=1e6 Ron=3k Voff=3.5 Von=4
R_Rsb         SBcont SBd  100k  
C_csb         0 SBd  .05n  
E_ABM33         SBcont 0 VALUE { if ((V(Svg)+V(Sbq))>7.5 & V(enable)>3.5,5,0)  
+   }
E_ABM32         vcon 0 VALUE { if (V(con)>2.5 | V(sc)>2.5 | V(OT)>2.5,5,0)    }
E_ABM34         en 0 VALUE { if (V(OT)<3.5 & V(sc)<3.5 & V(ine)>3.5,5,0)    }
E_ABM29         sci 0 VALUE { if ((V(Vbr)-V(Out))>7 & (V(Vbr)-V(IN))>4,5,0)   }
E_Eref         Nscref 0 VALUE { if ( V(Out)+4.65<V(Vbr),V(Out)+4.65,V(Vbr)) }
E_ABM22         Sbq 0 VALUE { if ((V(Vbr)-V(Out))>4.2,5,0)    }
E_ABM21         Svg 0 VALUE { if ((V(g)-V(Out))>3.0,5,0)    }
S_S4         n1 Nscref SBd 0 S4
RS_S4        SBd 0 1G
.MODEL S4 VSWITCH Roff=1e6 Ron=10 Voff=3.5 Von=4
Q_Q4         Vbr n1 cp QNSCR
Q_Q3         Vbr cl g QNSCR
D_ZD3         IN Vbr DZE5 
D_ZD1         Out n1 DZE1 
D_ZD2         cl clb DZE2 
D_ZD6         Vbr clb DZE3 
S_S1         Vbr n1 Rbatv 0 S1
RS_S1        Rbatv 0 1G
.MODEL S1 VSWITCH Roff=10e6 Ron=500 Voff=3.5 Von=4
E_ABM213         Rbat 0 VALUE { if (V(IN)-V(Vbr)>3.9,5,0)    }
R_Rclamp         cl Out  100k  
X_X4         g Vbb Out $N_0001 Tj Tcase Tamb BC555
R_Rgate         g cp  0.8k  
D_ZD4         IS CLis DZE3 
D_ZD5         cl CLis DZE4 
C_crb         0 Rbatv  .05n  
S_S6         $N_0001 IS ine 0 S6
RS_S6        ine 0 1G
.MODEL S6 VSWITCH Roff=10e6 Ron=1 Voff=3.5 Von=4
.ENDS    
*$
* Base chip for the BTS650P
.SUBCKT BC650 GATE DRAIN SOURCE IS TJ Tcase Tamb 
.PARAM   Cgs=3.7N Cox=7.618N Kgd=3.37N VSW=-1.61 cjo_ds=1.92n
.PARAM   W=5.248 L=1.025U VTH=2.29 alpha=0.8 RG=5 RD=3.2M RS=0.4M LG=7N
+ LD=5N LS=3.5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =49 trr=110n ISE=2.3n  
.MODEL D_BODY   D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL DZE3 D (VJ=0.2)
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})  
.PARAM  selfh={1} Rth1={0.002977}  Rth2={0.006879}  Rth3={0.038}  Rth4={0.067}  
+Rth5={0.074}  Rth6={0.035}
.PARAM  CZth1={3.625E-4} CZth2={3.876E-4} CZth3={9.822E-4} CZth4={7.643E-3} 
+CZth5={0.02} CZth6={0.147} RATIO={14000}
R_RDUMMY         RDM RDP  1E12  
V_VDR         Vdrain $N_0001 DC 0V AC 0V 
R_RKLEIN         RDM RKP  .01m  
G_G6         DCB gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
E_E5         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_Rth2         a b  {Rth2}  
R_Rth3         b c  {Rth3}  
C_CZth2         Tamb a  {CZth2}  
C_CZth3         Tamb b  {CZth3}  
R_Rth4         c d  {Rth4}  
C_CZth6         Tamb e  {CZth6}  
R_Rth6         e Tcase  {Rth6}  
R_Rth5         d e  {Rth5}  
C_CZth5         Tamb d  {CZth5}  
C_CZth4         c Tamb  {CZth4}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth1         TJ a  {Rth1}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM24         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
G_ABMII3         DCB IS VALUE { if (I(V_VID)/
+ {RATIO}<0.01*(300/(V(TJ)+273))**1.5,   
+ I(V_VID)/{RATIO},0.01*(300/(V(TJ)+273))**1.5)   }
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {Rs}  
D_ZD1         IS n2 DZE3 
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
E_E7         Vdrain DSB RDM DSB 1
M_X2         $N_0001 vg DSB DSB NMOS_L3
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
D_DBODY1         DSB DCB D_BODY 
R_R8         DSB vg  1E12  
G_G5         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(V_VID)*{selfh},0) }
E_ABM25         Vdg 0 VALUE { V(DCB)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
L_LG         GATE 5  {LG}  
R_RG         5 gi  {RG}  
E_Eis         n2 0 VALUE { if ( V(Vpcl)>0,V(Vpcl),0) }
E_ABM15         Vpcl 0 VALUE { if ( (V(gi)-3)>V(DCB),V(DCB),V(gi)-3)    }
.ENDS    
*$
*
.SUBCKT BTS650P/INF IN Vbb Out IS Tj Tcase Tamb 
.MODEL DZE1 D (IS=1E-12,RS=50,BV=5.47,N=1.27,CJO=0.2P,VJ=0.75,M=0.33,IBV=.2M) 
.MODEL DZE2 D (IS=1E-12,RS=50,BV=38,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.2M) 
.MODEL DZE3 D (VJ=0.2) 
.MODEL DZE4 D (IS=1E-12,RS=5.5,BV=9,N=1.27,CJO=0.1P,VJ=0.75,M=0.33,IBV=2u)
.MODEL DZE5 D (IS=1E-12,RS=5.5,BV=72,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.1M)
.MODEL QNSCR NPN (TF=400N,TR=1.6U,CJC=2P,CJE=16P,XTB=2.5,
+ IS=1F,ISE=0.3N,NE=2,BF=300,BR=60,ISC=3N,NC=2) 
R_Rvcont         vcon vcont  100k  
C_ccon         0 vcont  .05n  
R_Rvc2         cpi cp  4k  
R_Rcp         cp vcp  120k  
R_Ren         en enable  100k  
C_cen         0 enable  .05n  
E_ABM24         OTCN 0 VALUE { if (V(Tj)>190 | V(OTC)>3.5 ,0,5)    }
R_Rth1         Ts Tj  1meg  
E_ABM25         OTC 0 VALUE { if (V(Tj)<180 | V(OTCN)>3.5 ,0,5)    }
C_CZth1         Ts 0  2.8n  
E_ABM27         OTS 0 VALUE { if (V(Ts)<155 | V(OTSN)>3.5 ,0,5)    }
E_ABM26         OTSN 0 VALUE { if (V(Ts)>165 | V(OTS)>3.5 ,0,5)    }
E_ABM28         OT 0 VALUE { if (V(OTC)>3.5 | V(OTS)>3.5 ,5,0)    }
C_cscd         0 scd  1n  
E_ABM210         sc 0 VALUE { if (V(sci)>3.5 & V(scd)>3,5,0)    }
R_rscd         sci scd  150k  
S_S2         cpi Out vcont 0 S2
RS_S2        vcont 0 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=3.5 Von=4
R_Rsbl         Out sbl  300  
E_ABM211         con 0 VALUE { if (V(Out)>2.0 & V(ine)>3.5,0,5)    }
R_Rvdd         Vbb Vbr  100  
E_ABM11         vcp 0 VALUE { if (2*V(cp)>V(Vbr)+12,   
+ V(Vbr)+12,2*V(cp))   }
R_Rin         IN Vbr  120k  
E_ABM212         ine 0 VALUE { if (V(Vbr)-V(IN)>3.9,5,0)    }
R_Rbo         Out n1  20k  
S_S5         Vbr n1 enable 0 S5
RS_S5        enable 0 1G
.MODEL S5 VSWITCH Roff=10e6 Ron=2k Voff=3.5 Von=4
R_Rrb         Rbat Rbatv  100k  
S_S3         cp sbl SBd 0 S3
RS_S3        SBd 0 1G
.MODEL S3 VSWITCH Roff=1e6 Ron=3k Voff=3.5 Von=4
R_Rsb         SBcont SBd  100k  
C_csb         0 SBd  .05n  
E_ABM33         SBcont 0 VALUE { if ((V(Svg)+V(Sbq))>7.5 & V(enable)>3.5,5,0)  
+   }
E_ABM32         vcon 0 VALUE { if (V(con)>2.5 | V(sc)>2.5 | V(OT)>2.5,5,0)    }
E_ABM34         en 0 VALUE { if (V(OT)<3.5 & V(sc)<3.5 & V(ine)>3.5,5,0)    }
E_ABM29         sci 0 VALUE { if ((V(Vbr)-V(Out))>7 & (V(Vbr)-V(IN))>4  
+ & V(OT)<3.5,5,0)   }
E_Eref         Nscref 0 VALUE { if ( V(Out)+4.65<V(Vbr),V(Out)+4.65,V(Vbr)) }
E_ABM22         Sbq 0 VALUE { if ((V(Vbr)-V(Out))>4.2,5,0)    }
E_ABM21         Svg 0 VALUE { if ((V(g)-V(Out))>3.0,5,0)    }
S_S4         n1 Nscref SBd 0 S4
RS_S4        SBd 0 1G
.MODEL S4 VSWITCH Roff=1e6 Ron=10 Voff=3.5 Von=4
Q_Q4         Vbr n1 cp QNSCR
Q_Q3         Vbr cl g QNSCR
D_ZD3         IN Vbr DZE5 
D_ZD1         Out n1 DZE1 
D_ZD2         cl clb DZE2 
D_ZD6         Vbr clb DZE3 
S_S1         Vbr n1 Rbatv 0 S1
RS_S1        Rbatv 0 1G
.MODEL S1 VSWITCH Roff=10e6 Ron=500 Voff=3.5 Von=4
E_ABM213         Rbat 0 VALUE { if (V(IN)-V(Vbr)>3.9,5,0)    }
R_Rclamp         cl Out  100k  
R_Rgate         g cp  1.3k  
D_ZD4         IS CLis DZE3 
D_ZD5         cl CLis DZE4 
C_crb         0 Rbatv  .05n  
S_S6         $N_0001 IS ine 0 S6
RS_S6        ine 0 1G
.MODEL S6 VSWITCH Roff=10e6 Ron=1 Voff=3.5 Von=4
X_X4         g Vbb Out $N_0001 Tj Tcase Tamb BC650 
.ENDS    
*$
****************************************************************
.SUBCKT BUP314/INF ano gate kat PARAMS: TJ= 27
LANO ano  anol	5n
XBUP anol gate katl  L7xxxM_L2 PARAMS: TJ= {TJ}  A_total = 0.428	A_aktiv=0.335
LKAT katl kat	7n
.ENDS
*$
****************************************************************
.SUBCKT BUP313/INF ano gate kat PARAMS: TJ= 27  
LANO ano  anol	5n
XBUP anol gate katl  L7xxxM_L2 PARAMS: TJ= {TJ}  A_total = 0.259	A_aktiv=0.187
LKAT katl kat	7n
.ENDS
*$
****************************************************************
.SUBCKT BUP212/INF ano gate kat PARAMS: TJ= 27 
LANO ano  anol	5n
XBUP anol gate katl  L7xxxM_L2 PARAMS: TJ= {TJ}  A_total = 0.162	A_aktiv=0.104
LKAT katl kat	7n
.ENDS
*$
****************************************************************
.SUBCKT L7xxxM_L2 ano gate kat PARAMS: TJ=27 A_total = 0.1	A_aktiv=0.1
.PARAM 
+k=1.380622e-23		q = 1.6E-19	t0=273		ni0=1.45e10
+eps0 = 8.85E-14	epsi =11.8	eox= 2.8
+un = 1350		up = 450	u_surf=600
+vlimit= 1.5e7		vsw= -0.5
.PARAM tox = 120e-7	ttox = 1.5e-4 lchann = 2.5e-4 taub = 100u
+wb = 170E-4 Nsource= 1.5e17 BV_FW=1200	BV_RW=28 Rs = 0.5m Rg = 5
.PARAM nc = {A_aktiv*.1189meg}
.PARAM wc = {nc*52e-4}
.PARAM Agd  = {nc*6.72e-6}
.PARAM Cox  = {Agd*eps0*eox/tox}
.PARAM Cgs  = {nc*eps0*eox*(1.05e-6/tox + 7.77e-6/ttox) }
.PARAM Cjs  = {A_aktiv*3.092n}
.PARAM Cje  = {(A_total/A_aktiv)*Cjs}	
.PARAM Ise0 = {A_total*26.11p}
.PARAM Ise_g  = {A_total*2.22e-14}
.PARAM Ise_k  = {A_total*15.67p}
.PARAM 	Q0 = {A_aktiv*217.9n}
.PARAM	VPT= 1800
.PARAM	VN = {Agd*Agd/Cox/Cox*1.34e-17}
.PARAM	XF = 0.4m
MFET	d g s s 	MOS W={wc/100},L={lchann/100}, IC=OFF
GMFET_T d1x	s	VALUE = {I(VINC0)*((TJ+t0)/300)**-1.5 }
GDE	ano	e1	VALUE = {((ISE(TJ)**((t0 + TJ)/(t0 + 27)))
+ /ISE(27))**((t0 + 27)/(t0 + TJ)) 
+ * I(VDE)**((t0 + 27)/(t0 + TJ)) - I(VDE)}
VDE	ano	anx	0
DE	anx	e1	D1
DS	kat	d1	D2
.MODEL  MOS     NMOS
+(LEVEL=3,nsub={Nsource},tox={tox/100},vmax={vlimit},uo={u_surf},CGSO=1p)
.MODEL 	D1	D	(IS={ISE0},N = 1.5)
.MODEL	D2	D	(IS={Ise_k},CJO={CJS},BV= {BV_FW})
ETHERM  g_t	g	VALUE = {DVt(TJ)}
RG	gate g_t	{Rg}
RS	s kat		{Rs}
EVGCOX 	vgcox 0 VALUE { V(ox,s)-{vsw} }
EVCOX   vcox  0    VALUE = {Cox/100  + 99*Cox*(1+tanh(10*(V(vgcox))))/200}
EVCGS   vcgs  0    VALUE = {Cgs + 99*Cox*(1+tanh(-10*(V(vgcox))))/200}
GICOX   g ox       VALUE = {if (time> 25n,DDT(V(vcox)*V(g,ox)),0)}
GICGS   g s        VALUE = {if (time> 25n,DDT(V(vcgs)*V(g,s)),0)}
EDEP	d1 ox	VALUE = {Vdep(V(d1,g))}
GIA	e d1	VALUE = {V(e,d1)/Rb(V(b),TJ)}
GIC	d1  kat	VALUE = {IPC(I(VINC),V(b,0),V(d1,kat),I(VDXJ),TJ)}
CQB	b 0	1u
RHELP	b 0	1meg
GRQB	b 0	VALUE = {1u*V(b,0)/(Taub*((TJ + t0)/300)**2) }
GINC	0 b	VALUE	{I(VINC)}
GINE	b 0	VALUE	{INE(I(VINC),V(b,0),V(d1,kat),I(VDXJ),TJ)}
EXJ	xj1 0	VALUE	{if(time> 25n,xj(V(d1,kat)),0)}
CXJ	xj  0	1
VDXJ	xj1 xj	0
VIA	e1 e	0
EAUX1	d12 s	VALUE = {V(d1,s)}
VINC0	d12 d	0
VINC	d1 d1x	0
.FUNC   EG(T)	{1.16 - 7.02e-4*(T+t0)**2/(T+t0 + 1108)}
.FUNC   ni(T)	{ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*(-
+ 300*EG(T)+(t0+T)*EG(300))/(T+t0)/300)}
.FUNC	psi2(T) {2*k/q*(T + t0)*log(Nsource/ni(T))}
.FUNC	DVt(T)		{psi2(T) - psi2(27) + 
+ tox*(sqrt(2*eps0*epsi*q*Nsource*psi2(T)) 
+ - sqrt(2*eps0*epsi*q*Nsource*psi2(27)))/eps0/eox}
.FUNC	DA(T)	{2*k*un*up/q/(un + up)*(T + t0)*(((T + t0)/300)**-1.5)}
.FUNC	LA(T)	{sqrt(DA(T) * Taub*((T+t0)/300)**2) }
.FUNC   ISE(T)  {ise_g*k*(T +t0)*(un*((T+t0)/300)**-1.5)*ni(T)*ni(T)}
.FUNC	Vdep(X)	{if(X > -VN/2,X + VN*(1-SQRT(1+2*X/VN)),VN/2)}
.FUNC	Rb(X,T)	{wb*wb*LOG(1+2E-6*(1+up/un)*MAX(X,1m*Q0)/Q0)/(2E-
+ 6*(un+up)*(((T+t0)/300)**-1.5)*MAX(X,1m*Q0))}
.FUNC	xj(V)		{XF*SQRT(1+LIMIT(V,0,VPT))}
.FUNC	FDX(V,X,T)	{TANH((wb-xj(V))*X/(24*DA(T)))}
.FUNC	Td(V,X,T)	{(0.1/DA(T))*(wb-xj(V))*(wb-xj(V))*(1-FDX(V,X,T))}
.FUNC	F1(V,T)		{Taub*((T+t0)/300)**2*COSH((wb-xj(V))/LA(T))-1}
.FUNC	F2(V,X,T)	{0.5*(1+2*FDX(V,X,T)/(1+FDX(V,X,T)*FDX(V,X,T)))}
.FUNC	F3(V,X,T)	{1+Td(V,X,T)/(Taub*((T+t0)/300)**2)}
.FUNC	QS0(V,T)	{q*A_aktiv*LA(T)*ni(T)*TANH(0.5*(wb-xj(V))/LA(T))}
.FUNC	Qbd(Y,Z,V,X,T)	{Z*1e-6+Td(V,X,T)*Y}
.FUNC	Qb0(Y,Z,V,X,T)	{2*Qbd(Y,Z,V,X,T)/(F3(V,X,T)+SQRT(F3(V,X,T)*F3(V,X,T) 
+ + Td(V,X,T)*3*ISE(T)*Qbd(Y,Z,V,X,T)/(QS0(V,T) * QS0(V,T))))}
.FUNC	INE(Y,Z,V,X,T)
+ {0.75*ISE(T)*(Qb0(Y,Z,V,X,T)/QS0(V,T))*(Qb0(Y,Z,V,X,T)/QS0(V,T))}
.FUNC	IPC(Y,Z,V,X,T)	
+ {(1/3)*Y+(4/3)*(Qb0(Y,Z,V,X,T)/F1(V,T)+MAX(Qb0(Y,Z,V,X,T)/Taub/
+ ((T+t0)/300)**2+INE(Y,Z,V,X,T)- Y,0)*F2(V,X,T))}
.ENDS
*$
.SUBCKT BTS134/INF GATE DRAIN SOURCE TJ TC Tamb
.PARAM   Cgs=0.643N Cox=2.1N Kgd=0.65N VSW=-1.61 cjo_ds=0.598n
.PARAM   W=0.68 L=1.025U VTH=2.29 alpha=0.5 RG=10 RD=19.26M RS=5M LG=7N 
+LD=5N LS=5N
.PARAM   uo=515 vmax=1.25E5 bv =62 trr=58n ISE=.32n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL DZE2 D (IS=1E-12,RS=5.5,BV=38,N=1.27,CJO=0.6P,VJ=0.75,M=0.33,IBV=.1M) 
.MODEL DZE3 D (VJ=0.2)
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub=nsub=3.3E17,tox=55E-9,vmax={vmax},u0={uo})
.MODEL	MND	NMOS (LEVEL=3,W={50U},L={20U},VTO=-0.97,nsub=2E16,
+tox=55E-9,vmax={vmax},u0={uo})
.MODEL	MNDD    NMOS (LEVEL=3,W={15U},L={45U},VTO=-16,nsub=2E16,
+tox=200E-9,vmax={vmax},u0={uo})
.MODEL	MNDD2   NMOS (LEVEL=3,W={90U},L={12U},VTO=-16,nsub=2E16,
+tox=200E-9,vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.015}  Rth2={0.034}  Rth3={0.181}  Rth4={0.282}  
+Rth5={0.205}  Rth6={0.073}
.PARAM  CZth1={7.167E-5} CZth2={7.7331E-5} CZth3={1.993E-4} CZth4={1.698E-3} 
+CZth5={5.296E-3} CZth6={0.028}
L_LS         SOURCE 7  {LS}  
V_VDR         Vdrain dr DC 0V AC 0V 
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
R_R8         DSB vg  1E12  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
E_ABM27         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
S_S3         gi DSB $N_0002 0 S3
RS_S3        $N_0002 0 1G
.MODEL S3 VSWITCH Roff=1e6 Ron=100 Voff=3.5 Von=4
R_RS         7 DSB  {Rs}  
R_RG         8 d12  {RG}  
L_LG         GATE 8  {LG}  
E_ABM22         OT 0 VALUE { if (V(TJ)<155 | V(OTN)>3.5 ,0,5)    }
E_ABM23         OTN 0 VALUE { if (V(TJ)>165 | V(OT)>3.5 ,0,5)    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY 
M_M3         sg12 sg12 d12 DSB MND
M_M2         sg12 sg12 d12 DSB MNDD
D_ZD2         gi clb DZE2 
D_ZD1         DCB clb DZE3 
M_M4         gi sg12 sg12 DSB MNDD2
E_ABM28         $N_0002 0 VALUE { if (I(V_VID)>(23-(V(TJ)-25)*0.067)|V(OT)>3.5,
+  5,0)    }
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(V_VID)*{selfh},0) }
R_Rth2         1 2  {Rth2}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 TC  {Rth6}  
R_Rth1         TJ 1  {Rth1}  
C_CZth1         TJ Tamb  {CZth1}   
.ENDS    
*$
*n-MOSFET*50V 23A 70mOhm*Add_in_Line
.SUBCKT BUZ10/INF 1 2 3 
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 51M
D10 76 95 DREV
.MODEL DREV D CJO=0.65N RS=20M TT=2.2N IS=300P BV=50
M10 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.287 KP=19.15
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.5N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.5N M=0.513 VJ=1.098
CGS 76 11 0.7N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 60A 18mOhm*Add_in_Line
.SUBCKT BUZ100/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 95 14M
D100 95 86 DREV
.MODEL DREV D CJO=3N RS=20M TT=200N IS=300P BV=50
M100 76 11 95 95 MBUZ
.MODEL MBUZ NMOS VTO=3.85 KP=30.02
M2 11 76 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 76 11 8 8 MSW
COX 11 8 5N
DGD 8 76 DCGD
.MODEL DCGD D CJO=1.389N M=0.511 VJ=1.055
CGS 95 11 3.03N
MRDR 76 76 86 76 MVRD
.MODEL MVRD NMOS VTO=-84.79 KP=5.5
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ100S/L1/INF GATE DRAIN SOURCE
.PARAM Cgs=0.411N Cox=3.12N Kgd=1.67N VSW=-1.61 cjo_ds=1.92n
.PARAM W=2.294 L=1.025U VTH=3.68 alpha=0.5 RG=2.3 RD=6.42M RS=.6M LG=7N 
+LD=5N LS=3N
.PARAM nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=80n ISE=1.15n 
.MODEL DB_L1    D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ100SL/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.458N Cox=5.0N Kgd=1.55N VSW=-1.61 cjo_ds=1.81n
.PARAM   W=2.404 L=1.025U VTH=2.29 alpha=0.5 RG=2.3 RD=7.4M RS=.6M LG=7N
+ LD=5N LS=3N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=80n ISE=1.15n
.MODEL DB_L1    D   (BV= {bv}, CJO ={cjo_ds})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BUZ100S/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM Cgs=1.37N Cox=3.12N Kgd=1.67N VSW=-1.61 cjo_ds=1.92n
.PARAM W=2.294 L=1.025U VTH=3.68 alpha=0.5 RG=2.3 RD=6.42M RS=.6M LG=7N
+ LD=5N LS=3N
.PARAM nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=80n ISE=1.15n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.0053}  Rth2={0.026}  Rth3={0.056}  Rth4={0.097}  
+Rth5={0.118}  Rth6={0.051}
.PARAM  CZth1={5.9E-4} CZth2={5.6E-4} CZth3={1.15E-3} CZth4={3.13E-3} 
+CZth5={0.012} CZth6={0.1} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*
.SUBCKT BUZ100SL/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=1.83N Cox=5.0N Kgd=1.55N VSW=-1.61 cjo_ds=1.81n
.PARAM   W=2.404 L=1.025U VTH=2.29 alpha=0.5 RG=2.3 RD=7.4M RS=.6M LG=7N 
+LD=5N LS=3N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=80n ISE=1.15n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.0053}  Rth2={0.026}  Rth3={0.056}  Rth4={0.097}  
+Rth5={0.118}  Rth6={0.051}
.PARAM  CZth1={5.9E-4} CZth2={5.6E-4} CZth3={1.15E-3} CZth4={3.13E-3} 
+CZth5={0.012} CZth6={0.1} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*n-MOSFET*50V 29A 60mOhm*Add_in_Line
.SUBCKT BUZ101/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 96 4.987M
D101 96 86 DREV
.MODEL DREV D CJO=0.70294N RS=20M TT=30N IS=300P BV=50
M101 95 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=3.394 KP=7.926
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.99N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.9904N M=0.5 VJ=1
CGS 96 11 0.62085N
MHELP 95 95 86 95 MVRD
.MODEL MVRD NMOS VTO=-2.6 KP=17.1
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ101S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.142N Cox=0.901N Kgd=0.514N VSW=-1.61 cjo_ds=0.436n
.PARAM   W=0.558 L=1.025U VTH=3.68 alpha=0.5 RG=1.6 RD=27.0M RS=1.0M LG=7N 
+LD=5N LS=5N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=55n ISE=.25n  
.MODEL DB_L1    D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS 
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ101SL/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.116N Cox=1.19N Kgd=0.438N VSW=-1.61 cjo_ds=0.436n
.PARAM   W=0.582 L=1.025U VTH=2.29 alpha=0.5 RG=1.6 RD=25.03M RS=1.0M LG=7N 
+LD=5N LS=5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=52n ISE=.25n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BUZ101S/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.473N Cox=0.901N Kgd=0.514N VSW=-1.61 cjo_ds=0.436n
.PARAM   W=0.558 L=1.025U VTH=3.68 alpha=0.5 RG=1.6 RD=27.0M RS=1.0M LG=7N
+ LD=5N LS=5N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv=62 trr=55n ISE=.25n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.021}  Rth2={0.1}  Rth3={0.2}  Rth4={0.33}  
+Rth5={0.316}  Rth6={0.104}
.PARAM  CZth1={1.5E-4} CZth2={1.4E-4} CZth3={3.0E-4} CZth4={8.91E-4} 
+CZth5={4.0E-3} CZth6={0.045} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS   
*$
*
.SUBCKT BUZ101SL/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.464N Cox=1.19N Kgd=0.438N VSW=-1.61 cjo_ds=0.436n
.PARAM   W=0.582 L=1.025U VTH=2.29 alpha=0.5 RG=1.6 RD=25.03M RS=1.0M LG=7N
+ LD=5N LS=5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=52n ISE=.25n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.021}  Rth2={0.1}  Rth3={0.2}  Rth4={0.33}  
+Rth5={0.316}  Rth6={0.104}
.PARAM  CZth1={1.5E-4} CZth2={1.4E-4} CZth3={3.0E-4} CZth4={8.91E-4} 
+CZth5={4.0E-3} CZth6={0.045} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*n-MOSFET*50V 42A 23mOhm*Add_in_Line
.SUBCKT BUZ102/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 96 13.21M
D102 96 86 DREV
.MODEL DREV D CJO=2.06393N RS=20M TT=30N IS=300P BV=50
M102 95 11 96 96 MBUZ .MODEL MBUZ NMOS VTO=3.123 KP=21.57
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 4.096N
DGD 8 95 DCGD
.MODEL DCGD D CJO=2.5964N M=0.5 VJ=1
CGS 96 11 1.53485N
MHELP 95 95 86 95 MVRD
.MODEL MVRD NMOS VTO=-7.776 KP=13
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ102S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.283N Cox=2.14N Kgd=1.11N VSW=-1.61 cjo_ds=1.20n
.PARAM   W=1.483 L=1.025U VTH=3.68 alpha=0.5 RG=2 RD=9.2M RS=.8M LG=7N LD=5N 
+LS=3.5N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=64n ISE=.6n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ102SL/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.273N Cox=3.57N Kgd=1.14N VSW=-1.61 cjo_ds=1.11n
.PARAM   W=1.507 L=1.025U VTH=2.29 alpha=0.5 RG=2 RD=9.2M RS=.8M LG=7N LD=5N 
+LS=3.5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=64n ISE=.6n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BUZ102S/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.944N Cox=2.14N Kgd=1.11N VSW=-1.61 cjo_ds=1.20n
.PARAM   W=1.483 L=1.025U VTH=3.68 alpha=0.5 RG=2 RD=9.2M RS=.8M LG=7N LD=5N 
+LS=3.5N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv=62 trr=64n ISE=.6n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.008}  Rth2={0.039}  Rth3={0.084}  Rth4={0.143}  
+Rth5={0.163}  Rth6={0.065}
.PARAM  CZth1={3.8E-4} CZth2={3.61E-4} CZth3={7.6E-4} CZth4={2.1E-3} 
+CZth5={8.47E-3} CZth6={0.075} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*
.SUBCKT BUZ102SL/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=1.09N Cox=3.57N Kgd=1.14N VSW=-1.61 cjo_ds=1.11n
.PARAM   W=1.507 L=1.025U VTH=2.29 alpha=0.5 RG=2 RD=9.2M RS=.8M LG=7N LD=5N 
+LS=3.5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv=62 trr=64n ISE=.6n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.008}  Rth2={0.039}  Rth3={0.084}  Rth4={0.143}  
+Rth5={0.163}  Rth6={0.065}
.PARAM  CZth1={3.8E-4} CZth2={3.61E-4} CZth3={7.6E-4} CZth4={2.1E-3} 
+CZth5={8.47E-3} CZth6={0.075} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ103S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.174N Cox=1.20N Kgd=0.532N VSW=-1.61 cjo_ds=0.662n
.PARAM   W=0.814 L=1.025U VTH=3.68 alpha=0.5 RG=1.75 RD=17.2M RS=.8M LG=7N LD=5N 
+LS=5N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=59n ISE=.32n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ103SL/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.161N Cox=1.93N Kgd=0.588N VSW=-1.61 cjo_ds=0.598n
.PARAM   W=0.819 L=1.025U VTH=2.29 alpha=0.5 RG=1.75 RD=18.26M RS=0.8M LG=7N 
+LD=5N LS=5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=58n ISE=.32n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BUZ103S/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.579N Cox=1.20N Kgd=0.532N VSW=-1.61 cjo_ds=0.662n
.PARAM   W=0.814 L=1.025U VTH=3.68 alpha=0.5 RG=1.75 RD=17.2M RS=.8M LG=7N LD=5N 
+LS=5N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=59n ISE=.32n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.015}  Rth2={0.069}  Rth3={0.146}  Rth4={0.237}  
+Rth5={0.248}  Rth6={0.088}
.PARAM  CZth1={2.1E-4} CZth2={2.02E-4} CZth3={4.3E-4} CZth4={1.235E-3} 
+CZth5={5.3E-3} CZth6={0.054} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*
.SUBCKT BUZ103SL/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.643N Cox=1.93N Kgd=0.588N VSW=-1.61 cjo_ds=0.598n
.PARAM   W=0.819 L=1.025U VTH=2.29 alpha=0.5 RG=1.75 RD=18.26M RS=0.8M LG=7N 
+LD=5N LS=5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=58n ISE=.32n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.015}  Rth2={0.069}  Rth3={0.146}  Rth4={0.237}  
+Rth5={0.248}  Rth6={0.088}
.PARAM  CZth1={2.1E-4} CZth2={2.02E-4} CZth3={4.3E-4} CZth4={1.235E-3} 
+CZth5={5.3E-3} CZth6={0.054} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*n-MOSFET*50V 17.5A 0.1 Ohm*Add_in_Line
.SUBCKT BUZ104/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 7.4
RS 5 76 0.063
D104 76 97 DREV
.MODEL DREV D CJO=0.37N RS=20M TT=150N IS=300P BV=50
M104 98 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.5 KP=8.56
M2 96 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.1
M3 98 96 8 8 MSW
COX 96 8 0.83N
DGD 8 98 DCGD
.MODEL DCGD D CJO=0.5N M=0.548 VJ=1.027
CGS 76 96 .36N
RD 98 97 0.004
LG 95 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ104S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.0732N Cox=0.493N Kgd=0.265N VSW=-1.61 cjo_ds=0.252n
.PARAM   W=0.314 L=1.025U VTH=3.68 alpha=0.5 RG=1.5 RD=46M RS=1M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=50n ISE=.13n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ104SL/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.067N Cox=0.726N Kgd=0.257N VSW=-1.61 cjo_ds=0.246n
.PARAM   W=0.323 L=1.025U VTH=2.29 alpha=0.5 RG=1.5 RD=48M RS=1M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=50n ISE=.13n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BUZ104S/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.244N Cox=0.493N Kgd=0.265N VSW=-1.61 cjo_ds=0.252n
.PARAM   W=0.314 L=1.025U VTH=3.68 alpha=0.5 RG=1.5 RD=46M RS=1M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=50n ISE=.13n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.037}  Rth2={0.169}  Rth3={0.337}  Rth4={0.504} 
+ Rth5={0.446}  Rth6={0.13}
.PARAM  CZth1={8.26E-5} CZth2={8.1E-5} CZth3={1.8E-4} CZth4={5.53E-4} 
+CZth5={2.72E-3} CZth6={0.035} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*
.SUBCKT BUZ104SL/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.268N Cox=0.726N Kgd=0.257N VSW=-1.61 cjo_ds=0.246n
.PARAM   W=0.323 L=1.025U VTH=2.29 alpha=0.5 RG=1.5 RD=48M RS=1M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=50n ISE=.13n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.037}  Rth2={0.169}  Rth3={0.337}  Rth4={0.504}  
+Rth5={0.446}  Rth6={0.13}
.PARAM  CZth1={8.26E-5} CZth2={8.1E-5} CZth3={1.8E-4} CZth4={5.53E-4} 
+CZth5={2.72E-3} CZth6={0.035} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*n-MOSFET*50V 23A 70mOhm*Add_in_Line
.SUBCKT BUZ10L/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 70M
D10L 76 86 DREV
.MODEL DREV D CJO=7N RS=20M TT=4N IS=300P BV=50
M10L 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.562 KP=1415
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.491N M=0.502 VJ=1.047
CGS 76 11 1.5N
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ10M/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 17.9
RS 5 76 0.018
D10M 76 97 DREV
.MODEL DREV D CJO=0.7N RS=20M TT=150N IS=300P BV=50
M10M 98 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.864 KP=8.138
M2 96 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 96 8 8 MSW
COX 96 8 2N
DGD 8 98 DCGD
.MODEL DCGD D CJO=0.371N M=0.467 VJ=1.029
CGS 76 96 0.7N
RD 98 97 0.025
LG 95 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ110S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.534N Cox=4.03N Kgd=2.11N VSW=-1.61 cjo_ds=2.28n
.PARAM   W=2.786 L=1.025U VTH=3.68 alpha=0.5 RG=2.7 RD=5.42M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=82n ISE=1.4n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ110SL/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.478N Cox=6.16N Kgd=2.06N VSW=-1.61 cjo_ds=2.21n
.PARAM   W=2.790 L=1.025U VTH=2.29 alpha=0.5 RG=2.7 RD=5.45M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=91n ISE=1.4n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BUZ110S/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=1.78N Cox=4.03N Kgd=2.11N VSW=-1.61 cjo_ds=2.28n
.PARAM   W=2.786 L=1.025U VTH=3.68 alpha=0.5 RG=2.7 RD=5.42M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=82n ISE=1.4n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.0043}  Rth2={0.021}  Rth3={0.047}  Rth4={0.082}  
+Rth5={0.101}  Rth6={0.045}
.PARAM  CZth1={7.15E-4} CZth2={6.7E-4} CZth3={1.39E-3} CZth4={3.75E-3} 
+CZth5={0.014} CZth6={0.112} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*
.SUBCKT BUZ110SL/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=1.91N Cox=6.16N Kgd=2.06N VSW=-1.61 cjo_ds=2.21n
.PARAM   W=2.790 L=1.025U VTH=2.29 alpha=0.5 RG=2.7 RD=5.45M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv=62 trr=91n ISE=1.4n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.0043}  Rth2={0.021}  Rth3={0.047}  Rth4={0.082}  
+Rth5={0.101}  Rth6={0.045}
.PARAM  CZth1={7.15E-4} CZth2={6.7E-4} CZth3={1.39E-3} CZth4={3.75E-3} 
+CZth5={0.014} CZth6={0.112} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*n-MOSFET*50V 30A 40mOhm*Add_in_Line
.SUBCKT BUZ11/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 22M
D11 76 86 DREV
.MODEL DREV D CJO=1.5N RS=20M TT=4.2N IS=300P BV=50
M11 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.315 KP=24.41
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 3N
DGD 8 95 DCGD
.MODEL DCGD D CJO=1.03N M=0.537 VJ=1.135
CGS 76 11 1.22N
M347 86 95 95 95 MVRD
.MODEL MVRD NMOS VTO=-15.6 KP=10.5
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ111S/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.921N Cox=6.15N Kgd=3.24N VSW=-1.61 cjo_ds=3.65n
.PARAM   W=4.204 L=1.025U VTH=3.68 alpha=0.5 RG=3 RD=4.17M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=100n ISE=2.1n  
.MODEL DB_L1   D   (BV= {bv}, CJO ={cjo_ds},  TT ={trr}, IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS  
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ111SL/L1/INF GATE DRAIN SOURCE
.PARAM   Cgs=0.745N Cox=9.061N Kgd=3.37N VSW=-1.61 cjo_ds=3.65N
.PARAM   W=4.210 L=1.025U VTH=2.29 alpha=0.5 RG=3 RD=3.48M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=105n ISE=2.1n  
.MODEL DB_L1 D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL NMOS_L3 NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
R_RG         5 gi  {RG}  
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E5         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
R_RDUMMY         RDM RDP  1E12  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_ABM22         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
D_D5         DSB DCB DB_L1 
R_RKLEIN         RDM RKP  .01m  
E_E6         cbias 0 VALUE { V(gi) }
R_R12         0 cbias  1E12  
M_X1         RDM gi DSB DSB NMOS_L3
R_R8         DSB gi  1E12  
C_C7         DSB gcox  {Cox}  
C_CGS1         DSB gi  {Cgs}  
R_RLKG         DSB gi  1E12  
V_VID         DCB RDP DC 0V AC 0V 
L_LD         DCB DRAIN  {LD}  
L_LS         SOURCE 7  {LS}  
R_RS         7 DSB  {RS}  
E_E4         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(TEMP+273))**1.5 }
L_LG         GATE 5  {LG}  
G_G4         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
E_ABM21         Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
.ENDS    
*$
.SUBCKT BUZ111S/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=3.07N Cox=6.15N Kgd=3.24N VSW=-1.61 cjo_ds=3.65n
.PARAM   W=4.204 L=1.025U VTH=3.68 alpha=0.5 RG=3 RD=4.17M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=100n ISE=2.1n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.00289}  Rth2={0.014}  Rth3={0.031}  Rth4={0.056}  
+Rth5={0.073}  Rth6={0.035}
.PARAM  CZth1={1.08E-3} CZth2={1.0E-3} CZth3={2.07E-3} CZth4={5.51E-3} 
+CZth5={0.02} CZth6={0.15} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
.SUBCKT BUZ111SL/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=2.98N Cox=9.061N Kgd=3.37N VSW=-1.61 cjo_ds=3.65N
.PARAM   W=4.210 L=1.025U VTH=2.29 alpha=0.5 RG=3 RD=3.48M RS=.6M LG=7N LD=5N 
+LS=2N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=105n ISE=2.1n
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.00289}  Rth2={0.014}  Rth3={0.031}  Rth4={0.056}  
+Rth5={0.073}  Rth6={0.035}
.PARAM  CZth1={1.08E-3} CZth2={1.0E-3} CZth3={2.07E-3} CZth4={5.51E-3} 
+CZth5={0.02} CZth6={0.15} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
.SUBCKT BUZ11AL_2/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
D11AL 76 95 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=7.7N IS=300P BV=50
M11 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.364 KP=95.23
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=-27.16 KP=1.53
M3 95 11 8 8 MSW
COX 11 8 2.8N
DGD 8 95 DCGD
.MODEL DCGD D CJO=1.19N M=0.554 VJ=1.097
CGS 76 11 1.6N
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ11GE/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 16M
D11 76 95 DREV
.MODEL DREV D CJO=1.35N RS=20M TT=100N IS=300P BV=50
M11 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.38 KP=15.04
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.936N M=0.544 VJ=1.099
CGS 76 11 1.05N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-13.86 KP=8.8
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 42A 28mOhm*Add_in_Line
.SUBCKT BUZ12/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 24M
D12 76 86 DREV
.MODEL DREV D CJO=2N RS=20M TT=1.8N IS=300P BV=50
M12 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.516 KP=39.13
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 4N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.9N M=0.556 VJ=1.131
CGS 76 11 1.77N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 42A 35mOhm*Add_in_Line
.SUBCKT BUZ12AL/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 7.4
RS 5 76 13M
D12AL 76 95 DREV
.MODEL DREV D CJO=2.5N RS=20M TT=20N IS=300P BV=50
M12AL 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.913 KP=73.81
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.64N M=0.564 VJ=1.036
CGS 76 11 2.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-28.82 KP=6
LG 4 1 7N
.ENDS
*$
*p-MOSFET*50V 8A 0.3 Ohm*Add_in_Line
.SUBCKT BUZ171/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 128M
D171 86 76 DREV
.MODEL DREV D CJO=1.5N RS=20M TT=29N IS=300P BV=50
M171 86 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.245 KP=0.973
M2 11 86 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.313N
DGD 86 8 DCGD
.MODEL DCGD D CJO=1.313N M=0.521 VJ=0.7
CGS 76 11 0.85N
LG 4 1 7N
.ENDS
*$
*p-MOSFET*200V 3.6A 1.5 Ohm*Add_in_Line
.SUBCKT BUZ173/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 95 5.5M
RS 5 76 129M
D173 86 76 DREV
.MODEL DREV D CJO=550P RS=20M TT=180N IS=300P BV=200
M173 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.419 KP=0.986
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 102 11 8 8 MSW
COX 11 8 300P
DGD 102 8 DCGD
.MODEL DCGD D CJO=204P M=0.533 VJ=1.01
CGS 76 95 800P
VGC 11 95 -9
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
MHELP 86 102 102 102 MVRD
.MODEL MVRD PMOS VTO=14.79 KP=0.08
LG 4 1 7N
.ENDS
*$
*n-MOSFET*100V 13.5A 0.2 Ohm*Add_in_Line
.SUBCKT BUZ20/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 77M
D20 76 95 DREV
.MODEL DREV D CJO=0.35N RS=20M TT=100N IS=300P BV=100
M20 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.515 KP=7.547
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.560N M=0.556 VJ=1.056
CGS 76 11 0.46N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.71 KP=4
LG 4 1 7N
.ENDS
*$
.SUBCKT BUZ211/INF 1 2 3
LS 5 2 7N
LD 7 3 5N
RG 4 11 5
RS 5 9 29M
GVR 7 12 POLY(1) 7 12 0 1.682 0 -0.003 0 5.762U 0 -3.717N
* VARIABLER DRAINWIDERSTAND POLY-APPROX. DER LEITWERTVARIATION
D211 9 7 DREV
.MODEL DREV D CJO=1.35N RS=20M TT=121N IS=300P BV=600
M211 12 11 9 9 MBUZ
.MODEL MBUZ NMOS VTO=3.61 KP=4.082
M2 11 12 8 8 MSW OFF
.MODEL MSW NMOS VTO=0.01 KP=10
M3 12 11 8 8 MSW OFF
COX 11 8 9.4N
DGD 8 12 DCGD
.MODEL DCGD D CJO=4.734N M=0.571 VJ=0.026
CGS 9 11 2.9N
RHELP 11 8 100MEG
LG 4 1 7N
.ENDS
*$
*n-MOSFET*100V 21A 85mOhm*Add_in_Line
.SUBCKT BUZ21/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 52M
D21 76 95 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=50N IS=300P BV=100
M21 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.644 KP=21.65
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.092N M=0.571 VJ=1.058
CGS 76 11 1.2N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.52 KP=12.5
LG 4 1 7N
.ENDS
*$
*n-MOSFET*100V 34A 55mOhm*Add_in_Line
.SUBCKT BUZ22/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 34M
D22 76 95 DREV
.MODEL DREV D CJO=0.7N RS=20M TT=10N IS=300P BV=100
M22 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.76 KP=16.39
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.264N M=0.52 VJ=0.991
CGS 76 11 1.27N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-16.44 KP=4.5
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ220/INF 1 2 3
LS 5 2 7N
LD 71 3 5N
RG 4 11 5.5M
RS 5 76 43M
D220 76 71 DREV
.MODEL DREV D CJO=580P RS=20M TT=121N IS=300P BV=900
M220 87 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.517 KP=4.781
M2 11 87 8 8 MSW
.MODEL MSW NMOS VTO=0.0005 KP=5
M3 87 11 8 8 MSW
COX 11 8 3.8N
DGD 8 87 DCGD
.MODEL DCGD D CJO=580P M=0.62 VJ=1.131
CGS 76 11 4.1N
MDR 71 87 87 87 MVARD
.MODEL MVARD NMOS VTO=-27.07 KP=.038
LG 4 1 7N
.ENDS
*$
*p-MOSFET*50V 22A 0.15 Ohm*Add_in_Line
.SUBCKT BUZ271/INF 1 2 3
LS 5 2 7N
LD 87 3 5N
RG 4 11 5.5M
RS 5 76 58M
D271 87 76 DREV
.MODEL DREV D CJO=2N RS=20M TT=200N IS=300P BV=50
M271 87 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.1 KP=1.956
M2 11 87 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 87 11 8 8 MSW
COX 11 8 4.3N
DGD 87 8 DCGD
.MODEL DCGD D CJO=4.659N M=0.855 VJ=1.046
CGS 76 11 2N
LG 4 1 7N
.ENDS
*$
*p-MOSFET*100V 15A 0.3mOhm*Add_in_Line
.SUBCKT BUZ272/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 95 9.6
RS 5 76 56M
D272 86 76 DREV
.MODEL DREV D CJO=1.7N RS=20M TT=180N IS=300P BV=100
M272 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.149 KP=1.761
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 102 11 8 8 MSW
COX 11 8 700P
DGD 102 8 DCGD
.MODEL DCGD D CJO=692P M=0.659 VJ=1.029
CGS 76 95 2N
VGC 11 95 -10
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
MHELP 86 102 102 102 MVRD
.MODEL MVRD PMOS VTO=13 KP=0.8
LG 4 1 7N
.ENDS
*$
*n-MOSFET*800V 7.5A 1 Ohm*Add_in_Line
.SUBCKT BUZ305/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 5.8
RS 5 76 0.044
D305 76 97 DREV
.MODEL DREV D CJO=0.75N RS=20M TT=150N IS=300P BV=800
M305 99 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.617 KP=10.163
M2 96 99 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 99 96 8 8 MSW
COX 96 8 4N
DGD 8 99 DCGD
.MODEL DCGD D CJO=0.735N M=0.549 VJ=0.996
CGS 76 96 2.1N
MRDR 99 99 97 99 MVRD
.MODEL MVRD NMOS VTO=-53.44 KP=0.022
LG 95 1 7N
.ENDS
*$
*n-MOSFET*200V 21A 0.13 Ohm*Add_in_Line
.SUBCKT BUZ30A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 36M
D30A 76 95 DREV
.MODEL DREV D CJO=0.6N RS=20M TT=60N IS=300P BV=200
M30A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.316 KP=29.38
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.7N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.860N M=0.527 VJ=0.983
CGS 76 11 1.29N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-12.08 KP=1.4
LG 4 1 7N
.ENDS
*$
*n-MOSFET*200V 14.5A 0.2 Ohm*Add_in_Line
.SUBCKT BUZ31/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 28M
D31 76 95 DREV
.MODEL DREV D CJO=0.33N RS=20M TT=100N IS=300P BV=200
M31 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.048 KP=13.97
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.626N M=0.523 VJ=0.985
CGS 76 11 0.81N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-9.935 KP=1.08
LG 4 1 7N
.ENDS
*$
*n-MOSFET*1000V 2.5A 5 Ohm*Add_in_Line
.SUBCKT BUZ310/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 31M
D310 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=2000N IS=300P BV=1000
+
M310 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.118 KP=2.132
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.35N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.649N M=0.555 VJ=1.006
CGS 76 11 1.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-33.31 KP=0.007
LG 4 1 7N
.ENDS
*$
*n-MOSFET*1000V 2.5A 5 Ohm*Add_in_Line
.SUBCKT BUZ311/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 91M
D311 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=2000N IS=300P BV=1000
M311 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.098 KP=3.683
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.35N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.115N M=0.438 VJ=0.968
CGS 76 11 1.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-65.26 KP=0.0034
LG 4 1 7N
.ENDS
*$
*n-MOSFET*400V 15A 0.3 Ohm*Add_in_Line
.SUBCKT BUZ323/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 18M
D323 76 95 DREV
.MODEL DREV D CJO=0.7N RS=20M TT=40N IS=300P BV=400
M323 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.398 KP=16.36
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.649N M=0.555 VJ=1.006
CGS 76 11 2N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-13.58 KP=0.314
LG 4 1 7N
.ENDS
*$
*n-MOSFET*400V 12.5A 0.35 Ohm*Add_in_Line
.SUBCKT BUZ325/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 24M
D325 76 95 DREV
.MODEL DREV D CJO=0.5N RS=20M TT=400N IS=300P BV=400
M30A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.232 KP=13.57
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.628N M=0.533 VJ=0.981
CGS 76 11 1.71N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.38 KP=0.25
LG 4 1 7N
.ENDS
*$
*n-MOSFET*400V 10.5A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ326/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 24M
D326 76 95 DREV
.MODEL DREV D CJO=0.45N RS=20M TT=480N IS=300P BV=400
M326 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.329 KP=13.21
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.507N M=0.497 VJ=0.982
CGS 76 11 1.19N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.31 KP=0.23
LG 4 1 7N
.ENDS
*$
*n-MOSFET*500V 8A 0.8 Ohm*Add_in_Line
.SUBCKT BUZ331/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 24M
D331 76 95 DREV
.MODEL DREV D CJO=0.4 RS=20M TT=600N IS=300P BV=500
M331 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.089 KP=9.144
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.353N M=0.498 VJ=0.983
CGS 76 11 1.24N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-17.9 KP=0.104
LG 4 1 7N
.ENDS
*$
*n-MOSFET*600V 12A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ334/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 3M
D334 76 95 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=500N IS=300P BV=600
M334 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.748 KP=6.535
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.826N M=0.604 VJ=1.014
CGS 76 11 3.02N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-23.94 KP=.098
LG 4 1 7N
.ENDS
*$
*n-MOSFET*500V 13.5A 0.4 Ohm*Add_in_Line
.SUBCKT BUZ338/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 14M
D338 76 95 DREV
.MODEL DREV D CJO=0.65N RS=20M TT=500N IS=300P BV=500
M338 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.53 KP=15.731
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.867N M=0.578 VJ=1.016
CGS 76 11 2.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-19.18 KP=0.175
LG 4 1 7N
.ENDS
*$
*n-MOSFET*200V 33A 70mOhm*Add_in_Line
.SUBCKT BUZ341/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 14M
D341 76 95 DREV
.MODEL DREV D CJO=0.9N RS=20M TT=30N IS=300P BV=200
M341 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.248 KP=26.86
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.7N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.547N M=0.522 VJ=0.977
CGS 76 11 2.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.85 KP=2.5
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 60A 10mOhm*Add_in_Line
.SUBCKT BUZ342/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 96 12.74M
D342 96 86 DREV
.MODEL DREV D CJO=7.49393N RS=20M TT=85N IS=300P BV=50
M342 95 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=4.137 KP=69.74
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 163.09N
DGD 8 95 DCGD
.MODEL DCGD D CJO=11.6664N M=0.5 VJ=1
CGS 96 11 7.23985N
MHELP 95 95 86 95 MVRD
.MODEL MVRD NMOS VTO=-11.8 KP=24
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ342KL/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 7.4
RS 5 76 0.01
D342 76 97 DREV
.MODEL DREV D CJO=6N RS=20M TT=150N IS=300P BV=50
M342 98 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.883 KP=17.8
M2 96 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 96 8 8 MSW
COX 96 8 15N
DGD 8 98 DCGD
.MODEL DCGD D CJO=3.6N M=0.548 VJ=1.027
CGS 76 96 8N
RD 98 97 0.0038
LG 95 1 7N
.ENDS
*$
*n-MOSFET*600V 12A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ344/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 22M
D344 76 95 DREV
.MODEL DREV D CJO=3N RS=20M TT=100N IS=300P BV=100
M344 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.36 KP=44.73
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=2.9N M=0.575 VJ=1.017
CGS 76 11 11N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-55.64 KP=3
LG 4 1 7N
.ENDS
*$
*n-MOSFET*100V 41A 45 Ohm*Add_in_Line
.SUBCKT BUZ345/INF 1 2 3
LS 5 2 7N
LD 87 3 5N
RG 4 11 5.5M
RS 5 76 36M
D345 76 87 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=4.5N IS=300P BV=100
M345 87 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.618 KP=31.3
M2 11 87 8 8 MSW
.MODEL MSW NMOS VTO=0.0005 KP=10
M3 87 11 8 8 MSW IC=300,0,0
COX 11 8 5.5N
DGD 8 87 DCGD
.MODEL DCGD D CJO=2.13N M=0.614 VJ=1.146
CGS 76 11 1.6N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 58A 18mOhm*Add_in_Line
.SUBCKT BUZ346/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 10M
D346 76 95 DREV
.MODEL DREV D CJO=5.2N RS=20M TT=5.2N IS=300P BV=50
M346 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.188 KP=86.71
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 13N
DGD 8 95 DCGD
.MODEL DCGD D CJO=3.25N M=0.61 VJ=1.054
CGS 76 11 4N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*200V 22A 0.12 Ohm*Add_in_Line
.SUBCKT BUZ350/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 23M
D350 76 95 DREV
.MODEL DREV D CJO=.8N RS=20M TT=270N IS=300P BV=200
M350 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.366 KP=23.29
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.103N M=0.53 VJ=0.984
CGS 76 11 1.6N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.24 KP=1.65
LG 4 1 7N
.ENDS
*$
*n-MOSFET*800V 5.3A 2 Ohm*Add_in_Line
.SUBCKT BUZ356/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 53M
D356 76 95 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=300N IS=300P BV=800
M356 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.24 KP=6.863
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.365N M=0.48 VJ=0.96
CGS 76 11 4.3N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-25.73 KP=0.044
LG 4 1 7N
.ENDS
*$
*n-MOSFET*1000V 4.5A 2.6 Ohm*Add_in_Line
.SUBCKT BUZ358/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 64M
D358 76 95 DREV
.MODEL DREV D CJO=0.27N RS=20M TT=800N IS=300P BV=1000
M358 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.587 KP=15.84
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.75N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.553N M=0.541 VJ=1.016
CGS 76 11 2N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-41.34 KP=0.016
LG 4 1 7N
.ENDS
*$
*n-MOSFET*500V 8.5A 0.8 Ohm*Add_in_Line
.SUBCKT BUZ40B/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 20M
D40B 76 95 DREV
.MODEL DREV D CJO=0.5N RS=20M TT=400N IS=300P BV=500
M40B 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.813 KP=5.282
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.05N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.421N M=0.579 VJ=1.038
CGS 76 11 1.8N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.87 KP=0.112
LG 4 1 7N
.ENDS
*$
*n-MOSFET*500V 4.5A 1.5 Ohm*Add_in_Line
.SUBCKT BUZ41A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 31M
D41A 76 95 DREV
.MODEL DREV D CJO=0.28N RS=20M TT=500N IS=300P BV=500
M41A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.277 KP=7.765
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.209N M=0.564 VJ=1.035
CGS 76 11 0.79N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-17.57 KP=0.055
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ45B/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 53M
D45B 76 95 DREV
.MODEL DREV D CJO=0.8N RS=20M TT=120N IS=300P BV=500
M45B 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.268 KP=9.404
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.753N M=0.575 VJ=1.046
CGS 76 11 4.15N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-18.48 KP=0.149
LG 4 1 7N
.ENDS
*$
*n-MOSFET*1000V 2A 8 Ohm*Add_in_Line
.SUBCKT BUZ50B/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 107M
D50B 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=2000N IS=300P BV=1000
M50B 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.342 KP=4.093
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 0.4N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.123N M=0.451 VJ=0.969
CGS 76 11 1.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-35.45 KP=0.0075
LG 4 1 7N
.ENDS
*$
*n-MOSFET*1000V 3.4A 4 Ohm*Add_in_Line
.SUBCKT BUZ51/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 9.8
RS 5 76 1M
D51 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=300N IS=300P BV=1000
M51 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.994 KP=1.859
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.3
M3 86 11 8 8 MSW
COX 11 8 0.8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.268N M=0.537 VJ=1.014
CGS 76 11 1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-40.65 KP=0.0075
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ53A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 30M
D53A 76 95 DREV
.MODEL DREV D CJO=0.22N RS=20M TT=2000N IS=300P BV=1000
M53A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.294 KP=2.402
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.45N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.124N M=0.443 VJ=0.968
CGS 76 11 1.46N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-36.62 KP=0.007
LG 4 1 7N
.ENDS
*$
*n-MOSFET*400V 5.5A 1 Ohm*Add_in_Line
.SUBCKT BUZ60/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 19M
D60 76 95 DREV
.MODEL DREV D CJO=.25N RS=20M TT=900N IS=300P BV=400
M60 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.711 KP=3.721
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 .6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.275N M=0.515 VJ=0.981
CGS 76 11 0.76N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.02 KP=0.107
LG 4 1 7N
.ENDS
*$
*n-MOSFET*400V 11A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ61A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 3M
D61A 76 95 DREV
.MODEL DREV D CJO=0.4N RS=20M TT=400N IS=300P BV=400
M61A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.748 KP=5.122
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.505N M=0.537 VJ=0.988
CGS 76 11 1.49N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-14.22 KP=0.20
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ64/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 30M
D64 76 95 DREV
.MODEL DREV D CJO=0.8N RS=20M TT=100N IS=300P BV=400
M64 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.737 KP=13.14
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.775N M=0.609 VJ=1.045
CGS 76 11 1.8N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-14.1 KP=0.27
LG 4 1 7N
.ENDS
*$
*n-MOSFET*60V 12A 0.15 Ohm*Add_in_Line
.SUBCKT BUZ70/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 136M
D70 76 95 DREV
.MODEL DREV D CJO=0.4N RS=20M TT=8.3N IS=300P BV=60
M70 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.68 KP=13.67
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.7N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.213N M=0.45 VJ=1.03
CGS 76 11 0.35N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 14A 0.1 Ohm*Add_in_Line
.SUBCKT BUZ71/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 90M
D71 76 95 DREV
.MODEL DREV D CJO=0.48N RS=20M TT=7.1N IS=300P BV=50
M71 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.354 KP=20.7
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.9N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.340N M=0.480 VJ=1.099
CGS 76 11 0.4N
LG 4 1 7N
.ENDS
*$
*n-MOSFET*50V 14A 0.1 Ohm*Add_in_Line
.SUBCKT BUZ71L/INF 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 64M
D71L 76 86 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=10.7N IS=300P BV=50
M71L 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.057 KP=26.47
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=1
M3 86 11 8 8 MSW
COX 11 8 0.15N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.373N M=0.484 VJ=1.048
CGS 76 11 0.55N
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ71LGE/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 9.3
RS 5 76 34M
D71L 76 95 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=30N IS=300P BV=50
M71L 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.918 KP=15.59
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 2.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.411N M=0.507 VJ=1.042
CGS 76 11 0.55N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-30.7 KP=1.1
LG 4 1 7N
.ENDS
*$
*n-MOSFET*100V 10A 0.2 Ohm*Add_in_Line
.SUBCKT BUZ72/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 96M
D72 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=50N IS=300P BV=100
M72 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.716 KP=4.828
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.423N M=0.568 VJ=1.053
CGS 76 11 0.36N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.58 KP=1.3
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ72GE/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 96M
D72 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=50N IS=300P BV=100
M72 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.716 KP=4.828
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.423N M=0.568 VJ=1.053
CGS 76 11 0.36N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.58 KP=1.3
LG 4 1 7N
.ENDS
*$
*n-MOSFET*200V 7A 0.4 Ohm*Add_in_Line
.SUBCKT BUZ73/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 75M
D73 76 95 DREV
.MODEL DREV D CJO=0.28N RS=20M TT=200N IS=300P BV=200
M73 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.308 KP=8.528
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.348N M=0.544 VJ=1.056
CGS 76 11 0.47N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-9.182 KP=0.59
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ73AGE/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 60M
D73A 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=100N IS=300P BV=200
M73 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.618 KP=3.398
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.279N M=0.60 VJ=0.965
CGS 76 11 0.36N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.05 KP=.33
LG 4 1 7N
.ENDS
*$
*n-MOSFET*200V 7A 0.4 Ohm*Add_in_Line
.SUBCKT BUZ73L/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 6.3
RS 5 76 42M
D73L 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=100N IS=300P BV=200
M73L 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.941 KP=10.94
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 2.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.371N M=0.57 VJ=1.036
CGS 76 11 0.6N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.66 KP=.465
LG 4 1 7N
.ENDS
*$
*n-MOSFET*500V 2.1A 4 Ohm*Add_in_Line
.SUBCKT BUZ74A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 76M
D74A 76 95 DREV
.MODEL DREV D CJO=0.15N RS=20M TT=500N IS=300P BV=500
M74A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.835 KP=1.768
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.38N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.136N M=0.534 VJ=1.014
CGS 76 11 0.47N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-18.14 KP=0.032
LG 4 1 7N
.ENDS
*$
*n-MOSFET*400V 3A 1.8 Ohm*Add_in_Line
.SUBCKT BUZ76/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 98M
D76 76 95 DREV
.MODEL DREV D CJO=0.12N RS=20M TT=800N IS=300P BV=400
M76 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.51 KP=2.422
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 .33N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.136N M=0.497 VJ=0.982
CGS 76 11 0.48N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-14.63 KP=0.06
LG 4 1 7N
.ENDS
*$
*n-MOSFET*600V 2.7A 4 Ohm*Add_in_Line
.SUBCKT BUZ77A/INF 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 6.8
RS 5 76 0.029
D77A 76 97 DREV
.MODEL DREV D CJO=0.25N RS=20M TT=800N IS=300P BV=600
M77A 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.909 KP=1.283
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.4
M3 98 87 8 8 MSW
COX 87 8 0.17N
DGD 8 98 DCGD
.MODEL DCGD D CJO=116.75P M=0.553 VJ=1.017
CGS 76 99 0.34N
VGC 87 99 3
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-21.01 KP=0.018
LG 95 1 7N
.ENDS
*$
*n-MOSFET*800V 1.5A 8 Ohm*Add_in_Line
.SUBCKT BUZ78/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 9.8
RS 5 76 155M
D78 76 95 DREV
.MODEL DREV D CJO=0.1N RS=20M TT=500N IS=300P BV=800
M78 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.649 KP=2.584
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.4
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.123N M=0.54 VJ=1.02
CGS 76 11 0.34N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-28.66 KP=0.007
LG 4 1 7N
.ENDS
*$
*n-MOSFET*800V 3A 3 Ohm*Add_in_Line
.SUBCKT BUZ80A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 3.9
RS 5 76 51M
D80A 76 95 DREV
.MODEL DREV D CJO=0.45N RS=20M TT=1000N IS=300P BV=800
M80A 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.525 KP=2.996
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 2.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.171N M=0.545 VJ=1.022
CGS 76 11 1.55N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-26.5 KP=0.014
LG 4 1 7N
.ENDS
*$
*n-MOSFET**Add_in_Line
.SUBCKT BUZ84A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 17M
D84A 76 95 DREV
.MODEL DREV D CJO=0.35N RS=20M TT=700N IS=300P BV=800
M84A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.736 KP=5.583
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.668N M=0.556 VJ=1.019
CGS 76 11 1.76N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-33.83 KP=0.029
LG 4 1 7N
.ENDS
*$
*n-MOSFET*800V 4A 2.5 Ohm*Add_in_Line
.SUBCKT BUZ81/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 23M
D81 76 95 DREV
.MODEL DREV D CJO=0.4N RS=20M TT=625N IS=300P BV=800
M81 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.463 KP=3.263
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.265N M=0.495 VJ=0.975
CGS 76 11 1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-24.99 KP=.022
LG 4 1 7N
.ENDS
*$
*n-MOSFET*600V 4.5A 1.6 Ohm*Add_in_Line
.SUBCKT BUZ90/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 20M
D90 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=750N IS=300P BV=600
M90 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.227 KP=4.485
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.197N M=0.48 VJ=0.977
CGS 76 11 0.7N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-24.69 KP=0.031
LG 4 1 7N
.ENDS
*$
*n-MOSFET*600V 8A 0.9 Ohm*Add_in_Line
.SUBCKT BUZ91A/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 18M
D91A 76 95 DREV
.MODEL DREV D CJO=0.6N RS=50M TT=500N IS=300P BV=600
M91A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.725 KP=6.555
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.458N M=0.579 VJ=1.035
CGS 76 11 1.48N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-21.84 KP=0.069
LG 4 1 7N
.ENDS
*$
*n-MOSFET*600V 3.3A 3 Ohm*Add_in_Line
.SUBCKT BUZ92/INF 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 41M
D92 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=500N IS=300P BV=600
M92 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.875 KP=2.349
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.168N M=0.567 VJ=1.038
CGS 76 11 0.6N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-19.91 KP=0.027
LG 4 1 7N
.ENDS
*$
*****************************************************************
* BYP 103							
* BYP 301							
* BYP 302							
* BYP 303							
*                    						
* This model is solely valid at room-temperature                
* 								
* The basics of the diode model used in this template can be    
* found in							
*	R. Kraus, K. Hoffmann, P. Türkes			
*	Reverse Recovery Model of Power Diodes			
*	EPE-MADEP Proceedings O - 343 (1991)			
*     and the papers cited therein				
*								
*****************************************************************
* Pins are labeled according to standard	+ -> -		
*                                                               
* Include for Simulation:				        
* .LIB "dio_pw.lib"  (PSPICE)				        
*                                                               
*                                                               
* Subcircuit call for simulation:	                        
* Xdio  p1 p2 BYPxxx	 (PSPICE)                               
*$
*****************************************************************
.SUBCKT BYP103/INF   ANODE    KATODE    PARAMS:
+ +TT        =         200n     ; bestimmt Hoehe der Rueckstromspitze
+TM        =         150n     ; bestimmt Abrissteilheit des Rueckstroms
+VTA       =         0.026    ; Vta = K*T/q
+Is        =         1e-5     ; Abschaetzen aus der Diodenkennlinie 
+N=2                          ;    "   "   "   "   "   "   "   "
+R_reih    =         25m      ;    "   "   "   "   "   "   "   "
+Cjc       =         1.5nF    ; Dem Datenblatt zu entnehmen
+Mj        =         .7       ; default
+Vj        =         .6       ; default
+Ls        =         1n       ; parasitaere Induktivitaet
+Rs        =         1        ; parasitaerer Widerstand
+BV        =         1000     ; Blockierspannung
**********************************************************************
*
R_diode    ANODE     an_1     {R_reih}
L_streu    an_1      an_2     {Ls}   
G_diode    an_2      KATODE   VALUE = {(V(1)-I(V_mess))/TM}
**********************************************************************
***  HILFSNETZWERK  ***
**********************************************************************
*
E_e        1  0 TABLE { V(an_2,KATODE)*TT } = (-1k,-1e-14) (0,0) (10,10K)
R_dif      1         2        {(TT+TM)/TT}
L_dif      2         3        {TM}  IC=0
V_mess     3         0        0V
**********************************************************************
***  SPERRSCHICHTKAPAZITAET  ***
**********************************************************************
*
D_kap      an_2      KATODE   D_Sperr
.MODEL     D_Sperr   D(IS={Is} CJO={Cjc} VJ={Vj} M={Mj} N={N} Rs=0.001 FC=1 BV={BV})
**********************************************************************
.ends
*$
*
**********************************************************************

**********************************************************************
.SUBCKT BYP303/INF   ANODE    KATODE    PARAMS:
+
+TT        =         200n     ; bestimmt Hoehe der Rueckstromspitze
+TM        =         150n     ; bestimmt Abrissteilheit des Rueckstroms
+VTA       =         0.026    ; Vta = K*T/q
+Is        =         1e-5    ; Abschaetzen aus der Diodenkennlinie
+N         =         2        ;    "   "   "   "   "   "   "   "
+R_reih    =         25m      ;    "   "   "   "   "   "   "   "
+Cjc       =         1.4nF    ; Dem Datenblatt zu entnehmen
+Mj        =         .7       ; default
+Vj        =         .6       ; default
+Ls        =         1n       ; parasitaere Induktivitaet
+Rs        =         1        ; parasitaerer Widerstand
+BV        =         1200     ; Blockierspannung
**********************************************************************
*
R_diode    ANODE     an_1     {R_reih}
L_streu    an_1      an_2     {Ls}   
G_diode    an_2      KATODE   VALUE = {(V(1)-I(V_mess))/TM}
**********************************************************************
***  HILFSNETZWERK  ***
**********************************************************************
*
E_e        1  0  TABLE { V(an_2,KATODE)*TT } = (-1k,-1e-14) (0,0) (10,10K)
R_dif      1         2        {(TT+TM)/TT}
L_dif      2         3        {TM}  IC=0
V_mess     3         0        0V
**********************************************************************
***  SPERRSCHICHTKAPAZITAET  ***
**********************************************************************
*
D_kap      an_2      KATODE   D_Sperr
.MODEL     D_Sperr   D(IS={Is} CJO={Cjc} VJ={Vj} M={Mj} N={N} Rs=0.001 FC=1 BV={BV})
**********************************************************************
.ends
*$
*
**********************************************************************
**********************************************************************
.SUBCKT BYP302/INF   ANODE    KATODE    PARAMS:
+
+TT        =         200n     ; bestimmt Hoehe der Rueckstromspitze
+TM        =         150n     ; bestimmt Abrissteilheit des Rueckstroms
+VTA       =         0.026    ; Vta = K*T/q
+Is        =         .8e-5    ; Abschaetzen aus der Diodenkennlinie
+N         =         2        ;    "   "   "   "   "   "   "   "
+R_reih    =         25m      ;    "   "   "   "   "   "   "   "
+Cjc       =         1.1nF    ; Dem Datenblatt zu entnehmen
+Mj        =         .7       ; default
+Vj        =         .6       ; default
+Ls        =         1n       ; parasitaere Induktivitaet
+Rs        =         1        ; parasitaerer Widerstand
+BV        =         1200     ; Blockierspannung
**********************************************************************
*
R_diode    ANODE     an_1     {R_reih}
L_streu    an_1      an_2     {Ls}   
G_diode    an_2      KATODE   VALUE = {(V(1)-I(V_mess))/TM}
**********************************************************************
***  HILFSNETZWERK  ***
**********************************************************************
*
E_e        1  0 TABLE { V(an_2,KATODE)*TT } = (-1k,-1e-14) (0,0) (10,10K)
R_dif      1         2        {(TT+TM)/TT}
L_dif      2         3        {TM}  IC=0
V_mess     3         0        0V
**********************************************************************
***  SPERRSCHICHTKAPAZITAET  ***
**********************************************************************
*
D_kap      an_2      KATODE   D_Sperr
.MODEL     D_Sperr   D(IS={Is} CJO={Cjc} VJ={Vj} M={Mj} N={N} Rs=0.001 FC=1 BV={BV})
**********************************************************************
.ends
*$
*
**********************************************************************
**********************************************************************
.SUBCKT BYP301/INF   ANODE    KATODE    PARAMS:
+
+TT        =         200n     ; bestimmt Hoehe der Rueckstromspitze
+TM        =         150n     ; bestimmt Abrissteilheit des Rueckstroms
+VTA       =         0.026    ; Vta = K*T/q
+Is        =         .5e-5    ; Abschaetzen aus der Diodenkennlinie
+N         =         2        ;    "   "   "   "   "   "   "   "
+R_reih    =         25m      ;    "   "   "   "   "   "   "   "
+Cjc       =         .7nF    ; Dem Datenblatt zu entnehmen
+Mj        =         .7       ; default
+Vj        =         .6       ; default
+Ls        =         1n       ; parasitaere Induktivitaet
+Rs        =         1        ; parasitaerer Widerstand
+BV        =         1200     ; Blockierspannung
**********************************************************************
*
R_diode    ANODE     an_1     {R_reih}
L_streu    an_1      an_2     {Ls}   
G_diode    an_2      KATODE   VALUE = {(V(1)-I(V_mess))/TM}
**********************************************************************
***  HILFSNETZWERK  ***
**********************************************************************
*
E_e        1  0 TABLE { V(an_2,KATODE)*TT } = (-1k,-1e-14) (0,0) (10,10K)
R_dif      1         2        {(TT+TM)/TT}
L_dif      2         3        {TM}  IC=0
V_mess     3         0        0V
**********************************************************************
***  SPERRSCHICHTKAPAZITAET  ***
**********************************************************************
*
D_kap      an_2      KATODE   D_Sperr
.MODEL     D_Sperr   D(IS={Is} CJO={Cjc} VJ={Vj} M={Mj} N={N} Rs=0.001 FC=1 BV={BV})
**********************************************************************
.ends
*$

**********************************************************************

.MODEL MPSA42/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL MPSA43/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
 +       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL MPSA92/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL MPSA93/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2222/INF NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2222A/INF NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2907/INF PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2907A/INF PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT3904/INF NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT3906/INF PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT43/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01 
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZTA42/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZTA92/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZTA93/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.SUBCKT SDP04S60/INF   ANODE    KATODE    PARAMS:  TJ= 25
LA	ANODE AL	5n
LK	KL  KATODE	7n 
XSDP   AL    KL    SIC_BASE_600     PARAMS: AREA= 0.0116 V=0.75  TJ= {TJ}
.ENDS
*$
****************************************************************
.SUBCKT SDP06S60/INF   ANODE    KATODE    PARAMS:  TJ= 25
LA	ANODE AL	5n
LK	KL  KATODE	7n 
XSDP   AL    KL    SIC_BASE_600     PARAMS: AREA= 0.0196 V=0.779 TJ= {TJ}
.ENDS
*$
****************************************************************
.SUBCKT SDB10S30/INF   ANODE    KATODE    PARAMS:  TJ= 25 
LA	ANODE AL	5n
LK	KL  KATODE	7n 
XSDB   AL    KL    SIC_BASE_300     PARAMS: AREA= 0.0242  V=0.863  TJ= {TJ}
.ENDS
*$
**********************************************************************
.SUBCKT SIC_BASE_600   ANODE    KATODE    PARAMS: AREA= 0.0116 V=0.708 TJ= 25 
.PARAM
+q = 1.602e-19		eps0 = 8.85e-14		epsic = 9.66
+kb = 1.38e-23		T0 = 273	
+A0 = 110
+phi_SiC = 1.3	R0SQ = 0.90m
+F1= -6.8e7	F2= 6.64e-10
+AA= -1.5	AB= -12.95m	AC= 91u
+alpha1 = 3.8
.PARAM VPT = 400
.PARAM EPT = 1.05e6
.PARAM Cjo = {AREA*V*V*2.709e-8}
GSCHOTTKY	ANODE	MID	VALUE = {limit(exp(I_fw(TJ,V(ANODE,MID)))- 
+ I_bw(TJ,V(ANODE,MID)) +ICAP(V(ANODE,MID)),-1e9,1e9)}
ERSCHOTTKY	MID	KAT 	VALUE = {I(VIA) * RSER(TJ)}
VIA		KAT	KATODE	0
.FUNC EFLD(V)	{if(V < 0,if ( -V < VPT,sqrt(2.811e9*limit(-V,0,VPT)), EPT - 
+5.33e5*(V/VPT +1)),0)}
.FUNC ALFA(T,V)	{AA + AB*(T - 127) + AC*(T - 127)**2  + alpha1*EFLD(V)/EFLD(-
+VPT/5)}
.FUNC phils(V,T) {limit(q/kb/(T + T0)*sqrt(1.49e-8*EFLD(V)),0,10)}
.FUNC I_bw(T,V)	{AREA*A0*(T0 + T)**2*exp(-q*phi_SiC/kb/(T0 + T) + phils(V,T)  + 
+ log(0.5*(1 + exp(ALFA(T,V)))) )}
.FUNC I_fw(T,V)	{log(I_bw(T,V)) + V*q/kb/(T0 + T)}
.FUNC Icap(V)	{if( time > 2.5n, DDT(V)*Cjo/sqrt(limit(-V,0,VPT)/0.7+1),0)}
.FUNC RSER(T)	{R0SQ/AREA/V/V*((T0 + T)/T0)**1.5}
.ends
*$
**********************************************************************
.SUBCKT SIC_BASE_300   ANODE    KATODE    PARAMS: AREA= 0.0116 V=0.708 TJ= 25  
.PARAM
+q = 1.602e-19		eps0 = 8.85e-14		epsic = 9.66
+kb = 1.38e-23		T0 = 273	
+A0 = 110
+phi_SiC = 1.3	R0SQ = 0.747m
+F1= -6.8e7	F2= 6.64e-10
+AA= -1.5	AB= -12.95m	AC= 91u
+alpha1 = 3.8
.PARAM VPT = 200
.PARAM EPT = 1.06e6
.PARAM Cjo = {AREA*V*V*3.831e-8}
GSCHOTTKY	ANODE	MID	VALUE = {limit(exp(I_fw(TJ,V(ANODE,MID)))- I_bw(TJ,V(ANODE,MID))+ 
+ ICAP(V(ANODE,MID)),-1e9,1e9)}
ERSCHOTTKY	MID	KAT 	VALUE = {I(VIA) * RSER(TJ)}
VIA		KAT	KATODE	0
.FUNC EFLD(V)	{if(V < 0,if ( -V < VPT,sqrt(5.622e9*limit(-V,0,VPT)), EPT - 
+5.33e5*(V/VPT +1)),0)}
.FUNC ALFA(T,V)	{AA + AB*(T - 127) + AC*(T - 127)**2  + alpha1*EFLD(V)/EFLD(-
+VPT/5)}
.FUNC phils(V,T) {limit(q/kb/(T + T0)*sqrt(1.49e-8*EFLD(V)),0,10)}
.FUNC I_bw(T,V)	{AREA*A0*(T0 + T)**2*exp(-q*phi_SiC/kb/(T0 + T) + phils(V,T)+ 
+ log(0.5*(1 + exp(ALFA(T,V)))) )}
.FUNC I_fw(T,V)	{log(I_bw(T,V)) + V*q/kb/(T0 + T)}
.FUNC Icap(V)	{if( time > 2.5n, DDT(V)*Cjo/sqrt(limit(-V,0,VPT)/0.7+1),0)}
.FUNC RSER(T)	{R0SQ/AREA/V/V*((T0 + T)/T0)**0.9}
.ends
*$
**********************************************************************
.SUBCKT SGP02N60/INF ano gate kat
*****************************
* Parameters of Infineon SGP02N60	
* units cm, s, A, V
.PARAM 
+q = 1.6E-19	eps0 = 8.85E-14	epsi = 11.8
+ni = 1.45E10
+un = 1350	up = 450
+A = 0.0166	Agd = 0.0122	wb = 95.5E-4	
+Nb = 1.45E14	taub = 30E-6	
+Ise = 0.9E-12	Cje = 14.2p
+Cjs = 14.2p
+Vth = 4.5	Kp = 0.55
+Cox = 0.75n	Cgs = 155p
+Rs = 67.3m	Rg = 57.4
+Lc = 3E-4
MFET	d g s s 	MOS
DE	e de 		D1
DS	kat d		D2				
**************************
.MODEL	MOS	NMOS	(LEVEL=1,VTO={VTH},KP={KP})
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
*******************************************
RG	gate g		{Rg}
RS	s kat		{Rs}
RM	d s		100k
RC	d dr		{0.1*Rg}
CGS	g s		{Cgs}
COX	g ox		{Cox}
*****************************
* voltage across depletion region below gate:
EDEP	dr ox	VALUE = {Vdep(V(d,g))}
* current through base resistor:
GIA	ano e 	VALUE = {V(ano,e)/Rb(V(b))}
* charge control:
GIQ	e d	VALUE = {IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
* collector (hole) current:
GIPC	e kat	VALUE = {IPC(V(d,kat),I(VDXJ),I(VINE),V(b))}
************************************************
* current probe for electron current at emitter:
VINE	de d	0
*****************************
* subcircuit for base charge:
*****************************
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GIB	0 b	VALUE	{IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
**************************************************
* subcircuit for time derivative dxj/dt = I(VDXJ):
**************************************************
EXJ	xj1 0	VALUE	{1e6*xj(V(d,kat))}
CXJ	xj  0	1u
VDXJ	xj1 xj2	0
RXJ	xj2 xj	10m
*****************
.PARAM	D  = {2*0.026*un*up/(un+up)}
.PARAM	L  = {SQRT(D*Taub)}	
.PARAM 	QN = {q*A*wb*Nb}
.PARAM	Fpc = {4*Lc*Ise/(3.14*wb*un*0.026*q*A*ni*q*A*ni)}
.PARAM	VPT = {q*Nb*wb*wb/(2*eps0*epsi)}
.PARAM	VN = {q*Nb*eps0*epsi*(Agd/Cox)*(Agd/Cox)}
.PARAM	XF = {SQRT(2*eps0*epsi/(q*Nb))}
*************************************************
.FUNC	Vdep(V)	{MAX(V,0)+VN*(1-SQRT(1+2*MAX(V,0)/VN))}
.FUNC	Qeff(Z)	{(un+up)*MAX((2-Fpc*Z*1E-6)*Z*1E-6,QN*1E-8)}
.FUNC	Rb(Z)	{wb*wb*LOG(1+Qeff(Z)/(un*QN+(un+up)*Fpc*Z*Z*1E-12))/Qeff(Z)}
.FUNC	xj(V)	{XF*SQRT(MAX(1+V,0))}
.FUNC	w(V)	{MAX(1e-4,wb-xj(V))}
.FUNC	Td(V,X)	{(0.1/D)*w(V)*w(V)/(1+w(V)*MAX(X,0)/(12*D))}
.FUNC	F1(V)	{Taub*(COSH(w(V)/L)-1)}
.FUNC	F2(V,X)	{0.5*(1+TANH(w(V)*X/(6*D)))}
.FUNC	QS0(V)	{q*A*L*ni*TANH(0.5*w(V)/L)}
.FUNC	Qb0(V,Y)	{QS0(V)*SQRT(MAX(Y/ISE,0))}
.FUNC	IQ(V,X,Y,Z)	{Qb0(V,Y)/Taub+(Qb0(V,Y)-Z*1e-6)/(Td(V,X)+1e-18)}
.FUNC	IPC(V,X,Y,Z)
+	{(1/3)*(Y+IQ(V,X,Y,Z))+(4/3)*(Qb0(V,Y)/F1(V)+MAX(Qb0(V,Y)/Taub-
+ IQ(V,X,Y,Z),0)*F2(V,X))}
****************************************************************
.ENDS
*$
.SUBCKT SGP04N60/INF ano gate kat
****************************
* Parameters of Infineon SGP04N60	
* units cm, s, A, V
.PARAM 
+q = 1.6E-19	eps0 = 8.85E-14	epsi = 11.8
+ni = 1.45E10
+un = 1350	up = 450
+A = 0.0315	Agd = 0.0230	wb = 95.5E-4	
+Nb = 1.45E14	taub = 30E-6	
+Ise = 1.7E-12	Cje = 26.8p
+Cjs = 26.8p
+Vth = 4.5	Kp = 1.04
+Cox = 1.5n	Cgs = 280p
+Rs = 38.5m	Rg = 30.2
+Lc = 3E-4
********************************************************************************
MFET	d g s s 	MOS
DE	e de 		D1
DS	kat d		D2				
**************************
.MODEL	MOS	NMOS	(LEVEL=1,VTO={VTH},KP={KP})
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
*******************************************
RG	gate g		{Rg}
RS	s kat		{Rs}
RM	d s		100k
RC	d dr		{0.1*Rg}
CGS	g s		{Cgs}
COX	g ox		{Cox}
*****************************
* voltage across depletion region below gate:
EDEP	dr ox	VALUE = {Vdep(V(d,g))}
* current through base resistor:
GIA	ano e 	VALUE = {V(ano,e)/Rb(V(b))}
* charge control:
GIQ	e d	VALUE = {IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
* collector (hole) current:
GIPC	e kat	VALUE = {IPC(V(d,kat),I(VDXJ),I(VINE),V(b))}
************************************************
* current probe for electron current at emitter:
VINE	de d	0
*****************************
* subcircuit for base charge:
*****************************
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GIB	0 b	VALUE	{IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
**************************************************
* subcircuit for time derivative dxj/dt = I(VDXJ):
**************************************************
EXJ	xj1 0	VALUE	{1e6*xj(V(d,kat))}
CXJ	xj  0	1u
VDXJ	xj1 xj2	0
RXJ	xj2 xj	10m
*****************
.PARAM	D  = {2*0.026*un*up/(un+up)}
.PARAM	L  = {SQRT(D*Taub)}	
.PARAM 	QN = {q*A*wb*Nb}
.PARAM	Fpc = {4*Lc*Ise/(3.14*wb*un*0.026*q*A*ni*q*A*ni)}
.PARAM	VPT = {q*Nb*wb*wb/(2*eps0*epsi)}
.PARAM	VN = {q*Nb*eps0*epsi*(Agd/Cox)*(Agd/Cox)}
.PARAM	XF = {SQRT(2*eps0*epsi/(q*Nb))}
*************************************************
.FUNC	Vdep(V)	{MAX(V,0)+VN*(1-SQRT(1+2*MAX(V,0)/VN))}
.FUNC	Qeff(Z)	{(un+up)*MAX((2-Fpc*Z*1E-6)*Z*1E-6,QN*1E-8)}
.FUNC	Rb(Z)	{wb*wb*LOG(1+Qeff(Z)/(un*QN+(un+up)*Fpc*Z*Z*1E-12))/Qeff(Z)}
.FUNC	xj(V)	{XF*SQRT(MAX(1+V,0))}
.FUNC	w(V)	{MAX(1e-4,wb-xj(V))}
.FUNC	Td(V,X)	{(0.1/D)*w(V)*w(V)/(1+w(V)*MAX(X,0)/(12*D))}
.FUNC	F1(V)	{Taub*(COSH(w(V)/L)-1)}
.FUNC	F2(V,X)	{0.5*(1+TANH(w(V)*X/(6*D)))}
.FUNC	QS0(V)	{q*A*L*ni*TANH(0.5*w(V)/L)}
.FUNC	Qb0(V,Y)	{QS0(V)*SQRT(MAX(Y/ISE,0))}
.FUNC	IQ(V,X,Y,Z)	{Qb0(V,Y)/Taub+(Qb0(V,Y)-Z*1e-6)/(Td(V,X)+1e-18)}
.FUNC	IPC(V,X,Y,Z)
+	{(1/3)*(Y+IQ(V,X,Y,Z))+(4/3)*(Qb0(V,Y)/F1(V)+MAX(Qb0(V,Y)/Taub-
+ IQ(V,X,Y,Z),0)*F2(V,X))}
****************************************************************
.ENDS
*$
.SUBCKT SGP06N60/INF ano gate kat
*****************
* Parameters of Infineon SGP06N60	
* units cm, s, A, V
.PARAM 
+q = 1.6E-19	eps0 = 8.85E-14	epsi = 11.8
+ni = 1.45E10
+un = 1350	up = 450
+A = 0.0430	Agd = 0.0310	wb = 95.5E-4	
+Nb = 1.45E14	
+taub = 30E-6
+Ise = 2.3E-12
+Cje = 36.6p
+Cjs = 36.6p
+Vth = 4.5
+Kp = 1.42
+Cox = 2.25n	Cgs = 400p
+Rs = 30.0m	
+Rg = 20.5
+Lc = 3E-4
MFET	d g s s 	MOS
DE	e de 		D1
DS	kat d		D2				
**************************
.MODEL	MOS	NMOS	(LEVEL=1,VTO={VTH},KP={KP})
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
*******************************************
RG	gate g		{Rg}
RS	s kat		{Rs}
RM	d s		100k
RC	d dr		{0.1*Rg}
CGS	g s		{Cgs}
COX	g ox		{Cox}
*****************************
* voltage across depletion region below gate:
EDEP	dr ox	VALUE = {Vdep(V(d,g))}
* current through base resistor:
GIA	ano e 	VALUE = {V(ano,e)/Rb(V(b))}
* charge control:
GIQ	e d	VALUE = {IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
* collector (hole) current:
GIPC	e kat	VALUE = {IPC(V(d,kat),I(VDXJ),I(VINE),V(b))}
************************************************
* current probe for electron current at emitter:
VINE	de d	0
*****************************
* subcircuit for base charge:
*****************************
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GIB	0 b	VALUE	{IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
**************************************************
* subcircuit for time derivative dxj/dt = I(VDXJ):
**************************************************
EXJ	xj1 0	VALUE	{1e6*xj(V(d,kat))}
CXJ	xj  0	1u
VDXJ	xj1 xj2	0
RXJ	xj2 xj	10m
.PARAM	D  = {2*0.026*un*up/(un+up)}
.PARAM	L  = {SQRT(D*Taub)}	
.PARAM 	QN = {q*A*wb*Nb}
.PARAM	Fpc = {4*Lc*Ise/(3.14*wb*un*0.026*q*A*ni*q*A*ni)}
.PARAM	VPT = {q*Nb*wb*wb/(2*eps0*epsi)}
.PARAM	VN = {q*Nb*eps0*epsi*(Agd/Cox)*(Agd/Cox)}
.PARAM	XF = {SQRT(2*eps0*epsi/(q*Nb))}
*************************************************
.FUNC	Vdep(V)	{MAX(V,0)+VN*(1-SQRT(1+2*MAX(V,0)/VN))}
.FUNC	Qeff(Z)	{(un+up)*MAX((2-Fpc*Z*1E-6)*Z*1E-6,QN*1E-8)}
.FUNC	Rb(Z)	{wb*wb*LOG(1+Qeff(Z)/(un*QN+(un+up)*Fpc*Z*Z*1E-12))/Qeff(Z)}
.FUNC	xj(V)	{XF*SQRT(MAX(1+V,0))}
.FUNC	w(V)	{MAX(1e-4,wb-xj(V))}
.FUNC	Td(V,X)	{(0.1/D)*w(V)*w(V)/(1+w(V)*MAX(X,0)/(12*D))}
.FUNC	F1(V)	{Taub*(COSH(w(V)/L)-1)}
.FUNC	F2(V,X)	{0.5*(1+TANH(w(V)*X/(6*D)))}
.FUNC	QS0(V)	{q*A*L*ni*TANH(0.5*w(V)/L)}
.FUNC	Qb0(V,Y)	{QS0(V)*SQRT(MAX(Y/ISE,0))}
.FUNC	IQ(V,X,Y,Z)	{Qb0(V,Y)/Taub+(Qb0(V,Y)-Z*1e-6)/(Td(V,X)+1e-18)}
.FUNC	IPC(V,X,Y,Z)
+	{(1/3)*(Y+IQ(V,X,Y,Z))+(4/3)*(Qb0(V,Y)/F1(V)+MAX(Qb0(V,Y)/Taub-
+ IQ(V,X,Y,Z),0)*F2(V,X))}
****************************************************************
.ENDS
*$
.SUBCKT SGP10N60/INF ano gate kat
****************************
* Parameters of Infineon SGP10N60	
* units cm, s, A, V
.PARAM 
+q = 1.6E-19	eps0 = 8.85E-14	epsi = 11.8
+ni = 1.45E10
+un = 1350	up = 450
+A = 0.0870	Agd = 0.0700	wb = 95.5E-4	
+Nb = 1.45E14	taub = 30E-6	
+Ise = 4.7E-12	Cje = 57.4p
+Cjs = 57.4p
+Vth = 4.5	Kp = 2.137
+Cox = 4.75n	Cgs = 650p
+Rs = 18.1m	Rg = 9.0
+Lc = 3E-4
MFET	d g s s 	MOS
DE	e de 		D1
DS	kat d		D2				
**************************
.MODEL	MOS	NMOS	(LEVEL=1,VTO={VTH},KP={KP})
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
*******************************************
RG	gate g		{Rg}
RS	s kat		{Rs}
RM	d s		100k
RC	d dr		{0.1*Rg}
CGS	g s		{Cgs}
COX	g ox		{Cox}
*****************************
* voltage across depletion region below gate:
EDEP	dr ox	VALUE = {Vdep(V(d,g))}
* current through base resistor:
GIA	ano e 	VALUE = {V(ano,e)/Rb(V(b))}
* charge control:
GIQ	e d	VALUE = {IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
* collector (hole) current:
GIPC	e kat	VALUE = {IPC(V(d,kat),I(VDXJ),I(VINE),V(b))}
************************************************
* current probe for electron current at emitter:
VINE	de d	0
*****************************
* subcircuit for base charge:
*****************************
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GIB	0 b	VALUE	{IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
**************************************************
* subcircuit for time derivative dxj/dt = I(VDXJ):
**************************************************
EXJ	xj1 0	VALUE	{1e6*xj(V(d,kat))}
CXJ	xj  0	1u
VDXJ	xj1 xj2	0
RXJ	xj2 xj	10m
.PARAM	D  = {2*0.026*un*up/(un+up)}
.PARAM	L  = {SQRT(D*Taub)}	
.PARAM 	QN = {q*A*wb*Nb}
.PARAM	Fpc = {4*Lc*Ise/(3.14*wb*un*0.026*q*A*ni*q*A*ni)}
.PARAM	VPT = {q*Nb*wb*wb/(2*eps0*epsi)}
.PARAM	VN = {q*Nb*eps0*epsi*(Agd/Cox)*(Agd/Cox)}
.PARAM	XF = {SQRT(2*eps0*epsi/(q*Nb))}
*************************************************
.FUNC	Vdep(V)	{MAX(V,0)+VN*(1-SQRT(1+2*MAX(V,0)/VN))}
.FUNC	Qeff(Z)	{(un+up)*MAX((2-Fpc*Z*1E-6)*Z*1E-6,QN*1E-8)}
.FUNC	Rb(Z)	{wb*wb*LOG(1+Qeff(Z)/(un*QN+(un+up)*Fpc*Z*Z*1E-12))/Qeff(Z)}
.FUNC	xj(V)	{XF*SQRT(MAX(1+V,0))}
.FUNC	w(V)	{MAX(1e-4,wb-xj(V))}
.FUNC	Td(V,X)	{(0.1/D)*w(V)*w(V)/(1+w(V)*MAX(X,0)/(12*D))}
.FUNC	F1(V)	{Taub*(COSH(w(V)/L)-1)}
.FUNC	F2(V,X)	{0.5*(1+TANH(w(V)*X/(6*D)))}
.FUNC	QS0(V)	{q*A*L*ni*TANH(0.5*w(V)/L)}
.FUNC	Qb0(V,Y)	{QS0(V)*SQRT(MAX(Y/ISE,0))}
.FUNC	IQ(V,X,Y,Z)	{Qb0(V,Y)/Taub+(Qb0(V,Y)-Z*1e-6)/(Td(V,X)+1e-18)}
.FUNC	IPC(V,X,Y,Z)
+	{(1/3)*(Y+IQ(V,X,Y,Z))+(4/3)*(Qb0(V,Y)/F1(V)+MAX(Qb0(V,Y)/Taub-
+ IQ(V,X,Y,Z),0)*F2(V,X))}
****************************************************************
.ENDS
*$
.SUBCKT SGP15N60/INF ano gate kat
*****************
* Parameters of Infineon SGP15N60	
* units cm, s, A, V
.PARAM 
+q = 1.6E-19	eps0 = 8.85E-14	epsi = 11.8
+ni = 1.45E10
+un = 1350	up = 450
+A = 0.106	Agd = 0.077	wb = 95.5E-4	
+Nb = 1.45E14	taub = 30E-6	
+Ise = 5.9E-12	Cje = 90.0p
+Cjs = 90.0p
+Vth = 4.5	Kp = 3.51
+Cox = 5.62n	Cgs = 955p
+Rs = 16.1m	Rg = 5.5
+Lc = 3E-4
MFET	d g s s 	MOS
DE	e de 		D1
DS	kat d		D2				
**************************
.MODEL	MOS	NMOS	(LEVEL=1,VTO={VTH},KP={KP})
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
*******************************************
RG	gate g		{Rg}
RS	s kat		{Rs}
RM	d s		100k
RC	d dr		{0.1*Rg}
CGS	g s		{Cgs}
COX	g ox		{Cox}
*****************************
* voltage across depletion region below gate:
EDEP	dr ox	VALUE = {Vdep(V(d,g))}
* current through base resistor:
GIA	ano e 	VALUE = {V(ano,e)/Rb(V(b))}
* charge control:
GIQ	e d	VALUE = {IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
* collector (hole) current:
GIPC	e kat	VALUE = {IPC(V(d,kat),I(VDXJ),I(VINE),V(b))}
************************************************
* current probe for electron current at emitter:
VINE	de d	0
*****************************
* subcircuit for base charge:
*****************************
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GIB	0 b	VALUE	{IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
**************************************************
* subcircuit for time derivative dxj/dt = I(VDXJ):
**************************************************
EXJ	xj1 0	VALUE	{1e6*xj(V(d,kat))}
CXJ	xj  0	1u
VDXJ	xj1 xj2	0
RXJ	xj2 xj	10m
.PARAM	D  = {2*0.026*un*up/(un+up)}
.PARAM	L  = {SQRT(D*Taub)}	
.PARAM 	QN = {q*A*wb*Nb}
.PARAM	Fpc = {4*Lc*Ise/(3.14*wb*un*0.026*q*A*ni*q*A*ni)}
.PARAM	VPT = {q*Nb*wb*wb/(2*eps0*epsi)}
.PARAM	VN = {q*Nb*eps0*epsi*(Agd/Cox)*(Agd/Cox)}
.PARAM	XF = {SQRT(2*eps0*epsi/(q*Nb))}
*************************************************
.FUNC	Vdep(V)	{MAX(V,0)+VN*(1-SQRT(1+2*MAX(V,0)/VN))}
.FUNC	Qeff(Z)	{(un+up)*MAX((2-Fpc*Z*1E-6)*Z*1E-6,QN*1E-8)}
.FUNC	Rb(Z)	{wb*wb*LOG(1+Qeff(Z)/(un*QN+(un+up)*Fpc*Z*Z*1E-12))/Qeff(Z)}
.FUNC	xj(V)	{XF*SQRT(MAX(1+V,0))}
.FUNC	w(V)	{MAX(1e-4,wb-xj(V))}
.FUNC	Td(V,X)	{(0.1/D)*w(V)*w(V)/(1+w(V)*MAX(X,0)/(12*D))}
.FUNC	F1(V)	{Taub*(COSH(w(V)/L)-1)}
.FUNC	F2(V,X)	{0.5*(1+TANH(w(V)*X/(6*D)))}
.FUNC	QS0(V)	{q*A*L*ni*TANH(0.5*w(V)/L)}
.FUNC	Qb0(V,Y)	{QS0(V)*SQRT(MAX(Y/ISE,0))}
.FUNC	IQ(V,X,Y,Z)	{Qb0(V,Y)/Taub+(Qb0(V,Y)-Z*1e-6)/(Td(V,X)+1e-18)}
.FUNC	IPC(V,X,Y,Z)
+	{(1/3)*(Y+IQ(V,X,Y,Z))+(4/3)*(Qb0(V,Y)/F1(V)+MAX(Qb0(V,Y)/Taub-
+ IQ(V,X,Y,Z),0)*F2(V,X))}
****************************************************************
.ENDS
*$
.SUBCKT SGP20N60/INF ano gate kat
* Parameters of INfineon SGP20N60	
* units cm, s, A, V
.PARAM 
+q = 1.6E-19	eps0 = 8.85E-14	epsi = 11.8
+ni = 1.45E10
+un = 1350	up = 450
+A = 0.142	Agd = 0.104	wb = 95.5E-4	
+Nb = 1.45E14	taub = 30E-6	
+Ise = 7.6E-12	Cje = 121.0p
+Cjs = 121.0p
+Vth = 4.5	Kp = 4.70
+Cox = 7.45n	Cgs = 1270p
+Rs = 13.6m	Rg = 4.6
+Lc = 4E-4
MFET	d g s s 	MOS
DE	e de 		D1
DS	kat d		D2				
**************************
.MODEL	MOS	NMOS	(LEVEL=1,VTO={VTH},KP={KP})
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
*******************************************
RG	gate g		{Rg}
RS	s kat		{Rs}
RM	d s		100k
RC	d dr		{0.1*Rg}
CGS	g s		{Cgs}
COX	g ox		{Cox}
*****************************
* voltage across depletion region below gate:
EDEP	dr ox	VALUE = {Vdep(V(d,g))}
* current through base resistor:
GIA	ano e 	VALUE = {V(ano,e)/Rb(V(b))}
* charge control:
GIQ	e d	VALUE = {IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
* collector (hole) current:
GIPC	e kat	VALUE = {IPC(V(d,kat),I(VDXJ),I(VINE),V(b))}
************************************************
* current probe for electron current at emitter:
VINE	de d	0
*****************************
* subcircuit for base charge:
*****************************
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GIB	0 b	VALUE	{IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
**************************************************
* subcircuit for time derivative dxj/dt = I(VDXJ):
**************************************************
EXJ	xj1 0	VALUE	{1e6*xj(V(d,kat))}
CXJ	xj  0	1u
VDXJ	xj1 xj2	0
RXJ	xj2 xj	10m
.PARAM	D  = {2*0.026*un*up/(un+up)}
.PARAM	L  = {SQRT(D*Taub)}	
.PARAM 	QN = {q*A*wb*Nb}
.PARAM	Fpc = {4*Lc*Ise/(3.14*wb*un*0.026*q*A*ni*q*A*ni)}
.PARAM	VPT = {q*Nb*wb*wb/(2*eps0*epsi)}
.PARAM	VN = {q*Nb*eps0*epsi*(Agd/Cox)*(Agd/Cox)}
.PARAM	XF = {SQRT(2*eps0*epsi/(q*Nb))}
*************************************************
.FUNC	Vdep(V)	{MAX(V,0)+VN*(1-SQRT(1+2*MAX(V,0)/VN))}
.FUNC	Qeff(Z)	{(un+up)*MAX((2-Fpc*Z*1E-6)*Z*1E-6,QN*1E-8)}
.FUNC	Rb(Z)	{wb*wb*LOG(1+Qeff(Z)/(un*QN+(un+up)*Fpc*Z*Z*1E-12))/Qeff(Z)}
.FUNC	xj(V)	{XF*SQRT(MAX(1+V,0))}
.FUNC	w(V)	{MAX(1e-4,wb-xj(V))}
.FUNC	Td(V,X)	{(0.1/D)*w(V)*w(V)/(1+w(V)*MAX(X,0)/(12*D))}
.FUNC	F1(V)	{Taub*(COSH(w(V)/L)-1)}
.FUNC	F2(V,X)	{0.5*(1+TANH(w(V)*X/(6*D)))}
.FUNC	QS0(V)	{q*A*L*ni*TANH(0.5*w(V)/L)}
.FUNC	Qb0(V,Y)	{QS0(V)*SQRT(MAX(Y/ISE,0))}
.FUNC	IQ(V,X,Y,Z)	{Qb0(V,Y)/Taub+(Qb0(V,Y)-Z*1e-6)/(Td(V,X)+1e-18)}
.FUNC	IPC(V,X,Y,Z)
+	{(1/3)*(Y+IQ(V,X,Y,Z))+(4/3)*(Qb0(V,Y)/F1(V)+MAX(Qb0(V,Y)/Taub-
+ IQ(V,X,Y,Z),0)*F2(V,X))}
****************************************************************
.ENDS
*$
.SUBCKT SGP30N60/INF ano gate kat
*****************
* Parameters of Infineon SGP30N60	
* units cm, s, A, V
.PARAM 
+q = 1.6E-19	eps0 = 8.85E-14	epsi = 11.8
+ni = 1.45E10
+un = 1350	up = 450
+A = 0.207	Agd = 0.151	wb = 95.5E-4	
+Nb = 1.45E14	taub = 30E-6	
+Ise = 11.4E-12	Cje = 176.0p
+Cjs = 176.0p
+Vth = 4.5	Kp = 6.85
+Cox = 10.15n	Cgs = 1890p
+Rs = 11.5m	Rg = 3.2
+Lc = 3E-4
MFET	d g s s 	MOS
DE	e de 		D1
DS	kat d		D2				
**************************
.MODEL	MOS	NMOS	(LEVEL=1,VTO={VTH},KP={KP})
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
*******************************************
RG	gate g		{Rg}
RS	s kat		{Rs}
RM	d s		100k
RC	d dr		{0.1*Rg}
CGS	g s		{Cgs}
COX	g ox		{Cox}
*****************************
* voltage across depletion region below gate:
EDEP	dr ox	VALUE = {Vdep(V(d,g))}
* current through base resistor:
GIA	ano e 	VALUE = {V(ano,e)/Rb(V(b))}
* charge control:
GIQ	e d	VALUE = {IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
* collector (hole) current:
GIPC	e kat	VALUE = {IPC(V(d,kat),I(VDXJ),I(VINE),V(b))}
************************************************
* current probe for electron current at emitter:
VINE	de d	0
*****************************
* subcircuit for base charge:
*****************************
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GIB	0 b	VALUE	{IQ(V(d,kat),I(VDXJ),I(VINE),V(b))}
**************************************************
* subcircuit for time derivative dxj/dt = I(VDXJ):
**************************************************
EXJ	xj1 0	VALUE	{1e6*xj(V(d,kat))}
CXJ	xj  0	1u
VDXJ	xj1 xj2	0
RXJ	xj2 xj	10m
.PARAM	D  = {2*0.026*un*up/(un+up)}
.PARAM	L  = {SQRT(D*Taub)}	
.PARAM 	QN = {q*A*wb*Nb}
.PARAM	Fpc = {4*Lc*Ise/(3.14*wb*un*0.026*q*A*ni*q*A*ni)}
.PARAM	VPT = {q*Nb*wb*wb/(2*eps0*epsi)}
.PARAM	VN = {q*Nb*eps0*epsi*(Agd/Cox)*(Agd/Cox)}
.PARAM	XF = {SQRT(2*eps0*epsi/(q*Nb))}
*************************************************
.FUNC	Vdep(V)	{MAX(V,0)+VN*(1-SQRT(1+2*MAX(V,0)/VN))}
.FUNC	Qeff(Z)	{(un+up)*MAX((2-Fpc*Z*1E-6)*Z*1E-6,QN*1E-8)}
.FUNC	Rb(Z)	{wb*wb*LOG(1+Qeff(Z)/(un*QN+(un+up)*Fpc*Z*Z*1E-12))/Qeff(Z)}
.FUNC	xj(V)	{XF*SQRT(MAX(1+V,0))}
.FUNC	w(V)	{MAX(1e-4,wb-xj(V))}
.FUNC	Td(V,X)	{(0.1/D)*w(V)*w(V)/(1+w(V)*MAX(X,0)/(12*D))}
.FUNC	F1(V)	{Taub*(COSH(w(V)/L)-1)}
.FUNC	F2(V,X)	{0.5*(1+TANH(w(V)*X/(6*D)))}
.FUNC	QS0(V)	{q*A*L*ni*TANH(0.5*w(V)/L)}
.FUNC	Qb0(V,Y)	{QS0(V)*SQRT(MAX(Y/ISE,0))}
.FUNC	IQ(V,X,Y,Z)	{Qb0(V,Y)/Taub+(Qb0(V,Y)-Z*1e-6)/(Td(V,X)+1e-18)}
.FUNC	IPC(V,X,Y,Z)
+	{(1/3)*(Y+IQ(V,X,Y,Z))+(4/3)*(Qb0(V,Y)/F1(V)+MAX(Qb0(V,Y)/Taub-
+ IQ(V,X,Y,Z),0)*F2(V,X))}
****************************************************************
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2835 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2835/INF 1 2
D    3 4 SMBD2835
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD2835 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2836 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2836/INF 1 2
D    3 4 SMBD2836
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD2836 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2837 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2837/INF 1 2
D    3 4 SMBD2837
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD2837 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2838 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2838/INF 1 2
D    3 4 SMBD2838 L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD2838 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD6050 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD6050/INF 1 2
D    3 4 SMBD6050
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD6050 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD6100 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD6100/INF 1 2
D    3 4 SMBD6100
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD6100 D + IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD7000 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD7000/INF 1 2
D    3 4 SMBD7000
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD7000 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD914 (SOT-23)                  *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD914/INF 1 2
D    3 4 SMBD914
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
.MODEL SMBD914 D
+ IS  =  2.7838E-09
+ N   =  1.8703
+ RS  =  1.3548
+ EG  =  1.0637
+ XTI =  1.5000
+ CJO =  0.6000E-12
+ VJ  =  0.2000
+ M   =  0.1000
*$
*********************************************************************
.MODEL SMBT2222A/INF NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT2907/INF PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT2907A/INF PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT3904/INF NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT3906/INF PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4124/INF NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4126/INF PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4401/INF NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4403/INF NPN( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBT5086 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT5086/INF 1 2 3
Q    6 5 7 SMBT5086 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBT5086 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBT6428 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT6428/INF 1 2 3
Q    6 5 7 SMBT6428 1.000 LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBT6428 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBT6429 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT6429/INF 1 2 3
Q    6 5 7 SMBT6429 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBT6429 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBT5087 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT5087/INF 1 2 3
Q    6 5 7 SMBT5087 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBT5087 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBTA05 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA05/INF 1 2 3
Q    6 5 7 SMBTA05_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBTA05_1 NPN (IS=75.000F NF=1.010 BF=149.627 VAF=300.000 IKF=2.000
+ ISE=11.429F NE=1.663 NR=1.020 BR=2.900 VAR=25.000 IKR=36.690M
+ ISC=60.000F NC=1.428
+ RB=0.400 IRB=20.000U RBM=0.200
+ RE=0.100 RC=0.212
+ CJE=79.000P VJE=1.000 MJE=0.365 FC=0.900
+ CJC=16.000P VJC=0.720 MJC=0.465 XCJC=0.650
+ TF=1.100N TR=2.000N PTF=1.000
+ XTF=3.450 VTF=4.000 ITF=0.600
+ XTB=1.500 EG=1.110 XTI=4.000
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBTA06 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA06/INF 1 2 3
Q    6 5 7 SMBTA06_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBTA06_1 NPN (IS=75.000F NF=1.010 BF=149.627 VAF=300.000 IKF=2.000
+ ISE=11.429F NE=1.663 NR=1.020 BR=2.900 VAR=25.000 IKR=36.690M
+ ISC=60.000F NC=1.428
+ RB=0.400 IRB=20.000U RBM=0.200
+ RE=0.100 RC=0.212
+ CJE=79.000P VJE=1.000 MJE=0.365 FC=0.900
+ CJC=16.000P VJC=0.720 MJC=0.465 XCJC=0.650
+ TF=1.100N TR=2.000N PTF=1.000
+ XTF=3.450 VTF=4.000 ITF=0.600
+ XTB=1.500 EG=1.110 XTI=4.000
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBTA20 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA20/INF 1 2 3
Q    6 5 7 SMBTA20_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBTA20_1 NPN (IS=45.000F NF=1.010 BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*********************************************************************
.MODEL SMBTA42/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBTA43/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBTA55 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA55/INF 1 2 3
Q    6 5 7 SMBTA55_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBTA55_1 PNP (IS=65.000F NF=0.988 BF=151.409 VAF=81.400 IKF=0.825
+ ISE=45.000F NE=2.223 NR=0.985 BR=5.000 VAR=10.808 IKR=75.000M
+ ISC=62.000F NC=1.478
+ RB=0.350 IRB=20.000U RBM=0.200
+ RE=0.277 RC=0.311
+ CJE=74.000P VJE=1.090 MJE=0.410 FC=0.750
+ CJC=27.800P VJC=1.000 MJC=0.571 XCJC=0.650
+ TF=1.100N TR=2.000N PTF=1.000
+ XTF=5.000 VTF=2.000 ITF=0.487
+ XTB=1.900 EG=1.110 XTI=4.300
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBTA56 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA56/INF 1 2 3
Q    6 5 7 SMBTA56_1 1.000
LC   1 6 0.350N L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBTA56_1 PNP (IS=65.000F NF=0.988 BF=151.409 VAF=81.400 IKF=0.825
+ ISE=45.000F NE=2.223 NR=0.985 BR=5.000 VAR=10.808 IKR=75.000M
+ ISC=62.000F NC=1.478
+ RB=0.350 IRB=20.000U RBM=0.200
+ RE=0.277 RC=0.311
+ CJE=74.000P VJE=1.090 MJE=0.410 FC=0.750
+ CJC=27.800P VJC=1.000 MJC=0.571 XCJC=0.650
+ TF=1.100N TR=2.000N PTF=1.000
+ XTF=5.000 VTF=2.000 ITF=0.487
+ XTB=1.900 EG=1.110 XTI=4.300
+ KF=5.000F AF=1.000)
*********************************************************************
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBTA70 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA70/INF 1 2 3
Q    6 5 7 SMBTA70 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
.MODEL SMBTA70 PNP (IS=28.000F NF=1.000 BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
.MODEL SMBTA92/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBTA93/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.SUBCKT SPNA2N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=5n           Lg=6n           Ld=5n           Rs=10m          
.PARAM Cox=86.91p      Cds0=100.3p     Cgs=65.64p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=498.5n       
.PARAM k3=1.07u        k4=4.388E-13    k5=64.18m       k7=226.4        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=22.33u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1             
.PARAM Vth={3.3+dv}    T=300           Tref=273        auth=4m         
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=627.5u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=53.15m        
.PARAM g11=2.4         g16=-28.25      k101=500m       k102=1.5        
.PARAM al=1            Rd0=14.36       Rd1=418.8m      Uc=23           
.PARAM ta=1u           td=110n         
         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e- + 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2- + 
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SPP04N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=1.06n       Cds0=1.22n      Cgs=549p        Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.07u        
.PARAM k3=13.05u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=646.6m        
.PARAM g11=2.4         g16=-25.76      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.18        Rd1=34.42m      Uc=23           
.PARAM ta=1u           td=110n         
       

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)} 
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP06N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.53n       Cds0=1.76n      Cgs=793.5p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=8.77u        
.PARAM k3=18.86u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=934.5m        
.PARAM g11=2.4         g16=-25.39      k101=500m       k102=1.5        
.PARAM al=1            Rd0=816.7m      Rd1=23.82m      Uc=23           
.PARAM ta=1u           td=110n         
         
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP08N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.29n       Cds0=2.64n      Cgs=1.19n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=13.13u       
.PARAM k3=28.24u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.4           
.PARAM g11=2.4         g16=-24.98      k101=500m       k102=1.5        
.PARAM al=1            Rd0=545.3m      Rd1=15.91m      Uc=23           
.PARAM ta=1u           td=110n                 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=3.05n       Cds0=3.52n      Cgs=1.58n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=17.5u        
.PARAM k3=37.65u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.87          
.PARAM g11=2.4         g16=-24.7       k101=500m       k102=1.5        
.PARAM al=1            Rd0=409m        Rd1=11.93m      Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }
 .FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP17N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.08n       Cds0=5.86n      Cgs=2.64n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=29.15u       
.PARAM k3=62.71u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=3.11          
.PARAM g11=2.4         g16=-24.19      k101=500m       k102=1.5        
.PARAM al=1            Rd0=245.6m      Rd1=7.16m       Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC01N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=86.91p      Cds0=100.3p     Cgs=65.64p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=498.5n       
.PARAM k3=1.07u        k4=4.388E-13    k5=64.18m       k7=226.4        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=22.33u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1             
.PARAM Vth={3.3+dv}    T=300           Tref=273        auth=4m         
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=627.5u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=53.15m        
.PARAM g11=2.4         g16=-28.25      k101=500m       k102=1.5        
.PARAM al=1            Rd0=14.36       Rd1=418.8m      Uc=23           
.PARAM ta=1u           td=110n         
         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi)
+  {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SIPC07N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.06n       Cds0=1.22n      Cgs=549p        Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.07u        
.PARAM k3=13.05u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=646.6m        
.PARAM g11=2.4         g16=-25.76      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.18        Rd1=34.42m      Uc=23           
.PARAM ta=1u           td=110n         
       

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC09N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.53n       Cds0=1.76n      Cgs=793.5p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=8.77u        
.PARAM k3=18.86u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=934.5m        
.PARAM g11=2.4         g16=-25.39      k101=500m       k102=1.5        
.PARAM al=1            Rd0=816.7m      Rd1=23.82m      Uc=23           
.PARAM ta=1u           td=110n         
         
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC13N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.29n       Cds0=2.64n      Cgs=1.19n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=13.13u       
.PARAM k3=28.24u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.4           
.PARAM g11=2.4         g16=-24.98      k101=500m       k102=1.5        
.PARAM al=1            Rd0=545.3m      Rd1=15.91m      Uc=23           
.PARAM ta=1u           td=110n                 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC16N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=3.05n       Cds0=3.52n      Cgs=1.58n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=17.5u        
.PARAM k3=37.65u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.87          
.PARAM g11=2.4         g16=-24.7       k101=500m       k102=1.5        
.PARAM al=1            Rd0=409m        Rd1=11.93m      Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj)
+  {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x) 
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N80C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.08n       Cds0=5.86n      Cgs=2.64n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=29.15u       
.PARAM k3=62.71u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=3.11          
.PARAM g11=2.4         g16=-24.19      k101=500m       k102=1.5        
.PARAM al=1            Rd0=245.6m      Rd1=7.16m       Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj)
+  {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi)
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*
+ z4**2-SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),
+ 0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPNA2N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=5n           Lg=6n           Ld=5n           Rs=10m          
.PARAM Cox=86.91p      Cds0=100.3p     Cgs=65.64p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=498.5n       
.PARAM k3=1.07u        k4=4.388E-13    k5=64.18m       k7=226.4        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=22.33u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1             
.PARAM Vth={3.3+dv}    T=300           Tref=273        auth=4m         
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=627.5u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=53.15m        
.PARAM g11=2.4         g16=-28.25      k101=500m       k102=1.5        
.PARAM al=1            Rd0=14.36       Rd1=418.8m      Uc=23           
.PARAM ta=1u           td=110n         
         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   1p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SPP04N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=1.06n       Cds0=1.22n      Cgs=549p        Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.07u        
.PARAM k3=13.05u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=646.6m        
.PARAM g11=2.4         g16=-25.76      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.18        Rd1=34.42m      Uc=23           
.PARAM ta=1u           td=110n         
       

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP06N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.53n       Cds0=1.76n      Cgs=793.5p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=8.77u        
.PARAM k3=18.86u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=934.5m        
.PARAM g11=2.4         g16=-25.39      k101=500m       k102=1.5        
.PARAM al=1            Rd0=816.7m      Rd1=23.82m      Uc=23           
.PARAM ta=1u           td=110n         
         
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP08N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.29n       Cds0=2.64n      Cgs=1.19n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=13.13u       
.PARAM k3=28.24u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.4           
.PARAM g11=2.4         g16=-24.98      k101=500m       k102=1.5        
.PARAM al=1            Rd0=545.3m      Rd1=15.91m      Uc=23           
.PARAM ta=1u           td=110n                 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=3.05n       Cds0=3.52n      Cgs=1.58n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=17.5u        
.PARAM k3=37.65u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.87          
.PARAM g11=2.4         g16=-24.7       k101=500m       k102=1.5        
.PARAM al=1            Rd0=409m        Rd1=11.93m      Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1} 
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/
+ (Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP17N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.08n       Cds0=5.86n      Cgs=2.64n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=29.15u       
.PARAM k3=62.71u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=3.11          
.PARAM g11=2.4         g16=-24.19      k101=500m       k102=1.5        
.PARAM al=1            Rd0=245.6m      Rd1=7.16m       Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x) 
+  {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC01N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=86.91p      Cds0=100.3p     Cgs=65.64p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=498.5n       
.PARAM k3=1.07u        k4=4.388E-13    k5=64.18m       k7=226.4        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=22.33u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1             
.PARAM Vth={3.3+dv}    T=300           Tref=273        auth=4m         
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=627.5u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=53.15m        
.PARAM g11=2.4         g16=-28.25      k101=500m       k102=1.5        
.PARAM al=1            Rd0=14.36       Rd1=418.8m      Uc=23           
.PARAM ta=1u           td=110n         
         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x) 
+  {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   1p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SIPC07N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.06n       Cds0=1.22n      Cgs=549p        Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.07u        
.PARAM k3=13.05u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=646.6m        
.PARAM g11=2.4         g16=-25.76      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.18        Rd1=34.42m      Uc=23           
.PARAM ta=1u           td=110n         
       

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC09N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.53n       Cds0=1.76n      Cgs=793.5p      Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=8.77u        
.PARAM k3=18.86u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=934.5m        
.PARAM g11=2.4         g16=-25.39      k101=500m       k102=1.5        
.PARAM al=1            Rd0=816.7m      Rd1=23.82m      Uc=23           
.PARAM ta=1u           td=110n         
         
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) } 
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC13N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.29n       Cds0=2.64n      Cgs=1.19n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=13.13u       
.PARAM k3=28.24u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.4           
.PARAM g11=2.4         g16=-24.98      k101=500m       k102=1.5        
.PARAM al=1            Rd0=545.3m      Rd1=15.91m      Uc=23           
.PARAM ta=1u           td=110n                 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC16N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=3.05n       Cds0=3.52n      Cgs=1.58n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=17.5u        
.PARAM k3=37.65u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.87          
.PARAM g11=2.4         g16=-24.7       k101=500m       k102=1.5        
.PARAM al=1            Rd0=409m        Rd1=11.93m      Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N80C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.08n       Cds0=5.86n      Cgs=2.64n       Rg=700m         

.PARAM Vp=100          Fg=30m          delta=1         k2=29.15u       
.PARAM k3=62.71u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=3.11          
.PARAM g11=2.4         g16=-24.19      k101=500m       k102=1.5        
.PARAM al=1            Rd0=245.6m      Rd1=7.16m       Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)} 
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPNA2N80C2/L3/INF gate drain source Tj Tcase Tamb PARAMS: Zthtype=0 
+ dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=5n           Lg=6n           Ld=5n           Rs=10m          
.PARAM Cox=86.91p      Cds0=100.3p     Cgs=65.64p      Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1={615m+lzth*123m}
.PARAM Rth2={2.164+lzth*432.75m}
.PARAM Rth3={4.4+lzth*880.05m}
.PARAM Rth4={1.5+lzth*3.9}
.PARAM Rth5={5.509+lzth*14.49}
.PARAM Rth6={5.647+lzth*4.35}
.PARAM CZth1=1.75u
.PARAM CZth2=37.24u
.PARAM CZth3=172.46u
.PARAM CZth4=34.23u
.PARAM CZth5=1.13m
.PARAM CZth6=24.89m

.PARAM Vp=100          Fg=30m          delta=1         k2=498.5n       
.PARAM k3=1.07u        k4=4.388E-13    k5=64.18m       k7=226.4        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=22.33u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1             
.PARAM Vth={3.3+dv}    T=300           Tref=273        auth=4m         
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=627.5u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=53.15m        
.PARAM g11=2.4         g16=-28.25      k101=500m       k102=1.5        
.PARAM al=1            Rd0=14.36       Rd1=418.8m      Uc=23           
.PARAM ta=1u           td=110n         
         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   1p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SPP04N80C2/L3/INF gate drain source Tj Tcase Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=1.06n       Cds0=1.22n      Cgs=549p        Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {50.55m + lzth*10.11m}
.PARAM Rth2= {87.88m + lzth*17.58m}
.PARAM Rth3= {121.5m + lzth*24.3m}
.PARAM Rth4= {165.4m + lzth*214.5m}
.PARAM Rth5= {431.5m + lzth*500.5m}
.PARAM Rth6= {213.2m + lzth*663m}
.PARAM CZth1=21.32u    
.PARAM CZth2=428.8u    
.PARAM CZth3=382.1u    
.PARAM CZth4=934.2u    
.PARAM CZth5=383.2u    
.PARAM CZth6=59.57m    

.PARAM Vp=100          Fg=30m          delta=1         k2=6.07u        
.PARAM k3=13.05u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=646.6m        
.PARAM g11=2.4         g16=-25.76      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.18        Rd1=34.42m      Uc=23           
.PARAM ta=1u           td=110n         
       

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23- + z3),
+ z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP06N80C2/L3/INF gate drain source Tj Tcase Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.53n       Cds0=1.76n      Cgs=793.5p      Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.98m + lzth*7m}
.PARAM Rth2= {60.93m + lzth*12.19m}
.PARAM Rth3= {84.9m + lzth*16.98m}
.PARAM Rth4= {117.2m + lzth*108.4m}
.PARAM Rth5= {313.4m + lzth*253m}
.PARAM Rth6= {165.7m + lzth*325.3m}
.PARAM CZth1=30.81u    
.PARAM CZth2=617.4u    
.PARAM CZth3=545.6u    
.PARAM CZth4=1.31m     
.PARAM CZth5=525.9u    
.PARAM CZth6=73.12m    

.PARAM Vp=100          Fg=30m          delta=1         k2=8.77u        
.PARAM k3=18.86u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=934.5m        
.PARAM g11=2.4         g16=-25.39      k101=500m       k102=1.5        
.PARAM al=1            Rd0=816.7m      Rd1=23.82m      Uc=23           
.PARAM ta=1u           td=110n         
         
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPU06N80C2/L3/INF gate drain source Tj Tcase Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.53n       Cds0=1.76n      Cgs=793.5p      Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.98m + lzth*7m}
.PARAM Rth2= {60.93m + lzth*12.19m}
.PARAM Rth3= {84.9m + lzth*16.98m}
.PARAM Rth4= {117.2m + lzth*125m}
.PARAM Rth5= {238.3m + lzth*291.6m}
.PARAM Rth6= {130.6m + lzth*380.4m}
.PARAM CZth1=30.81u    
.PARAM CZth2=617.4u    
.PARAM CZth3=545.6u    
.PARAM CZth4=1.31m     
.PARAM CZth5=525.9u    
.PARAM CZth6=42.6m     

.PARAM Vp=100          Fg=30m          delta=1         k2=8.77u        
.PARAM k3=18.86u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=934.5m        
.PARAM g11=2.4         g16=-25.39      k101=500m       k102=1.5        
.PARAM al=1            Rd0=816.7m      Rd1=23.82m      Uc=23           
.PARAM ta=1u           td=110n         
         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)} 
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP08N80C2/L3/INF gate drain source Tj Tcase Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.29n       Cds0=2.64n      Cgs=1.19n       Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {23.36m + lzth*4.67m}
.PARAM Rth2= {40.75m + lzth*8.15m}
.PARAM Rth3= {57.19m + lzth*11.44m}
.PARAM Rth4= {80.04m + lzth*83.41m}
.PARAM Rth5= {218.9m + lzth*194.6m}
.PARAM Rth6= {123.7m + lzth*253.8m}
.PARAM CZth1=46.14u    
.PARAM CZth2=921.5u    
.PARAM CZth3=808.2u    
.PARAM CZth4=1.9m      
.PARAM CZth5=750.8u    
.PARAM CZth6=93.37m    

.PARAM Vp=100          Fg=30m          delta=1         k2=13.13u       
.PARAM k3=28.24u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.4           
.PARAM g11=2.4         g16=-24.98      k101=500m       k102=1.5        
.PARAM al=1            Rd0=545.3m      Rd1=15.91m      Uc=23           
.PARAM ta=1u           td=110n                 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N80C2/L3/INF gate drain source Tj Tcase Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=3.05n       Cds0=3.52n      Cgs=1.58n       Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {17.52m + lzth*3.5m}
.PARAM Rth2= {30.59m + lzth*6.12m}
.PARAM Rth3= {43.12m + lzth*8.62m}
.PARAM Rth4= {60.83m + lzth*86.96m}
.PARAM Rth5= {168.7m + lzth*202.9m}
.PARAM Rth6= {99.45m + lzth*271.6m}
.PARAM CZth1=61.53u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.07m     
.PARAM CZth4=2.49m     
.PARAM CZth5=972.3u    
.PARAM CZth6=112.5m    

.PARAM Vp=100          Fg=30m          delta=1         k2=17.5u        
.PARAM k3=37.65u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.87          
.PARAM g11=2.4         g16=-24.7       k101=500m       k102=1.5        
.PARAM al=1            Rd0=409m        Rd1=11.93m      Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP17N80C2/L3/INF gate drain source Tj Tcase Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.08n       Cds0=5.86n      Cgs=2.64n       Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {10.52m + lzth*2.1m}
.PARAM Rth2= {18.4m + lzth*3.68m}
.PARAM Rth3= {26.09m + lzth*5.22m}
.PARAM Rth4= {37.25m + lzth*50.37m}
.PARAM Rth5= {105.5m + lzth*117.5m}
.PARAM Rth6= {66.4m + lzth*156.9m}
.PARAM CZth1=102.5u    
.PARAM CZth2=2.04m     
.PARAM CZth3=1.77m     
.PARAM CZth4=4.04m     
.PARAM CZth5=1.55m     
.PARAM CZth6=160.2m    

.PARAM Vp=100          Fg=30m          delta=1         k2=29.15u       
.PARAM k3=62.71u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=3.11          
.PARAM g11=2.4         g16=-24.19      k101=500m       k102=1.5        
.PARAM al=1            Rd0=245.6m      Rd1=7.16m       Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW17N80C2/L3/INF gate drain source Tj Tcase Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.08n       Cds0=5.86n      Cgs=2.64n       Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {10.52m + lzth*2.1m}
.PARAM Rth2= {18.4m + lzth*3.68m}
.PARAM Rth3= {26.09m + lzth*5.22m}
.PARAM Rth4= {37.25m + lzth*38.56m}
.PARAM Rth5= {157.5m + lzth*89.97m}
.PARAM Rth6= {93.17m + lzth*117.5m}
.PARAM CZth1=102.5u    
.PARAM CZth2=2.04m     
.PARAM CZth3=1.77m     
.PARAM CZth4=4.04m     
.PARAM CZth5=1.55m     
.PARAM CZth6=326.2m    

.PARAM Vp=100          Fg=30m          delta=1         k2=29.15u       
.PARAM k3=62.71u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=3.11          
.PARAM g11=2.4         g16=-24.19      k101=500m       k102=1.5        
.PARAM al=1            Rd0=245.6m      Rd1=7.16m       Uc=23           
.PARAM ta=1u           td=110n           

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC01N80C2/L3/INF gate drain source Tj Tpad Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=86.91p      Cds0=100.3p     Cgs=65.64p      Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {615.1m + lzth*120m}
.PARAM Rth2= {1.04 + lzth*0.12}
.PARAM Rth3= {1.29 + lzth*0.13}
.PARAM Rth4= {0.8 + lzth*0.5}
.PARAM CZth1=1.75u     
.PARAM CZth2=37.24u    
.PARAM CZth3=37.23u    
.PARAM CZth4=117.1u    

.PARAM Vp=100          Fg=30m          delta=1         k2=498.5n       
.PARAM k3=1.07u        k4=4.388E-13    k5=64.18m       k7=226.4        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=22.33u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1             
.PARAM Vth={3.3+dv}    T=300           Tref=273        auth=4m         
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=627.5u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=53.15m        
.PARAM g11=2.4         g16=-28.25      k101=500m       k102=1.5        
.PARAM al=1            Rd0=14.36       Rd1=418.8m      Uc=23           
.PARAM ta=1u           td=110n         
         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23- + z3),
+ z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   1p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SIPC07N80C2/L3/INF gate drain source Tj Tpad Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.06n       Cds0=1.22n      Cgs=549p        Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {50.55m + lzth*10.11m}
.PARAM Rth2= {87.88m + lzth*17.58m}
.PARAM Rth3= {121.5m + lzth*24.3m}
.PARAM Rth4= {90.97m + lzth*117.98m}
.PARAM CZth1=21.32u    
.PARAM CZth2=428.8u    
.PARAM CZth3=382.1u    
.PARAM CZth4=934.2u    

.PARAM Vp=100          Fg=30m          delta=1         k2=6.07u        
.PARAM k3=13.05u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=646.6m        
.PARAM g11=2.4         g16=-25.76      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.18        Rd1=34.42m      Uc=23           
.PARAM ta=1u           td=110n         
       

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC09N80C2/L3/INF gate drain source Tj Tpad Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.53n       Cds0=1.76n      Cgs=793.5p      Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.98m + lzth*7m}
.PARAM Rth2= {60.93m + lzth*12.19m}
.PARAM Rth3= {84.9m + lzth*16.98m}
.PARAM Rth4= {64.46m + lzth*59.62m}
.PARAM CZth1=30.81u    
.PARAM CZth2=617.4u    
.PARAM CZth3=545.6u    
.PARAM CZth4=1.31m     

.PARAM Vp=100          Fg=30m          delta=1         k2=8.77u        
.PARAM k3=18.86u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=934.5m        
.PARAM g11=2.4         g16=-25.39      k101=500m       k102=1.5        
.PARAM al=1            Rd0=816.7m      Rd1=23.82m      Uc=23           
.PARAM ta=1u           td=110n         
         
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) } 
.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   1p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC13N80C2/L3/INF gate drain source Tj Tpad Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.29n       Cds0=2.64n      Cgs=1.19n       Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {23.36m + lzth*4.67m}
.PARAM Rth2= {40.75m + lzth*8.15m}
.PARAM Rth3= {57.19m + lzth*11.44m}
.PARAM Rth4= {44.02m + lzth*45.88m}
.PARAM CZth1=46.14u    
.PARAM CZth2=921.5u    
.PARAM CZth3=808.2u    
.PARAM CZth4=1.9m      

.PARAM Vp=100          Fg=30m          delta=1         k2=13.13u       
.PARAM k3=28.24u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.4           
.PARAM g11=2.4         g16=-24.98      k101=500m       k102=1.5        
.PARAM al=1            Rd0=545.3m      Rd1=15.91m      Uc=23           
.PARAM ta=1u           td=110n                 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj)
+  {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC16N80C2/L3/INF gate drain source Tj Tpad Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=3.05n       Cds0=3.52n      Cgs=1.58n       Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {17.52m + lzth*3.5m}
.PARAM Rth2= {30.59m + lzth*6.12m}
.PARAM Rth3= {43.12m + lzth*8.62m}
.PARAM Rth4= {33.46m + lzth*47.83m}
.PARAM CZth1=61.53u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.07m     
.PARAM CZth4=2.49m     

.PARAM Vp=100          Fg=30m          delta=1         k2=17.5u        
.PARAM k3=37.65u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u         
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=1.87          
.PARAM g11=2.4         g16=-24.7       k101=500m       k102=1.5        
.PARAM al=1            Rd0=409m        Rd1=11.93m      Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N80C2/L3/INF gate drain source Tj Tpad Tamb 
+ PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.08n       Cds0=5.86n      Cgs=2.64n       Rg=700m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {10.52m + lzth*2.1m}
.PARAM Rth2= {18.4m + lzth*3.68m}
.PARAM Rth3= {26.09m + lzth*5.22m}
.PARAM Rth4= {20.49m + lzth*27.7m}
.PARAM CZth1=102.5u    
.PARAM CZth2=2.04m     
.PARAM CZth3=1.77m     
.PARAM CZth4=4.04m     

.PARAM Vp=100          Fg=30m          delta=1         k2=29.15u       
.PARAM k3=62.71u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=1.2          k9=276m         k10=39.83       k11=38u          
.PARAM k12=0           k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=35.83       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=2             
.PARAM Vth={3.75+dv}   T=300           Tref=273        auth=5.5m       
.PARAM aubr=800m       Ibr=100p        Ubr=800         coxi=431.4u     
.PARAM psi=219.9m      Un=99.19u       Utnbr=207m      W=3.11          
.PARAM g11=2.4         g16=-24.19      k101=500m       k102=1.5        
.PARAM al=1            Rd0=245.6m      Rd1=7.16m       Uc=23           
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+ Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+ 1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+ 2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+ k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+ z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+ {limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+ delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+ Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPU01N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=3m           
.PARAM Cox=156.9p      Cds0=362.1p     Cgs=81.48p      Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=433.3n       
.PARAM k3=1.92u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.4m        
.PARAM g11=2.4         g16=-28.37      k101=500m       k102=1.5        
.PARAM al=1            Rd0=4.64        Rd1=149.1m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+ I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+ {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1} 
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SPP02N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****

.SUBCKT SPP03N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP04N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)} 
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP07N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=19.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u         
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=28.5         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=12.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=12.86n      Cds0=29.69n     Cgs=6.68n       Rg=8.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=35.53u       
.PARAM k3=157.4u       k4=4.388E-13    k5=135.8m       k7=155.7         
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.5+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.93          
.PARAM g11=2.4         g16=-23.96      k101=500m       k102=1.5        
.PARAM al=1            Rd0=56.59m      Rd1=1.82m       Uc=12.5         
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPP04N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))} 
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP07N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2- +
+ SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=4.33          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=51.45m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)
+  {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
******
.SUBCKT SPP02N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=254.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.81        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SPP03N60M2/L1/INF gate drain source PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.8m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=962.4m      Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SPP04N60M2/L1/INF gate drain source PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=672.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=708.2m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SPP07N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.10       
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=432.8m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.725          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=276m        Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.66          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=130m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=9.96          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=47.85m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(TEMP,-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC02N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=156.9p      Cds0=362.1p     Cgs=81.48p      Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=433.3n       
.PARAM k3=1.92u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.4m        
.PARAM g11=2.4         g16=-28.37      k101=500m       k102=1.5        
.PARAM al=1            Rd0=4.64        Rd1=149.1m      Uc=12.5         
.PARAM ta=1u           td=110n         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SIPC03N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC05N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC06N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC10N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=19.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=28.5         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=12.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC61N60S5/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=12.86n      Cds0=29.69n     Cgs=6.68n       Rg=8.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=35.53u       
.PARAM k3=157.4u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.5+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.93          
.PARAM g11=2.4         g16=-23.96      k101=500m       k102=1.5        
.PARAM al=1            Rd0=56.59m      Rd1=1.82m       Uc=12.5         
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC06N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC10N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC69N60C2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=4.33          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=51.45m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC03N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=254.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.81        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC05N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.8m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=962.4m      Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC06N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=672.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=708.2m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC10N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.10       
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=432.8m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.725          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=276m        Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.66          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=130m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC69N60M2/L1/INF gate drain source  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=9.96          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=47.85m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(TEMP,-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(TEMP,-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(TEMP,-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(TEMP,-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(TEMP,-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPU01N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=3m           
.PARAM Cox=156.9p      Cds0=362.1p     Cgs=81.48p      Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=433.3n       
.PARAM k3=1.92u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.4m        
.PARAM g11=2.4         g16=-28.37      k101=500m       k102=1.5        
.PARAM al=1            Rd0=4.64        Rd1=149.1m      Uc=12.5         
.PARAM ta=1u           td=110n
         
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SPP02N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n       
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP03N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP04N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP07N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=19.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)} 
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=28.5         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=12.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj)  +{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60S5_L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=12.86n      Cds0=29.69n     Cgs=6.68n       Rg=8.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=35.53u       
.PARAM k3=157.4u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.5+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.93          
.PARAM g11=2.4         g16=-23.96      k101=500m       k102=1.5        
.PARAM al=1            Rd0=56.59m      Rd1=1.82m       Uc=12.5         
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPP04N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP07N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=4.33          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=51.45m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPP02N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=254.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.81        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SPP03N60M2_L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.8m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=962.4m      Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SPP04N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=672.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=708.2m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*****
.SUBCKT SPP07N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u          
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.10       
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=432.8m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.725          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=276m        Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi)
+ {v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))} 
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u          
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.66          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=130m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=9.96          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=47.85m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC02N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=156.9p      Cds0=362.1p     Cgs=81.48p      Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=433.3n       
.PARAM k3=1.92u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.4m        
.PARAM g11=2.4         g16=-28.37      k101=500m       k102=1.5        
.PARAM al=1            Rd0=4.64        Rd1=149.1m      Uc=12.5         
.PARAM ta=1u           td=110n         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }
 .FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SIPC03N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC05N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC06N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC10N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=19.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=28.5         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=12.1         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC61N60S5/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=12.86n      Cds0=29.69n     Cgs=6.68n       Rg=8.7          

.PARAM Vp=100          Fg=30m          delta=1         k2=35.53u       
.PARAM k3=157.4u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.5+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.93          
.PARAM g11=2.4         g16=-23.96      k101=500m       k102=1.5        
.PARAM al=1            Rd0=56.59m      Rd1=1.82m       Uc=12.5         
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))} 
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC06N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC10N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC69N60C2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=4.33          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=51.45m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC03N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=8            

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=254.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.81        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC05N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.8m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=962.4m      Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC06N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=672.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=708.2m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*****
.SUBCKT SIPC10N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.10       
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=432.8m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.725          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=276m        Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.66          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=130m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC69N60M2/L2/INF gate drain source Tj  PARAMS: dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=9.96          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=47.85m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(Tj),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(Tj),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(Tj),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPU01N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=3m           
.PARAM Cox=156.9p      Cds0=362.1p     Cgs=81.48p      Rg=8            

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {208.8m + lzth*41.76m}
.PARAM Rth2= {459m + lzth*91.81m}
.PARAM Rth3= {901.3m + lzth*180.3m}
.PARAM Rth4= {1 + lzth*977.5m}
.PARAM Rth5= {1.4 + lzth*2.28}
.PARAM Rth6= {514m + lzth*2.94}
.PARAM CZth1=3.16u     
.PARAM CZth2=38.21u    
.PARAM CZth3=60.62u    
.PARAM CZth4=226.8u    
.PARAM CZth5=92.02u    
.PARAM CZth6=13.99m         

.PARAM Vp=100          Fg=30m          delta=1         k2=433.3n       
.PARAM k3=1.92u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.4m        
.PARAM g11=2.4         g16=-28.37      k101=500m       k102=1.5        
.PARAM al=1            Rd0=4.64        Rd1=149.1m      Uc=12.5         
.PARAM ta=1u           td=110n         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1} 
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SPN01N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=3n           Lg=5n           Ld=3n           Rs=3m           
.PARAM Cox=156.9p      Cds0=362.1p     Cgs=81.48p      Rg=8            

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {208.8m + lzth*41.76m}
.PARAM Rth2= {977m + lzth*195m}
.PARAM Rth3= {2.531 + lzth*2}
.PARAM Rth4= {2.55 + lzth*8.7}
.PARAM Rth5= {5.9 + lzth*5}
.PARAM Rth6= {2.6 + lzth*4.3}
.PARAM CZth1=3.16u   
.PARAM CZth2=38.21u    
.PARAM CZth3=235u    
.PARAM CZth4=10.6u    
.PARAM CZth5=7.25m     
.PARAM CZth6=100m     

.PARAM Vp=100          Fg=30m          delta=1         k2=433.3n       
.PARAM k3=1.92u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.4m        
.PARAM g11=2.4         g16=-28.37      k101=500m       k102=1.5        
.PARAM al=1            Rd0=4.64        Rd1=149.1m      Uc=12.5         
.PARAM ta=1u           td=110n       

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP02N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {90.48m + lzth*18.1m}
.PARAM Rth2= {200.1m + lzth*40.02m}
.PARAM Rth3= {404.4m + lzth*80.89m}
.PARAM Rth4= {487.1m + lzth*359.4m}
.PARAM Rth5= {1.02 + lzth*838.6m}
.PARAM Rth6= {400.2m + lzth*1.06}
.PARAM CZth1=7.3u      
.PARAM CZth2=87.14u    
.PARAM CZth3=133.5u    
.PARAM CZth4=448.3u    
.PARAM CZth5=166.8u    
.PARAM CZth6=38.64m        

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPU02N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {90.48m + lzth*18.1m}
.PARAM Rth2= {200.1m + lzth*40.02m}
.PARAM Rth3= {404.4m + lzth*80.89m}
.PARAM Rth4= {487.1m + lzth*408.7m}
.PARAM Rth5= {761.8m + lzth*953.5m}
.PARAM Rth6= {331.6m + lzth*1.22}
.PARAM CZth1=7.3u      
.PARAM CZth2=87.14u    
.PARAM CZth3=133.5u    
.PARAM CZth4=448.3u    
.PARAM CZth5=166.8u    
.PARAM CZth6=19.61m            

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPN02N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=3n           Lg=5n           Ld=3n           Rs=3m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {90.48m + lzth*18.1m}
.PARAM Rth2= {368m + lzth*74m}
.PARAM Rth3= {2.19 + lzth*1}
.PARAM Rth4= {2.20 + lzth*7}
.PARAM Rth5= {5.49 + lzth*5}
.PARAM Rth6= {2.27 + lzth*4.3}
.PARAM CZth1=7.3u      
.PARAM CZth2=87.14u    
.PARAM CZth3=316u  
.PARAM CZth4=1.49m    
.PARAM CZth5=10.1m    
.PARAM CZth6=100m    

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n        

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP03N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {48.13m + lzth*9.63m}
.PARAM Rth2= {106.8m + lzth*21.35m}
.PARAM Rth3= {219.1m + lzth*43.83m}
.PARAM Rth4= {275.5m + lzth*264.9m}
.PARAM Rth5= {608.1m + lzth*618m}
.PARAM Rth6= {276.6m + lzth*808.1m}
.PARAM CZth1=13.73u    
.PARAM CZth2=162.8u    
.PARAM CZth3=244.9u    
.PARAM CZth4=773.8u    
.PARAM CZth5=273u      
.PARAM CZth6=48.49m         

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPU03N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {48.13m + lzth*9.63m}
.PARAM Rth2= {106.8m + lzth*21.35m}
.PARAM Rth3= {219.1m + lzth*43.83m}
.PARAM Rth4= {275.5m + lzth*294.5m}
.PARAM Rth5= {462.3m + lzth*687.1m}
.PARAM Rth6= {225.1m + lzth*906.7m}
.PARAM CZth1=13.73u    
.PARAM CZth2=162.8u    
.PARAM CZth3=244.9u    
.PARAM CZth4=773.8u    
.PARAM CZth5=273u      
.PARAM CZth6=26.85m        

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPN03N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=3n           Lg=5n           Ld=3n           Rs=3m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {48.13m + lzth*9.63m}
.PARAM Rth2= {189m + lzth*37.8m}
.PARAM Rth3= {1.41 + lzth*282m}
.PARAM Rth4= {1.45 + lzth*6}
.PARAM Rth5= {5.05 + lzth*4}
.PARAM Rth6= {1.86 + lzth*4.67}
.PARAM CZth1=13.73u    
.PARAM CZth2=162.8u    
.PARAM CZth3=526u    
.PARAM CZth4=1.86m    
.PARAM CZth5=9.6m    
.PARAM CZth6=100m    

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPA03N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1={48.13m+lzth*9.63m}
.PARAM Rth2={297.273m+lzth*59.45m}
.PARAM Rth3={775.209m+lzth*155.04m}
.PARAM Rth4={536.876m+lzth*63.12m}
.PARAM Rth5={1.151+lzth*248.69m}
.PARAM Rth6={1.074+lzth*286.26m}
.PARAM CZth1=13.73u
.PARAM CZth2=162.8u
.PARAM CZth3=966.88u
.PARAM CZth4=19.16m
.PARAM CZth5=302.09m
.PARAM CZth6=2.74         

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP04N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {201.4m + lzth*200.5m}
.PARAM Rth5= {467.9m + lzth*467.7m}
.PARAM Rth6= {226.6m + lzth*614.7m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     
.PARAM CZth5=360.5u    
.PARAM CZth6=59.72m           

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPU04N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {201.4m + lzth*225.4m}
.PARAM Rth5= {348.9m + lzth*525.9m}
.PARAM Rth6= {179.4m + lzth*697.8m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     
.PARAM CZth5=360.5u    
.PARAM CZth6=32.47m       

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPN04N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=3n           Lg=5n           Ld=3n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {124m + lzth*24.8m}
.PARAM Rth3= {105m + lzth*21m}
.PARAM Rth4= {1.68 + lzth*5}
.PARAM Rth5= {5.79 + lzth*3}
.PARAM Rth6= {1.51 + lzth*2.71}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=368u      
.PARAM CZth4=567u        
.PARAM CZth5=10.5m    
.PARAM CZth6=100m    

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP07N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=19.1         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {127.1m + lzth*112m}
.PARAM Rth5= {301m + lzth*261.4m}
.PARAM Rth6= {160.4m + lzth*340.6m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     
.PARAM CZth5=547.4u    
.PARAM CZth6=75.1m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1} 
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPU07N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=19.1         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {127.1m + lzth*128m}
.PARAM Rth5= {228.8m + lzth*298.7m}
.PARAM Rth6= {126.2m + lzth*393.8m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     
.PARAM CZth5=547.4u    
.PARAM CZth6=43.89m        

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1} 
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=28.5         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {82.93m + lzth*74.02m}
.PARAM Rth5= {202.4m + lzth*172.7m}
.PARAM Rth6= {115.8m + lzth*225.7m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     
.PARAM CZth5=811.8u    
.PARAM CZth6=98.7m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2- 
+ +SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW11N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=28.5         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {82.93m + lzth*53.02m}
.PARAM Rth5= {302.1m + lzth*123.7m}
.PARAM Rth6= {156.2m + lzth*155.6m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     
.PARAM CZth5=811.8u    
.PARAM CZth6=214.6m        

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))} 
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=12.1         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {40.27m + lzth*51.47m}
.PARAM Rth5= {102.1m + lzth*120.1m}
.PARAM Rth6= {64.51m + lzth*161.6m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     
.PARAM CZth5=1.6m      
.PARAM CZth6=164.3m          

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW20N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=12.1         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {40.27m + lzth*40m}
.PARAM Rth5= {152.4m + lzth*93.33m}
.PARAM Rth6= {90.68m + lzth*123.3m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     
.PARAM CZth5=1.6m      
.PARAM CZth6=333.7m        

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60S5/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=12.86n      Cds0=29.69n     Cgs=6.68n       Rg=8.7          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {2.55m + lzth*509.3u}
.PARAM Rth2= {5.69m + lzth*1.14m}
.PARAM Rth3= {12.05m + lzth*2.41m}
.PARAM Rth4= {16.67m + lzth*23.09m}
.PARAM Rth5= {65.12m + lzth*53.87m}
.PARAM Rth6= {44.02m + lzth*72.9m}
.PARAM CZth1=259.4u    
.PARAM CZth2=3.04m     
.PARAM CZth3=4.39m     
.PARAM CZth4=12.11m    
.PARAM CZth5=3.74m     
.PARAM CZth6=621.4m    

.PARAM Vp=100          Fg=30m          delta=1         k2=35.53u       
.PARAM k3=157.4u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.5+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.93          
.PARAM g11=2.4         g16=-23.96      k101=500m       k102=1.5        
.PARAM al=1            Rd0=56.59m      Rd1=1.82m       Uc=12.5         
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPP04N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {201.4m + lzth*200.5m}
.PARAM Rth5= {467.9m + lzth*467.7m}
.PARAM Rth6= {226.6m + lzth*614.7m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     
.PARAM CZth5=360.5u    
.PARAM CZth6=59.72m           

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)} 
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPU04N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=0.95         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {201.4m + lzth*225.4m}
.PARAM Rth5= {348.9m + lzth*525.9m}
.PARAM Rth6= {179.4m + lzth*697.8m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     
.PARAM CZth5=360.5u    
.PARAM CZth6=32.47m        

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPN04N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=3n           Lg=9n           Ld=3n           Rs=3m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=0.95         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {124m + lzth*24.8m}
.PARAM Rth3= {105m + lzth*21m}
.PARAM Rth4= {1.68 + lzth*5}
.PARAM Rth5= {5.79 + lzth*3}
.PARAM Rth6= {1.51 + lzth*2.71}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=368u      
.PARAM CZth4=567u        
.PARAM CZth5=10.5m    
.PARAM CZth6=100m    

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))} 
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPA04N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1={34.27m+lzth*6.85m}
.PARAM Rth2={212.61m+lzth*42.52m}
.PARAM Rth3={602.577m+lzth*120.52m}
.PARAM Rth4={482.666m+lzth*67.33m}
.PARAM Rth5={1.146+lzth*113.68m}
.PARAM Rth6={1.061+lzth*119.15m}
.PARAM CZth1=19.28u
.PARAM CZth2=228.1u
.PARAM CZth3=1.33m
.PARAM CZth4=23.9m
.PARAM CZth5=306.48m
.PARAM CZth6=2.75           

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP07N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {127.1m + lzth*112m}
.PARAM Rth5= {301m + lzth*261.4m}
.PARAM Rth6= {160.4m + lzth*340.6m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     
.PARAM CZth5=547.4u    
.PARAM CZth6=75.1m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPU07N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {127.1m + lzth*128m}
.PARAM Rth5= {228.8m + lzth*298.7m}
.PARAM Rth6= {126.2m + lzth*393.8m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     
.PARAM CZth5=547.4u    
.PARAM CZth6=43.89m        

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPA07N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1={20.94m+lzth*4.19m}
.PARAM Rth2={130.071m+lzth*26.01m}
.PARAM Rth3={401.045m+lzth*80.21m}
.PARAM Rth4={407.706m+lzth*62.29m}
.PARAM Rth5={1.125+lzth*294.74m}
.PARAM Rth6={1.043+lzth*306.98m}
.PARAM CZth1=31.54u
.PARAM CZth2=372.1u
.PARAM CZth3=2.16m
.PARAM CZth4=36.05m
.PARAM CZth5=315.32m
.PARAM CZth6=2.74         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {82.93m + lzth*74.02m}
.PARAM Rth5= {202.4m + lzth*172.7m}
.PARAM Rth6= {115.8m + lzth*225.7m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     
.PARAM CZth5=811.8u    
.PARAM CZth6=98.7m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW11N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=0.86         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {82.93m + lzth*53.02m}
.PARAM Rth5= {302.1m + lzth*123.7m}
.PARAM Rth6= {156.2m + lzth*155.6m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     
.PARAM CZth5=811.8u    
.PARAM CZth6=214.6m        

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPA11N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1={13.36m+lzth*2.67m}
.PARAM Rth2={83.056m+lzth*16.61m}
.PARAM Rth3={276.456m+lzth*55.29m}
.PARAM Rth4={391.861m+lzth*78.14m}
.PARAM Rth5={1.092+lzth*388.22m}
.PARAM Rth6={1.014+lzth*386.22m}
.PARAM CZth1=49.45u
.PARAM CZth2=582.1u
.PARAM CZth3=3.34m
.PARAM CZth4=53.69m
.PARAM CZth5=330.87m
.PARAM CZth6=2.75         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {40.27m + lzth*51.47m}
.PARAM Rth5= {102.1m + lzth*120.1m}
.PARAM Rth6= {64.51m + lzth*161.6m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     
.PARAM CZth5=1.6m      
.PARAM CZth6=164.3m          

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW20N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {40.27m + lzth*40m}
.PARAM Rth5= {152.4m + lzth*93.33m}
.PARAM Rth6= {90.68m + lzth*123.3m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     
.PARAM CZth5=1.6m      
.PARAM CZth6=333.7m        

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n 

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPA20N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1={6.3m+lzth*1.26m}
.PARAM Rth2={39.115m+lzth*7.82m}
.PARAM Rth3={139.511m+lzth*27.9m}
.PARAM Rth4={343.832m+lzth*156.17m}
.PARAM Rth5={1.038+lzth*441.82m}
.PARAM Rth6={982.662m+lzth*417.34m}
.PARAM CZth1=104.8u
.PARAM CZth2=1.23m
.PARAM CZth3=6.88m
.PARAM CZth4=94.25m
.PARAM CZth5=336.73m
.PARAM CZth6=2.75          

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60C2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {2.32m + lzth*463.1u}
.PARAM Rth2= {5.17m + lzth*1.03m}
.PARAM Rth3= {10.97m + lzth*2.19m}
.PARAM Rth4= {15.18m + lzth*24.93m}
.PARAM Rth5= {59.48m + lzth*58.18m}
.PARAM Rth6= {40.65m + lzth*79.43m}
.PARAM CZth1=285.3u    
.PARAM CZth2=3.34m     
.PARAM CZth3=4.83m     
.PARAM CZth4=13.29m    
.PARAM CZth5=4.09m     
.PARAM CZth6=666.8m        

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=4.33          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=51.45m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SPP02N60M2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=8            

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {90.48m + lzth*18.1m}
.PARAM Rth2= {200.1m + lzth*40.02m}
.PARAM Rth3= {404.4m + lzth*80.89m}
.PARAM Rth4= {487.1m + lzth*359.4m}
.PARAM Rth5= {1.02 + lzth*838.6m}
.PARAM Rth6= {400.2m + lzth*1.06}
.PARAM CZth1=7.3u      
.PARAM CZth2=87.14u    
.PARAM CZth3=133.5u    
.PARAM CZth4=448.3u    
.PARAM CZth5=166.8u    
.PARAM CZth6=38.64m        

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=254.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.81        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))} 
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SPP03N60M2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {48.13m + lzth*9.63m}
.PARAM Rth2= {106.8m + lzth*21.35m}
.PARAM Rth3= {219.1m + lzth*43.83m}
.PARAM Rth4= {275.5m + lzth*264.9m}
.PARAM Rth5= {608.1m + lzth*618m}
.PARAM Rth6= {276.6m + lzth*808.1m}
.PARAM CZth1=13.73u    
.PARAM CZth2=162.8u    
.PARAM CZth3=244.9u    
.PARAM CZth4=773.8u    
.PARAM CZth5=273u      
.PARAM CZth6=48.49m        

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.8m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=962.4m      Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))} 
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SPP04N60M2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=2m           
.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {201.4m + lzth*200.5m}
.PARAM Rth5= {467.9m + lzth*467.7m}
.PARAM Rth6= {226.6m + lzth*614.7m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     
.PARAM CZth5=360.5u    
.PARAM CZth6=59.72m           

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=672.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=708.2m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
.SUBCKT SPP07N60M2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {127.1m + lzth*112m}
.PARAM Rth5= {301m + lzth*261.4m}
.PARAM Rth6= {160.4m + lzth*340.6m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     
.PARAM CZth5=547.4u    
.PARAM CZth6=75.1m         

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.10       
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=432.8m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP11N60M2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {82.93m + lzth*74.02m}
.PARAM Rth5= {202.4m + lzth*172.7m}
.PARAM Rth6= {115.8m + lzth*225.7m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     
.PARAM CZth5=811.8u    
.PARAM CZth6=98.7m         

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.725          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=276m        Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPP20N60M2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=1m           
.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {40.27m + lzth*51.47m}
.PARAM Rth5= {102.1m + lzth*120.1m}
.PARAM Rth6= {64.51m + lzth*161.6m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     
.PARAM CZth5=1.6m      
.PARAM CZth6=164.3m          

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.66          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=130m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  1000
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SPW47N60M2/L3/INF gate drain source Tj Tcase Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Ls=9n           Lg=9n           Ld=5n           Rs=500u         
.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {2.32m + lzth*463.1u}
.PARAM Rth2= {5.17m + lzth*1.03m}
.PARAM Rth3= {10.97m + lzth*2.19m}
.PARAM Rth4= {15.18m + lzth*24.93m}
.PARAM Rth5= {59.48m + lzth*58.18m}
.PARAM Rth6= {40.65m + lzth*79.43m}
.PARAM CZth1=285.3u    
.PARAM CZth2=3.34m     
.PARAM CZth3=4.83m     
.PARAM CZth4=13.29m    
.PARAM CZth5=4.09m     
.PARAM CZth6=666.8m        

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=9.96          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=47.85m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))} 
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d s VALUE={Iges(V(d,s),V(g,s),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d s 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      s    dio VALUE={Ird(V(s,dio),LIMIT(V(Tj),-200,999))}
Rd02         s    dio 500Meg
G_diode2     s    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,s),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,s))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 s  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
L_Ld         DRAIN ldrd  {Ld}
R_Ld         DRAIN ldrd  1000
   
L_Ls         SOURCE lsrs  {Ls}
R_Ls         SOURCE lsrs  100
R_Rs         s lsrs       {Rs} 
  
L_Lg         GATE lgrg  {Lg} 
R_Lg         GATE lgrg  1000  
R_Rg         lgrg g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,s),V(g,s)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        s    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,s)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,s)*I(L_Ld),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(L_Ld),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
C_CZth5         Tamb 4  {CZth5}
C_CZth6         Tamb 5  {CZth6} 
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 4  {Rth4}   
R_Rth5          4 5  {Rth5}  
R_Rth6          5 Tcase  {Rth6} 

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC02N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=156.9p      Cds0=362.1p     Cgs=81.48p      Rg=8            

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {208.8m + lzth*41.76m}
.PARAM Rth2= {459m + lzth*91.81m}
.PARAM Rth3= {901.3m + lzth*180.3m}
.PARAM Rth4= {0.55 + lzth*537.63m}
.PARAM CZth1=3.16u     
.PARAM CZth2=38.21u    
.PARAM CZth3=60.62u    
.PARAM CZth4=226.8u    

.PARAM Vp=100          Fg=30m          delta=1         k2=433.3n       
.PARAM k3=1.92u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u

.PARAM dv={limit(dVth,-0.7,0.7)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.4m        
.PARAM g11=2.4         g16=-28.37      k101=500m       k102=1.5        
.PARAM al=1            Rd0=4.64        Rd1=149.1m      Uc=12.5         
.PARAM ta=1u           td=110n         
     
.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain     gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*******
.SUBCKT SIPC03N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=7.7          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {90.48m + lzth*18.1m}
.PARAM Rth2= {200.1m + lzth*40.02m}
.PARAM Rth3= {404.4m + lzth*80.89m}
.PARAM Rth4= {267.91m + lzth*197.67m}
.PARAM CZth1=7.3u      
.PARAM CZth2=87.14u    
.PARAM CZth3=133.5u    
.PARAM CZth4=448.3u    

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=110.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=2.01        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC05N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {48.13m + lzth*9.63m}
.PARAM Rth2= {106.8m + lzth*21.35m}
.PARAM Rth3= {219.1m + lzth*43.83m}
.PARAM Rth4= {151.53m + lzth*145.7m}
.PARAM CZth1=13.73u    
.PARAM CZth2=162.8u    
.PARAM CZth3=244.9u    
.PARAM CZth4=773.8u    

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=208.2m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.07        Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC06N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=19.7         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {110.77m + lzth*110.28m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC10N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=19.1         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {69.91m + lzth*61.6m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=28.5         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {45.61m + lzth*40.71m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC26N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=12.1         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {22.15m + lzth*28.31m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC61N60S5/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=12.86n      Cds0=29.69n     Cgs=6.68n       Rg=8.7          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {2.55m + lzth*509.3u}
.PARAM Rth2= {5.69m + lzth*1.14m}
.PARAM Rth3= {12.05m + lzth*2.41m}
.PARAM Rth4= {9.17m + lzth*12.7m}
.PARAM CZth1=259.4u    
.PARAM CZth2=3.04m     
.PARAM CZth3=4.39m     
.PARAM CZth4=12.11m    

.PARAM Vp=100          Fg=30m          delta=1         k2=35.53u       
.PARAM k3=157.4u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.5+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.93          
.PARAM g11=2.4         g16=-23.96      k101=500m       k102=1.5        
.PARAM al=1            Rd0=56.59m      Rd1=1.82m       Uc=12.5         
.PARAM ta=1u           td=110n                  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
.SUBCKT SIPC06N60C2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {110.77m + lzth*110.28m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=292.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=761.5m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC10N60C2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {69.91m + lzth*61.6m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.3m        
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=465.4m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60C2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {45.61m + lzth*40.71m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=750m          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=296.8m      Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60C2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {22.15m + lzth*28.31m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.59          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=140m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC69N60C2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {2.32m + lzth*463.1u}
.PARAM Rth2= {5.17m + lzth*1.03m}
.PARAM Rth3= {10.97m + lzth*2.19m}
.PARAM Rth4= {8.35m + lzth*13.71m}
.PARAM CZth1=285.3u    
.PARAM CZth2=3.34m     
.PARAM CZth3=4.83m     
.PARAM CZth4=13.29m    

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-1,1)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.4           
.PARAM Vth={5.2+dv}    T=300           Tref=273        auth=7.5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=4.33          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=51.45m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC03N60M2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=362.1p      Cds0=835.7p     Cgs=188p        Rg=8            

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {90.48m + lzth*18.1m}
.PARAM Rth2= {200.1m + lzth*40.02m}
.PARAM Rth3= {404.4m + lzth*80.89m}
.PARAM Rth4= {267.91m + lzth*197.67m}
.PARAM CZth1=7.3u      
.PARAM CZth2=87.14u    
.PARAM CZth3=133.5u    
.PARAM CZth4=448.3u    

.PARAM Vp=100          Fg=30m          delta=1         k2=1u           
.PARAM k3=4.43u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=254.7m        
.PARAM g11=2.4         g16=-27.53      k101=500m       k102=1.5        
.PARAM al=1            Rd0=1.81        Rd1=64.62m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) } 
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC05N60M2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=680.8p      Cds0=1.57n      Cgs=353.5p      Rg=9.8          

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {48.13m + lzth*9.63m}
.PARAM Rth2= {106.8m + lzth*21.35m}
.PARAM Rth3= {219.1m + lzth*43.83m}
.PARAM Rth4= {151.53m + lzth*145.7m}
.PARAM CZth1=13.73u    
.PARAM CZth2=162.8u    
.PARAM CZth3=244.9u    
.PARAM CZth4=773.8u    

.PARAM Vp=100          Fg=30m          delta=1         k2=1.88u        
.PARAM k3=8.33u        k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=478.8m        
.PARAM g11=2.4         g16=-26.9       k101=500m       k102=1.5        
.PARAM al=1            Rd0=962.4m      Rd1=34.37m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC06N60M2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=956p        Cds0=2.21n      Cgs=496.4p      Rg=950m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {34.27m + lzth*6.85m}
.PARAM Rth2= {76.12m + lzth*15.22m}
.PARAM Rth3= {157.3m + lzth*31.45m}
.PARAM Rth4= {110.77m + lzth*110.28m}
.PARAM CZth1=19.28u    
.PARAM CZth2=228.1u    
.PARAM CZth3=340.3u    
.PARAM CZth4=1.05m     

.PARAM Vp=100          Fg=30m          delta=1         k2=2.64u        
.PARAM k3=11.69u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05          
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m         
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=672.3m        
.PARAM g11=2.4         g16=-26.56      k101=500m       k102=1.5        
.PARAM al=1            Rd0=708.2m      Rd1=24.48m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS
*$
*****
.SUBCKT SIPC10N60M2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=1.56n       Cds0=3.61n      Cgs=812.3p      Rg=800m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {20.94m + lzth*4.19m}
.PARAM Rth2= {46.59m + lzth*9.32m}
.PARAM Rth3= {97m + lzth*19.4m}
.PARAM Rth4= {69.91m + lzth*61.6m}
.PARAM CZth1=31.54u    
.PARAM CZth2=372.1u    
.PARAM CZth3=550u      
.PARAM CZth4=1.64m     

.PARAM Vp=100          Fg=30m          delta=1         k2=4.32u        
.PARAM k3=19.14u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.10       
.PARAM g11=2.4         g16=-26.07      k101=500m       k102=1.5        
.PARAM al=1            Rd0=432.8m      Rd1=14.96m      Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) } 
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC14N60M2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=2.45n       Cds0=5.66n      Cgs=1.27n       Rg=860m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {13.36m + lzth*2.67m}
.PARAM Rth2= {29.75m + lzth*5.95m}
.PARAM Rth3= {62.28m + lzth*12.46m}
.PARAM Rth4= {45.61m + lzth*40.71m}
.PARAM CZth1=49.45u    
.PARAM CZth2=582.1u    
.PARAM CZth3=854.5u    
.PARAM CZth4=2.49m     

.PARAM Vp=100          Fg=30m          delta=1         k2=6.77u        
.PARAM k3=30.01u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=1.725          
.PARAM g11=2.4         g16=-25.62      k101=500m       k102=1.5        
.PARAM al=1            Rd0=276m        Rd1=9.54m       Uc=12.5         
.PARAM ta=1u           td=110n         

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC26N60M2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=5.2n        Cds0=12n        Cgs=2.7n        Rg=0.54         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {6.3m + lzth*1.26m}
.PARAM Rth2= {14.05m + lzth*2.81m}
.PARAM Rth3= {29.62m + lzth*5.93m}
.PARAM Rth4= {22.15m + lzth*28.31m}
.PARAM CZth1=104.8u    
.PARAM CZth2=1.23m     
.PARAM CZth3=1.79m     
.PARAM CZth4=5.06m     

.PARAM Vp=100          Fg=30m          delta=1         k2=14.36u       
.PARAM k3=63.61u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=3.66          
.PARAM g11=2.4         g16=-24.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=130m        Rd1=4.5m        Uc=12.5         
.PARAM ta=1u           td=110n        

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))} 
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****
.SUBCKT SIPC69N60M2/L3/INF gate drain source Tj Tpad Tamb 
+PARAMS: Zthtype=0 dVth=0

*control parameter: 1 if diode should store charge, 0 otherwise
.PARAM enable_diode=1

.PARAM Cox=14.15n      Cds0=32.65n     Cgs=7.35n       Rg=620m         

.PARAM lzth={limit(Zthtype,0,1)}
.PARAM Rth1= {2.32m + lzth*463.1u}
.PARAM Rth2= {5.17m + lzth*1.03m}
.PARAM Rth3= {10.97m + lzth*2.19m}
.PARAM Rth4= {8.35m + lzth*13.71m}
.PARAM CZth1=285.3u    
.PARAM CZth2=3.34m     
.PARAM CZth3=4.83m     
.PARAM CZth4=13.29m    

.PARAM Vp=100          Fg=30m          delta=1         k2=39.07u       
.PARAM k3=173.1u       k4=4.388E-13    k5=135.8m       k7=155.7        
.PARAM k8=625m         k9=276m         k10=29.35       k11=38u         
.PARAM k12=250m        k13=240         k14=-2          k20=936.8n      
.PARAM k21=15.35u      k22=26.35       k23=8u          

.PARAM dv={limit(dVth,-0.9,0.9)}
.PARAM L=2u            g2=57.5m        theta=90m       c=1.05           
.PARAM Vth={3.7+dv}    T=300           Tref=273        auth=5m       
.PARAM aubr=600m       Ibr=100p        Ubr=600         coxi=431.4u     
.PARAM psi=219.9m      Un=98.32u       Utnbr=207m      W=9.96          
.PARAM g11=2.4         g16=-23.86      k101=500m       k102=1.5        
.PARAM al=1            Rd0=47.85m      Rd1=1.65m       Uc=12.5         
.PARAM ta=1u           td=110n  

.FUNC  Ue(Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  beta(Tj,Uee)  {W*coxi/(L*((1+theta*Uee)*(1/(g2*(T/(Tref+Tj))**1.5))))}
.FUNC  en(Uds,Uee)  {min(MAX(psi,Uee)/(2*c),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k101))*((Uee/psi-k101))**2}
.FUNC  ble(Uds,Uee,ene,h03) {h03*I2(Uds,Uee,ene)+(1-h03)*I1(Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k102,if(Uee/psi<k101,I1(Uee,ene),ble(Uds,Uee,ene,h3(Uee))),
+I2(Uds,Uee,ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Tj,Ue(Ugs,Tj))*I3(Uds,Ue(Ugs,Tj),en(Uds,Ue(Ugs,Tj)))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs,Tj),-Ig(-
+Uds,Ugs,Tj))}

.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**1.5}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}

.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  Rdr(v,Tepi) 
+{v/((Rd0*0.5*(1+SQRT(1+4*(max(v,0)/Uc)**2)))*((Tref+lm(Tepi))/T)**g11) }
.FUNC  Rdr1(u,Tepi) {u/(Rd1*((Tref+lm(Tepi))/T)**1.5) }

.FUNC  F1(X,e)	{0.5*(X-k9+SQRT((X+k9)*(X+k9)+e))}
.FUNC  F2(X,z1)	{0.5*(z1+k10-SQRT((z1-k10)*(z1-k10)+delta*(1e-
+2+k10*F16(x/k10))))}
.FUNC  F3(z2)	{SQRT(2*k4*(k9+z2)/(1+k8))}
.FUNC  F4(z1,z2,z3)	{SQRT(2*k4*(z1-z2)+(k11+z3)*(k11+z3))-k11}
.FUNC  F5(z4) {Fg*0.5*(z4+SQRT(z4*z4+delta))}
.FUNC  F7(Y,z2) {SQRT(2*F5(z2-Y)/k5+1)-1}
.FUNC  F9(Y,z1,z2) {(1+k12*(z1-z2)/(Vp+z1-z2))*(1-0.5*F7(Y,z2)/k7)}
.FUNC  F10(X,Y,z1,z2) {z1-k13*(F9(Y,z1,z2)*k3*F3(z2)+k2*F4(z1,z2,F3(z2)))/Cds0}
.FUNC  F16(x)    {(-2*limit(x,0,1)+3)*limit(x,0,1)**2}
.FUNC  VQds(X,Y)  {F10(X,Y,F1(X,delta*0.01),F2(X,F1(X,delta*0.01)))}

.FUNC  F23(z1) {SQRT(k4*(2*k9+z1+k22-SQRT((z1-k22)*(z1-
+k22)+delta)+delta*0.05)/(1+k8))}
.FUNC  F27(z6,z7)  {(1+2*z7*z6**2-SQRT(1+4*z7*z6**2))/(2*z6**2)}
.FUNC  F28(z3,z4,z5,z6,z7,z8,z)  {if(z-z3/(z6*k20)>z8,(1-2*z4*z5+2*z7*z4**2-
+SQRT(1-4*z4*z5+4*z4**2*z7))/(2*z4**2),z8)}
.FUNC  F29(z3,z7,z)  {F28(z3,k21/(k23-2*z3),z3**2/(k20*(k23-2*z3)),k21/(k23-
+z3),z7,F27(k21/(k23-z3),z7),z)}
.FUNC  Vdep2(z,x)  
+{limit(F29(F23(F1(x,0.01*delta)),0.5*(z+SQRT(z**2+delta*0.01)),z),0,0.999*z)}

.FUNC  Vgs2(y) {(0.5*((y-k14)+SQRT((y-k14)*(y-k14)+delta*0.3))-
+delta*0.3)*Cox/(Cgs+Cox)}


G_G1 d source VALUE={Iges(V(d,source),V(g,source),limit(V(Tj),-200,999))}
R1 gate source 2G
Rd01 d source 500Meg

G_Rdiod      dio3 ldrd  VALUE { -Rdr1(V(ldrd,dio3),LIMIT(V(1),-200,999))}
R_R_ERd_dio  dio2 dio3  0.01m
V_sense      dio  dio2 0
G_diode      source    dio VALUE={Ird(V(source,dio),LIMIT(V(Tj),-200,999))}
Rd02         source    dio 500Meg
G_diode2     source    dio2 VALUE={LIMIT(I(V_sense2),-1k,1k)-
+Idbr(V(dio2,source),LIMIT(V(1),-200,999))}

E_Egs        g sm  VALUE {Vgs2(V(g,source))}
R_Rgs        sm sm1 1m
C_Cgs        sm1 source  {Cgs+Cox} 

G_G_Rd         ldrd d VALUE {Rdr( V(ldrd,d),LIMIT(V(1),-200,999))}
R_R_ERd_g      ldrd d  10k
V_Isense     drain ldrd 0
R_Rg         gate g     {Rg} 
 
E_EQJ         d dEQJ  VALUE { VQds(V(d,source),V(g,source)) }
R_R_EQJ_k     dEQJ j  0.1m
C_Cds0        source    j  {Cds0}                    
  
E_EDEP2       d  dEDEP  VALUE { Vdep2(V(d,g),V(d,source)) }
R_R_EDEP_k    dEDEP ox  0.1m
C_Cox         g     ox  {Cox}
C_pack        drain gate   2p

G_G_Ptot_channel     0 Tj VALUE { LIMIT(V(d,source)*I(V_Isense),0,100k) }
G_G_Ptot_Epi         0 1 VALUE {  LIMIT(V(ldrd,d)*I(V_Isense),0,100k) }  
C_CZth1        Tj Tamb  {CZth1}   
C_CZth2         Tamb 1  {CZth2} 
C_CZth3         Tamb 2  {CZth3} 
C_CZth4         Tamb 3  {CZth4}
R_Rth1         Tj 1  {Rth1}  
R_Rth2          1 2  {Rth2}  
R_Rth3          2 3  {Rth3}
R_Rth4          3 Tpad {Rth4}   

*auxillary circuit for non-equilibirium diode charge

C_C001  a 0 {ta*td/(ta+td)}
R_R001  a b 1
V_sense2 b c 0
E_E001  c 0 VALUE {-enable_diode*ta/td*I(V_sense)}

.ENDS 
*$
*****************************************************************
.SUBCKT SKP02N120/L1/INF ano gate kat 
* TO220 - package
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS	PARAMS:	A_total = 0.055	A_aktiv=0.025
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.0132
.ENDS
*$
*****************************************************************
.SUBCKT SKW07N120/L1/INF ano gate kat 
* TO220 - package
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS PARAMS: A_total = 0.162	A_aktiv=0.104
XDIO	kat	anol		L4XXX-E	PARAMS:	A=0.0464
.ENDS
*$
*****************************************************************
.SUBCKT SKW15N120/L1/INF ano gate kat 
* TO247 - package
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS PARAMS:  A_total = 0.259	A_aktiv=0.187
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.098
.ENDS
*$
*****************************************************************
.SUBCKT SKW25N120/L1/INF ano gate kat 
* TO247 - package
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS PARAMS:  A_total = 0.428	A_aktiv=0.335
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.165
.ENDS
*$
************************************************************
.SUBCKT	L4XXX-E	anode	kath	PARAMS: A = 1
.PARAM	q = 1.602e-19	Nd = 1e14
.PARAM	vlimit =1.5e7	w0 = 105e-4	tau = .6u	un = 1350	up = 450
.PARAM  Ut =	25.8m
.PARAM  D =	17.42
.PARAM  L =	3.235m
.PARAM	Ise =	{A*4.89e-10}
.PARAM  Ism =	{A*25.017u}
.PARAM  CJ0 =	{A*3.457n}
.PARAM  QN =	{A*168.2n}
.PARAM  XF =	3610.74
.PARAM	VPT=	845.6
.PARAM  a0 =	{-tanh(1.623)}
.PARAM  a1 =	{(up/un)*(1 + a0)/(1 - a0)}
.PARAM  a2 =	{0.1/(1 - 0.5*(1 - a1*a1)*(1 - a0))}
.PARAM  Rc =	{462n/A}
.PARAM	Ra =	{925u/A} 
RSERIE	anode	ano	{Ra} DE	ano	mi	D1
D0	ano	mi1	D2
.model	D1	D	(is={Ise}, N=1)
.model  D2	D	(is={Ism}, N=2)
VID0	mi1	mi	0
VITOT	kat	katr	0
RKAT	katr	kath	{Rc}
EGIR	mi	kat	VALUE = {I(VITOT)*Rd(V(q,0))}
GID	ano	mi	VALUE = {IQ(V(ano,mi),I(VID0),V(q,0),I(VDXJ),I(VITOT)) - 
+I(VIJCT)}
CQB	q	0	1u
RQB	q	0	{tau/1u}
GIQ	0	q	VALUE = {MAX(I(VID0),0) + IQ(V(ano,mi),I(VID0),V(q,0),I(VDXJ),I(VITOT))}
EXJ	xj1 0	VALUE	{if(time> 25n,xj(V(ano,mi),I(VITOT)),0)}
CXJ	xj  0	1
VDXJ	xj1 xj	0
EJUNCT	jct 0	VALUE = {LIMIT(V(kat,ano),-0.5,VPT)}
VIJCT	jct cp	0
DJCT	0   cp	DXXX
.MODEL  DXXX	D (is = 1p, CJO= {CJ0})
.FUNC	xj(V,Y2)	{(XF*SQRT(1-limit(V,-VPT,0.5)))/SQRT(Nd + MAX(up*(-Y2)/(un + 
+ up),0)/A/q/vlimit)}
.FUNC	w(V,Y2)		{MAX(w0-xj(V,Y2)*(1 + a1),1e-4)}
.FUNC	Rd(Z)		{w0*w0/(un*QN + (un + up)*Z*1e-6)}
.FUNC	Td_1(V,U,Y2) 	{a2*w(V,Y2)*w(V,Y2)/D/(1 + w(V,Y2)*MAX(U,0)/1.2/D)}
.FUNC	IQ(V,Y,Z,U,Y2)	{(tau*Y - Z*1e-6)/Td_1(V,U,Y2)}
.ends
*$
.SUBCKT L7xxxS ano gate kat PARAMS: A_total = 0.1	A_aktiv=0.1
.PARAM 
+k=1.380622e-23		q = 1.6E-19	t0=300  
+eps0 = 8.85E-14	epsi =11.8	eox= 2.8
+un = 1350		up = 450	u_surf=400
+ni0=1.45e10
+a1 = 0.55      
.PARAM wb = 170E-4
.PARAM nc = {A_aktiv*1.189e5}
.PARAM wchann = {nc*5.2m}
.PARAM Agd  = {nc*6.72u}
.PARAM Cox  = {Agd*30.975n}
.PARAM Cgs  = {nc*4.536e-14}
.PARAM taub = 100u vlimit= 1.5e5 Nb = 8E13 vmid=1.5e+5 vsw= -0.5
.PARAM Cjs  = {A_aktiv*3.092n}
.PARAM Cje  = {A_total*3.092n}
.PARAM Ise  = {A_total*52.23p}
.PARAM	D  = 17.55
.PARAM	L  = 41.89m	
.PARAM 	Q0 = {A_aktiv*217.87n}
.PARAM	VPT= 1800
.PARAM	VN = {1.338e-17*(Agd/Cox)**2}
.PARAM	XF = 3610.7
MFET	d g s s 	MOS W={wchann/100},L=2.5e-6,IC=OFF
DE	ano e1 		D1
DS	kat d1		D2		
.MODEL  MOS     NMOS    (LEVEL=3,nsub=1.5e17,
+tox=80e-9,vmax={vlimit},uo={u_surf},CGSO=1p)
.MODEL 	D1	D	(IS={ISE},CJO={CJE},N = 1.5)
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
RG	gate g		5
RS	s kat		.5m
EVGCOX 	vgcox 0 VALUE { V(ox,s)-{vsw} }
EVCOX   vcox  0         VALUE = {Cox/100  + 99*Cox*(1+tanh(10*(V(vgcox))))/200}
EVCGS   vcgs  0         VALUE = {Cgs + 99*Cox*(1+tanh(-10*(V(vgcox))))/200}
GICOX   g ox            VALUE = {if (time> 25n,DDT(V(vcox)*V(g,ox)),0)}
GICGS   g s             VALUE = {if (time> 25n,DDT(V(vcgs)*V(g,s)),0)}
EDEP	d1 ox	VALUE = {Vdep(V(d1,g))}
GIA	e d1	VALUE = {V(e,d1)/Rb(V(b))}
VGIC	d1 d1c	0
GIC	d1c  kat	VALUE = {IPC(I(VINC),V(b),V(d1,kat),I(VDXJ),I(VGIC))}
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GINC	0 b	VALUE	{I(VINC)}
GINE	b 0	VALUE	{INE(I(VINC),V(b),V(d1,kat),I(VDXJ),I(VGIC))}
EXJ	xj1 0	VALUE	{if(time> 25n,xj(V(d1,kat),I(VGIC)),0)}
CXJ	xj  0	1
VDXJ	xj1 xj	0
VIA	e1 e	0
VINC	d1 d	0
.FUNC	Vdep(X)	{LIMIT(if(X>-VN/2,X +VN*(1-SQRT(1+2*X/VN)),VN/2),-VN/2,VPT)}
.FUNC	Rb(X)	{wb*wb*LOG(1+2E-6*(1+up/un)*MAX(X,1m*Q0)/Q0)/
+(2E-6*(un+up)*MAX(X,1m*Q0))}
.FUNC	xj(V,Y2)	{(XF*SQRT(1 + limit(V,0.7,VPT)))/SQRT(Nb + 
+ABS(Y2)/A_aktiv/q/vmid)}
.FUNC	FDX(V,X,Y2))	{TANH((wb-xj(V,Y2))*LIMIT(X,-1e6,1e6)/(24*D))}
.FUNC	Td(V,X,Y2)	{(0.5/D)*(wb-xj(V,Y2))*(wb-xj(V,Y2))*(1-FDX(V,X,Y2))}
.FUNC	F1(V,Y2)	{Taub*COSH((wb-xj(V,Y2)+1e-6)/L)-1}
.FUNC	F2(V,X,Y2)	{0.5*(1+2*FDX(V,X,Y2)/(1+FDX(V,X,Y2)*FDX(V,X,Y2)))}
.FUNC	F3(V,X,Y2)	{1+Td(V,X,Y2)/Taub}
.FUNC	QS0(V,Y2)	{q*A_aktiv*L*ni0*TANH(0.5*(wb-xj(V,Y2))/L)}
.FUNC	Qbd(Y,Z,V,X,Y2)	{Z*1e-6+Td(V,X,Y2)*Y}
.FUNC	Qb0(Y,Z,V,X,Y2)
+	{2*Qbd(Y,Z,V,X,Y2)/(F3(V,X,Y2)+SQRT(F3(V,X,Y2)*F3(V,X,Y2) + 
+ Td(V,X,Y2)*3*ISE*Qbd(Y,Z,V,X,Y2)/(QS0(V,Y2)*QS0(V,Y2))))}
.FUNC	INE(Y,Z,V,X,Y2)
+	{0.75*ISE*(Qb0(Y,Z,V,X,Y2)/QS0(V,Y2))*(Qb0(Y,Z,V,X,Y2)/QS0(V,Y2))}
.FUNC	IPC(Y,Z,V,X,Y2)
+	{(1/3)*Y+(4/3)*(Qb0(Y,Z,V,X,Y2)/F1(V,Y2)+MAX(Qb0(Y,Z,V,X,Y2)/Taub+INE(Y,Z,
+V,X,Y2)-Y,0)*F2(V,X,Y2))}
.ENDS
*$
.SUBCKT SKP02N120/L2/INF ano gate kat PARAMS:	TJ = 27
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS_L2	PARAMS:  TJ= {TJ} A_total = 0.055
+	A_aktiv=0.025
XDIO	kat	anol		L4XXX-ET	PARAMS:  TJ= {TJ} A=0.0132 N_ideal = 0.95
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKW07N120/L2/INF ano gate kat PARAMS:	TJ = 27
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS_L2 	PARAMS:   TJ= {TJ} A_total = 0.162
+	A_aktiv=0.104
XDIO	kat	anol		L4XXX-ET	PARAMS:  TJ= {TJ} A=0.0464 N_ideal = 0.95
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKW15N120/L2/INF ano gate kat PARAMS:	TJ = 27
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS_L2 	PARAMS: TJ= {TJ}   A_total = 0.259
+	A_aktiv=0.187
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ= {TJ}  A=0.098 N_ideal = 0.95
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKW25N120/L2/INF ano gate kat PARAMS:	TJ = 27
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxS anol	gate	katl	L7xxxS_L2 	PARAMS:  TJ= {TJ}  A_total = 0.428
+	A_aktiv=0.335
XDIO	kat	anol		L4XXX-ET	PARAMS:  TJ= {TJ}  A=0.165 N_ideal = 0.95
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT L7xxxS_L2 ano gate kat PARAMS: TJ = 27 A_total = 0.1	A_aktiv=0.1
.PARAM 
+k=1.380622e-23		q = 1.6E-19	t0=273		ni0=1.45e10
+eps0 = 8.85E-14	epsi =11.8	eox= 2.8
+un = 1350		up = 450	u_surf=600
+a1 = 0.55		vmid=1.5e+5	vlimit= 1.5e7	vsw= -0.5
.PARAM tox = 80e-7	ttox = 1.5e-4	wb = 170E-4	lchann = 2.5e-4
.PARAM nc = {A_aktiv*.1189meg}
.PARAM wc = {nc*52e-4}
.PARAM Agd  = {nc*6.72e-6 }
.PARAM Cox  = {Agd*eps0*eox/tox}
.PARAM Cgs  = {nc*eps0*eox*(1.05e-6/tox + 7.77e-6/ttox) }
.PARAM taub = 100u Nsource= 1.9e17 BV_FW=1200	BV_RW=28 
.PARAM 	Rs = 0.5m	Rg = 5
.PARAM Cjs  = {A_aktiv*3.092n}
.PARAM Cje  = {(A_total/A_aktiv)*Cjs}	
.PARAM Ise0 = {A_total*78.34p}
.PARAM Ise_g  = {A_total*6.67e-14}
.PARAM Ise_k  = {A_total*12.37p}
.PARAM 	Q0 = {A_aktiv*217.9n}
.PARAM	VPT= 1800
.PARAM	VN = {1.34e-17*Agd*Agd/Cox/Cox}
.PARAM	XF =0.4m
MFET	d g s s 	MOS W={wc/100},L={lchann/100}, IC=OFF
GMFET_T d1x	s	VALUE = {I(VINC0)*((TJ+t0)/300)**-1.5 }
GDE	ano	e1	VALUE = {((ISE2(TJ)**((t0 + TJ)/(t0 + 27)))/
+ ISE2(27))**((t0 + 27)/(t0 + TJ)) 
+ * MAX(I(VDE),0)**((t0 + 27)/(t0 + TJ)) - MAX(I(VDE),0)}
VDE	ano	anx	0
DE	anx	e1	D1
DS	kat	d1	D2
.MODEL  MOS     NMOS    
+ (LEVEL=3,nsub={Nsource},tox={tox/100},vmax={vlimit},uo={u_surf},CGSO=1p,
+ CGDO=1p)
.MODEL 	D1	D	(IS={ISE0},N = 1.5)
.MODEL	D2	D	(IS={Ise_k},CJO={CJS},BV= {BV_FW})
ETHERM  g_t	g	VALUE = {DVt(TJ)}
RG	gate g_t	{Rg}
RS	s kat		{Rs}
EVGCOX 	vgcox 0 VALUE { V(ox,s)-{vsw} }
EVCOX   vcox  0         VALUE = {Cox/100  + 99*Cox*(1+tanh(10*(V(vgcox))))/200}
EVCGS   vcgs  0         VALUE = {Cgs + 99*Cox*(1+tanh(-10*(V(vgcox))))/200}
GICOX   g ox            VALUE = {if (time> 25n,V(vcox)*DDT(V(g,ox)),0)}
GICGS   g s             VALUE = {if (time> 25n,V(vcgs)*DDT(V(g,s)),0)}
EDEP	d1 ox	VALUE = {Vdep(V(d1,g))}
EGIA	e d1	VALUE = {I(VIA)*Rb(V(b),TJ)}
GIC	d1  kat	VALUE = {IPC(I(VINC),V(b,0),V(d1,kat),I(VDXJ),TJ)}
CQB	b 0	1u
RHELP	b 0	1meg
GRQB	b 0	VALUE   {1u*V(b,0)/(Taub*((TJ + t0)/300)**2) }
GINC	0 b	VALUE	{I(VINC)}
GINE	b 0	VALUE	{INE(I(VINC),V(b,0),V(d1,kat),I(VDXJ),TJ)}
EXJ	xj1 0	VALUE	{if(time> 25n,xj(V(d1,kat)),0)}
CXJ	xj  0	1
VDXJ	xj1 xj	0
VIA	e1 e	0
EAUX1	d12 s	VALUE = {V(d1,s)}
VINC0	d12 d	0
VINC	d1 d1x	0
.FUNC   EG(T)	{1.16 - 7.02e-4*(T+t0)**2/(T+t0 + 1108)}
.FUNC	psi2(T) {2*k/q*(T + t0)*log(Nsource/(ni0*((T+t0)/300)**1.5*exp(1/
+ (2*8.61e-5)*(-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300)))}
.FUNC	DVt(T)		{psi2(T) - psi2(27) + 
+ tox*(sqrt(2*eps0*epsi*q*Nsource*psi2(T)) 
+ - sqrt(2*eps0*epsi*q*Nsource*psi2(27)))/eps0/eox}
.FUNC	DA(T)	{2*k*un*up/q/(un + up)*(T + t0)*(((T + t0)/300)**-1.5)}
.FUNC	LA(T)	{sqrt(DA(T) * Taub*((T+t0)/300)**2) }
.FUNC   ISE2(T)  {(T +t0)*(un*((T+t0)/
+ 300)**-1.5)*((ise_g*(ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*
+ (-300*EG(T)+(t0+T)
+ *EG(300))/(T+t0)/300)))*(k*(ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*
+ (-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300))))}
.FUNC	Vdep(X)	{if(X > -VN/2,X + VN*(1-SQRT(1+2*X/VN)),VN/2)}
.FUNC	Rb(X,T)	{wb*wb*LOG(1+2E-6*(1+up/un)*MAX(X,1m*Q0)/Q0)/
+ (2E-6*(un+up)*(((T+t0)/300)**-1.5)*MAX(X,1m*Q0))}
.FUNC	xj(V)		{XF*SQRT(1+LIMIT(V,0,VPT))}
.FUNC	FDX(V,X,T)	{TANH((wb-xj(V))*MAX(X,0)/(24*DA(T)))}
.FUNC	Td(V,X,T)	{(0.1/DA(T))*(wb-xj(V))*(wb-xj(V))*(1-FDX(V,X,T))}
.FUNC	F1(V,T)		{Taub*((T+t0)/300)**2*COSH((wb-xj(V))/LA(T))-1}
.FUNC	F2(V,X,T)	{0.5*(1+2*FDX(V,X,T)/(1+FDX(V,X,T)*FDX(V,X,T)))}
.FUNC	F3(V,X,T)	{1+Td(V,X,T)/(Taub*((T+t0)/300)**2)}
.FUNC	QS0(V,T)	{q*A_aktiv*LA(T)*(ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*
+(-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300))
+ *TANH(0.5*(wb-xj(V))/LA(T))}
.FUNC	Qbd(Y,Z,V,X,T)	{MAX(Z,1m*Q0)*1e-6+Td(V,X,T)*Y}
.FUNC	Qb0(Y,Z,V,X,T)	{2*Qbd(Y,Z,V,X,T)/(F3(V,X,T)+SQRT(F3(V,X,T)*F3(V,X,T) 
+ + Td(V,X,T)*3*ISE2(T)*Qbd(Y,Z,V,X,T)/(QS0(V,T) * QS0(V,T))))}
.FUNC	INE(Y,Z,V,X,T)
+	{0.75*ISE2(T)*(Qb0(Y,Z,V,X,T)/QS0(V,T))*(Qb0(Y,Z,V,X,T)/(QS0(V,T)))}
.FUNC	IPC(Y,Z,V,X,T)	
+ +{(1/3)*Y+(4/3)*(Qb0(Y,Z,V,X,T)/F1(V,T)+MAX(Qb0(Y,Z,V,X,T)/
+Taub/((T+t0)/300)**2+INE(Y,Z,V,X,T)- Y,0)*F2(V,X,T))}
.ENDS
*$
****************************************************************
.SUBCKT SKP02N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF	PARAMS: A_total = 0.032	A_aktiv=0.017
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.0079
.ENDS
*$
*****************************************************************
.SUBCKT SKP04N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol 	gate 	katl 	L7xxxF	PARAMS: A_total = 0.052	A_aktiv=0.032
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.0145
.ENDS
*$
*****************************************************************
.SUBCKT SKP06N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF	PARAMS: A_total = 0.068	A_aktiv=0.043
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.0207
.ENDS
*$
*****************************************************************
.SUBCKT SKP10N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF	PARAMS: A_total = 0.123	A_aktiv=0.087
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.0324
.ENDS
*$
*****************************************************************
.SUBCKT SKP15N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF PARAMS: A_total = 0.146	A_aktiv=0.107
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.0512
.ENDS
*$
*****************************************************************
.SUBCKT SKW15N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	 XL7xxxF anol	gate	katl	L7xxxF 
+ PARAMS: A_total = 0.144	A_aktiv=0.106
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.0512
.ENDS
*$
*****************************************************************
.SUBCKT SKW20N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF	PARAMS: A_total = 0.185	A_aktiv=0.142
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.067
.ENDS
*$
*****************************************************************
.SUBCKT SKW30N60/L1/INF ano gate kat 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF PARAMS: A_total = 0.257	A_aktiv=0.207
XDIO	kat	anol		L4XXX-E	PARAMS: A=0.098
.ENDS
*$
.SUBCKT L7xxxF ano gate kat PARAMS: A_total = 0.1	A_aktiv=0.1
.PARAM 
+k=1.380622e-23		q = 1.6E-19	t0=300  
+eps0 = 8.85E-14	epsi =11.8	eox= 2.8
+un = 1350		up = 450	u_surf=900
+ni0=1.45e10
+a1 = 0.55      
.PARAM wb = 100E-4
.PARAM nc = {A_aktiv*1.189e5}
.PARAM wchann = {nc*5.2m}
.PARAM Agd  = {nc*6.72u}
.PARAM Cox  = {Agd*30.975n}
.PARAM Cgs  = {nc*4.536e-14}
.PARAM taub = 100u vlimit= 1.5e5 Nb = 8E13 vmid=1.5e+7 vsw= -0.5
.PARAM Cjs  = {A_aktiv*3.092n}
.PARAM Cje  = {A_total*3.092n}
.PARAM Ise  = {A_total*29.38p}
.PARAM	D  = 17.55
.PARAM	L  = 41.89m	
.PARAM 	Q0 = {A_aktiv*128.2n}
.PARAM	VPT= 620
.PARAM	VN = {1.338e-17*(Agd/Cox)**2}
.PARAM	XF = 3610.7
MFET	d g s s 	MOS W={wchann/100},L=2.5e-6,IC=OFF
DE	ano e1 		D1
DS	kat d1		D2		
.MODEL  MOS     NMOS    (LEVEL=3,nsub=1.5e17,\
+ tox=80e-9,vmax={vlimit},uo={u_surf},CGSO=1p)
.MODEL 	D1	D	(IS={ISE},CJO={CJE})
.MODEL	D2	D	(IS={ISE},CJO={CJS},TT={Taub})
RG	gate g		5
RS	s kat		.5m
EVGCOX 	vgcox 0 VALUE { V(ox,s)-{vsw} }
EVCOX   vcox  0         VALUE = {Cox/100  + 99*Cox*(1+tanh(10*(V(vgcox))))/200}
EVCGS   vcgs  0         VALUE = {Cgs + 99*Cox*(1+tanh(-10*(V(vgcox))))/200}
GICOX   g ox            VALUE = {if (time> 25n,DDT(V(vcox)*V(g,ox)),0)}
GICGS   g s             VALUE = {if (time> 25n,DDT(V(vcgs)*V(g,s)),0)}
EDEP	d1 ox	VALUE = {Vdep(V(d1,g))}
GIA	e d1	VALUE = {V(e,d1)/Rb(V(b))}
VGIC	d1 d1c	0
GIC	d1c  kat	VALUE = {IPC(I(VINC),V(b),V(d1,kat),I(VDXJ),I(VGIC))}
CQB	b 0	1u
RQB	b 0	{Taub/1u}
GINC	0 b	VALUE	{I(VINC)}
GINE	b 0	VALUE	{INE(I(VINC),V(b),V(d1,kat),I(VDXJ),I(VGIC))}
EXJ	xj1 0	VALUE	{if(time> 25n,xj(V(d1,kat),I(VGIC)),0)}
CXJ	xj  0	1
VDXJ	xj1 xj	0
VIA	e1 e	0
VINC	d1 d	0
.FUNC	Vdep(X)	{LIMIT(if(X>-VN/2,X +VN*(1-SQRT(1+2*X/VN)),VN/2),-VN/2,VPT)}
.FUNC	Rb(X)	{wb*wb*LOG(1+2E-6*(1+up/un)*MAX(X,1m*Q0)/Q0)/
+ (2E-6*(un+up)*MAX(X,1m*Q0))}
.FUNC	xj(V,Y2)	{(XF*SQRT(1 + limit(V,0.7,VPT)))/SQRT(Nb + 
+ABS(Y2)/A_aktiv/q/vmid)}
.FUNC	FDX(V,X,Y2))	{TANH((wb-xj(V,Y2))*LIMIT(X,-1e6,1e6)/(12*D))}
.FUNC	Td(V,X,Y2)	{(0.1/D)*(wb-xj(V,Y2))*(wb-xj(V,Y2))*(1-FDX(V,X,Y2))}
.FUNC	F1(V,Y2)	{Taub*COSH((wb-xj(V,Y2)+1e-6)/L)-1}
.FUNC	F2(V,X,Y2)	{0.5*(1+2*FDX(V,X,Y2)/(1+FDX(V,X,Y2)*FDX(V,X,Y2)))}
.FUNC	F3(V,X,Y2)	{1+Td(V,X,Y2)/Taub}
.FUNC	QS0(V,Y2)	{q*A_aktiv*L*ni0*TANH(0.5*(wb-xj(V,Y2))/L)}
.FUNC	Qbd(Y,Z,V,X,Y2)	{Z*1e-6+Td(V,X,Y2)*Y}
.FUNC	Qb0(Y,Z,V,X,Y2)
+	{2*Qbd(Y,Z,V,X,Y2)/(F3(V,X,Y2)+SQRT(F3(V,X,Y2)*F3(V,X,Y2) + 
+ Td(V,X,Y2)*3*ISE*Qbd(Y,Z,V,X,Y2)/(QS0(V,Y2)*QS0(V,Y2))))}
.FUNC	INE(Y,Z,V,X,Y2)
+	{0.75*ISE*(Qb0(Y,Z,V,X,Y2)/QS0(V,Y2))*(Qb0(Y,Z,V,X,Y2)/QS0(V,Y2))}
.FUNC	IPC(Y,Z,V,X,Y2)
+	{(1/3)*Y+(4/3)*(Qb0(Y,Z,V,X,Y2)/F1(V,Y2)+MAX(Qb0(Y,Z,V,X,Y2)/Taub+
+ INE(Y,Z,V,X,Y2)-Y,0)*F2(V,X,Y2))}
.ENDS
*$
.SUBCKT SKP02N60L2/INF ano gate kat PARAMS: TJ = 27
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.032
+	A_aktiv=0.017
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.0079  N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKP04N60/L2/INF ano gate kat PARAMS: TJ = 27 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol 	gate 	katl 	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.052
+	A_aktiv=0.032
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.0145	N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKP06N60/L2/INF ano gate kat PARAMS: TJ = 27 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.068
+	A_aktiv=0.043
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.0207	N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKP10N60/L2/INF ano gate kat PARAMS: TJ = 27 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.123
+	A_aktiv=0.087
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.0324	N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKP15N60/L2/INF ano gate kat PARAMS: TJ = 27 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.146
+	A_aktiv=0.107
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.0512	N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKW15N60/L2/INF ano gate kat PARAMS: TJ = 27 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.144
+	A_aktiv=0.106
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.0512	N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKW20N60/L2/INF ano gate kat PARAMS: TJ = 27 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.185
+	A_aktiv=0.142
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.067	N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT SKW30N60/L2/INF ano gate kat PARAMS: TJ = 27 
LANO	ano	anol		5n
LKAT	katl	kat		7n	
XL7xxxF anol	gate	katl	L7xxxF_L2	PARAMS: TJ = {TJ} A_total = 0.257
+	A_aktiv=0.207
XDIO	kat	anol		L4XXX-ET	PARAMS: TJ = {TJ} A=0.098	N_ideal = 1.0
RKONV	katl	anol		100meg
.ENDS
*$
.SUBCKT	L4XXX-ET anode	kath PARAMS: TJ= 27 A = 1 N_ideal = 1
.PARAM
+q = 1.602e-19		eps0 = 8.85e-14	epsi = 11.8
+kb = 1.38e-23		T0 = 273	ni0 = 1.45e10
+un = 1350		up = 450 tau = .9u	w0 = 70e-4
.PARAM  Nd = 1.2e14
.PARAM	BV = 600	Rc = .6m
.PARAM	vlimit =1.5e7
.PARAM  Vdiff=  397u
.PARAM  Ut =	25.8m
.PARAM  D =	17.44
.PARAM  L =	3.96m
.PARAM	Ise0 =	{A*391p}
.PARAM	Ise_g  = {A*0.33p}
.PARAM  Ism0 =	{A*20.46u}
.PARAM	Ism_g = {A*3.204e-19}
.PARAM  CJ0 =	{A*4.196n}
.PARAM  QN =	{A*0.135u}
.PARAM  XF =	3610
.PARAM	VPT=	450
.PARAM  a0 =	-0.71
.PARAM  a1 =	{0.3*(1 + a0)/(1 - a0)}
.PARAM  a2 =	{0.1/((1 - 0.5*(1 - a1*a1)*(1 - a0)) )}
.PARAM  Rd0 =	{0.27/A} 
.PARAM	Ra =	{0.74m/A} 
RSERIE	anode	ano	{Ra}
GDE	ano	mi	VALUE = {((ISE(TJ)**((t0 + TJ)/(t0 + 27)))/ISE(27))**((t0 + 
+ 27)/(t0 + TJ)) 
+ * MAX(I(VDE),0)**((t0 + 27)/(t0 + TJ)) - MAX(I(VDE),0)}
GD0	ano	mi1	VALUE = {((ISM(TJ)**((t0 + TJ)/(t0 + 27)))/ISM(27))**(
+ (t0 + 27)/(t0 + TJ))
+ * MAX(I(VD0),0)**((t0 + 27)/(t0 + TJ)) - MAX(I(VD0),0)}
RGD	ano	mi	100meg
VDE	ano	ano1	0
DE	ano1	mi	D1
D0	ano2	mi1	D2
VD0	ano	ano2	0
.model	D1	D	(is={Ise0}, N= {N_ideal})
.model  D2	D	(is={Ism0}, N=2)
VID0	mi1	mi	0
VITOT	kat	kathv	0
EVDIFF	kathv	kath	VALUE = {(TJ + t0)* Vdiff}
EGIR	mi	kat	VALUE = {I(VITOT)*Rd(V(q,0),TJ)}
GID	ano	mi	VALUE = {IQ(V(ano,mi),I(VID0),V(q,0),I(VDXJ),I(VITOT),TJ) - I(VIJCT)}
CQB	q	0	1u
RHELP	q	0	1meg
GRQB	q	0	VALUE = {1u*V(q,0)/(Tau*((TJ + t0)/300)**2) }
GIQ	0	q	VALUE = {MAX(I(VID0),0) + IQ(V(ano,mi),I(VID0),V(q,0),I(VDXJ),I(VITOT),TJ)}
EXJ	xj1 0	VALUE	{if(time> 25n,xj(V(ano,mi),I(VITOT)),0) }
CXJ	xj  0	1
VDXJ	xj1 xj	0
EJUNCT	jct 0	VALUE = {LIMIT(V(kat,ano),0,VPT)}
VIJCT	jct cp	0
DJCT	0   cp	DXXX
.MODEL  DXXX	D (is = 1p, CJO= {CJ0})
.FUNC   EG(T)			{1.16 - 7.02e-4*(T + t0)**2/(T + t0 + 1108)}
.FUNC	DA(T)			{2*kb*un*up/q/(un + up)*(T + t0)*(((T + t0)/300)**-1.5)}
.FUNC   ISE(T)  		{(T + t0)*un*(((T + t0)/300)**-1.5)*((ise_g*(ni0*((T + 
+ t0)/300)**1.5*exp(1/(2*8.61e-5)
+ *(-300*EG(T)+(t0 + T)*EG(27))/(T + t0)/300)))
+ *(kb*(ni0*((T + t0)/300)**1.5*exp(1/(2*8.61e-5)*(-300*EG(T)+(t0 + 
+ T)*EG(27))/(T + t0)/300))))}
.FUNC	ISM(T)			{Ism_g*(ni0*((T + t0)/300)**1.5*exp(1/
+(2*8.61e-5)*(-300*EG(T)+(t0 + T)*EG(27))/(T + t0)/300))
+ *sqrt(DA(T)/(Tau*((T + t0)/300)**2))}
.FUNC	xj(V,Y2)		{(XF*SQRT(1-limit(V,-VPT,0)))/SQRT(Nd + MAX(up*(-Y2)/(un + up),0)/A/q/vlimit)}
.FUNC	w(V,Y2)			{MAX(w0-xj(V,Y2)*(1 + a1),1e-4)}
.FUNC	Rd(Z,T)			{w0*w0/(un*QN*(((T + t0)/300)**-1.5) + (un + 
+up)*MAX(Z,1m*QN)*1e-6*(((T + t0)/300)**-1.5))}
.FUNC	Td(V,U,Y2,T) 		{a2*w(V,Y2)*w(V,Y2)/DA(T)/(1 + 
+w(V,Y2)*MAX(U,0)/4/DA(T))}
.FUNC	IQ(V,Y,Z,U,Y2,T)	{((Tau*((T + t0)/300)**2)*Y - MAX(Z,1m*QN)*
+1e-6)/(Td(V,U,Y2,T))}
.ends
*$
.SUBCKT L7xxxF_L2 ano gate kat PARAMS: TJ = 27 A_total = 0.1	A_aktiv=0.1
.PARAM 
+k=1.380622e-23		q = 1.6E-19	t0=273		ni0=1.45e10
+eps0 = 8.85E-14	epsi =11.8	eox= 2.8
+un = 1350		up = 450	u_surf=600
+a1 = 0.55		vmid=1.5e+5	vlimit= 1.5e7	vsw= -0.5
.PARAM tox = 80e-7	ttox = 1.5e-4 wb = 100E-4	lchann = 2.5e-4
.PARAM Rs = 0.5m	 Rg = 15
.PARAM nc = {A_aktiv*.1189meg}
.PARAM wc = {nc*52e-4}
.PARAM Agd  = {nc*6.72e-6}
.PARAM Cox  = {Agd*eps0*eox/tox}
.PARAM Cgs  = {nc*eps0*eox*(1.05e-6/tox + 7.77e-6/ttox) }
.PARAM 	taub = 100u	Nsource= 1.4e17 BV_FW=600	BV_RW=28 
.PARAM Cjs  = {A_aktiv*3.092n}
.PARAM Cje  = {(A_total/A_aktiv)*Cjs}	
.PARAM Ise0 = {A_total*23.5p}
.PARAM Ise_g  = {A_total*2e-14}
.PARAM Ise_k  = {A_total*16.8p}
.PARAM 	Q0 = {A_aktiv*128.2n}
.PARAM	VPT= 610
.PARAM	VN = {1.338e-17*Agd*Agd/Cox/Cox}
.PARAM	XF = 0.4m
MFET	d g s s 	MOS W={wc/100},L={lchann/100} , IC=OFF
GMFET_T d1x	s	VALUE = {I(VINC0)*((TJ+t0)/300)**-1.5 }
GDE	ano	e1	VALUE = {((ISE2(TJ)**((t0 + TJ)/(t0 + 27)))/
+ ISE2(27))**((t0 + 27)/(t0 + TJ)) 
+ * MAX(I(VDE),0)**((t0 + 27)/(t0 + TJ)) - MAX(I(VDE),0)}
VDE	ano	anx	0
DE	anx	e1	D1
DS	kat	d1	D2
.MODEL  MOS     NMOS    
+(LEVEL=3,nsub={Nsource},tox={tox/100},vmax={vlimit},uo={u_surf},CGSO=1p,
+CGDO=1p)
.MODEL 	D1	D	(IS={ISE0},N = 1.0 )
.MODEL	D2	D	(IS={Ise_k},CJO={CJS},BV= {BV_FW})
ETHERM  g_t	g	VALUE = {DVt(TJ)}
RG	gate g_t	{Rg}
RS	s kat		{Rs}
EVGCOX 	vgcox 0 VALUE { V(ox,s)-{vsw} }
EVCOX   vcox  0         VALUE = {Cox/100  + 99*Cox*(1+tanh(10*(V(vgcox))))/200}
EVCGS   vcgs  0         VALUE = {Cgs + 99*Cox*(1+tanh(-10*(V(vgcox))))/200}
GICOX   g ox            VALUE = {if (time> 25n,V(vcox)*DDT(V(g,ox)), 0) }
GICGS   g s             VALUE = {if (time> 25n,V(vcgs)*DDT(V(g,s)), 0)  }
EDEP	d1 ox	VALUE = {Vdep(V(d1,g))}
EGIA	e d1	VALUE = {I(VIA)*Rb(V(b,0),TJ)}
GIC	d1  kat	VALUE = {IPC(I(VINC),V(b,0),V(d1,kat),I(VDXJ),TJ)}
CQB	b 0	1u
RHELP	b 0	1meg
GRQB	b 0	VALUE   {1u*V(b,0)/(Taub*((TJ + t0)/300)**2) }
GINC	0 b	VALUE	{I(VINC)}
GINE	b 0	VALUE	{INE(I(VINC),V(b,0),V(d1,kat),I(VDXJ),TJ)}
EXJ	xj1 0	VALUE	{if(time> 25n,xj(V(d1,kat)),0)}
CXJ	xj  0	1
VDXJ	xj1 xj	0
VIA	e1 e	0
EAUX1	d12 s	VALUE = {V(d1,s)}
VINC0	d12 d	0
VINC	d1 d1x	0
.FUNC   EG(T)	{1.16 - 7.02e-4*(T+t0)**2/(T+t0 + 1108)}
.FUNC	psi2(T) {2*k/q*(T + t0)*log(Nsource/(ni0*((T+t0)/300)**1.5*exp(1/
+(2*8.61e-5)*(-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300)))}
.FUNC	DVt(T)		{psi2(T) - psi2(27) + 
+tox*(sqrt(2*eps0*epsi*q*Nsource*psi2(T)) 
+ - sqrt(2*eps0*epsi*q*Nsource*psi2(27)))/eps0/eox}
.FUNC	DA(T)	{2*k*un*up/q/(un + up)*(T + t0)*(((T + t0)/300)**-1.5)}
.FUNC	LA(T)	{sqrt(DA(T) * Taub*((T+t0)/300)**2) }
.FUNC   ISE2(T)  {(T +t0)*(un*((T+t0)/
+300)**-1.5)*((ise_g*(ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*(-300*EG(T)+
+(t0+T)*EG(300))/(T+t0)/300)))*(k*(ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*
+(-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300))))}
.FUNC	Vdep(X)	{if(X > -VN/2,X + VN*(1-SQRT(1+2*X/VN)),VN/2)}
.FUNC	Rb(X,T)	{wb*wb*LOG(1+2E-6*(1+up/un)*MAX(X,1m*Q0)/Q0)/
+(2E-6*(un+up)*(((T+t0)/300)**-1.5)*MAX(X,1m*Q0))}
.FUNC	xj(V)		{XF*SQRT(1+LIMIT(V,0,VPT))}
.FUNC	FDX(V,X,T)	{TANH((wb-xj(V))*MAX(X,0)/(24*DA(T)))}
.FUNC	Td(V,X,T)	{(0.1/DA(T))*(wb-xj(V))*(wb-xj(V))*(1-FDX(V,X,T))}
.FUNC	F1(V,T)		{Taub*((T+t0)/300)**2*COSH((wb-xj(V))/LA(T))-1}
.FUNC	F2(V,X,T)	{0.5*(1+2*FDX(V,X,T)/(1+FDX(V,X,T)*FDX(V,X,T)))}
.FUNC	F3(V,X,T)	{1+Td(V,X,T)/(Taub*((T+t0)/300)**2)}
.FUNC	QS0(V,T)	{q*A_aktiv*LA(T)*(ni0*((T+t0)/300)**1.5*exp(1/(2*8.61e-5)*
+(-300*EG(T)+(t0+T)*EG(300))/(T+t0)/300))
+ *TANH(0.5*(wb-xj(V))/LA(T))}
.FUNC	Qbd(Y,Z,V,X,T)	{MAX(Z,1m*Q0)*1e-6+Td(V,X,T)*Y}
.FUNC	Qb0(Y,Z,V,X,T)	{2*Qbd(Y,Z,V,X,T)/(F3(V,X,T)+SQRT(F3(V,X,T)*F3(V,X,T) 
+ + Td(V,X,T)*3*ISE2(T)*Qbd(Y,Z,V,X,T)/(QS0(V,T) * QS0(V,T))))}
.FUNC	INE(Y,Z,V,X,T)
+	{0.75*ISE2(T)*(Qb0(Y,Z,V,X,T)/QS0(V,T))*(Qb0(Y,Z,V,X,T)/(QS0(V,T)))}
.FUNC	IPC(Y,Z,V,X,T)	
+{(1/3)*Y+(4/3)*(Qb0(Y,Z,V,X,T)/F1(V,T)+MAX(Qb0(Y,Z,V,X,T)/Taub/((T+t0)/
+300)**2+INE(Y,Z,V,X,T)- Y,0)*F2(V,X,T))}
.ENDS
*$
*********************************************************************
.SUBCKT SIPC30S2N03/L3/INF drain gate source Tj Tpad Tamb
.PARAM L=0.00000046  g2=0.024  vm=330000  theta=0.06  Fm=0.45  kappa=1.1  
.PARAM c=0.95  Vth=4.7  Rs=1E-4  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.75  
.PARAM Acfdg=1.05  Ukn=100  coxi=6.27545454545454E-04  Ep=13750000  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=13.4236904  
.PARAM Cox=5.21505961363637E-09  h2=6.4715625E-15  Vn=0.967579313342026  
.PARAM g10=652852608  g11=2.32802294592742E-07  g13=277860.642223634  
.PARAM g14=27205.8823529412  g15=-1.39109979034002  g16=-25.2592831642462  
.PARAM g17=9.49909907332851E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/
+(Tref+Tj))**1.5)+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s),max(min(V(Tj),999),-
+200))+if(Time>100p,DDT(V(d,s)*Cds(V(d,s),max(min(V(Tj),999),-200))),0)}
R1 gate source 2G
Rd0 d s 500
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s),max(min(V(Tj),999),-200))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.67
Cgs g s 5.00n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
G_TH Tamb Tj VALUE = {V(drain,source)*V(s,source)/Rs}
C_TH1 Tj Tamb 173.9u
C_TH2 Tj2 Tamb 1.31m
C_TH3 Tj3 Tamb 6.46m
R_TH1 Tj Tj2 4.53m
R_TH2 Tj2 Tj3 22.7m
R_TH3 Tj3 Tpad 19m
.ENDS
*$
.SUBCKT SIPC30S2N03L/L3/INF drain gate source Tj Tpad Tamb
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=1e-4  Rd=0.0001  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=12.3592568  
+Cox=9.65448368235E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=1088087680  
+g11=2.32802294592742E-07  
.PARAM g13=218507.505954249  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-25.2577911833652  g17=9.38004369827613E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
+ +Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s),max(min(V(Tj),999),-
+ 200))+if(Time>100p,DDT(V(d,s)*Cds(V(d,s),max(min(V(Tj),999),-200))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s),max(min(V(Tj),999),-200))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.53
Cgs g s 5.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
G_TH Tamb Tj VALUE = {V(drain,source)*V(s,source)/Rs}
C_TH1 Tj Tamb 173.9u
C_TH2 Tj2 Tamb 1.31m
C_TH3 Tj3 Tamb 6.46m
R_TH1 Tj Tj2 4.53m
R_TH2 Tj2 Tj3 22.7m
R_TH3 Tj3 Tpad 19m
.ENDS
*$
.SUBCKT SIPC30S2N04/L3/INF drain gate source Tj Tpad Tamb
.PARAM L=0.00000048  g2=0.017  vm=330000  theta=0.06  Fm=0.45  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=1e-5  Rd=0.0001  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=1 
.PARAM Acfdg=0.9  Ukn=100  coxi=6.27545454545454E-04  Ep=19411764.7058824  
.PARAM psi=0.25875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.86697072  
.PARAM Cox=6.684002325E-09  h2=6.4715625E-15  Vn=0.757235984354629  
.PARAM g10=453675340.8  g11=2.64219403534039E-07  g13=256705.5484869  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.2492552250601  
.PARAM g17=7.49186424651737E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-+c*en(Uds,Ugs,Tj)**2)*
+ exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+
+(1-h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s),max(min(V(Tj),999),
+-200))+if(Time>100p,DDT(V(d,s)*Cds(V(d,s),max(min(V(Tj),999),-200))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s),max(min(V(Tj),999),-200))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.6
Cgs g s 4.76n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
G_TH Tamb Tj VALUE = {V(drain,source)*V(s,source)/Rs}
C_TH1 Tj Tamb 228.3u
C_TH2 Tj2 Tamb 1323u
C_TH3 Tj3 Tamb 6.46m
R_TH1 Tj Tj2 4.64m
R_TH2 Tj2 Tj3 22.4m
R_TH3 Tj3 Tpad 19m
.ENDS
*$
.SUBCKT SIPC30S2N03/L2/INF drain gate source Tj
.PARAM L=0.00000046  g2=0.024  vm=330000  theta=0.06  Fm=0.45  kappa=1.1  
.PARAM c=0.95  Vth=4.7  Rs=1e-5 Rd=0.0001  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.75  
.PARAM Acfdg=1.05  Ukn=100  coxi=6.27545454545454E-04  Ep=13750000  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=13.4236904  
.PARAM Cox=5.21505961363637E-09  h2=6.4715625E-15  Vn=0.967579313342026  
.PARAM g10=652852608  g11=2.32802294592742E-07  g13=277860.642223634  
.PARAM g14=27205.8823529412  g15=-1.39109979034002  g16=-25.2592831642462  
.PARAM g17=9.49909907332851E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
+ +Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s),max(min(V(Tj),999),-200))+
+ if(Time>100p,DDT(V(d,s)*Cds(V(d,s),max(min(V(Tj),999),-200))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s),max(min(V(Tj),999),-200))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.67
Cgs g s 5.00n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SIPC30S2N03L/L2/INF drain gate source Tj 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=1e-5  Rd=0.0001  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=12.3592568  
+Cox=9.65448368235E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=1088087680  
+g11=2.32802294592742E-07  
.PARAM g13=218507.505954249  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-25.2577911833652  g17=9.38004369827613E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s),max(min(V(Tj),999),-200))+
+ if(Time>100p,DDT(V(d,s)*Cds(V(d,s),max(min(V(Tj),999),-200))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s),max(min(V(Tj),999),-200))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.53
Cgs g s 5.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SIPC30S2N04/L2/INF drain gate source Tj 
.PARAM L=0.00000048  g2=0.017  vm=330000  theta=0.06  Fm=0.45  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=1e-5  Rd=0.0001  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=1 
.PARAM Acfdg=0.9  Ukn=100  coxi=6.27545454545454E-04  Ep=19411764.7058824  
.PARAM psi=0.25875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.86697072  
.PARAM Cox=6.684002325E-09  h2=6.4715625E-15  Vn=0.757235984354629  
.PARAM g10=453675340.8  g11=2.64219403534039E-07  g13=256705.5484869  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.2492552250601  
.PARAM g17=7.49186424651737E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s),max(min(V(Tj),999),-200))+
+ if(Time>100p,DDT(V(d,s)*Cds(V(d,s),max(min(V(Tj),999),-200))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s),max(min(V(Tj),999),-200))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.6
Cgs g s 4.76n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SIPC30S2N03/L1/INF drain gate source 
.PARAM L=0.00000046  g2=0.024  vm=330000  theta=0.06  Fm=0.45  kappa=1.1  
.PARAM c=0.95  Vth=4.7  Rs=1e-5  Rd=0.0001  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.75  
.PARAM Acfdg=1.05  Ukn=100  coxi=6.27545454545454E-04  Ep=13750000  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=13.4236904  
.PARAM Cox=5.21505961363637E-09  h2=6.4715625E-15  Vn=0.967579313342026  
.PARAM g10=652852608  g11=2.32802294592742E-07  g13=277860.642223634  
.PARAM g14=27205.8823529412  g15=-1.39109979034002  g16=-25.2592831642462  
.PARAM g17=9.49909907332851E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s))+if(Time>100p,DDT(V(d,s)*Cds(V(d,s))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.67
Cgs g s 5.00n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
.ENDS
*$
.SUBCKT SIPC30S2N03L/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=1e-5  Rd=0.0001  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=12.3592568  
+Cox=9.65448368235E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=1088087680  
+g11=2.32802294592742E-07  
.PARAM g13=218507.505954249  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-25.2577911833652  g17=9.38004369827613E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2
+ -0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s))+if(Time>100p,DDT(V(d,s)*Cds(V(d,s))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.53
Cgs g s 5.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
.ENDS
*$
.SUBCKT SIPC30S2N04/L1/INF drain gate source 
.PARAM L=0.00000048  g2=0.017  vm=330000  theta=0.06  Fm=0.45  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=1e-5  Rd=0.0001  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=1 
.PARAM Acfdg=0.9  Ukn=100  coxi=6.27545454545454E-04  Ep=19411764.7058824  
.PARAM psi=0.25875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.86697072  
.PARAM Cox=6.684002325E-09  h2=6.4715625E-15  Vn=0.757235984354629  
.PARAM g10=453675340.8  g11=2.64219403534039E-07  g13=256705.5484869  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.2492552250601  
.PARAM g17=7.49186424651737E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+ 1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*
+ (x-VSW(y))**2-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
G_G1 d s VALUE={Iges(V(d,s),V(g,s))+if(Time>100p,DDT(V(d,s)*Cds(V(d,s))),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd drain d VALUE = {V(drain,d)/Rdr(V(d,s))}
R99 drain d 1k  
Rs source s {Rs}
RG gate g 2.6
Cgs g s 4.76n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
.ENDS
*$
.SUBCKT SPP80N03S2-03/L1/INF drain gate source 
.PARAM L=0.00000046  g2=0.024  vm=330000  theta=0.06  Fm=0.45  kappa=1.1  
.PARAM c=0.95  Vth=4.7  Rs=0.001  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.75  
.PARAM Acfdg=1.05  Ukn=100  coxi=6.27545454545454E-04  Ep=13750000  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=13.4236904  
.PARAM Cox=5.21505961363637E-09  h2=6.4715625E-15  Vn=0.967579313342026  
.PARAM g10=652852608  g11=2.32802294592742E-07  g13=277860.642223634  
.PARAM g14=27205.8823529412  g15=-1.39109979034002  g16=-25.2592831642462  
.PARAM g17=9.49909907332851E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd) +>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.67
Cgs g s 5.00n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPP80N03S2L-03/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0011  Rd=0.0008  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=12.3592568  
+Cox=9.65448368235E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=1088087680  
+g11=2.32802294592742E-07  
.PARAM g13=218507.505954249  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-25.2577911833652  g17=9.38004369827613E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.53
Cgs g s 5.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPD30N03S2L-08/L1/INF drain gate source 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0023  Rd=0.0015  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.82449936  
+Cox=2.97683584497E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=336702336  
+g11=2.32802294592742E-07  
.PARAM g13=219200.255257484  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.4322618786555  g17=2.90259937966732E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-
+500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.67
Cgs g s 1.714n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
.ENDS
*$
.SUBCKT IPB05N03L/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0011  Rd=0.0012  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.01936072  
+Cox=3.906879554565E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=441895872  
+g11=2.32802294592742E-07  
.PARAM g13=219199.666431687  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.1603856063749  g17=3.80943803117763E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)} .PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.75
Cgs g s 2.25n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT IPB10N03L/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0014  Rd=0.0016  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5834908  
+Cox=2.010897915975E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=227446080  
+g11=2.32802294592742E-07  
.PARAM g13=219199.002302457  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.8245452500616  g17=1.96073736392421E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.44
Cgs g s 1.158n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT IPD12N03L/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.003  Rd=0.0012  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.33897752  
+Cox=1.820585519415E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=205919552  
+g11=2.32802294592742E-07  
.PARAM g13=219198.141252087  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.9239710301996  g17=1.77516429198927E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.2
Cgs g s 1.05n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
.ENDS
*$
.SUBCKT IPB15N03L/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.002  Rd=0.0026  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7069448  
+Cox=1.32863387085E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=150276480  
+g11=2.32802294592742E-07  
.PARAM g13=219197.781746651  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-27.2389790281525  g17=1.29548378787187E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.06
Cgs g s 0.765n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
.ENDS
*$
.SUBCKT BSO301SN/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0033  Rd=0.001  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.53847032  
+Cox=2.754200392515E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=311520832  
+g11=2.32802294592742E-07  
.PARAM g13=219200.395793134  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.5099952324235  g17=2.68551796954758E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.33
Cgs g s 1.586n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
.ENDS
*$
.SUBCKT BSO4420/L1/INF drain gate source
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0033  Rd=0.001  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.53847032  
+Cox=2.754200392515E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=311520832  
+g11=2.32802294592742E-07  
.PARAM g13=219200.395793134  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.5099952324235  g17=2.68551796954758E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.33
Cgs g s 1.586n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
.ENDS
*$
.SUBCKT SPP80N04S2-04/L1/INF drain gate source 
.PARAM L=0.00000048  g2=0.017  vm=330000  theta=0.06  Fm=0.45  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0011  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=1 
.PARAM Acfdg=0.9  Ukn=100  coxi=6.27545454545454E-04  Ep=19411764.7058824  
.PARAM psi=0.25875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.86697072  
.PARAM Cox=6.684002325E-09  h2=6.4715625E-15  Vn=0.757235984354629  
.PARAM g10=453675340.8  g11=2.64219403534039E-07  g13=256705.5484869  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.2492552250601  
.PARAM g17=7.49186424651737E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.6
Cgs g s 4.76n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPP80N04S2-H4/L1/INF drain gate source 
.PARAM L=0.00000048  g2=2.50363636363636E-02  vm=486000  theta=0.06  
.PARAM Fm=0.45  kappa=0.7  c=0.65  Vth=4.7  Rs=0.0011  Rd=0.0002  T=300  
.PARAM Tref=273  auth=0.0064  aubr=0.043  Ibr=0.0000000001  Ubr=44  
.PARAM k1=0.5  k2=1.5  Acfgs2=0.85  Acfdg=1.05  Ukn=100  
+coxi=4.26111111111111E-04  
.PARAM Ep=19411764.7058824  psi=0.25875  Un=0.00008625  Utn=0.025875  
.PARAM Utnbr=0.207  W=9.7839016  Cox=3.74184145833333E-09  h2=6.4715625E-15  
.PARAM Vn=1.64  g10=374039424  g11=2  g13=256706.104862125  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.4422768393583  
.PARAM g17=6.17677959421847E-09  al=0.5   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.3
Cgs g s 3.921n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPP80N04S2L-04/L1/INF drain gate source
.PARAM L=0.00000045  g2=0.028  vm=330000  theta=0.06  Fm=0.3416  kappa=0.8  
.PARAM c=0.75  Vth=2.9  Rs=0.0011  Rd=0.0005  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=0.8 
.PARAM Acfdg=1.05  Ukn=100  coxi=0.000862875  Ep=11785714.2857143  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.9457338  
+Cox=9.190503196875E-09  
.PARAM h2=6.4715625E-15  Vn=0.400521512385919  g10=453675340.8  
+g11=2.64219403534039E-07  
.PARAM g13=256705.5484869  g14=34203.6553524804  g15=-0.895010069648291  
.PARAM g16=-25.2492552250601  g17=7.17970323624582E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-
+Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs- +VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.23
Cgs g s 5.45n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPP80N06S2-05/L1/INF drain gate source
.PARAM L=0.00000055  g2=0.025  vm=330000  theta=0.06  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0012  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=13200000  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=9.7452864  
+ Cox=8.16612349090909E-09  
.PARAM h2=6.4715625E-15  Vn=0.504823989569753  g10=252282470.4  
+ g11=3.25183771572503E-07  
.PARAM g13=215818.267307169  g14=41523.3415233415  g15=-1.00481240992511  
.PARAM g16=-25.2626482823965  g17=5.34102638192059E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2} 
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.57n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPP80N06S2L-05/L1/INF drain gate source
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0013  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=9.7452864  Cox=1.12284198E-08  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=231258931.2  
+g11=3.39921199196877E-07  
.PARAM g13=215818.267307169  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-25.2626482823965  g17=5.11782638141224E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.91
Cgs g s 5.46n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPP80N06S2-08/L1/INF drain gate source 
.PARAM L=0.00000055  g2=0.018  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.001  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=18333333.3333333  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.4493276  
.PARAM Cox=4.56630312272727E-09  h2=6.4715625E-15  Vn=0.462755323772273  
.PARAM g10=129314380.8  g11=3.39921199196877E-07  g13=215818.057828832  
.PARAM g14=41523.3415233415  g15=-0.962034639472273  g16=-25.8439392362516  
.PARAM g17=2.86176428352458E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5016
Cgs g s 2.56n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
.ENDS
*$
.SUBCKT SPP80N06S2L-07/L1/INF drain gate source 
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0016  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.4493276  
+Cox=6.27866679375E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=129314380.8  
+g11=3.39921199196877E-07  
.PARAM g13=215818.057828832  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-25.8439392362516  g17=2.86176428352458E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.49
Cgs g s 3.056n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
.ENDS
*$    
.SUBCKT SPD30N06S2-15/L1/INF drain gate source 
.PARAM L=0.00000055  g2=0.018  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0025  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=18333333.3333333  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.9710336  
.PARAM Cox=2.48959832727273E-09  h2=6.4715625E-15  Vn=0.462755323772273  
.PARAM g10=70503628.8  g11=3.39921199196877E-07  g13=215818.101160047  
.PARAM g14=41523.3415233415  g15=-0.962034639472273  g16=-26.4505216677883  
.PARAM g17=1.5602654980096E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs- +Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.3575
Cgs g s 1.39n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
.ENDS
*$      
.SUBCKT SPD30N06S2L-13/L1/INF drain gate source
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0035  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.9710336  Cox=3.4231977E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=70503628.8  
+g11=3.39921199196877E-07  
.PARAM g13=215818.101160047  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.4505216677883  g17=1.5602654980096E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.4
Cgs g s 1.665n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
.ENDS
*$
.SUBCKT SPD30N06S2L-23/L1/INF drain gate source
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0035  Rd=0.001  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7952012  
+Cox=2.06973511875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=42600729.6  
+g11=3.39921199196877E-07  
.PARAM g13=215698.15713797  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.9540033172985  g17=9.4276634715455E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2} 
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-
+ Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.007n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
.ENDS
*$
.SUBCKT BSP603S2L/L1/INF drain gate source
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0075  Rd=0.0025  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7952012  
+Cox=2.06973511875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=42600729.6  
+g11=3.39921199196877E-07  
.PARAM g13=215698.15713797  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.9540033172985  g17=9.4276634715455E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.6
Cgs g s 1.007n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 3nH
LG ga1 gate  5nH
LS so1 source 3nH
.ENDS
*$
.SUBCKT BSO604NS2/L1/INF drain1 gate1 source1 drain1a drain2 gate2 
+ source2 drain2a 
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.008  Rd=0.00325  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.1289294  
+Cox=1.301582221875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=26789875.2  
+g11=3.39921199196877E-07  
.PARAM g13=215696.77906323  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-27.4178470956518  g17=5.92867610958247E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.11
Cgs g s 633p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 VALUE={li1(V(d2,s2),V(g2,s2))+if(Time>100p,SL(DDT(V(d2,s2))*Cds(V(d2,s2)),
+-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.11
Cgs2 g2 s2 633p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
.ENDS
*$
.SUBCKT SPP80N08S2-07/L1/INF drain gate source 
.PARAM L=0.00000062  g2=4.27090909090909E-02  vm=486000  theta=0.05  
.PARAM Fm=0.3  kappa=0.7  c=0.85  Vth=4.7  Rs=0.0012  Rd=0.0004  T=300  
.PARAM Tref=273  auth=0.0042  aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  
.PARAM k1=0.5  k2=1.5  Acfgs2=0.884  Acfdg=1.4  Ukn=50  
+coxi=4.26111111111111E-04  
.PARAM Ep=11379310.3448276  psi=0.2716875  Un=0.00008625  Utn=0.025875  
.PARAM Utnbr=0.207  W=8.35059264  Cox=6.33806188888889E-09  h2=6.4715625E-15  
.PARAM Vn=0.383223989569752  g10=76871208.96  g11=2  g13=193452.444645322  
.PARAM g14=53808.3538083538  g15=-0.875470147486198  g16=-25.2592831642462  
.PARAM g17=3.32226242183668E-09  al=0.5    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.2}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
.ENDS
*$
.SUBCKT SPP80N08S2L-07/L1/INF drain gate source
.PARAM L=0.00000058  g2=0.039875  vm=453750  theta=0.045  Fm=0.18  kappa=0.7  
.PARAM c=0.85  Vth=2.9  Rs=0.001  Rd=0.0004  T=300  Tref=273  auth=0.0032  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.825  
.PARAM Acfdg=1.4  Ukn=50  coxi=6.27545454545454E-04  Ep=11379310.3448276  
.PARAM psi=0.2716875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=8.32473408  
.PARAM Cox=9.42485416363636E-09  h2=6.4715625E-15  Vn=0.176688396349413  
.PARAM g10=75939655.68  g11=2.2  g13=189806.414699003  g14=53808.3538083538  
.PARAM g15=-0.594455038416554  g16=-25.2592831642462  g17=3.2820020369936E-09  
.PARAM al=0.5   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.2}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-
+Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)} 
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k    
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
.ENDS
*$
.SUBCKT SPDU31N05/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.579N Cox=1.20N Kgd=0.532N VSW=-1.61 cjo_ds=0.662n
.PARAM   W=0.814 L=1.025U VTH=3.68 alpha=0.5 RG=1.75 RD=17.2M RS=.8M LG=7N LD=5N 
+LS=5N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=59n ISE=.32n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.015}  Rth2={0.069}  Rth3={0.146}  Rth4={0.237}  
+Rth5={0.211}  Rth6={0.075}
.PARAM  CZth1={2.1E-4} CZth2={2.02E-4} CZth3={4.3E-4} CZth4={1.235E-3} 
+CZth5={5.31E-3} CZth6={0.031} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*
.SUBCKT SPDU28N05/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.643N Cox=1.93N Kgd=0.588N VSW=-1.61 cjo_ds=0.598n
.PARAM   W=0.819 L=1.025U VTH=2.29 alpha=0.5 RG=1.75 RD=18.26M RS=0.8M LG=7N 
+LD=5N LS=5N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=58n ISE=.32n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.015}  Rth2={0.069}  Rth3={0.146}  Rth4={0.237}  
+Rth5={0.211}  Rth6={0.075}
.PARAM  CZth1={2.1E-4} CZth2={2.02E-4} CZth3={4.3E-4} CZth4={1.235E-3} 
+CZth5={5.31E-3} CZth6={0.031} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
.SUBCKT SPDU14N05/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.244N Cox=0.493N Kgd=0.265N VSW=-1.61 cjo_ds=0.252n
.PARAM   W=0.314 L=1.025U VTH=3.68 alpha=0.5 RG=1.5 RD=46M RS=1M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=1.03E17 tox=81E-9 uo=575 vmax=1.25E5 bv =62 trr=50n ISE=.13n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.037}  Rth2={0.169}  Rth3={0.337}  Rth4={0.504}  
+Rth5={0.39}  Rth6={0.117}
.PARAM  CZth1={8.26E-5} CZth2={8.1E-5} CZth3={1.79E-4} CZth4={5.52E-4} 
+CZth5={2.71E-3} CZth6={0.019} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
*
.SUBCKT SPDU13N05/L3/INF  GATE DRAIN SOURCE TJ Tcase Tamb
.PARAM   Cgs=0.268N Cox=0.726N Kgd=0.257N VSW=-1.61 cjo_ds=0.246n
.PARAM   W=0.323 L=1.025U VTH=2.29 alpha=0.5 RG=1.5 RD=48M RS=1M LG=7N LD=5N 
+LS=7N
.PARAM   nsub=9.7E16 tox=55E-9 uo=515 vmax=1.25E5 bv =62 trr=50n ISE=.13n  
.MODEL  D_BODY    D (BV= {bv},CJO ={cjo_ds},TT ={trr},IS ={ISE})
.MODEL	NMOS_L3	NMOS 
+(LEVEL=3,W={W},L={L},VTO={VTH},nsub={nsub},tox={tox},vmax={vmax},u0={uo})
.PARAM  selfh={1} Rth1={0.037}  Rth2={0.169}  Rth3={0.337}  Rth4={0.504}  
+Rth5={0.39}  Rth6={0.117}
.PARAM  CZth1={8.26E-5} CZth2={8.1E-5} CZth3={1.79E-4} CZth4={5.52E-4} 
+CZth5={2.71E-3} CZth6={0.019} 
E_ABM26         Vgox 0 VALUE { V(Vdg)-V(Vdepl)     }
S_S2         gcox cbias 0 vgcox S2
RS_S2        0 vgcox 1G
.MODEL S2 VSWITCH Roff=1e6 Ron=100 Voff=-0.01 Von=0
R_R13         0 cbias  1E12  
S_S1         gi gcox 0 vgcox S1
RS_S1        0 vgcox 1G
.MODEL S1 VSWITCH Roff=1e6 Ron=100 Voff=0 Von=-0.01
E_E10         cbias 0 VALUE { V(gi) }
L_LG         GATE 8  {LG}  
R_RG         8 gi  {RG}  
E_ABM11         Vdepl 0 VALUE { if (V(Vdg) >0.0, V(Vdg)   
+ +2*({Kgd}/{Cox})**2*(1-sqrt(1+(V(Vdg)/({Kgd}/{Cox})**2))),0)   }
E_E12         vgcox 0 VALUE { -V(DCB)+V(Vdepl)+{VSW} }
V_VDR         Vdrain dr DC 0V AC 0V 
E_ABM27       Vdg 0 VALUE { V(RDM)-V(gi)+{alpha}*(V(RDM)-V(DSB))**2    }
E_E14         RDP RKP VALUE { {alpha}*(V(RDM)-V(DSB))**2+I(V_VID)*
+ {RD}/(300/(V(TJ)+273))**1.5 }
R_RKLEIN         RDM RKP  .01m  
R_RDUMMY         RDM RDP  1E12  
G_G7         RDM gi VALUE { if (time>50n, DDT({Cox}*V(Vgox, 0)),0) }
L_LS         7  SOURCE  {LS}  
E_EVTH         vg gi VALUE { (V(TJ, 0)-{TEMP})*0.0025 }
R_Rth2         1 2  {Rth2}  
R_Rth1         TJ 1  {Rth1}  
C_CZth2         Tamb 1  {CZth2}  
C_CZth1         TJ Tamb  {CZth1}  
R_Rth3         2 3  {Rth3}  
R_Rth4         3 4  {Rth4}  
R_Rth5         4 5  {Rth5}  
R_Rth6         5 Tcase  {Rth6}  
C_CZth3         2 Tamb  {CZth3}  
C_CZth4         Tamb 3  {CZth4}  
C_CZth5         Tamb 4  {CZth5}  
C_CZth6         Tamb 5  {CZth6}  
L_LD         DCB DRAIN  {LD}  
V_VID         DCB RDP DC 0V AC 0V 
G_G8         0 TJ VALUE { if (time>50n, V(DCB, DSB)*I(L_LS)*{selfh},0) }
C_C8         DSB gcox  {Cox}  
R_RLKG         DSB gi  1E12  
C_CGS1         DSB gi  {Cgs}  
R_R8         DSB vg  1E12  
R_RS         7 DSB  {Rs}  
E_E13         Vdrain DSB RDM DSB 1
G_ABMII2         RDM DSB VALUE { I(V_VDR)*((TEMP+273)/(V(TJ)+273))**1.5    }
M_X4         dr vg DSB DSB NMOS_L3
D_DBODY1         DSB DCB D_BODY
.ENDS    
*$
.SUBCKT SPD30N08S2-22/L1/INF drain gate source 
.PARAM L=0.00000062  g2=0.029  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.85  Vth=4.7  Rs=0.002  Rd=0.0012  T=300  Tref=273  auth=0.0042  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.6  
.PARAM Acfdg=1.35  Ukn=50  coxi=6.27545454545454E-04  Ep=11379310.3448276  
.PARAM psi=0.2716875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5404  
.PARAM Cox=2.83964318181818E-09  h2=6.4715625E-15  Vn=0.176688396349413  
.PARAM g10=23385600  g11=5.53197478936977E-07  g13=193452.382221652  
.PARAM g14=53808.3538083538  g15=-0.594455038416554  g16=-26.4492939205499  
.PARAM g17=1.01069179401786E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.2}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)  
+{W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k    
Rs so1 s {Rs}
RG ga1 g 1.3
Cgs g s 1.29n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
.ENDS
*$
.SUBCKT SPD30N08S2L-21/L1/INF drain gate source 
.PARAM L=0.00000058  g2=0.029  vm=330000  theta=0.045  Fm=0.18  kappa=0.7  
.PARAM c=0.85  Vth=2.9  Rs=0.002  Rd=0.0012  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.6  
.PARAM Acfdg=1.35  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.2716875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5636  Cox=3.904509375E-09  
.PARAM h2=6.4715625E-15  Vn=9.34550195567145E-02  g10=23385600  
+g11=5.53197478936977E-07  
.PARAM g13=193452.382221652  g14=53808.3538083538  g15=-0.432330937030221  
.PARAM g16=-26.4492939205499  g17=1.01069179401786E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2+t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**2.2}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  Udssat(Uds,Ugs)  {-h1+SQRT(max(h1**2+MAX(psi,Ue(Uds,Ugs))*h1/c,0))}
.FUNC  Lshort(Uds,Ugs))  {if(Uds>Udssat(Uds,Ugs),L-((Ep*h2)**2+2*kappa*h2*(Uds-
+Udssat(Uds,Ugs)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs)
+  {W/(Lshort(Uds,Ugs)*((1+theta*Ue(Uds,Ugs))*(1/(g2*(Tref/(Tref+TEMP))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs)  {min(Udssat(Uds,Ugs),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs)  {(psi*en(Uds,Ugs)-
+c*en(Uds,Ugs)**2)*exp(min(h7(Ue(Uds,Ugs))/psi-1,23))}
.FUNC  I2(Uds,Ugs)  {if(Uds>0,(Ue(Uds,Ugs)-c*en(Uds,Ugs))*en(Uds,Ugs),0)}
.FUNC  h3(Uds,Ugs)  {(3-2*(Ue(Uds,Ugs)/psi-k1))*((Ue(Uds,Ugs)/psi-k1))**2}
.FUNC  ble(Uds,Ugs) {h3(Uds,Ugs)*I2(Uds,Ugs)+(1-h3(Uds,Ugs))*I1(Uds,Ugs)}
.FUNC  I3(Uds,Ugs)  
+{if(Ue(Uds,Ugs)/psi<k2,if(Ue(Uds,Ugs)/psi<k1,I1(Uds,Ugs),ble(Uds,Ugs)),
+I2(Uds,Ugs))}
.FUNC  Ig(Uds,Ugs) {beta(Uds,Ugs)*I3(Uds,Ugs)}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={li1(V(d,s),V(g,s))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s))}
R99 dr1 d 1k    
Rs so1 s {Rs}
RG ga1 g 1.1
Cgs g s 1.39n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
.ENDS
*$
.SUBCKT SPP80N03S2-03/L2/INF drain gate source Tj
.PARAM L=0.00000046  g2=0.024  vm=330000  theta=0.06  Fm=0.45  kappa=1.1  
.PARAM c=0.95  Vth=4.7  Rs=0.001  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.75  
.PARAM Acfdg=1.05  Ukn=100  coxi=6.27545454545454E-04  Ep=13750000  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=13.4236904  
.PARAM Cox=5.21505961363637E-09  h2=6.4715625E-15  Vn=0.967579313342026  
.PARAM g10=652852608  g11=2.32802294592742E-07  g13=277860.642223634  
.PARAM g14=27205.8823529412  g15=-1.39109979034002  g16=-25.2592831642462  
.PARAM g17=9.49909907332851E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SOFTLM(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SOFTLM(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SOFTLM(DDT(V(d,s))*
+Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.67
Cgs g s 5.00n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N03S2L-03/L2/INF drain gate source Tj
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0011  Rd=0.0008  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=12.3592568  
+Cox=9.65448368235E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=1088087680  
+g11=2.32802294592742E-07  
.PARAM g13=218507.505954249  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-25.2577911833652  g17=9.38004369827613E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SOFTLM(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SOFTLM(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SOFTLM(DDT(V(d,s))*
+Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.53
Cgs g s 5.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPD30N03S2L-08/L2/INF drain gate source Tj
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0023  Rd=0.0015  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.82449936  
+Cox=2.97683584497E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=336702336  
+g11=2.32802294592742E-07  
.PARAM g13=219200.255257484  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.4322618786555  g17=2.90259937966732E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SOFTLM(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SOFTLM(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SOFTLM(DDT(V(d,s))*
+Cds(V(d,s),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.67
Cgs g s 1.714n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT IPB05N03L/L2/INF drain gate source Tj
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0011  Rd=0.0012  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.01936072  
+Cox=3.906879554565E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=441895872  
+g11=2.32802294592742E-07  
.PARAM g13=219199.666431687  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.1603856063749  g17=3.80943803117763E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.75
Cgs g s 2.25n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT IPB10N03L/L2/INF drain gate source Tj
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0014  Rd=0.0016  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5834908  
+Cox=2.010897915975E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=227446080  
+g11=2.32802294592742E-07  
.PARAM g13=219199.002302457  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.8245452500616  g17=1.96073736392421E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
+ +Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.44
Cgs g s 1.158n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT IPD12N03L/L2/INF drain gate source Tj 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.003  Rd=0.0012  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.33897752  
+Cox=1.820585519415E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=205919552  
+g11=2.32802294592742E-07  
.PARAM g13=219198.141252087  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.9239710301996  g17=1.77516429198927E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)} 
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-
+Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
+ +Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.2
Cgs g s 1.05n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT IPB15N03L/L2/INF drain gate source Tj 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.002  Rd=0.0026  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7069448  
+Cox=1.32863387085E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=150276480  
+g11=2.32802294592742E-07  
.PARAM g13=219197.781746651  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-27.2389790281525  g17=1.29548378787187E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.06
Cgs g s 0.765n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO301SN/L2/INF drain gate source Tj 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0033  Rd=0.001  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.53847032  
+Cox=2.754200392515E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=311520832  
+g11=2.32802294592742E-07  
.PARAM g13=219200.395793134  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.5099952324235  g17=2.68551796954758E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.33
Cgs g s 1.586n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO4420/L2/INF drain gate source Tj 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0033  Rd=0.001  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.53847032 
+ Cox=2.754200392515E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=311520832  
+g11=2.32802294592742E-07  
.PARAM g13=219200.395793134  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.5099952324235  g17=2.68551796954758E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.33
Cgs g s 1.586n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N04S2-04/L2/INF drain gate source Tj
.PARAM L=0.00000048  g2=0.017  vm=330000  theta=0.06  Fm=0.45  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0011  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=1 
.PARAM Acfdg=0.9  Ukn=100  coxi=6.27545454545454E-04  Ep=19411764.7058824  
.PARAM psi=0.25875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.86697072  
.PARAM Cox=6.684002325E-09  h2=6.4715625E-15  Vn=0.757235984354629  
.PARAM g10=453675340.8  g11=2.64219403534039E-07  g13=256705.5484869  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.2492552250601  
.PARAM g17=7.49186424651737E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.6
Cgs g s 4.76n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N04S2-H4/L2/INF drain gate source Tj
.PARAM L=0.00000048  g2=2.50363636363636E-02  vm=486000  theta=0.06  
.PARAM Fm=0.45  kappa=0.7  c=0.65  Vth=4.7  Rs=0.0011  Rd=0.0002  T=300  
.PARAM Tref=273  auth=0.0064  aubr=0.043  Ibr=0.0000000001  Ubr=44  
.PARAM k1=0.5  k2=1.5  Acfgs2=0.85  Acfdg=1.05  Ukn=100  
+coxi=4.26111111111111E-04  
.PARAM Ep=19411764.7058824  psi=0.25875  Un=0.00008625  Utn=0.025875  
.PARAM Utnbr=0.207  W=9.7839016  Cox=3.74184145833333E-09  h2=6.4715625E-15  
.PARAM Vn=1.64  g10=374039424  g11=2  g13=256706.104862125  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.4422768393583  
.PARAM g17=6.17677959421847E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.0}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.3
Cgs g s 3.921n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
.SUBCKT SPP80N04S2L-04/L2/INF drain gate source Tj
.PARAM L=0.00000045  g2=0.028  vm=330000  theta=0.06  Fm=0.3416  kappa=0.8  
.PARAM c=0.75  Vth=2.9  Rs=0.0011  Rd=0.0005  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=0.8 
.PARAM Acfdg=1.05  Ukn=100  coxi=0.000862875  Ep=11785714.2857143  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.9457338  
+Cox=9.190503196875E-09  
.PARAM h2=6.4715625E-15  Vn=0.400521512385919  g10=453675340.8  
+g11=2.64219403534039E-07  
.PARAM g13=256705.5484869  g14=34203.6553524804  g15=-0.895010069648291  
.PARAM g16=-25.2492552250601  g17=7.17970323624582E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.23
Cgs g s 5.45n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N06S2-05/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.025  vm=330000  theta=0.06  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0012  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=13200000  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=9.7452864  
+Cox=8.16612349090909E-09  
.PARAM h2=6.4715625E-15  Vn=0.504823989569753  g10=252282470.4  
+g11=3.25183771572503E-07  
.PARAM g13=215818.267307169  g14=41523.3415233415  g15=-1.00481240992511  
.PARAM g16=-25.2626482823965  g17=5.34102638192059E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.57n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N06S2L-05/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0013  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.8  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=9.7452864  Cox=1.12284198E-08  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=231258931.2  
+g11=3.39921199196877E-07  
.PARAM g13=215818.267307169  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-25.2626482823965  g17=5.11782638141224E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.91
Cgs g s 5.46n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N06S2-08/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.018  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.001  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=18333333.3333333  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.4493276  
.PARAM Cox=4.56630312272727E-09  h2=6.4715625E-15  Vn=0.462755323772273  
.PARAM g10=129314380.8  g11=3.39921199196877E-07  g13=215818.057828832  
.PARAM g14=41523.3415233415  g15=-0.962034639472273  g16=-25.8439392362516  
.PARAM g17=2.86176428352458E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5016
Cgs g s 2.56n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N06S2L-07/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0016  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.4493276  
+Cox=6.27866679375E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=129314380.8  
+g11=3.39921199196877E-07  
.PARAM g13=215818.057828832  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-25.8439392362516  g17=2.86176428352458E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)} 
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.49
Cgs g s 3.056n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$       
.SUBCKT SPD30N06S2-15/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.018  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0025  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=18333333.3333333  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.9710336  
.PARAM Cox=2.48959832727273E-09  h2=6.4715625E-15  Vn=0.462755323772273  
.PARAM g10=70503628.8  g11=3.39921199196877E-07  g13=215818.101160047  
.PARAM g14=41523.3415233415  g15=-0.962034639472273  g16=-26.4505216677883  
.PARAM g17=1.5602654980096E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.3575
Cgs g s 1.39n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$       
.SUBCKT SPD30N06S2L-13/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0035  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.9710336  Cox=3.4231977E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=70503628.8  
+g11=3.39921199196877E-07  
.PARAM g13=215818.101160047  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.4505216677883  g17=1.5602654980096E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.4
Cgs g s 1.665n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPD30N06S2L-23/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0035  Rd=0.001  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7952012  
+Cox=2.06973511875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=42600729.6  
+g11=3.39921199196877E-07  
.PARAM g13=215698.15713797  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.9540033172985  g17=9.4276634715455E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.007n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSP603S2L/L2/INF drain gate source Tj
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0075  Rd=0.0025  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7952012  
+Cox=2.06973511875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=42600729.6  
+g11=3.39921199196877E-07  
.PARAM g13=215698.15713797  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.9540033172985  g17=9.4276634715455E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.6
Cgs g s 1.007n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 3nH
LG ga1 gate  5nH
LS so1 source 3nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO604NS2/L2/INF drain1 gate1 source1 drain1a drain2 gate2 source2 
+drain2a Tj1 Tj2   
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.008  Rd=0.00325  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.1289294  
+Cox=1.301582221875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=26789875.2  
+g11=3.39921199196877E-07  
.PARAM g13=215696.77906323  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-27.4178470956518  g17=5.92867610958247E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.11
Cgs g s 633p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.11
Cgs2 g2 s2 633p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
Vref1 Tja 0 27
Rdummy1 Tja Tj1 1
Cdummy1 Tj1 0 1p
Vref2 Tja2 0 27
Rdummy2 Tja2 Tj2 1
Cdummy2 Tj2 0 1p
.ENDS
*$
.SUBCKT SPP80N08S2-07/L2/INF drain gate source Tj
.PARAM L=0.00000062  g2=4.27090909090909E-02  vm=486000  theta=0.05  
.PARAM Fm=0.3  kappa=0.7  c=0.85  Vth=4.7  Rs=0.0012  Rd=0.0004  T=300  
.PARAM Tref=273  auth=0.0042  aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  
.PARAM k1=0.5  k2=1.5  Acfgs2=0.884  Acfdg=1.4  Ukn=50 
+ coxi=4.26111111111111E-04  
.PARAM Ep=11379310.3448276  psi=0.2716875  Un=0.00008625  Utn=0.025875  
.PARAM Utnbr=0.207  W=8.35059264  Cox=6.33806188888889E-09  h2=6.4715625E-15  
.PARAM Vn=0.383223989569752  g10=76871208.96  g11=2  g13=193452.444645322  
.PARAM g14=53808.3538083538  g15=-0.875470147486198  g16=-25.2592831642462  
.PARAM g17=3.32226242183668E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2} 
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N08S2L-07/L2/INF drain gate source Tj 
.PARAM L=0.00000058  g2=0.039875  vm=453750  theta=0.045  Fm=0.18  kappa=0.7  
.PARAM c=0.85  Vth=2.9  Rs=0.001  Rd=0.0004  T=300  Tref=273  auth=0.0032  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.825  
.PARAM Acfdg=1.4  Ukn=50  coxi=6.27545454545454E-04  Ep=11379310.3448276  
.PARAM psi=0.2716875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=8.32473408  
.PARAM Cox=9.42485416363636E-09  h2=6.4715625E-15  Vn=0.176688396349413  
.PARAM g10=75939655.68  g11=2.2  g13=189806.414699003  g14=53808.3538083538  
.PARAM g15=-0.594455038416554  g16=-25.2592831642462  g17=3.2820020369936E-09  
.PARAM al=0.5   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPD30N08S2-22/L2/INF drain gate source Tj 
.PARAM L=0.00000062  g2=0.029  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.85  Vth=4.7  Rs=0.002  Rd=0.0012  T=300  Tref=273  auth=0.0042  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.6  
.PARAM Acfdg=1.35  Ukn=50  coxi=6.27545454545454E-04  Ep=11379310.3448276  
.PARAM psi=0.2716875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5404  
.PARAM Cox=2.83964318181818E-09  h2=6.4715625E-15  Vn=0.176688396349413  
.PARAM g10=23385600  g11=5.53197478936977E-07  g13=193452.382221652  
.PARAM g14=53808.3538083538  g15=-0.594455038416554  g16=-26.4492939205499  
.PARAM g17=1.01069179401786E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)} 
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/
+psi-k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.3
Cgs g s 1.29n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPD30N08S2L-21/L2/INF drain gate source Tj 
.PARAM L=0.00000058  g2=0.029  vm=330000  theta=0.045  Fm=0.18  kappa=0.7  
.PARAM c=0.85  Vth=2.9  Rs=0.002  Rd=0.0012  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.6  
.PARAM Acfdg=1.35  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.2716875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5636  Cox=3.904509375E-09  
.PARAM h2=6.4715625E-15  Vn=9.34550195567145E-02  g10=23385600  
+g11=5.53197478936977E-07  
.PARAM g13=193452.382221652  g14=53808.3538083538  g15=-0.432330937030221  
.PARAM g16=-26.4492939205499  g17=1.01069179401786E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg3(Ugs,Ugd) {if(Ugs>0,Cdg1(Ugd),Cdg2(Ugs,Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg3(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.1
Cgs g s 1.39n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80N03S2-03/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000046  g2=0.024  vm=330000  theta=0.06  Fm=0.45  kappa=1.1  
.PARAM c=0.95  Vth=4.7  Rs=0.001  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.75  
.PARAM Acfdg=1.05  Ukn=100  coxi=6.27545454545454E-04  Ep=13750000  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=13.4236904  
.PARAM Cox=5.21505961363637E-09  h2=6.4715625E-15  Vn=0.967579313342026  
.PARAM g10=652852608  g11=2.32802294592742E-07  g13=277860.642223634  
.PARAM g14=27205.8823529412  g15=-1.39109979034002  g16=-25.2592831642462  
.PARAM g17=9.49909907332851E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))} 
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.67
Cgs g s 5.00n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 173.9u
C_TH2 Tj2 Tamb 1.31m
C_TH3 Tj3 Tamb 6.46m
C_TH4 Tj4 Tamb 2.23m
C_TH5 Tj5 Tamb 138m
R_TH1 Tj Tj2 4.53m
R_TH2 Tj2 Tj3 22.7m
R_TH3 Tj3 Tj4 38m
R_TH4 Tj4 Tj5 86.5m
R_TH5 Tj5 Tcase 121m
.ENDS
*$
.SUBCKT SPP80N03S2L-03/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0011  Rd=0.0008  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=12.3592568  
+Cox=9.65448368235E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=1088087680  
+g11=2.32802294592742E-07  
.PARAM g13=218507.505954249  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-25.2577911833652  g17=9.38004369827613E-09  al=0.5   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.53
Cgs g s 5.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 173.9u
C_TH2 Tj2 Tamb 1.31m
C_TH3 Tj3 Tamb 6.46m
C_TH4 Tj4 Tamb 2.23m
C_TH5 Tj5 Tamb 138m
R_TH1 Tj Tj2 4.53m
R_TH2 Tj2 Tj3 22.7m
R_TH3 Tj3 Tj4 38m
R_TH4 Tj4 Tj5 86.5m
R_TH5 Tj5 Tcase 121m
.ENDS
*$
.SUBCKT SPD30N03S2L-08/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0023  Rd=0.0015  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.82449936  
+Cox=2.97683584497E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=336702336  
+g11=2.32802294592742E-07  
.PARAM g13=219200.255257484  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.4322618786555  g17=2.90259937966732E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.67
Cgs g s 1.714n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 53.8u
C_TH2 Tj2 Tamb 407u
C_TH3 Tj3 Tamb 2.08m
C_TH4 Tj4 Tamb 740u
C_TH5 Tj5 Tamb 32m
R_TH1 Tj Tj2 14.6m
R_TH2 Tj2 Tj3 73.4m
R_TH3 Tj3 Tj4 120m
R_TH4 Tj4 Tj5 192m
R_TH5 Tj5 Tcase 240m
.ENDS
*$
.SUBCKT IPB05N03L/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0011  Rd=0.0012  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.01936072  
+Cox=3.906879554565E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=441895872  
+g11=2.32802294592742E-07  
.PARAM g13=219199.666431687  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.1603856063749  g17=3.80943803117763E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.75
Cgs g s 2.25n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 70.6u
C_TH2 Tj2 Tamb 534u
C_TH3 Tj3 Tamb 2.70m
C_TH4 Tj4 Tamb 951u
C_TH5 Tj5 Tamb 66m
R_TH1 Tj Tj2 11.2m
R_TH2 Tj2 Tj3 56m
R_TH3 Tj3 Tj4 92m
R_TH4 Tj4 Tj5 202m
R_TH5 Tj5 Tcase 265m
.ENDS
*$
.SUBCKT IPB10N03L/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0014  Rd=0.0016  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5834908  
+Cox=2.010897915975E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=227446080  
+g11=2.32802294592742E-07  
.PARAM g13=219199.002302457  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.8245452500616  g17=1.96073736392421E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,
+ if(Ugd<-1,1/SQRT(1-+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.44
Cgs g s 1.158n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 36.3u
C_TH2 Tj2 Tamb 275.4u
C_TH3 Tj3 Tamb 1.44m
C_TH4 Tj4 Tamb 517u
C_TH5 Tj5 Tamb 44m
R_TH1 Tj Tj2 21.7m
R_TH2 Tj2 Tj3 109m
R_TH3 Tj3 Tj4 175m
R_TH4 Tj4 Tj5 396m
R_TH5 Tj5 Tcase 500m
.ENDS
*$
.SUBCKT IPD12N03L/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.003  Rd=0.0012  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.33897752  
+Cox=1.820585519415E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=205919552  
+g11=2.32802294592742E-07  
.PARAM g13=219198.141252087  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.9239710301996  g17=1.77516429198927E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.2
Cgs g s 1.05n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 32.9u
C_TH2 Tj2 Tamb 249u
C_TH3 Tj3 Tamb 1.31m
C_TH4 Tj4 Tamb 473u
C_TH5 Tj5 Tamb 25m
R_TH1 Tj Tj2 24m
R_TH2 Tj2 Tj3 120m
R_TH3 Tj3 Tj4 193m
R_TH4 Tj4 Tj5 407m
R_TH5 Tj5 Tcase 505m
.ENDS
*$
.SUBCKT IPB15N03L/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.002  Rd=0.0026  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7069448  
+Cox=1.32863387085E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=150276480  
+g11=2.32802294592742E-07  
.PARAM g13=219197.781746651  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-27.2389790281525  g17=1.29548378787187E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.6+0.4*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.06
Cgs g s 0.765n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 24u
C_TH2 Tj2 Tamb 182u
C_TH3 Tj3 Tamb 972u
C_TH4 Tj4 Tamb 357u
C_TH5 Tj5 Tamb 30m
R_TH1 Tj Tj2 32.8m
R_TH2 Tj2 Tj3 164m
R_TH3 Tj3 Tj4 261m
R_TH4 Tj4 Tj5 539m
R_TH5 Tj5 Tcase 650m
.ENDS
*$
.SUBCKT BSO4420/L3/INF drain gate source Tj Tsolder_joint Tamb 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0033  Rd=0.001  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.53847032  
+Cox=2.754200392515E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=311520832  
+g11=2.32802294592742E-07  
.PARAM g13=219200.395793134  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.5099952324235  g17=2.68551796954758E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.33
Cgs g s 1.586n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 52.5u
C_TH2 Tj2 Tamb 118.5u
C_TH3 Tj3 Tamb 1.85m
C_TH4 Tj4 Tamb 8.97m
C_TH5 Tj5 Tamb 76.2m
R_TH1 Tj Tj2 3.18m
R_TH2 Tj2 Tj3 45.2m
R_TH3 Tj3 Tj4 595m
R_TH4 Tj4 Tj5 7.89
R_TH5 Tj5 Tsolder_joint 11.98
.ENDS
*$
.SUBCKT BSO301SN/L3/INF drain gate source Tj Tsolder_joint Tamb 
.PARAM L=0.00000042  g2=0.032  vm=330000  theta=0.045  Fm=0.414  kappa=0.6  
.PARAM c=0.95  Vth=2.9  Rs=0.0033  Rd=0.001  T=300  Tref=273  auth=0.004  
.PARAM aubr=0.029  Ibr=0.0000000001  Ubr=31  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.9  Ukn=150  coxi=0.000862875  Ep=10312500  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=3.53847032  
+Cox=2.754200392515E-09  
.PARAM h2=6.4715625E-15  Vn=0.511777488048675  g10=311520832  
+g11=2.32802294592742E-07  
.PARAM g13=219200.395793134  g14=30467.720685112  g15=-1.01170893842911  
.PARAM g16=-26.5099952324235  g17=2.68551796954758E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.33
Cgs g s 1.586n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 1nH
LG ga1 gate  4nH
LS so1 source 1nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 52.5u
C_TH2 Tj2 Tamb 118.5u
C_TH3 Tj3 Tamb 1.85m
C_TH4 Tj4 Tamb 8.97m
C_TH5 Tj5 Tamb 76.2m
R_TH1 Tj Tj2 3.18m
R_TH2 Tj2 Tj3 45.2m
R_TH3 Tj3 Tj4 595m
R_TH4 Tj4 Tj5 7.89
R_TH5 Tj5 Tsolder_joint 11.98
.ENDS
*$
.SUBCKT SPP80N04S2-04/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000048  g2=0.017  vm=330000  theta=0.06  Fm=0.45  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0011  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=1 
.PARAM Acfdg=0.9  Ukn=100  coxi=6.27545454545454E-04  Ep=19411764.7058824  
.PARAM psi=0.25875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.86697072  
.PARAM Cox=6.684002325E-09  h2=6.4715625E-15  Vn=0.757235984354629  
.PARAM g10=453675340.8  g11=2.64219403534039E-07  g13=256705.5484869  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.2492552250601  
.PARAM g17=7.49186424651737E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.6
Cgs g s 4.76n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 228.3u
C_TH2 Tj2 Tamb 1323u
C_TH3 Tj3 Tamb 6.46m
C_TH4 Tj4 Tamb 2.25m
C_TH5 Tj5 Tamb 139m
R_TH1 Tj Tj2 4.64m
R_TH2 Tj2 Tj3 22.4m
R_TH3 Tj3 Tj4 37.4m
R_TH4 Tj4 Tj5 85.7m
R_TH5 Tj5 Tcase 120m
.ENDS
*$
.SUBCKT SPP80N04S2-H4/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000048  g2=2.50363636363636E-02  vm=486000  theta=0.06  
.PARAM Fm=0.45  kappa=0.7  c=0.65  Vth=4.7  Rs=0.0011  Rd=0.0002  T=300  
.PARAM Tref=273  auth=0.0064  aubr=0.043  Ibr=0.0000000001  Ubr=44  
.PARAM k1=0.5  k2=1.5  Acfgs2=0.85  Acfdg=1.05  Ukn=100 
+ coxi=4.26111111111111E-04  
.PARAM Ep=19411764.7058824  psi=0.25875  Un=0.00008625  Utn=0.025875  
.PARAM Utnbr=0.207  W=9.7839016  Cox=3.74184145833333E-09  h2=6.4715625E-15  
.PARAM Vn=1.64  g10=374039424  g11=2  g13=256706.104862125  
.PARAM g14=34203.6553524804  g15=-1.2306388457664  g16=-25.4422768393583  
.PARAM g17=6.17677959421847E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.0}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.3
Cgs g s 3.921n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 188u
C_TH2 Tj2 Tamb 1.09m
C_TH3 Tj3 Tamb 5.36m
C_TH4 Tj4 Tamb 1.87m
C_TH5 Tj5 Tamb 118m
R_TH1 Tj Tj2 5.64m
R_TH2 Tj2 Tj3 27.1m
R_TH3 Tj3 Tj4 45.3m
R_TH4 Tj4 Tj5 103m
R_TH5 Tj5 Tcase 152m
.ENDS
.SUBCKT SPP80N04S2L-04/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000045  g2=0.028  vm=330000  theta=0.06  Fm=0.3416  kappa=0.8  
.PARAM c=0.75  Vth=2.9  Rs=0.0011  Rd=0.0005  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.043  Ibr=0.0000000001  Ubr=44  k1=0.5  k2=1.5  Acfgs2=0.8 
.PARAM Acfdg=1.05  Ukn=100  coxi=0.000862875  Ep=11785714.2857143  psi=0.25875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=11.9457338  
+Cox=9.190503196875E-09  
.PARAM h2=6.4715625E-15  Vn=0.400521512385919  g10=453675340.8  
+g11=2.64219403534039E-07  
.PARAM g13=256705.5484869  g14=34203.6553524804  g15=-0.895010069648291  
.PARAM g16=-25.2492552250601  g17=7.17970323624582E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.23
Cgs g s 5.45n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 228.3u
C_TH2 Tj2 Tamb 1.323m
C_TH3 Tj3 Tamb 6.46m
C_TH4 Tj4 Tamb 2.245m
C_TH5 Tj5 Tamb 139m
R_TH1 Tj Tj2 4.65m
R_TH2 Tj2 Tj3 22.4m
R_TH3 Tj3 Tj4 38m
R_TH4 Tj4 Tj5 86m
R_TH5 Tj5 Tcase 121m
.ENDS
*$
.SUBCKT SPP80N06S2-05/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000055  g2=0.025  vm=330000  theta=0.06  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0012  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=13200000  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=9.7452864  
+Cox=8.16612349090909E-09  
.PARAM h2=6.4715625E-15  Vn=0.504823989569753  g10=252282470.4  
+g11=3.25183771572503E-07  
.PARAM g13=215818.267307169  g14=41523.3415233415  g15=-1.00481240992511  
.PARAM g16=-25.2626482823965  g17=5.34102638192059E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.57n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 286.6u
C_TH2 Tj2 Tamb 1306u
C_TH3 Tj3 Tamb 6.33m
C_TH4 Tj4 Tamb 2.215m
C_TH5 Tj5 Tamb 137m
R_TH1 Tj Tj2 4.84m
R_TH2 Tj2 Tj3 22.5m
R_TH3 Tj3 Tj4 37.8m
R_TH4 Tj4 Tj5 86.9m
R_TH5 Tj5 Tcase 121m
.ENDS
*$
.SUBCKT SPP80N06S2L-05/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0013  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9 
.PARAM Acfdg=0.8  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=9.7452864  Cox=1.12284198E-08  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=231258931.2  
+g11=3.39921199196877E-07  
.PARAM g13=215818.267307169  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-25.2626482823965  g17=5.11782638141224E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.91
Cgs g s 5.46n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 268.6u
C_TH2 Tj2 Tamb 1306u
C_TH3 Tj3 Tamb 6.33m
C_TH4 Tj4 Tamb 2.215m
C_TH5 Tj5 Tamb 137m
R_TH1 Tj Tj2 4.88m
R_TH2 Tj2 Tj3 22.5m
R_TH3 Tj3 Tj4 37.8m
R_TH4 Tj4 Tj5 86.9m
R_TH5 Tj5 Tcase 121m
.ENDS
*$
.SUBCKT SPP80N06S2-08/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000055  g2=0.018  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.001  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=18333333.3333333  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.4493276  
.PARAM Cox=4.56630312272727E-09  h2=6.4715625E-15  Vn=0.462755323772273  
.PARAM g10=129314380.8  g11=3.39921199196877E-07  g13=215818.057828832  
.PARAM g14=41523.3415233415  g15=-0.962034639472273  g16=-25.8439392362516  
.PARAM g17=2.86176428352458E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5016
Cgs g s 2.56n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 150.2u
C_TH2 Tj2 Tamb 731.3u
C_TH3 Tj3 Tamb 3.60m
C_TH4 Tj4 Tamb 1.277m
C_TH5 Tj5 Tamb 93m
R_TH1 Tj Tj2 8.66m
R_TH2 Tj2 Tj3 40m
R_TH3 Tj3 Tj4 67m
R_TH4 Tj4 Tj5 161m
R_TH5 Tj5 Tcase 210m
.ENDS
*$
.SUBCKT SPP80N06S2L-07/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0016  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.4493276  
+Cox=6.27866679375E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=129314380.8  
+g11=3.39921199196877E-07  
.PARAM g13=215818.057828832  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-25.8439392362516  g17=2.86176428352458E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.49
Cgs g s 3.056n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 150.6u
C_TH2 Tj2 Tamb 733u
C_TH3 Tj3 Tamb 3.612m
C_TH4 Tj4 Tamb 1.28m
C_TH5 Tj5 Tamb 94m
R_TH1 Tj Tj2 8.63m
R_TH2 Tj2 Tj3 40m
R_TH3 Tj3 Tj4 66.8m
R_TH4 Tj4 Tj5 160m
R_TH5 Tj5 Tcase 210m
.ENDS
*$       
.SUBCKT SPD30N06S2-15/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000055  g2=0.018  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.65  Vth=4.7  Rs=0.0025  Rd=0.0003  T=300  Tref=273  auth=0.0064  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.8  Ukn=50  coxi=6.27545454545454E-04  Ep=18333333.3333333  
.PARAM psi=0.2199375  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.9710336  
.PARAM Cox=2.48959832727273E-09  h2=6.4715625E-15  Vn=0.462755323772273  
.PARAM g10=70503628.8  g11=3.39921199196877E-07  g13=215818.101160047  
.PARAM g14=41523.3415233415  g15=-0.962034639472273  g16=-26.4505216677883  
.PARAM g17=1.5602654980096E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),ble(Uds,Ugs,
+Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.3575
Cgs g s 1.39n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 82u
C_TH2 Tj2 Tamb 400u
C_TH3 Tj3 Tamb 2.01m
C_TH4 Tj4 Tamb 726u
C_TH5 Tj5 Tamb 24m
R_TH1 Tj Tj2 15.9m
R_TH2 Tj2 Tj3 73.8m
R_TH3 Tj3 Tj4 121m
R_TH4 Tj4 Tj5 170m
R_TH5 Tj5 Tcase 200m
.ENDS
*$       
.SUBCKT SPD30N06S2L-13/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0035  Rd=0.0005  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.9710336  Cox=3.4231977E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=70503628.8  
+g11=3.39921199196877E-07  
.PARAM g13=215818.101160047  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.4505216677883  g17=1.5602654980096E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.4
Cgs g s 1.665n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 81.9u
C_TH2 Tj2 Tamb 400u
C_TH3 Tj3 Tamb 2.01m
C_TH4 Tj4 Tamb 726u
C_TH5 Tj5 Tamb 24m
R_TH1 Tj Tj2 15.9m
R_TH2 Tj2 Tj3 73.8m
R_TH3 Tj3 Tj4 121.m
R_TH4 Tj4 Tj5 170m
R_TH5 Tj5 Tcase 200m
.ENDS
*$
.SUBCKT SPD30N06S2L-23/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0035  Rd=0.001  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7952012  
+Cox=2.06973511875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=42600729.6  
+g11=3.39921199196877E-07  
.PARAM g13=215698.15713797  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.9540033172985  g17=9.4276634715455E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)+
+Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.5
Cgs g s 1.007n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 49.5u
C_TH2 Tj2 Tamb 242.1u
C_TH3 Tj3 Tamb 1.25m
C_TH4 Tj4 Tamb 459u
C_TH5 Tj5 Tamb 16m
R_TH1 Tj Tj2 26.3m
R_TH2 Tj2 Tj3 122m
R_TH3 Tj3 Tj4 197m
R_TH4 Tj4 Tj5 268m
R_TH5 Tj5 Tcase 307m
.ENDS
*$
.SUBCKT BSP603S2L/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.0075  Rd=0.0025  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.7952012  
+Cox=2.06973511875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=42600729.6  
+g11=3.39921199196877E-07  
.PARAM g13=215698.15713797  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-26.9540033172985  g17=9.4276634715455E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.6
Cgs g s 1.007n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 3nH
LG ga1 gate  5nH
LS so1 source 3nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 50.3u
C_TH2 Tj2 Tamb 82.2u
C_TH3 Tj3 Tamb 1.25m
C_TH4 Tj4 Tamb 7.7m
C_TH5 Tj5 Tamb 105m
R_TH1 Tj Tj2 6.47m
R_TH2 Tj2 Tj3 73.5m
R_TH3 Tj3 Tj4 1.426
R_TH4 Tj4 Tj5 5.14
R_TH5 Tj5 Tsolder_joint 3.04
.ENDS
*$
.SUBCKT BSO604NS2/L3/INF drain1 gate1 source1 drain1a drain2 gate2 source2 
+drain2a Tj1 Tsolder_joint1 Tj2 Tsolder_joint2 Tamb
.PARAM L=0.00000055  g2=0.029  vm=330000  theta=0.045  Fm=0.15  kappa=0.7  
.PARAM c=0.65  Vth=2.9  Rs=0.008  Rd=0.00325  T=300  Tref=273  auth=0.0047  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=63.4  k1=0.5  k2=1.5  Acfgs2=0.9  
.PARAM Acfdg=0.95  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.1940625  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.1289294  
+Cox=1.301582221875E-09  
.PARAM h2=6.4715625E-15  Vn=0.244763146458062  g10=26789875.2  
+g11=3.39921199196877E-07  
.PARAM g13=215696.77906323  g14=41523.3415233415  g15=-0.699661555979835  
.PARAM g16=-27.4178470956518  g17=5.92867610958247E-10  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj1)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj1))),-500,500),0)}
R1 gate1 source1 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj1)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.11
Cgs g s 633p
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD1 dr1 drainn1 1nH
LD1a dr1 drainn1a 1nH
LG ga1 gate1  4nH
LS so1 source1 1nH
Rpin1 drainn1 drain1 500u
Rpin1a drainn1a drain1a 500u
G_G2 d2 s2 
+VALUE={li1(V(d2,s2),V(g2,s2),lm(V(Tj2)))+if(Time>100p,SL(DDT(V(d2,s2))*
+Cds(V(d2,s2),lm(V(Tj2))),-500,500),0)}
R2 gate2 source2 2G
Rd02 d2 s2 500Meg
C_h22 d2 g2 0.3p
Gd2 dr2 d2 VALUE = {V(dr2,d2)/Rdr(V(d2,s2),lm(V(Tj2)))}
R992 dr2 d2 1k  
Rs2 so2 s2 {Rs}
RG2 ga2 g2 1.11
Cgs2 g2 s2 633p
G_G52 g2 s2 VALUE = {if(Time>100p,DDT(V(g2,s2))*Cgs2(V(g2,s2),V(d2,s2)),0)}
G_G72 g2 d2 VALUE = {if(Time>100p,DDT(V(g2,d2))*Cdg(V(g2,s2),V(g2,d2)),0)}
LD2 dr2 drainn2 1nH
LD2a dr2 drainn2a 1nH
LG2 ga2 gate2  4nH
LS2 so2 source2 1nH
Rpin2 drainn2 drain2 500u
Rpin2a drainn2a drain2a 500u
G_TH1 Tamb Tj1 VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH11 Tj1 Tamb 31.6u
C_TH12 Tj12 Tamb 52u
C_TH13 Tj13 Tamb 806u
C_TH14 Tj14 Tamb 4.80m
C_TH15 Tj15 Tamb 51m
R_TH11 Tj1 Tj12 10.3m
R_TH12 Tj12 Tj13 118.5m
R_TH13 Tj13 Tj14 2.09
R_TH14 Tj14 Tj15 20.39
R_TH15 Tj15 Tsolder_joint1 20
G_TH2 Tamb Tj2 VALUE = {LIMIT(V(dr2,so2)*V(s2,so2)/Rs,0,100k)}
C_TH21 Tj2 Tamb 31.6u
C_TH22 Tj22 Tamb 52u
C_TH23 Tj23 Tamb 806u
C_TH24 Tj24 Tamb 4.8m
C_TH25 Tj25 Tamb 51m
R_TH21 Tj2 Tj22 10.3m
R_TH22 Tj22 Tj23 118.5m
R_TH23 Tj23 Tj24 2.09
R_TH24 Tj24 Tj25 20.39
R_TH25 Tj25 Tsolder_joint2 20
Ck1 Tcoup Tamb 3m
Rk1 Tj14 Tcoup 115
Rk2 Tj24 Tcoup 115
.ENDS
*$
.SUBCKT SPP80N08S2-07/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000062  g2=4.27090909090909E-02  vm=486000  theta=0.05  
.PARAM Fm=0.3  kappa=0.7  c=0.85  Vth=4.7  Rs=0.0012  Rd=0.0004  T=300  
.PARAM Tref=273  auth=0.0042  aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  
.PARAM k1=0.5  k2=1.5  Acfgs2=0.884  Acfdg=1.4  Ukn=50  
+coxi=4.26111111111111E-04  
.PARAM Ep=11379310.3448276  psi=0.2716875  Un=0.00008625  Utn=0.025875  
.PARAM Utnbr=0.207  W=8.35059264  Cox=6.33806188888889E-09  h2=6.4715625E-15  
.PARAM Vn=0.383223989569752  g10=76871208.96  g11=2  g13=193452.444645322  
.PARAM g14=53808.3538083538  g15=-0.875470147486198  g16=-25.2592831642462  
.PARAM g17=3.32226242183668E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.24n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 5.5nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 313u
C_TH2 Tj2 Tamb 1.31u
C_TH3 Tj3 Tamb 6.31m
C_TH4 Tj4 Tamb 2.22m
C_TH5 Tj5 Tamb 138m
R_TH1 Tj Tj2 4.96m
R_TH2 Tj2 Tj3 22.3m
R_TH3 Tj3 Tj4 37.6m
R_TH4 Tj4 Tj5 86.6m
R_TH5 Tj5 Tcase 141m
.ENDS
*$
.SUBCKT SPD30N08S2-22/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000062  g2=0.029  vm=330000  theta=0.05  Fm=0.3  kappa=0.7  
.PARAM c=0.85  Vth=4.7  Rs=0.002  Rd=0.0012  T=300  Tref=273  auth=0.0042  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.6  
.PARAM Acfdg=1.35  Ukn=50  coxi=6.27545454545454E-04  Ep=11379310.3448276  
.PARAM psi=0.2716875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5404  
.PARAM Cox=2.83964318181818E-09  h2=6.4715625E-15  Vn=0.176688396349413  
.PARAM g10=23385600  g11=5.53197478936977E-07  g13=193452.382221652  
.PARAM g14=53808.3538083538  g15=-0.594455038416554  g16=-26.4492939205499  
.PARAM g17=1.01069179401786E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.3
Cgs g s 1.29n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 95u
C_TH2 Tj2 Tamb 400u
C_TH3 Tj3 Tamb 2m
C_TH4 Tj4 Tamb 726u
C_TH5 Tj5 Tamb 24m
R_TH1 Tj Tj2 16.3m
R_TH2 Tj2 Tj3 73m
R_TH3 Tj3 Tj4 121m
R_TH4 Tj4 Tj5 170m
R_TH5 Tj5 Tcase 202m
.ENDS
*$
.SUBCKT SPD30N08S2L-21/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000058  g2=0.029  vm=330000  theta=0.045  Fm=0.18  kappa=0.7  
.PARAM c=0.85  Vth=2.9  Rs=0.002  Rd=0.0012  T=300  Tref=273  auth=0.0038  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.6  
.PARAM Acfdg=1.35  Ukn=50  coxi=0.000862875  Ep=11379310.3448276  psi=0.2716875  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=2.5636  Cox=3.904509375E-09  
.PARAM h2=6.4715625E-15  Vn=9.34550195567145E-02  g10=23385600  
+g11=5.53197478936977E-07  
.PARAM g13=193452.382221652  g14=53808.3538083538  g15=-0.432330937030221  
.PARAM g16=-26.4492939205499  g17=1.01069179401786E-09  al=0.5  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.1
Cgs g s 1.39n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 9nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 95.21u
C_TH2 Tj2 Tamb 400u
C_TH3 Tj3 Tamb 2m
C_TH4 Tj4 Tamb 726u
C_TH5 Tj5 Tamb 24m
R_TH1 Tj Tj2 16.3m
R_TH2 Tj2 Tj3 73m
R_TH3 Tj3 Tj4 121m
R_TH4 Tj4 Tj5 170m
R_TH5 Tj5 Tcase 202m
.ENDS
*$
.SUBCKT SPP80N08S2L-07/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.00000058  g2=0.039875  vm=453750  theta=0.045  Fm=0.18  kappa=0.7  
.PARAM c=0.85  Vth=2.9  Rs=0.001  Rd=0.0004  T=300  Tref=273  auth=0.0032  
.PARAM aubr=0.0697  Ibr=0.0000000001  Ubr=82.6  k1=0.5  k2=1.5  Acfgs2=0.825  
.PARAM Acfdg=1.4  Ukn=50  coxi=6.27545454545454E-04  Ep=11379310.3448276  
.PARAM psi=0.2716875  Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=8.32473408  
.PARAM Cox=9.42485416363636E-09  h2=6.4715625E-15  Vn=0.176688396349413  
.PARAM g10=75939655.68  g11=2.2  g13=189806.414699003  g14=53808.3538083538  
.PARAM g15=-0.594455038416554  g16=-25.2592831642462  g17=3.2820020369936E-09  
.PARAM al=0.5   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)+Fm*SQRT(max(0,Uds))}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Udssat(Uds,Ugs,Tj)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Ue(Uds,Ugs,Tj))*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj))  {if(Uds>Udssat(Uds,Ugs,Tj),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Udssat(Uds,Ugs,Tj)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj)  
+{W/(Lshort(Uds,Ugs,Tj)*((1+theta*Ue(Uds,Ugs,Tj))*(1/(g2*(Tref/(Tref+Tj))**1.5)
++Uds/(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj)  {min(Udssat(Uds,Ugs,Tj),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Ugs,Tj)  {(psi*en(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj)**2)*exp(min(h7(Ue(Uds,Ugs,Tj))/psi-1,23))}
.FUNC  I2(Uds,Ugs,Tj)  {if(Uds>0,(Ue(Uds,Ugs,Tj)-
+c*en(Uds,Ugs,Tj))*en(Uds,Ugs,Tj),0)}
.FUNC  h3(Uds,Ugs,Tj)  {(3-2*(Ue(Uds,Ugs,Tj)/psi-k1))*((Ue(Uds,Ugs,Tj)/psi-
+k1))**2}
.FUNC  ble(Uds,Ugs,Tj) {h3(Uds,Ugs,Tj)*I2(Uds,Ugs,Tj)+(1-
+h3(Uds,Ugs,Tj))*I1(Uds,Ugs,Tj)}
.FUNC  I3(Uds,Ugs,Tj)  
+{if(Ue(Uds,Ugs,Tj)/psi<k2,if(Ue(Uds,Ugs,Tj)/psi<k1,I1(Uds,Ugs,Tj),
+ble(Uds,Ugs,Tj)),I2(Uds,Ugs,Tj))}
.FUNC  Ig(Uds,Ugs,Tj) {beta(Uds,Ugs,Tj)*I3(Uds,Ugs,Tj)}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**2.2}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg2(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  Cdg(Ugs,Ugd)  {Cdg2(Ugs,Ugd)*(if(Ugs-Ugd>0,0.5+0.5*exp(-((Ugs-
+Ugd)**2)/Ukn),1))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s 
+VALUE={li1(V(d,s),V(g,s),lm(V(Tj)))+if(Time>100p,SL(DDT(V(d,s))*Cds(V(d,s),
+lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(d,s),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 1.9
Cgs g s 4.54n
G_G5 g s VALUE = {if(Time>100p,DDT(V(g,s))*Cgs2(V(g,s),V(d,s)),0)}
G_G7 g d VALUE = {if(Time>100p,DDT(V(g,d))*Cdg(V(g,s),V(g,d)),0)}
LD dr1 drain 5nH
LG ga1 gate  10nH
LS so1 source 7nH
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 316u
C_TH2 Tj2 Tamb 1.323m
C_TH3 Tj3 Tamb 6.367m
C_TH4 Tj4 Tamb 2.243m
C_TH5 Tj5 Tamb 139m
R_TH1 Tj Tj2 4.91m
R_TH2 Tj2 Tj3 22.1m
R_TH3 Tj3 Tj4 37.2m
R_TH4 Tj4 Tj5 85.8m
R_TH5 Tj5 Tcase 160.6m
.ENDS
*$
.SUBCKT SPP08P06P/L1/INF drain gate source
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.003  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=5.49212906666667E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6 
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 75.3
Cgs g s 272p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 9n
E_01 tes1 0 VALUE {Time}
.ENDS
*$
.SUBCKT SPP18P06P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0025  Rd=0.002  T=300  Tref=273  auth=0.0048  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  
.PARAM Acfdg=0.7  coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98  
+ Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=6.42790807484029E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 592p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 9n
.ENDS
*$
.SUBCKT SPU09P06PL/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.005  Rd=0.001  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.25  Acfdg=0.7  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=8.08840826181818E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))} 
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 80.1
Cgs g s 338p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 9n
.ENDS
*$
.SUBCKT BSP613P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.012  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98 
+ Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=5.14232645987223E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 592p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1.5n
.ENDS
*$
.SUBCKT BSO613SPV/L1/INF drain gate source
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.01  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98  
+Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=5.14232645987223E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-
+Ird(-Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2
+ -0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 592p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1n
.ENDS
*$
.SUBCKT BSP170P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.023  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=5.49212906666667E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-27.7057446621245  g17=2.36708633128576E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.3p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 75.3
Cgs g s 272p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 2n
.ENDS
*$
.SUBCKT BSP315P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.04  Rd=0.01  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.15554  
+Cox=2.78931403636364E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=216200.6  
.PARAM g13=85446.0426226604  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-28.7704553991169  g17=1.06100887228478E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 44
Cgs g s 117p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 3n
LS so1 source 2n
.ENDS
*$
.SUBCKT BSS84P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.12  Rd=0.03  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.01778  
+Cox=3.19169618181818E-11  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=24714.2  
.PARAM g13=85366.1983546611  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-30.9387281545034  g17=1.21285442646415E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 13.3p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
.ENDS
*$
.SUBCKT BSS84PW/L1/INF drain gate source
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.1  Rd=0.05  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.01778  
+Cox=3.19169618181818E-11  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=24714.2  
.PARAM g13=85366.1983546611  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-30.9387281545034  g17=1.21285442646415E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 13.3p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
.ENDS
*$
.SUBCKT BSS83P/L1/INF drain gate source
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.1  Rd=0.03  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.9  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.062216  
+Cox=1.11572561454545E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=86480.24  
.PARAM g13=85446.0426226604  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-29.6867461309911  g17=4.24403548913913E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 28
Cgs g s 46.6p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
.ENDS
*$
.SUBCKT BSP171P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.023  Rd=0.002  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.25  Acfdg=0.7  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=8.08840826181818E-10   .PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=591209.256  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 80.1
Cgs g s 338p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 2n
.ENDS
*$
.SUBCKT SPD30P06P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0023  Rd=0.0015  T=300  Tref=273  auth=0.0048  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  
.PARAM Acfdg=0.7  coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.629432  
+Cox=1.98379607111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=2264910.48  
.PARAM g13=85459.3187516888  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.4214639333087  g17=1.06875909287787E-09  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.56
Cgs g s 984p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
.ENDS
*$
.SUBCKT SPP80P06P/L1/INF drain gate source 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0011  Rd=0.001  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.3375  
+Cox=6.49819444444444E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=7419125  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-25.2349456798472  g17=3.50091421933266E-09  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.PARAM h1={L*vm/(g2*(Tref/(Tref+TEMP))**1.5)}
.PARAM h4={g10*(Tref/(Tref+TEMP))**1.5}
.PARAM Is={exp(min(g16+((TEMP+Tref)/T-
+1)*(1.12/(Un*(TEMP+Tref))),23))*((TEMP+Tref)/T)**3}
.FUNC  Ue(Uds,Ugs)  {Ugs-Vth+auth*(TEMP+Tref-T)}
.FUNC  Ust(Uds,Ugs,Uee)  {-h1+SQRT(max(h1**2+MAX(psi,Uee)*h1/c,0))}
.FUNC  Lshort(Uds,Ugs,Uee))  {if(Uds>Ust(Uds,Ugs,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Uee)  
+{W/(Lshort(Uds,Ugs,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+TEMP))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Uee)  {min(Ust(Uds,Ugs,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs) 
+{beta(Uds,Ugs,Ue(Uds,Ugs))*I3(Uds,Ue(Uds,Ugs),en(Uds,Ugs,Ue(Uds,Ugs)))}
.FUNC  Ird(Usd)  {-Is+exp(min(log(Is)+Usd/(Un*(TEMP+Tref)),23))}
.FUNC  Idbr(Uds)  {exp(min(log(IBr)+(Uds-UBr-aubr*(TEMP+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-1)/2/al,Ugs)+Idbr(Uds)-Ird(-
+Uds),-Ig(-Uds,Ugs)-Ird(-Uds))}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x)  {if(x<0,Rdiod(-x),g13)/h4}
.FUNC  Rdr(x)  {RSi(x)+(Rd+Rs)*(1+0.0039*(TEMP+Tref-T))-Rs}
.FUNC  Cdiff(x) {30n*Ird(-x)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x) {Cdiff(h6(x))+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs)  {SL(Iges(Uds,Ugs),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g))-if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d)),
+ -500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.94
Cgs g s 3.22n
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
.ENDS
*$
.SUBCKT SPP08P06P/L2/INF drain gate source Tj
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.003  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+ Cox=5.49212906666667E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 75.3
Cgs g s 272p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 9n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP18P06P/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0025  Rd=0.002  T=300  Tref=273  auth=0.0048  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  
.PARAM Acfdg=0.7  coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98  
+Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=6.42790807484029E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee) 
+ {-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 592p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 9n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPU09P06PL/L2/INF drain gate source Tj       
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.005  Rd=0.001  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.25  Acfdg=0.7  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=8.08840826181818E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-
+1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 80
Cgs g s 338p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSP315P/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.04  Rd=0.01  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.15554  
+Cox=2.78931403636364E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=216200.6  
.PARAM g13=85446.0426226604  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-28.7704553991169  g17=1.06100887228478E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 44
Cgs g s 117p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 3n
LS so1 source 2n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSS84P/L2/INF drain gate source Tj
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.12  Rd=0.03  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.01778  
+Cox=3.19169618181818E-11  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=24714.2  
.PARAM g13=85366.1983546611  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-30.9387281545034  g17=1.21285442646415E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 13.3p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSS84PW/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.1  Rd=0.05  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.01778  
+Cox=3.19169618181818E-11  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=24714.2  
.PARAM g13=85366.1983546611  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-30.9387281545034  g17=1.21285442646415E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 13.3p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSS83P/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.1  Rd=0.03  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.9  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.062216  
+Cox=1.11572561454545E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=86480.24  
.PARAM g13=85446.0426226604  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-29.6867461309911  g17=4.24403548913913E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 28
Cgs g s 46.6p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSP171P/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.023  Rd=0.002  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.25  Acfdg=0.7  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=8.08840826181818E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=591209.256  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 80
Cgs g s 338p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1.5n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPD30P06P/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0023  Rd=0.0015  T=300  Tref=273  auth=0.0048  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  
.PARAM Acfdg=0.7  coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.629432  
+Cox=1.98379607111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=2264910.48  
.PARAM g13=85459.3187516888  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.4214639333087  g17=1.06875909287787E-09  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.56
Cgs g s 984p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSP613P/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.012  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98  
+Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200   
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=5.14232645987223E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 591p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1.5n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSO613SPV/L2/INF drain gate source Tj 
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.01  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98  
+Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=5.14232645987223E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee) 
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 592p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT BSP170P/L2/INF drain gate source Tj
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.023  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=5.49212906666667E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 75.3
Cgs g s 272p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 2n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP80P06P/L2/INF drain gate source Tj 

.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0011  Rd=0.001  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.3375  
+Cox=6.49819444444444E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=7419125  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-25.2349456798472  g17=3.50091421933266E-09  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene) 
+ {if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2
+-0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.94
Cgs g s 3.22n
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
Vref Tja 0 27
Rdummy Tja Tj 1
Cdummy Tj 0 1p
.ENDS
*$
.SUBCKT SPP08P06P/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.003  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=5.49212906666667E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 75.3
Cgs g s 272p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 9n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 28.2u
C_TH2 Tj2 Tamb 115u
C_TH3 Tj3 Tamb 588u
C_TH4 Tj4 Tamb 234u
C_TH5 Tj5 Tamb 24m
R_TH1 Tj Tj2 57.7m
R_TH2 Tj2 Tj3 248.2m
R_TH3 Tj3 Tj4 398m
R_TH4 Tj4 Tj5 876m
R_TH5 Tj5 Tcase 1.0
.ENDS
*$
.SUBCKT SPP18P06P/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0025  Rd=0.002  T=300  Tref=273  auth=0.0048  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  
.PARAM Acfdg=0.7  coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98 
+ Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=6.42790807484029E-10  al=0.6    
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 592p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 9n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 61.3u   
C_TH2 Tj2 Tamb 248u
C_TH3 Tj3 Tamb 1.21m
C_TH4 Tj4 Tamb 465u
C_TH5 Tj5 Tamb 41m
R_TH1 Tj Tj2 26.6m
R_TH2 Tj2 Tj3 114.5m
R_TH3 Tj3 Tj4 189m
R_TH4 Tj4 Tj5 441m
R_TH5 Tj5 Tcase 575m
.ENDS
*$
.SUBCKT SPU09P06PL/L3/INF drain gate source Tj Tcase Tamb     
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.005  Rd=0.001  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.25  Acfdg=0.7  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=8.08840826181818E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 80
Cgs g s 338p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 28.2u   
C_TH2 Tj2 Tamb 114.7u
C_TH3 Tj3 Tamb 588u
C_TH4 Tj4 Tamb 234u
C_TH5 Tj5 Tamb 24m
R_TH1 Tj Tj2 57.7m
R_TH2 Tj2 Tj3 248m
R_TH3 Tj3 Tj4 398m
R_TH4 Tj4 Tj5 876m
R_TH5 Tj5 Tcase 1
.ENDS
*$
.SUBCKT BSP315P/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.04  Rd=0.01  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.15554  
+Cox=2.78931403636364E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=216200.6  
.PARAM g13=85446.0426226604  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-28.7704553991169  g17=1.06100887228478E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 44
Cgs g s 117p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 3n
LS so1 source 2n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 7.99u
C_TH2 Tj2 Tamb 7.25u
C_TH3 Tj3 Tamb 168u
C_TH4 Tj4 Tamb 312u
C_TH5 Tj5 Tamb 14.1m
R_TH1 Tj Tj2 30.2m
R_TH2 Tj2 Tj3 402m
R_TH3 Tj3 Tj4 2.17
R_TH4 Tj4 Tj5 7.73
R_TH5 Tj5 Tsolder_joint 8.01
.ENDS
*$
.SUBCKT BSS84P/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.12  Rd=0.03  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.01778  
+Cox=3.19169618181818E-11  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=24714.2  
.PARAM g13=85366.1983546611  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-30.9387281545034  g17=1.21285442646415E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)>-
+1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 13.3p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 634n
C_TH2 Tj2 Tamb 782n
C_TH3 Tj3 Tamb 1.97u
C_TH4 Tj4 Tamb 30.6u
C_TH5 Tj5 Tamb 646u
R_TH1 Tj Tj2 161m
R_TH2 Tj2 Tj3 2.22
R_TH3 Tj3 Tj4 2.31
R_TH4 Tj4 Tj5 6.69
R_TH5 Tj5 Tsolder_joint 49.11
.ENDS
*$
.SUBCKT BSS84PW/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.1  Rd=0.05  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.8  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.01778  
+Cox=3.19169618181818E-11  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=24714.2  
.PARAM g13=85366.1983546611  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-30.9387281545034  g17=1.21285442646415E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-+1)/2/al,Ugs,Tj)+
+ Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 10
Cgs g s 13.3p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 908n
C_TH2 Tj2 Tamb 1.24u
C_TH3 Tj3 Tamb 7.1u
C_TH4 Tj4 Tamb 36.2u
C_TH5 Tj5 Tamb 660u
R_TH1 Tj Tj2 304m
R_TH2 Tj2 Tj3 1.80
R_TH3 Tj3 Tj4 2.67
R_TH4 Tj4 Tj5 6.15
R_TH5 Tj5 Tsolder_joint 55.2
.ENDS
*$
.SUBCKT BSS83P/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.1  Rd=0.03  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.9  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.062216  
+Cox=1.11572561454545E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=86480.24  
.PARAM g13=85446.0426226604  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-29.6867461309911  g17=4.24403548913913E-11  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 0.1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 28
Cgs g s 46.6p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 1n
LG ga1 gate 2n
LS so1 source 2n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 3.21u
C_TH2 Tj2 Tamb 2.24u
C_TH3 Tj3 Tamb 18.1u
C_TH4 Tj4 Tamb 118.6u
C_TH5 Tj5 Tamb 894u
R_TH1 Tj Tj2 67.9m
R_TH2 Tj2 Tj3 668m
R_TH3 Tj3 Tj4 1.023
R_TH4 Tj4 Tj5 14.4
R_TH5 Tj5 Tsolder_joint 55.4
.ENDS
*$
.SUBCKT BSP171P/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.07  kappa=1.4  c=0.85  
.PARAM Vth=1.9  Rs=0.023  Rd=0.002  T=300  Tref=273  auth=0.0025  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.25  Acfdg=0.7  
.PARAM coxi=6.27545454545454E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=8.08840826181818E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.273446327683616  g10=591209.256  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-0.739521909998096  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 80
Cgs g s 338p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1.5n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 23.6u
C_TH2 Tj2 Tamb 21.7u
C_TH3 Tj3 Tamb 496u
C_TH4 Tj4 Tamb 805u
C_TH5 Tj5 Tamb 13.8m
R_TH1 Tj Tj2 11.7m
R_TH2 Tj2 Tj3 142m
R_TH3 Tj3 Tj4 1.27
R_TH4 Tj4 Tj5 3.28
R_TH5 Tj5 Tsolder_joint 7.46
.ENDS
*$
.SUBCKT SPD30P06P/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0023  Rd=0.0015  T=300  Tref=273  auth=0.0048  
.PARAM aubr=0.061  Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  
.PARAM Acfdg=0.7  coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=1.629432  
+Cox=1.98379607111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=2264910.48  
.PARAM g13=85459.3187516888  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.4214639333087  g17=1.06875909287787E-09  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.56
Cgs g s 984p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 102u
C_TH2 Tj2 Tamb 411u
C_TH3 Tj3 Tamb 1.97m
C_TH4 Tj4 Tamb 741u
C_TH5 Tj5 Tamb 59m
R_TH1 Tj Tj2 16m
R_TH2 Tj2 Tj3 69m
R_TH3 Tj3 Tj4 115m
R_TH4 Tj4 Tj5 277m
R_TH5 Tj5 Tcase 361m
.ENDS
*$
.SUBCKT BSP613P/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.012  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98 
+ Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=5.14232645987223E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+ >-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 591p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1.5n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 51.6u   
C_TH2 Tj2 Tamb 50.6u
C_TH3 Tj3 Tamb 1.27m
C_TH4 Tj4 Tamb 7.7m
C_TH5 Tj5 Tamb 112m
R_TH1 Tj Tj2 5.89m
R_TH2 Tj2 Tj3 70.22m
R_TH3 Tj3 Tj4 1.41
R_TH4 Tj4 Tj5 5.21
R_TH5 Tj5 Tcase 2.97
.ENDS
*$
.SUBCKT BSO613SPV/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.01  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.98 
+ Cox=1.19311111111111E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=1362200  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-26.9299057657194  g17=5.14232645987223E-10  al=0.6   
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 4.93
Cgs g s 591p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 1.5n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 51.6u   
C_TH2 Tj2 Tamb 51.1u
C_TH3 Tj3 Tamb 1.3m
C_TH4 Tj4 Tamb 7.91m
C_TH5 Tj5 Tamb 67m
R_TH1 Tj Tj2 5.99m
R_TH2 Tj2 Tj3 71.1m
R_TH3 Tj3 Tj4 1.49
R_TH4 Tj4 Tj5 8.05
R_TH5 Tj5 Tcase 13.82
.ENDS
*$
.SUBCKT BSP170P/L3/INF drain gate source Tj Tsolder_joint Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.023  Rd=0.002  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=0.451108  
+Cox=5.49212906666667E-10  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=627040.12  
.PARAM g13=85459.4252233038  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-27.7057446621245  g17=2.9588579141072E-10  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 75.3
Cgs g s 272p
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 3n
LG ga1 gate 3n
LS so1 source 2n
G_TH Tamb Tj VALUE = {LIMIT(V(dr1,so1)*V(s,so1)/Rs,0,100k)}
C_TH1 Tj Tamb 23.6u
C_TH2 Tj2 Tamb 21.7u
C_TH3 Tj3 Tamb 496u
C_TH4 Tj4 Tamb 805u
C_TH5 Tj5 Tamb 13.8m
R_TH1 Tj Tj2 11.7m
R_TH2 Tj2 Tj3 142m
R_TH3 Tj3 Tj4 1.27
R_TH4 Tj4 Tj5 3.28
R_TH5 Tj5 Tsolder_joint 7.46
.ENDS
*$
.SUBCKT SPP80P06P/L3/INF drain gate source Tj Tcase Tamb
.PARAM L=0.000001  g2=0.0232  vm=330000  theta=0.09  kappa=1.2  c=0.85  
.PARAM Vth=3.55  Rs=0.0011  Rd=0.001  T=300  Tref=273  auth=0.0048  aubr=0.061  
.PARAM Ibr=0.0000000001  Ubr=69.4  k1=0.5  k2=1.5  Acfgs2=1.3  Acfdg=0.7  
.PARAM coxi=4.26111111111111E-04  Ep=14224137.9310345  psi=0.2199375  
.PARAM Un=0.00008625  Utn=0.025875  Utnbr=0.207  W=5.3375  
+Cox=6.49819444444444E-09  
.PARAM h2=3.23578125E-14  Fn=9.95625E-14  Vn=0.593084745762712  g10=7419125  
.PARAM g13=85460.416597739  g14=11160.7142857143  g15=-1.08911408563356  
.PARAM g16=-25.2349456798472  g17=3.50091421933266E-09  al=0.6  
.PARAM t02={1/((1+2/Vn)**1.5*Vn)}
.PARAM t01={1/SQRT(1+2/Vn)}
.PARAM t3 ={0.25*(t01-Acfgs2+t02)}
.PARAM t2 ={-0.25*t02}
.PARAM t1 ={0.25*(-3*t01+3*Acfgs2-t02)}
.PARAM t0 ={0.25*(2*t01+2*Acfgs2+t02)}
.FUNC  Ue(Uds,Ugs,Tj)  {Ugs-Vth+auth*(Tj+Tref-T)}
.FUNC  h1(Tj) {L*vm/(g2*(Tref/(Tref+Tj))**1.5)}
.FUNC  Ust(Uds,Ugs,Tj,Uee)  
+{-h1(Tj)+SQRT(max(h1(Tj)**2+MAX(psi,Uee)*h1(Tj)/c,0))}
.FUNC  Lshort(Uds,Ugs,Tj,Uee))  {if(Uds>Ust(Uds,Ugs,Tj,Uee),L-
+((Ep*h2)**2+2*kappa*h2*(Uds-Ust(Uds,Ugs,Tj,Uee)))**0.5+Ep*h2,L)}
.FUNC  beta(Uds,Ugs,Tj,Uee)  
+{W/(Lshort(Uds,Ugs,Tj,Uee)*((1+theta*Uee)*(1/(g2*(Tref/(Tref+Tj))**1.5)+Uds/
+(vm*L))))*coxi}
.FUNC  en(Uds,Ugs,Tj,Uee)  {min(Ust(Uds,Ugs,Tj,Uee),Uds)}
.FUNC  h7(x)  {x+min(0,x*x*x)}
.FUNC  I1(Uds,Uee,ene)  {(psi*ene-c*ene**2)*exp(min(h7(Uee)/psi-1,23))}
.FUNC  I2(Uds,Uee,ene)  {if(Uds>0,(Uee-c*ene)*ene,0)}
.FUNC  h3(Uee)  {(3-2*(Uee/psi-k1))*((Uee/psi-k1))**2}
.FUNC  ble(Uds,Uee,ene) {h3(Uee)*I2(Uds,Uee,ene)+(1-h3(Uee))*I1(Uds,Uee,ene)}
.FUNC  I3(Uds,Uee,ene)  
+{if(Uee/psi<k2,if(Uee/psi<k1,I1(Uds,Uee,ene),ble(Uds,Uee,ene)),I2(Uds,Uee,
+ene))}
.FUNC  Ig(Uds,Ugs,Tj) 
+{beta(Uds,Ugs,Tj,Ue(Uds,Ugs,Tj))*I3(Uds,Ue(Uds,Ugs,Tj),en(Uds,Ugs,Tj,Ue(Uds,
+Ugs,Tj)))}
.FUNC  Is(Tj) {exp(min(g16+((Tj+Tref)/T-
+1)*(1.12/(Un*(Tj+Tref))),23))*((Tj+Tref)/T)**3}
.FUNC  Ird(Usd,Tj)  {-Is(Tj)+exp(min(log(Is(Tj))+Usd/(Un*(Tj+Tref)),23))}
.FUNC  Idbr(Uds,Tj)  {exp(min(log(IBr)+(Uds-UBr-aubr*(Tj+Tref-T))/UTnbr,23))}
.FUNC  Iges(Uds,Ugs,Tj) {if(Uds>0,Ig((SQRT(1+4*al*Uds)-
+1)/2/al,Ugs,Tj)+Idbr(Uds,Tj)-Ird(-Uds,Tj),-Ig(-Uds,Ugs,Tj)-Ird(-Uds,Tj))}
.FUNC  h4(Tj)  {g10*(Tref/(Tref+Tj))**1.5}
.FUNC  Rdiod(x) {if(x<0.5,g13-(g13-g14)*(12*x*x-16*x*x*x),g14)}
.FUNC  RSi(x,Tj)  {if(x<0,Rdiod(-x),g13)/h4(Tj)}
.FUNC  Rdr(x,Tj)  {RSi(x,Tj)+(Rd+Rs)*(1+0.0039*(Tj+Tref-T))-Rs}
.FUNC  Cdiff(x,Tj) {30n*Ird(-x,Tj)/UTn}
.FUNC  h6(x) {if(x>0,0,exp(x)-1)}
.FUNC  Cds(x,Tj) {Cdiff(h6(x),Tj)+g17/SQRT(max(x+1,1))}
.FUNC  Cdg1(Ugd) {Cox*Acfdg*(if(Ugd>1,Acfgs2,if(Ugd<-1,1/SQRT(1-
+2*Ugd/Vn),t3*Ugd*Ugd**2+t2*Ugd**2+t1*Ugd+t0)))}
.FUNC  hdg(Ugs,Ugd) {(-0.25*(Ugs-VSW(Ugs-Ugd))*(Ugs-VSW(Ugs-Ugd))**2+0.75*(Ugs-
+VSW(Ugs-Ugd))+0.5)*Cdg1(Ugd)}
.FUNC  Cdg(Ugs,Ugd) {if(Ugs-VSW(Ugs-Ugd)<1,if(Ugs-VSW(Ugs-Ugd)
+>-1,hdg(Ugs,Ugd),0),Cdg1(Ugd))}
.FUNC  VSW(y) {g15*SQRT(max(y+0.5,0))}
.FUNC  Cgs2(x,y) {if(x-VSW(y)<1,if(x-VSW(y)>-1,(0.25*(x-VSW(y))*(x-VSW(y))**2-
+0.75*(x-VSW(y))+0.5)*Cox,Cox)*Acfgs2,0)}
.FUNC  lm(x) {limit(x,-200,999)}
.FUNC  cu(x) {1+x*(1+x*(1-x))}
.FUNC  SL(x,b,a) {if(x<a,if(x>b,x,if(x<3*b,2*b,b*cu((x-
+b)/(2*b)))),if(x>3*a,2*a,a*cu((x-a)/(2*a))))}
.FUNC  li1(Uds,Ugs,Tj)  {SL(Iges(Uds,Ugs,Tj),-1000,1000)}
G_G1 d s VALUE={-li1(V(s,d),V(s,g),lm(V(Tj)))-
+if(Time>100p,SL(DDT(V(s,d))*Cds(V(s,d),lm(V(Tj))),-500,500),0)}
R1 gate source 2G
Rd0 d s 500Meg
C_h2 d g 1p
Gd dr1 d VALUE = {V(dr1,d)/Rdr(V(s,d),lm(V(Tj)))}
R99 dr1 d 1k  
Rs so1 s {Rs}
RG ga1 g 2.94
Cgs g s 3.22n
G_G5 s g VALUE = {if(Time>100p,DDT(V(s,g))*Cgs2(V(s,g),V(s,d)),0)}
G_G7 d g VALUE = {if(Time>100p,DDT(V(d,g))*Cdg(V(s,g),V(d,g)),0)}
LD dr1 drain 5n
LG ga1 gate 10n
LS so1 source 7n
G_TH Tamb Tj VALUE = {max(V(dr1,so1)*V(s,so1)/Rs,0)}
C_TH1 Tj Tamb 334u
C_TH2 Tj2 Tamb 1.342m
C_TH3 Tj3 Tamb 6.2m
C_TH4 Tj4 Tamb 2.27m
C_TH5 Tj5 Tamb 154m
R_TH1 Tj Tj2 4.9m
R_TH2 Tj2 Tj3 21.1m
R_TH3 Tj3 Tj4 36m
R_TH4 Tj4 Tj5 91m
R_TH5 Tj5 Tcase 0.2
.ENDS
*$



*********************************************************************
.MODEL SXT2222A/INF NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00 
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXT2907A/INF PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXT3904/INF NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXT3906/INF PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA42/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA43/INF NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA92/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA93/INF PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
*****************************************
* T0220 SPICE MODEL (SIMILAR TO BC807)  *
*****************************************
.MODEL T0220 PNP (IS=0.230P NF=1.000
+ BF=504.327 VAF=26.000 IKF=0.780
+ ISE=39.284F NE=1.944 NR=1.002
+ BR=23.000 VAR=4.500 IKR=0.195
+ ISC=0.118F NC=3.025 RB=0.800
+ IRB=0.100M RBM=0.400 RE=0.203
+ RC=0.262 CJE=57.177P VJE=1.000
+ MJE=0.470 FC=0.750 CJC=28.600P
+ VJC=1.000 MJC=0.520 XCJC=0.650
+ TF=0.664N TR=2.600N PTF=1.000
+ XTF=6.350 VTF=2.000 ITF=0.250
+ XTB=1.700 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************
* T0221 SPICE MODEL (SIMILAR TO BC817)  *
*****************************************
.MODEL T0221 NPN (IS=0.180P NF=1.000
+ BF=449.302 VAF=95.000 IKF=0.820
+ ISE=8.480F NE=1.566 NR=1.005
+ BR=16.919 VAR=13.000 IKR=0.663
+ ISC=0.102P NC=1.764 RB=0.750
+ IRB=0.100M RBM=0.375 RE=0.170
+ RC=0.289 CJE=63.400P VJE=0.850
+ MJE=0.372 FC=0.750 CJC=16.600P
+ VJC=0.780 MJC=0.433 XCJC=0.650
+ TF=0.810N TR=2.600N PTF=1.000
+ XTF=4.300 VTF=1.500 ITF=0.450
+ XTB=1.500 EG=1.110 XTI=4.800
+ KF=5.000F AF=1.000)
*$
*****************************************
* T0357 SPICE MODEL (SIMILAR TO BC846)  *
*****************************************
.MODEL T0357 NPN (IS=45.000F NF=1.010
+ BF=516.544 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015
+ BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063 RB=9.000
+ IRB=0.100M RBM=4.500 RE=0.350
+ RC=1.445 CJE=13.050P VJE=0.690
+ MJE=0.375 FC=0.750 CJC=4.100P
+ VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
*****************************************
* T0358 SPICE MODEL (SIMILAR TO BC856)  *
*****************************************
.MODEL T0358 PNP (IS=28.000F NF=1.000
+ BF=284.436 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005
+ BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074 RB=2.200
+ IRB=0.100M RBM=1.500 RE=0.300
+ RC=2.251 CJE=11.800P VJE=1.000
+ MJE=0.435 FC=0.750 CJC=8.700P
+ VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$

*****************************************************************


***********************************************************************
* IMPORTANT: PLEASE READ
***********************************************************************
* This library includes legacy model names, with the "/SIE" suffix.
* Cadence will not continue to support these old names for future
* releases. For designs that use these models, replace the <model>/SIE 
* part from the historic SIEMENS library, with the equivalent 
* <model>/INF part.
*
***********************************************************************




*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAS16 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAS16/SIE 1 2
D    3 4 BAS16_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAR99 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAR99/SIE 1 2
D    3 4 BAR99_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAV70 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAV70/SIE 1 2
D    3 4 BAV70
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAV74 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAV74/SIE 1 2
D    3 4 BAV74
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAV99 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAV99/SIE 1 2
D    3 4 BAV99
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAW56 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAW56/SIE 1 2
D    3 4 BAW56
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAW100 (SOT-23)                   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAW100/SIE 1 2
D    3 4 BAW100
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAL74 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAL74/SIE 1 2
D    3 4 BAL74_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAL99 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAL99/SIE 1 2
D    3 4 BAL99_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAR74 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAR74/SIE 1 2
D    3 4 BAR74_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAS28 (SOT-23)                    *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAS28/SIE 1 2
D    3 4 BAS28_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD914 (SOT-23)                  *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD914/SIE 1 2
D    3 4 SMBD914
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2835 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2835/SIE 1 2
D    3 4 SMBD2835
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2836 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2836/SIE 1 2
D    3 4 SMBD2836
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2837 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2837/SIE 1 2
D    3 4 SMBD2837
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD2838 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD2838/SIE 1 2
D    3 4 SMBD2838
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD6050 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD6050/SIE 1 2
D    3 4 SMBD6050
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD6100 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD6100/SIE 1 2
D    3 4 SMBD6100
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE SMBD7000 (SOT-23)                 *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBD7000/SIE 1 2
D    3 4 SMBD7000
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE DIODE BAW101  (SOT-23)                  *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BAW101/SIE 1 2
D    3 4 BAW101_1
L1   1 3 0.350N
L2   4 2 0.350N
.ENDS
*****************************************************************
*$
.SUBCKT BA582/SIE 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20 BA582
.ENDS
*****************************************************************
*$
.SUBCKT BAR64/SIE 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAR64
.ENDS
*****************************************************************
*$
.MODEL BAS116/SIE D(
+       AF= 1.00E+00    BV= 7.50E+01   CJO= 1.83E-12    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 1.48E-13    KF= 0.00E+00
+        M= 2.62E-01     N= 1.33E+00    RS= 8.48E-01    TT= 8.66E-09
+       VJ= 3.44E-01   XTI= 3.00E+00) 
*****************************************************************
*$
.SUBCKT BAS125/SIE 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAS125
.ENDS
*****************************************************************
*$
.MODEL BAS21/SIE D(
+       AF= 1.00E+00    BV= 2.50E+02   CJO= 6.64E-13    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 6.42E-09    KF= 0.00E+00
+        M= 1.00E-01     N= 1.98E+00    RS= 9.12E-01    TT= 7.21E-08
+       VJ= 2.00E+00   XTI= 3.00E+00)
*****************************************************************
*$
.SUBCKT BAS40/SIE 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAS40_1
.ENDS
*****************************************************************
*$
.SUBCKT BAS70/SIE 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAS70_1
.ENDS
*****************************************************************
*$
.SUBCKT BAT14-098/SIE 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20 BAT14-098 
.ENDS
*****************************************************************
*$
.SUBCKT BAT15-03W/SIE 100 200
L1    1   10   0.55nH
C1   10   20   110fF
L2   10  100   0.67nH
L3   20  200   0.55nH
D1    1    20 BAT15-03W 
.ENDS
*****************************************************************
*$
.SUBCKT BAT15-098/SIE 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20 BAT15-098 
.ENDS
*****************************************************************
*$
.SUBCKT BAT18/SIE 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAT18_1
.ENDS
*****************************************************************
*$
.SUBCKT BAT65/SIE 100 200
L1    1   10   0.75nH
C1   10   20   120fF
L2   10  100   0.65nH
L3   20  200   0.60nH
D1    1    20  BAT65
.ENDS
*****************************************************************
*$
.SUBCKT BAT68/SIE 100 200
L1    1   10   0.67nH
C1   10   20   140fF
L2   10  100   0.63nH
L3   20  200   0.51nH
D1    1    20 BAT68
.ENDS
*****************************************************************
*$
.MODEL BAW78D/SIE D(
+       AF= 1.00E+00    BV= 4.00E+02   CJO= 5.40E-12    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 3.08E-11    KF= 0.00E+00
+        M= 4.62E-01     N= 1.51E+00    RS= 4.04E-01    TT= 1.44E-06
+       VJ= 8.00E-01   XTI= 3.00E+00)
*****************************************************************
*$
* BB515 Diode Model
.MODEL BB515/SIE D(IS=2F RS=.05 N=1.045 BV=32 IBV=100N XTI=3 EG=1.11
+ CJO=25.5P VJ=2.5 M=1 TT=14.4N)
* Hyperabrupt Diode, M = f(VR)! Above approximation for Capacitance in 
* VR-range 1..28V
* VR-range 0..6V: CJO=25.82P VJ=1.59 M=0.722
* VR-range 0..5V: CJO=25.86P VJ=1.38 M=0.66
* VR-range 0..3V: CJO=25.87P VJ=1.167 M=0.59
* Reverse current simulation: ISR=4.1p NR=2
* For Capacitance Q-factor add RS=0.5 externally or (degrades VF/IF) 
* internally
* chip D190. 25.08.1994 SIEMENS HL EH PD1 Kurth
*****************************************************************
*$
.SUBCKT BFP520/SIE 200 100 300
L1    1   10    0.47nH 
L2    2   20    0.56nH 
L3    3   30    0.23nH 
C1   10   20    6.9fF         
C2   20   30    134fF 
C3   30   10    136fF 
L4   10  100    0.53nH 
L5   20  200    0.58nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP520
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BFS17 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BFS17/SIE 1 2 3
Q    6 5 7 BFS17 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BF517 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BF517/SIE 1 2 3
Q    6 5 7 BF517 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*****************************************************************
*$
.SUBCKT BFG135A/SIE 200 100 300
L1    1   10    1.02nH 
L2    2   20    1.01nH 
L3    3   30    0.67nH 
C1   10   20    8fF         
C2   20   30    311fF 
C3   30   10    190fF 
C4    1    3    95fF
C5    2    3    228fF
L4   10  100    0.9nH 
L5   20  200    0.25nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG135A 
.ENDS
***************************************************************
*$
.SUBCKT BFG235/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
*              C B E            TWO CHIPS IN PARALLEL
Q1  2 1 3  T236
Q1b  2 1 3  T236
.MODEL T236 NPN(
+ IS = 9.6952e-15     BF = 86.665       NF = 0.46449
+ VAF = 33.548        IKF = 1.9049      ISE = 3.7545e-15
+ NE = 0.74837        BR = 61.012       NR = 1.1471
+ VAR = 45.693        IKR = 0.019155    ISC = 4.5491e-18
+ NC = 1.2809         RBM = 0           IRB = 0.00020816
+ RB = 1.0193         RE = 1.4768       RC = 0.075508
+ CJE = 3.2968e-14    VJE = 0.87721     MJE = 0.51738
+ TF = 4.2719e-11     XTF = 0.26853     VTF = 0.11783
+ ITF = 0.0047293     PTF = 0           CJC = 2.9998e-12
+ VJC = 1.0086        MJC = 0.39102     XCJC = 0.020778
+ TR = 1.3578e-10     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.56371)
.ENDS
***************************************************************
*$
.SUBCKT BFP136W/SIE 200 100 300
L1    1   10    0.5nH 
L2    2   20    0.05nH 
L3    3   30    0.18nH 
C1   10   20    48fF         
C2   20   30    244fF 
C3   30   10    78fF 
L4   10  100    0.51nH 
L5   20  200    0.35nH 
L6   30  300    0.14nH 
Q1   2 1 3 BFP136W 
.ENDS
***************************************************************
*$
.SUBCKT BFQ81/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFQ81
.ENDS
***************************************************************
*$
.SUBCKT BFP81/SIE 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP81
.ENDS
***************************************************************
*$
.SUBCKT BFR93AW/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR93AW 
.ENDS
**************************************************************
*$
.SUBCKT BFR93A/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR93A 
.ENDS
**************************************************************
*$
.SUBCKT BFP93A/SIE 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP93A 
.ENDS
**************************************************************
*$
.SUBCKT BFR106/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR106
.ENDS
***************************************************************
*$
.SUBCKT BFG19S/SIE 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3  BFG19S
.ENDS
***************************************************************
*$
.SUBCKT BFR180W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR180W 
.ENDS
***************************************************************
*$
.SUBCKT BFP180W/SIE 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP180W 
.ENDS
***************************************************************
*$
.SUBCKT BFR180/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR180
.ENDS
***************************************************************
*$
.SUBCKT BFP180/SIE 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP180
.ENDS
***************************************************************
*$
.SUBCKT BFR280W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR280W 
.ENDS
***************************************************************
*$
.SUBCKT BFP280W/SIE 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP280W 
.ENDS
***************************************************************
*$
.SUBCKT BFS480/SIE 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS480
.ENDS
***************************************************************
*$
.SUBCKT BFR280/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR280
.ENDS
***************************************************************
*$
.SUBCKT BFP280/SIE 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP280
.ENDS
***************************************************************
*$
.SUBCKT BFT93/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFT93
.ENDS
***************************************************************
*$
.SUBCKT BFR182W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR182W 
.ENDS
***************************************************************
*$
.SUBCKT BFP182W/SIE 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP182W 
.ENDS
***************************************************************
*$
.SUBCKT BFS482/SIE 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS482
.ENDS
***************************************************************
*$
.SUBCKT BFR182/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR182
.ENDS
***************************************************************
*$
.SUBCKT BFP182/SIE 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP182
.ENDS
***************************************************************
*$
.SUBCKT BFR181W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR181W 
.ENDS
***************************************************************
*$
.SUBCKT BFP181W/SIE 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP181W 
.ENDS
***************************************************************
*$
.SUBCKT BFS481/SIE 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS481
.ENDS
***************************************************************
*$
.SUBCKT BFR181/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR181
.ENDS
***************************************************************
*$
.SUBCKT BFP181/SIE 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP181
.ENDS
***************************************************************
*$
.SUBCKT BFR183W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR183W 
.ENDS
***************************************************************
*$
.SUBCKT BFP183W/SIE 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP183W 
.ENDS
***************************************************************
*$
.SUBCKT BFS483/SIE 200 100 300
L1    1   10    0.42nH 
L2    2   20    0.09nH 
L3    3   30    0.5nH 
C1   10   20    53fF         
C2   20   30    119fF 
C3   30   10    84fF 
L4   10  100    0.28nH 
L5   20  200    0.57nH 
L6   30  300    0.36nH 
Q1   2 1 3 BFS483
.ENDS
***************************************************************
*$
.SUBCKT BFR183/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR183 
.ENDS
.SUBCKT BFR183 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFR183
.ENDS
***************************************************************
*$
.MODEL BFP183/SIE NPN(
+ IS = 1.0345e-15     BF = 115.98       NF = 0.80799
+ VAF = 14.772        IKF = 0.14562     ISE = 1.6818e-14
+ NE = 1.2149         BR = 10.016       NR = 0.99543
+ VAR = 3.4276        IKR = 0.013483    ISC = 1.3559e-15
+ NC = 0.85331        RBM = 1.0112      IRB = 0.00043801
+ RB = 2.5426         RE = 1.3435       RC = 0.20486
+ CJE = 2.3077e-14    VJE = 1.0792      MJE = 0.45354
+ TF = 2.2746e-11     XTF = 0.36823     VTF = 0.50905
+ ITF = 0.0018773     PTF = 0           CJC = 4.6011e-13
+ VJC = 1.1967        MJC = 0.3         XCJC = 0.053823
+ TR = 1.0553e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.54852)
***************************************************************
*$
.SUBCKT BFR193W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR193W 
.ENDS
***************************************************************
*$
.SUBCKT BFP193W/SIE 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP193W 
.ENDS
***************************************************************
*$
.SUBCKT BFR193/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR193
.ENDS
***************************************************************
*$
.SUBCKT BFP193/SIE 200 100 300
L1    1   10    0.89nH       ; LBI
L2    2   20    0.001nH      ; LCI
L3    3   30    0.4nH        ; LEI
C1   10   20    15fF         ; CCB
C2   20   30    187fF        ; CCE
C3   30   10    189fF        ; CBE
L4   10  100    0.73nH       ; LBO
L5   20  200    0.42nH       ; LCO
L6   30  300    0.15nH       ; LEO
Q1   2 1 3 BFP193 
.ENDS
***************************************************************
*$
.SUBCKT BFG193/SIE 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG193
.ENDS
***************************************************************
*$
.SUBCKT BFT92W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFT92W 
.ENDS
***************************************************************
*$
.SUBCKT BFT92/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFT92
.ENDS
***************************************************************
*$
.SUBCKT BFP196W/SIE 200 100 300
L1    1   10    0.43nH 
L2    2   20    0.06nH 
L3    3   30    0.26nH 
C1   10   20    46fF         
C2   20   30    232fF 
C3   30   10    68fF 
L4   10  100    0.47nH 
L5   20  200    0.36nH 
L6   30  300    0.12nH 
Q1   2 1 3 BFP196W 
.ENDS
***************************************************************
*$
.SUBCKT BFP196/SIE 200 100 300
L1    1   10    0.84nH 
L2    2   20    0.07nH 
L3    3   30    0.31nH 
C1   10   20    19fF 
C2   20   30    281fF 
C3   30   10    145fF 
L4   10  100    0.65nH 
L5   20  200    0.42nH 
L6   30  300    0.14nH 
Q1   2 1 3 BFP196
.ENDS
***************************************************************
*$
.SUBCKT BFG196/SIE 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG196
.ENDS
***************************************************************
*$
.SUBCKT BFR194/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR194
.ENDS
***************************************************************
*$
.SUBCKT BFP194/SIE 200 100 300
L1    1   10    0.84nH 
L2    2   20    0.07nH 
L3    3   30    0.31nH 
C1   10   20    19fF 
C2   20   30    281fF 
C3   30   10    145fF 
L4   10  100    0.65nH 
L5   20  200    0.42nH 
L6   30  300    0.14nH 
Q1   2 1 3 BFP194
.ENDS
***************************************************************
*$
.SUBCKT BFG194/SIE 200 100 300
L1    1   10    0.94nH 
L2    2   20    0.92nH 
L3    3   30    0.88nH 
C1   10   20    10fF         
C2   20   30    338fF 
C3   30   10    200fF 
C4    1    3    67fF
C5    2    3    176fF
L4   10  100    0.95nH 
L5   20  200    0.33nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFG194
.ENDS
***************************************************************
*$
.SUBCKT BFP405/SIE 200 100 300
L1    1   10    0.47nH 
L2    2   20    0.56nH 
L3    3   30    0.23nH 
C1   10   20    6.9fF         
C2   20   30    134fF 
C3   30   10    136fF 
L4   10  100    0.53nH 
L5   20  200    0.58nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP405
.ENDS
***************************************************************
*$
.SUBCKT BFP420/SIE 200 100 300
L1    1   10    0.47nH 
L2    2   20    0.56nH 
L3    3   30    0.23nH 
C1   10   20    6.9fF         
C2   20   30    134fF 
C3   30   10    136fF 
L4   10  100    0.53nH 
L5   20  200    0.58nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP420
.ENDS
***************************************************************
*$
.SUBCKT BFP450/SIE 200 100 300
L1    1   10    0.31nH 
L2    2   20    0.29nH 
L3    3   30    0.20nH 
C1   10   20    3.2fF         
C2   20   30    213fF 
C3   30   10    208fF 
L4   10  100    0.63nH 
L5   20  200    0.68nH 
L6   30  300    0.05nH 
Q1   2 1 3 BFP450
.ENDS
***************************************************************
*$
.SUBCKT BFP490/SIE 200 100 300
L1    1   10    0.85nH       ; LBI
L2    2   20    0.39nH       ; LCI
L3    3   30    0.15nH       ; LEI
C1   10   20    2.2fF        ; CCB
C2   20   30    500fF        ; CCE
C3   30   10    150fF        ; CBE
L4   10  100    0.3nH        ; LBO
L5   20  200    0.2nH        ; LCO
L6   30  300    0.04nH       ; LEO
Q1   2 1 3 BFP490
.ENDS
***************************************************************
*$
.SUBCKT BFR92W/SIE 200 100 300
L1    1   10    0.57nH 
L2    2   20    0.001nH 
L3    3   30    0.43nH 
C1   10   20    101fF         
C2   20   30    175fF 
C3   30   10    61fF 
L4   10  100    0.4nH 
L5   20  200    0.41nH 
L6   30  300    0.5nH 
Q1   2 1 3 BFR92W 
.ENDS
***************************************************************
*$
.SUBCKT BFR92P/SIE 200 100 300
L1    1   10    0.85nH 
L2    2   20    0.001nH 
L3    3   30    0.69nH 
C1   10   20    84fF         
C2   20   30    165fF 
C3   30   10    73fF 
L4   10  100    0.51nH 
L5   20  200    0.49nH 
L6   30  300    0.61nH 
Q1   2 1 3 BFR92P 
.ENDS
***************************************************************
*$
.MODEL BFR35AP/SIE NPN(
+ IS = 1.213e-16      BF = 94.733       NF = 1.0947
+ VAF = 30            IKF = 0.46227     ISE = 1.2955e-13
+ NE = 1.9052         BR = 10.729       NR = 0.8983
+ VAR = 14.599        IKR = 0.01        ISC = 7.5557e-16
+ NC = 1.371          RB = 14.998       IRB = 1.652e-05
+ RBM = 7.8145        RE = 0.29088      RC = 0.13793
+ CJE = 1.0416e-14    VJE = 0.70618     MJE = 0.34686
+ TF = 2.6796e-11     XTF = 0.3817      VTF = 0.32861
+ ITF = 0.0044601     PTF = 0           CJC = 9.4647e-13
+ VJC = 0.84079       MJC = 0.4085      XCJC = 0.13464
+ TR = 1.2744e-09     CJS= 0            VJS = 0.75
+ MJS = 0             XTB = 0           EG = 1.11
+ XTI = 3             FC = 0.99545)
***************************************************************
*$
*
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP947 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP947/SIE 1 2 3
Q    4 5 6 BDP947 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP948 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP948/SIE 1 2 3
Q    4 5 6 BDP948 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP949 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP949/SIE 1 2 3
Q    4 5 6 BDP949 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP950 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP950/SIE 1 2 3
Q    4 5 6 BDP950 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BDP951 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP951/SIE 1 2 3
Q    4 5 6 BDP951 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP952 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP952/SIE 1 2 3
Q    4 5 6 BDP952 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP953 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP953/SIE 1 2 3
Q    4 5 6 BDP953 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP954 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP954/SIE 1 2 3
Q    4 5 6 BDP954 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP955 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP955/SIE 1 2 3
Q    4 5 6 BDP955 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BDP956 (SOT-223) *
* REV: 98.3                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BDP956/SIE 1 2 3
Q    4 5 6 BDP956 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCP70 (SOT-223)  *
* REV: 98.2                  DANALYSE GMBH BERLIN (17.06.1998)  *
*****************************************************************
.SUBCKT BCP70/SIE 1 2 3
Q    4 5 6 BCP70 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCP72 (SOT-223)  *
* REV: 98.2                  DANALYSE GMBH BERLIN (17.06.1998)  *
*****************************************************************
.SUBCKT BCP72/SIE 1 2 3
Q    4 5 6 BCP72 1.000
LC   1 4 0.200N
LB   2 5 0.500N
LE   3 6 0.300N
CGBC 2 1 25.000F
CGBE 2 3 0.200P
CGCE 1 3 0.200P
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC327 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC327/SIE 1 2 3
Q    6 5 7 BC327 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC328 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC328/SIE 1 2 3
Q    6 5 7 BC328 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC807 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC807/SIE 1 2 3
Q    6 5 7 BC807 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC808 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC808/SIE 1 2 3
Q    6 5 7 BC808 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCW67 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW67/SIE 1 2 3
Q    6 5 7 BCW67 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCW68 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW68/SIE 1 2 3
Q    6 5 7 BCW68 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC817 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC817/SIE 1 2 3
Q    6 5 7 BC817 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC818 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC818/SIE 1 2 3
Q    6 5 7 BC818 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC337 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC337/SIE 1 2 3
Q    6 5 7 BC337 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC338 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC338/SIE 1 2 3
Q    6 5 7 BC338 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCW65 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW65/SIE 1 2 3
Q    6 5 7 BCW65 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCW66 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW66/SIE 1 2 3
Q    6 5 7 BCW66 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC846 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC846/SIE 1 2 3
Q    6 5 7 BC846 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC847 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC847/SIE 1 2 3
Q    6 5 7 BC847 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBTA20 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA20/SIE 1 2 3
Q    6 5 7 SMBTA20_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC848 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC848/SIE 1 2 3
Q    6 5 7 BC848 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC849 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC849/SIE 1 2 3
Q    6 5 7 BC849 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BC850 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC850/SIE 1 2 3
Q    6 5 7 BC850 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCV61 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCV61/SIE 1 2 3
Q    6 5 7 BCV61 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCW60 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW60/SIE 1 2 3
Q    6 5 7 BCW60 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCX70 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX70/SIE 1 2 3
Q    6 5 7 BCX70 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCX78 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX78/SIE 1 2 3
Q    6 5 7 BCX78 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR BCX79 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX79/SIE 1 2 3
Q    6 5 7 BCX79 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBT6428 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT6428/SIE 1 2 3
Q    6 5 7 SMBT6428 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBT6429 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT6429/SIE 1 2 3
Q    6 5 7 SMBT6429 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC856 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC856/SIE 1 2 3
Q    6 5 7 BC856 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC857 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC857/SIE 1 2 3
Q    6 5 7 BC857 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC858 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC858/SIE 1 2 3
Q    6 5 7 BC858 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC859 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC859/SIE 1 2 3
Q    6 5 7 BC859 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BC860 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BC860/SIE 1 2 3
Q    6 5 7 BC860 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBTA70 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA70/SIE 1 2 3
Q    6 5 7 SMBTA70 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCV62 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCV62/SIE 1 2 3
Q    6 5 7 BCV62 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCW61 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCW61/SIE 1 2 3
Q    6 5 7 BCW61 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
+ KF=5.000F AF=1.000)
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCX71 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX71/SIE 1 2 3
Q    6 5 7 BCX71 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCX58 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX58/SIE 1 2 3
Q    6 5 7 BCX58 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR BCX59 (SOT-23)   *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT BCX59/SIE 1 2 3
Q    6 5 7 BCX59 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBT5086 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT5086/SIE 1 2 3
Q    6 5 7 SMBT5086 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBT5087 (SOT-23)*
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBT5087/SIE 1 2 3
Q    6 5 7 SMBT5087 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBTA05 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA05/SIE 1 2 3
Q    6 5 7 SMBTA05_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR SMBTA06 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA06/SIE 1 2 3
Q    6 5 7 SMBTA06_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBTA55 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA55/SIE 1 2 3
Q    6 5 7 SMBTA55_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
*$
*****************************************************************
* SPICE2G6 MODEL OF THE PNP BIPOLAR TRANSISTOR SMBTA56 (SOT-23) *
* REV: 98.1                  DANALYSE GMBH BERLIN (27.07.1998)  *
*****************************************************************
.SUBCKT SMBTA56/SIE 1 2 3
Q    6 5 7 SMBTA56_1 1.000
LC   1 6 0.350N
L1   2 4 0.400N
LB   4 5 0.500N
L2   3 8 0.400N
LE   8 7 0.600N
CGBC 4 6 70.00F
CGBE 4 8 0.150P
CGCE 6 8 15.00F
.ENDS
+ KF=5.000F AF=1.000)
*********************************************************************
*$
.MODEL SMBT2222A/SIE NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS79/SIE NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS81/SIE NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4401/SIE NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXT2222A/SIE NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2222/SIE NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2222A/SIE NPN(
+       AF= 1.00E+00    BF= 3.03E+02    BR= 1.00E-02   CJC= 1.37E-11
+      CJE= 2.64E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.11E-01   IKR= 1.00E+00   IRB= 9.62E-03    IS= 1.75E-12
+      ISC= 9.42E-14   ISE= 5.92E-14   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.26E+00    NF= 1.10E+00    NR= 1.71E+00   PTF= 0.00E+00
+       RB= 8.63E+01   RBM= 1.00E-02    RC= 1.07E+00    RE= 1.00E-02
+       TF= 5.16E-10    TR= 0.00E+00   VAF= 3.60E+02   VAR= 1.64E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.09E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.64E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX53/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC636/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC638/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC640/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP51/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP52/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP53/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX51/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX52/SIE PNP(
+       AF= 1.00E+00    BF= 1.85E+02    BR= 4.28E+00   CJC= 8.00E-11
+      CJE= 1.27E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.69E-01   IKR= 1.00E+00   IRB= 1.62E-01    IS= 4.60E-12
+      ISC= 9.45E-17   ISE= 1.99E-14   ITF= 4.53E-01    KF= 0.00E+00
+      MJC= 5.07E-01   MJE= 4.94E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.23E+00    NF= 1.19E+00    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 4.84E+00   RBM= 1.00E+01    RC= 2.62E-01    RE= 1.00E-02
+       TF= 1.07E-09    TR= 0.00E+00   VAF= 1.44E+02   VAR= 1.97E+01
+      VJC= 3.62E-01   VJE= 5.43E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.31E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN26/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN24/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBTA42/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBTA43/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN36/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZTA42/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT43/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN16/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN18/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA42/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA43/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFP22/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFP25/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL MPSA42/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL MPSA43/SIE NPN(
+       AF= 1.00E+00    BF= 7.04E+01    BR= 1.76E+01   CJC= 1.56E-11
+      CJE= 1.31E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.00E+01   IKR= 1.00E+00   IRB= 1.30E-03    IS= 1.59E-13
+      ISC= 9.06E-11   ISE= 3.62E-16   ITF= 1.33E+00    KF= 0.00E+00
+      MJC= 5.80E-01   MJE= 4.02E-01   MJS= 3.30E-01    NC= 1.47E+00
+       NE= 1.21E+00    NF= 1.03E+00    NR= 1.11E+00   PTF= 0.00E+00
+       RB= 3.23E+01   RBM= 7.75E-02    RC= 4.11E-01    RE= 4.19E-01
+       TF= 1.73E-09    TR= 0.00E+00   VAF= 4.51E+01   VAR= 9.11E+01
+      VJC= 4.64E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN27/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN25/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBTA92/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBTA93/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN17/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA93/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN19/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXTA92/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN37/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN39/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZTA92/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZTA93/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFP23/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFP26/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL MPSA92/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL MPSA93/SIE PNP(
+       AF= 1.00E+00    BF= 9.80E+01    BR= 4.78E+00   CJC= 4.66E-11
+      CJE= 9.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.49E-02   IKR= 1.00E+00   IRB= 7.02E-04    IS= 9.53E-14
+      ISC= 9.99E-11   ISE= 8.37E-13   ITF= 4.12E-01    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.26E-01   MJS= 3.30E-01    NC= 1.50E+00
+       NE= 1.49E+00    NF= 1.00E+00    NR= 1.55E+00   PTF= 0.00E+00
+       RB= 2.76E+01   RBM= 6.66E-02    RC= 1.00E-02    RE= 1.00E-02
+       TF= 9.52E-10    TR= 0.00E+00   VAF= 2.60E+02   VAR= 1.40E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.03E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF799/SIE NPN(
+       AF= 1.00E+00    BF= 1.39E+02    BR= 1.00E-02   CJC= 2.37E-12
+      CJE= 3.85E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 7.64E-01
+      IKF= 2.34E-01   IKR= 1.00E+00   IRB= 2.25E-04    IS= 9.72E-16
+      ISC= 1.00E-13   ISE= 2.26E-13   ITF= 4.64E-01    KF= 0.00E+00
+      MJC= 2.40E-01   MJE= 2.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.75E+00    NF= 9.94E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 1.56E+00    RE= 3.22E-02
+       TF= 1.37E-10    TR= 0.00E+00   VAF= 6.40E+01   VAR= 1.29E+01
+      VJC= 3.00E-01   VJE= 4.75E-01   VJS= 7.50E-01   VTF= 3.43E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX68/SIE NPN(
+       AF= 1.00E+00    BF= 1.61E+02    BR= 3.66E+00   CJC= 1.37E-10
+      CJE= 2.52E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 7.74E+00   IKR= 1.00E+00   IRB= 6.95E-02    IS= 9.77E-14
+      ISC= 4.11E-14   ISE= 1.49E-16   ITF= 1.00E+01    KF= 0.00E+00
+      MJC= 4.87E-01   MJE= 4.11E-01   MJS= 3.30E-01    NC= 1.02E+00
+       NE= 1.01E+00    NF= 9.64E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.91E+01   RBM= 3.03E+00    RC= 2.06E-01    RE= 1.01E-02
+       TF= 1.38E-09    TR= 0.00E+00   VAF= 5.63E+02   VAR= 3.49E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.26E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC368/SIE NPN(
+       AF= 1.00E+00    BF= 1.61E+02    BR= 3.66E+00   CJC= 1.37E-10
+      CJE= 2.52E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 7.74E+00   IKR= 1.00E+00   IRB= 6.95E-02    IS= 9.77E-14
+      ISC= 4.11E-14   ISE= 1.49E-16   ITF= 1.00E+01    KF= 0.00E+00
+      MJC= 4.87E-01   MJE= 4.11E-01   MJS= 3.30E-01    NC= 1.02E+00
+       NE= 1.01E+00    NF= 9.64E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.91E+01   RBM= 3.03E+00    RC= 2.06E-01    RE= 1.01E-02
+       TF= 1.38E-09    TR= 0.00E+00   VAF= 5.63E+02   VAR= 3.49E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.26E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP68/SIE NPN(
+       AF= 1.00E+00    BF= 1.61E+02    BR= 3.66E+00   CJC= 1.37E-10
+      CJE= 2.52E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 7.74E+00   IKR= 1.00E+00   IRB= 6.95E-02    IS= 9.77E-14
+      ISC= 4.11E-14   ISE= 1.49E-16   ITF= 1.00E+01    KF= 0.00E+00
+      MJC= 4.87E-01   MJE= 4.11E-01   MJS= 3.30E-01    NC= 1.02E+00
+       NE= 1.01E+00    NF= 9.64E-01    NR= 1.23E+00   PTF= 0.00E+00
+       RB= 1.91E+01   RBM= 3.03E+00    RC= 2.06E-01    RE= 1.01E-02
+       TF= 1.38E-09    TR= 0.00E+00   VAF= 5.63E+02   VAR= 3.49E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.26E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT2907A/SIE PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS80/SIE NPN( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS82/SIE NPN( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT2907/SIE PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4403/SIE NPN( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2907/SIE PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT2907A/SIE PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXT2907A/SIE PNP( 
+       AF= 1.00E+00    BF= 3.08E+02    BR= 2.18E+01   CJC= 1.93E-11
+      CJE= 2.66E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 8.42E-01   IKR= 1.00E+00   IRB= 1.25E-02    IS= 2.32E-13
+      ISC= 1.65E-13   ISE= 6.69E-16   ITF= 3.36E-01    KF= 0.00E+00
+      MJC= 4.65E-01   MJE= 4.60E-01   MJS= 3.30E-01    NC= 1.13E+00
+       NE= 1.09E+00    NF= 1.04E+00    NR= 1.12E+00   PTF= 0.00E+00
+       RB= 4.02E+01   RBM= 1.00E-02    RC= 8.46E-01    RE= 1.00E-02
+       TF= 4.95E-10    TR= 0.00E+00   VAF= 1.41E+02   VAR= 1.35E+01
+      VJC= 3.00E-01   VJE= 3.49E-01   VJS= 7.50E-01   VTF= 6.54E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.87E+01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT3904/SIE NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT3904/SIE NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4124/SIE NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXT3904/SIE NPN(
+       AF= 1.00E+00    BF= 3.00E+02    BR= 1.19E+01   CJC= 4.75E-12
+      CJE= 8.54E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.58E-02   IKR= 1.00E+00   IRB= 1.70E-03    IS= 5.42E-14
+      ISC= 1.08E-11   ISE= 1.20E-15   ITF= 2.86E-04    KF= 0.00E+00
+      MJC= 4.02E-01   MJE= 3.68E-01   MJS= 3.30E-01    NC= 1.66E+00
+       NE= 1.25E+00    NF= 1.09E+00    NR= 1.02E+00   PTF= 0.00E+00
+       RB= 1.51E+02   RBM= 1.00E-02    RC= 1.63E+00    RE= 1.29E-02
+       TF= 1.58E-10    TR= 0.00E+00   VAF= 2.88E+02   VAR= 4.18E+01
+      VJC= 3.83E-01   VJE= 3.33E-01   VJS= 7.50E-01   VTF= 1.90E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.69E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT3906/SIE PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SMBT4126/SIE PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL SXT3906/SIE PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL PZT3906/SIE PNP(
+       AF= 1.00E+00    BF= 2.52E+02    BR= 5.00E+01   CJC= 7.17E-12
+      CJE= 1.01E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.93E-02   IKR= 1.00E+00   IRB= 9.90E-03    IS= 3.18E-13
+      ISC= 1.29E-13   ISE= 1.20E-13   ITF= 3.22E-03    KF= 0.00E+00
+      MJC= 4.05E-01   MJE= 3.91E-01   MJS= 3.30E-01    NC= 1.29E+00
+       NE= 1.75E+00    NF= 1.17E+00    NR= 1.13E+00   PTF= 0.00E+00
+       RB= 4.06E+01   RBM= 4.87E+00    RC= 1.44E+00    RE= 1.00E-02
+       TF= 1.35E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 1.86E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 2.73E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX55/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX54/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC635/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC637/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC639/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP54/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP55/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX56/SIE NPN(
+       AF= 1.00E+00    BF= 1.29E+02    BR= 2.92E+00   CJC= 4.85E-11
+      CJE= 1.17E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 9.06E-01   IKR= 1.00E+00   IRB= 2.38E-02    IS= 3.06E-15
+      ISC= 4.08E-14   ISE= 1.62E-16   ITF= 5.64E-01    KF= 0.00E+00
+      MJC= 5.09E-01   MJE= 4.22E-01   MJS= 3.30E-01    NC= 1.00E+00
+       NE= 1.00E+00    NF= 8.55E-01    NR= 9.10E-01   PTF= 0.00E+00
+       RB= 1.65E+01   RBM= 1.73E-02    RC= 3.11E-01    RE= 1.26E-02
+       TF= 1.42E-09    TR= 0.00E+00   VAF= 7.24E+02   VAR= 5.46E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 7.75E-01   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX69/SIE PNP(
+       AF= 1.00E+00    BF= 2.25E+02    BR= 9.96E+00   CJC= 1.94E-10
+      CJE= 3.28E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.88E+00   IKR= 1.00E+00   IRB= 1.00E-06    IS= 7.82E-15
+      ISC= 1.00E-17   ISE= 3.05E-17   ITF= 4.21E+01    KF= 0.00E+00
+      MJC= 4.03E-01   MJE= 5.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.00E+00    NF= 8.54E-01    NR= 8.80E-01   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 2.17E-02    RE= 1.34E-01
+       TF= 1.39E-09    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 5.03E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.93E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCP69/SIE PNP(
+       AF= 1.00E+00    BF= 2.25E+02    BR= 9.96E+00   CJC= 1.94E-10
+      CJE= 3.28E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.88E+00   IKR= 1.00E+00   IRB= 1.00E-06    IS= 7.82E-15
+      ISC= 1.00E-17   ISE= 3.05E-17   ITF= 4.21E+01    KF= 0.00E+00
+      MJC= 4.03E-01   MJE= 5.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.00E+00    NF= 8.54E-01    NR= 8.80E-01   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 2.17E-02    RE= 1.34E-01
+       TF= 1.39E-09    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 5.03E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.93E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BC369/SIE PNP(
+       AF= 1.00E+00    BF= 2.25E+02    BR= 9.96E+00   CJC= 1.94E-10
+      CJE= 3.28E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 5.88E+00   IKR= 1.00E+00   IRB= 1.00E-06    IS= 7.82E-15
+      ISC= 1.00E-17   ISE= 3.05E-17   ITF= 4.21E+01    KF= 0.00E+00
+      MJC= 4.03E-01   MJE= 5.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.00E+00    NF= 8.54E-01    NR= 8.80E-01   PTF= 0.00E+00
+       RB= 1.00E-02   RBM= 1.00E-02    RC= 2.17E-02    RE= 1.34E-01
+       TF= 1.39E-09    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 5.03E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.93E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN22/SIE NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF722/SIE NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF720/SIE NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF622/SIE NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF422/SIE NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF420/SIE NPN(
+       AF= 1.00E+00    BF= 1.23E+02    BR= 5.61E+00   CJC= 5.49E-12
+      CJE= 4.19E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 4.09E-02   IKR= 1.00E+00   IRB= 2.42E-02    IS= 6.46E-16
+      ISC= 2.89E-14   ISE= 2.80E-17   ITF= 2.65E+00    KF= 0.00E+00
+      MJC= 5.21E-01   MJE= 3.90E-01   MJS= 3.30E-01    NC= 1.03E+00
+       NE= 1.00E+00    NF= 9.11E-01    NR= 1.86E+00   PTF= 0.00E+00
+       RB= 4.64E+01   RBM= 2.17E+01    RC= 4.08E-01    RE= 4.41E-01
+       TF= 1.13E-09    TR= 0.00E+00   VAF= 4.15E+02   VAR= 4.30E+02
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 8.76E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 6.01E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN23/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF623/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BFN21/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF723/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF721/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF423/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF421/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BF603/SIE PNP(
+       AF= 1.00E+00    BF= 1.40E+02    BR= 1.00E-02   CJC= 1.65E-11
+      CJE= 4.20E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.41E-02   IKR= 1.00E+00   IRB= 1.10E-02    IS= 5.35E-16
+      ISC= 1.00E-13   ISE= 9.81E-17   ITF= 3.00E+00    KF= 0.00E+00
+      MJC= 7.00E-01   MJE= 4.13E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.03E+00    NF= 8.73E-01    NR= 9.84E-01   PTF= 0.00E+00
+       RB= 1.99E+01   RBM= 2.41E-02    RC= 2.22E+00    RE= 1.85E-02
+       TF= 1.11E-09    TR= 0.00E+00   VAF= 1.49E+02   VAR= 9.18E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.76E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX41/SIE NPN(
+       AF= 1.00E+00    BF= 1.70E+02    BR= 9.55E-02   CJC= 2.58E-11
+      CJE= 4.69E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.13E-01   IKR= 1.00E+00   IRB= 6.59E-02    IS= 1.69E-12
+      ISC= 9.92E-13   ISE= 3.23E-14   ITF= 6.20E+00    KF= 0.00E+00
+      MJC= 5.11E-01   MJE= 3.97E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.28E+00    NF= 1.20E+00    NR= 1.41E+00   PTF= 0.00E+00
+       RB= 7.17E+00   RBM= 1.00E+01    RC= 5.54E-01    RE= 1.00E-02
+       TF= 1.50E-09    TR= 0.00E+00   VAF= 7.00E+02   VAR= 8.58E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.00E+06
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS64/SIE NPN(
+       AF= 1.00E+00    BF= 1.70E+02    BR= 9.55E-02   CJC= 2.58E-11
+      CJE= 4.69E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 2.13E-01   IKR= 1.00E+00   IRB= 6.59E-02    IS= 1.69E-12
+      ISC= 9.92E-13   ISE= 3.23E-14   ITF= 6.20E+00    KF= 0.00E+00
+      MJC= 5.11E-01   MJE= 3.97E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.28E+00    NF= 1.20E+00    NR= 1.41E+00   PTF= 0.00E+00
+       RB= 7.17E+00   RBM= 1.00E+01    RC= 5.54E-01    RE= 1.00E-02
+       TF= 1.50E-09    TR= 0.00E+00   VAF= 7.00E+02   VAR= 8.58E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.00E+06
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BCX42/SIE PNP(
+       AF= 1.00E+00    BF= 1.52E+02    BR= 1.16E-01   CJC= 3.90E-11
+      CJE= 5.74E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.18E-01   IKR= 1.00E+00   IRB= 8.03E-02    IS= 7.59E-14
+      ISC= 1.72E-12   ISE= 1.90E-14   ITF= 1.28E+00    KF= 0.00E+00
+      MJC= 4.85E-01   MJE= 4.41E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.27E+00    NF= 1.01E+00    NR= 1.21E+00   PTF= 0.00E+00
+       RB= 2.42E+00   RBM= 4.95E+00    RC= 8.89E-01    RE= 1.00E-02
+       TF= 8.18E-10    TR= 0.00E+00   VAF= 3.28E+02   VAR= 2.61E+01
+      VJC= 3.00E-01   VJE= 3.15E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.01E+00   XTI= 3.00E+00)
*********************************************************************
*$
.MODEL BSS63/SIE PNP(
+       AF= 1.00E+00    BF= 1.52E+02    BR= 1.16E-01   CJC= 3.90E-11
+      CJE= 5.74E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.18E-01   IKR= 1.00E+00   IRB= 8.03E-02    IS= 7.59E-14
+      ISC= 1.72E-12   ISE= 1.90E-14   ITF= 1.28E+00    KF= 0.00E+00
+      MJC= 4.85E-01   MJE= 4.41E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.27E+00    NF= 1.01E+00    NR= 1.21E+00   PTF= 0.00E+00
+       RB= 2.42E+00   RBM= 4.95E+00    RC= 8.89E-01    RE= 1.00E-02
+       TF= 8.18E-10    TR= 0.00E+00   VAF= 3.28E+02   VAR= 2.61E+01
+      VJC= 3.00E-01   VJE= 3.15E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.01E+00   XTI= 3.00E+00)
*********************************************************************
*$
***************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR CHIP IN BCV61A *
* REV: 1.0                                                    *
***************************************************************
.MODEL BCV61A/SIE NPN (IS=45.000F NF=1.010 BF=180 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
***************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR CHIP IN BCV61B *
* REV: 1.0                                                    *
***************************************************************
.MODEL BCV61B/SIE NPN (IS=45.000F NF=1.010 BF=280 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
***************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR CHIP IN BCV61C *
* REV: 1.0                                                    *
***************************************************************
.MODEL BCV61C/SIE NPN (IS=45.000F NF=1.010 BF=480 VAF=74.000 IKF=0.708
+ ISE=55.668F NE=2.567 NR=1.015 BR=7.745 VAR=14.000 IKR=1.000
+ ISC=1.084P NC=4.063
+ RB=9.000 IRB=0.100M RBM=4.500
+ RE=0.350 RC=1.445
+ CJE=13.050P VJE=0.690 MJE=0.375 FC=0.750
+ CJC=4.100P VJC=0.750 MJC=0.420 XCJC=0.650
+ TF=0.620N TR=2.5N PTF=1.000
+ XTF=68.000 VTF=1.000 ITF=0.720
+ XTB=1.400 EG=1.110 XTI=3.200
+ KF=10.000F AF=1.000)
*$
***************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR CHIP IN BCV62A *
* REV: 1.0                                                    *
***************************************************************
.MODEL BCV62A/SIE PNP (IS=28.000F NF=1.000 BF=160 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
***************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR CHIP IN BCV62B *
* REV: 1.0                                                    *
***************************************************************
.MODEL BCV62B/SIE PNP (IS=28.000F NF=1.000 BF=520 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$
***************************************************************
* SPICE2G6 MODEL OF THE NPN BIPOLAR TRANSISTOR CHIP IN BCV62C *
* REV: 1.0                                                    *
***************************************************************
.MODEL BCV62C/SIE PNP (IS=28.000F NF=1.000 BF=520 VAF=43.000 IKF=0.380
+ ISE=24.903F NE=2.234 NR=1.005 BR=4.800 VAR=6.960 IKR=0.932
+ ISC=0.125P NC=2.074
+ RB=2.200 IRB=0.100M RBM=1.500
+ RE=0.300 RC=2.251
+ CJE=11.800P VJE=1.000 MJE=0.435 FC=0.750
+ CJC=8.700P VJC=0.900 MJC=0.600 XCJC=0.650
+ TF=0.600N TR=2.604N PTF=1.000
+ XTF=6.500 VTF=2.000 ITF=0.314
+ XTB=1.600 EG=1.110 XTI=3.300
+ KF=5.000F AF=1.000)
*$

***Si-PIN-diodes:
****************
.SUBCKT BA592/SIE 100 200 
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 101.1054m
R2 3 4 1.7826k
R4 1 2 700e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 36.0461m
*Constant reverse-bias capacitance
C1 3 2 670.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=3.8637f N=1.0409 TT=140.0n
+ XTI=3.0 FC=0.5 EG=1.16 BV=69.5 IBV=1.0e-9)
.MODEL DIO2 D(IS=0.63606f N=1.09748)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BA892/SIE 100 200 
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*RF Resistances: R1,R2,and G1
R1 1 3 101.1054m
R2 3 4 1.7826k
R4 1 2 700e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 36.0461m
*Constant reverse-bias capacitance
C1 3 2 670.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=3.8637f N=1.0409 TT=140.0n
+ XTI=3.0 FC=0.5 EG=1.16 BV=69.5 IBV=1.0e-9)
.MODEL DIO2 D(IS=0.63606f N=1.09748)
.MODEL DIO3 D(IS=1E-20)
.ENDS
*$
*
.SUBCKT BA595/SIE 100 200 
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 124.8206m
R2 3 4 35.6857k
R4 1 2 200e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 73.7937m
*Constant reverse-bias capacitance
C1 3 2 34.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=33.7179p N=1.2196 TT=2.1u
+ XTI=3.0 FC=0.5 EG=1.16 BV=69.5 IBV=1.0e-9)
.MODEL DIO2 D(IS=1.7137p N=1.37029)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BA597/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 181.0956m
R2 3 4 10.0666k
R4 1 2 400e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 232.2403m
*Constant reverse-bias capacitance
C1 3 2 100.2f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=16.1921p N=1.0208 TT=2.5u
+ XTI=2.5 FC=0.5 EG=1.16 BV=59.0 IBV=0.2e-6)
.MODEL DIO2 D(IS=0.40557p N=1.17228)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BAR63-03w/SIE 100 200 
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 100e9
.MODEL D1 D(IS=2.406e-16 N=1.0886 RS=610.2m XTI=4.0 EG=1.16
+ CJO=224.89f M=0.134846 VJ=0.224 FC=0.5 TT=95.0n)
.MODEL D2 D(IS=323.2287f N=1.5188 RS=100m XTI=4.0 EG=0.68
+ BV=84.0 IBV=10.0e-9 TT=170.0n)
.ENDS 
*$
*
.SUBCKT BAR63-02w/SIE 100 200 
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 100e9
.MODEL D1 D(IS=2.406e-16 N=1.0886 RS=610.2m XTI=4.0 EG=1.16
+ CJO=224.89f M=0.134846 VJ=0.224 FC=0.5 TT=95.0n)
.MODEL D2 D(IS=323.2287f N=1.5188 RS=100m XTI=4.0 EG=0.68
+ BV=84.0 IBV=10.0e-9 TT=170.0n)
.ENDS 
*$
*
.SUBCKT BAR64-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*RF Resistances: R1,R2,and G1
R1 1 3 100.0m
R2 3 4 38.7897k
R4 1 2 200e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 198.3118m
*Constant reverse-bias capacitance
C1 3 2 138.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=3.7137p N=1.0371 TT=1.6u
+ XTI=2.5 FC=0.5 EG=1.16 BV=200.0 IBV=2.0e-6)
.MODEL DIO2 D(IS=0.10434p N=1.17786)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BAR64-02w/SIE 100 200 
*Package SCD80:
 LAIL1  1   10    0.45nH 
 CACC2 10    2    90fF   
 LAOL2 10  100    0.15nH 
 LCOL3 2   200    0.1nH  
*RF Resistances: R1,R2,and G1
R1 1 3 10.0m
R2 3 4 24.7641k
R4 1 2 8e9
G1 3 4 POLY(2) 3 4 9 0 0 0 0 0 116.9433m
*Constant reverse-bias capacitance
C1 3 2 105.0f
*Junction diode
D1 4 2 DIO1 
*Reverse-bias clamp
G2 0 5 4 2 1.0
D3 0 5 DIO3 
V1 5 6 0.0
D4 6 0 DIO3 
*Calculation of fractional power current
H1 7 0 V1 1.0
V2 7 8 0.0
D2 8 0 DIO2 
*Fractional power current to voltage conversion
F1 0 9 v2 10.0
R3 9 0 1000.0
.MODEL DIO1 D(IS=64.7476p N=1.3625 TT=1.6u
+ XTI=3.0 FC=0.5 EG=1.16 BV=200.0 IBV=30.0e-9)
.MODEL DIO2 D(IS=3.04922p N=1.539959)
.MODEL DIO3 D(IS=1E-20)
.ENDS 
*$
*
.SUBCKT BAR65-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 600e9
.MODEL D1 D(IS=4.490e-16 N=1.0856 RS=180.0m XTI=2.5 EG=1.16
+ CJO=451.35f M=0.103494 VJ=0.224 FC=0.5 TT=45.0n)
.MODEL D2 D(IS=57.3327f N=1.5375 RS=100m XTI=3.0 EG=1.05
+ BV=74.0 IBV=0.2e-9 TT=2.4u)
.ENDS 
*$
*
.SUBCKT BAR65-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Dioden:
D1 1 2 D1 
D2 1 2 D2 
R1 1 2 600e9
.MODEL D1 D(IS=4.490e-16 N=1.0856 RS=180.0m XTI=2.5 EG=1.16
+ CJO=451.35f M=0.103494 VJ=0.224 FC=0.5 TT=45.0n)
.MODEL D2 D(IS=57.3327f N=1.5375 RS=100m XTI=3.0 EG=1.05
+ BV=74.0 IBV=0.2e-9 TT=2.4u)
.ENDS 
*$
*

***Si-schottky-diodes:
****************
.SUBCKT BAS40-04w/SIE 100 200 300
*anode1:         100
*cathode2:       200
*common cathode1 and anode2: 300
*Package SOT323_2:
LIND1    1   10    0.50nH
LIND2    2   20    0.50nH
CAP1    10   20    61fF  
CAP2     3   10    140fF 
CAP3     3   20    140fF 
LIND3   10  100    0.45nH
LIND4   20  200    0.45nH
LIND5    3  300    0.41nH
*internal diodes:
D1 1 3 D1
D2 3 2 D1
R1 1 3 100e9
R2 3 2 100e9
.MODEL D1 D(IS=5.1307n N=1.0692 RS=6.6597 XTI=2.5 EG=0.69 
+CJO=2.74237p M=0.47 VJ=0.465 FC=0.5 TT=25.0p BV=59.0 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAS70-04w/SIE 100 200 300
*anode1:         100
*cathode2:       200
*common cathode1 and anode2: 300
*Package SOT323_2:
LIND1    1   10    0.50nH
LIND2    2   20    0.50nH
CAP1    10   20    61fF  
CAP2     3   10    140fF 
CAP3     3   20    140fF 
LIND3   10  100    0.45nH
LIND4   20  200    0.45nH
LIND5    3  300    0.41nH
*internal diodes:
D1 1 3 D1
D2 3 2 D1
R1 1 3 100e9
R2 3 2 100e9
.MODEL D1 D(IS=1.8321n N=1.0681 RS=30.067 XTI=2.5 EG=0.69 
+CJO=1.388p M=0.327 VJ=0.342 FC=0.5 TT=25.0p BV=85.0 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BAT14-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 20e9
.MODEL D1 D(IS=45.2665p N=1.082 RS=4.9 XTI=2.5 EG=0.73
+ CJO=161.71f M=0.1397 VJ=0.224 FC=0.5 TT=3.0p BV=7.2 IBV=1.0u)
.ENDS 
*$
*
.SUBCKT BAT165/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 40e6
.MODEL D1 D(IS=50.19n N=1.0283 RS=260.0m XTI=2.5 EG=0.71
+ CJO=38.27p M=0.494 VJ=0.471 FC=0.5 TT=10.0p BV=42.95 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAT60A/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 3e5
*R1 1 2 1.5e6
.MODEL D1 D(IS=109.371u N=1.0853 RS=37.64m XTI=1.5 EG=0.54
+ CJO=52.1p M=0.241 VJ=0.224 FC=0.5 TT=10.0p BV=13.0 IBV=1.0m)
.ENDS 
*$
*
.SUBCKT BAT60B/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 3e7
.MODEL D1 D(IS=780.0n N=1.043 RS=91.3m XTI=1.1 EG=0.68
+ CJO=34.0p M=0.122 VJ=0.224 FC=0.5 TT=10.0p BV=19.1 IBV=1.0m)
.ENDS 
*$
*
.SUBCKT BAT62-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Dioden:
D1 1 2 D1
R1 1 2 40e6
.MODEL D1 D(IS=250.0n N=1.04 RS=190.0 XTI=1.5 EG=0.53
+ CJO=284.2f M=0.17 VJ=0.224 FC=0.5 TT=25.0p BV=59.3 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAT62-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Dioden:
D1 1 2 D1
R1 1 2 40e6
.MODEL D1 D(IS=250.0n N=1.04 RS=190.0 XTI=1.5 EG=0.53
+ CJO=284.2f M=0.17 VJ=0.224 FC=0.5 TT=25.0p BV=59.3 IBV=10.0u)
.ENDS 
*$
*
.SUBCKT BAT63-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 20e6
.MODEL D1 D(IS=761.0n N=1.06 RS=2.633 XTI=1.5 EG=0.59
+ CJO=628.0f M=0.185 VJ=0.224 FC=0.5 TT=25.0p BV=14.4 IBV=100.0u)
.ENDS 
*$
*
.SUBCKT BAT63-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Diode:
D1 1 2 D1
R1 1 2 20e6
.MODEL D1 D(IS=761.0n N=1.06 RS=2.633 XTI=1.5 EG=0.59
+ CJO=628.0f M=0.185 VJ=0.224 FC=0.5 TT=25.0p BV=14.4 IBV=100.0u)
.ENDS 
*$
*
.SUBCKT BAT68-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*interne Diode:
D1 1 2 D1
R1 1 2 400e6
.MODEL D1 D(IS=8.976n N=1.07 RS=1.49 XTI=1.5 EG=0.68 
+CJO=786.1f M=0.1096 VJ=0.224 FC=0.5 TT=3.0p BV=15.15 IBV=10.0u)
.ENDS 
*$

*
***Si-varactor-diodes:
****************
.SUBCKT BB439/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 200e9
.MODEL D1 D(IS=2.9f N=1.0462 RS=113.0m XTI=4.0 EG=1.16
+ CJO=56.0p M=1.267 VJ=3.826 FC=0.5 TT=120.0n BV=40.6 IBV=0.3n)
.ENDS 
*$
*
.SUBCKT BB535/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 200e9
.MODEL D1 D(IS=1.05f N=1.02 RS=0.8 XTI=4.0 EG=1.16
+ CJO=26.05p M=1.2 VJ=3.68 FC=0.5 TT=120.0n BV=37.6 IBV=0.3e-9)
.ENDS 
*$
*
.SUBCKT BB555/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*interne Diode:
D1 1 2 D1
R1 1 2 200e9
.MODEL D1 D(IS=1.05f N=1.02 RS=0.8 XTI=4.0 EG=1.16
+ CJO=26.05p M=1.2 VJ=3.68 FC=0.5 TT=120.0n BV=37.6 IBV=0.3e-9)
.ENDS 
*$
*
.SUBCKT BB545/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 250e9
.MODEL D1 D(IS=1.2f N=1.03 RS=300.0m XTI=3.5 EG=1.16
+ CJO=30.96p M=1.089 VJ=1.94 FC=0.5 TT=90.0n BV=33.6 IBV=0.2n)
.ENDS 
*$
*
.SUBCKT BB565/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 250e9
.MODEL D1 D(IS=1.2f N=1.03 RS=300.0m XTI=3.5 EG=1.16
+ CJO=30.96p M=1.089 VJ=1.94 FC=0.5 TT=90.0n BV=33.6 IBV=0.2n)
.ENDS 
*$
*
.SUBCKT BB639/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=2.5f N=1.0327 RS=120.9m XTI=4.0 EG=1.16
+ CJO=55.24p M=1.608 VJ=4.525 FC=0.5 TT=160.0n BV=36.0 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BB659/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=2.5f N=1.0327 RS=120.9m XTI=4.0 EG=1.16
+ CJO=55.24p M=1.608 VJ=4.525 FC=0.5 TT=160.0n BV=36.0 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BB639c/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=2.4745f N=1.036 RS=108.58m XTI=3.0 EG=1.16
+ CJO=57.3p M=1.606 VJ=4.0473 FC=0.5 TT=140.0n BV=37.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB659c/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=2.4745f N=1.036 RS=108.58m XTI=3.0 EG=1.16
+ CJO=57.3p M=1.606 VJ=4.0473 FC=0.5 TT=140.0n BV=37.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB644/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=3.2f N=1.04 RS=119.64m XTI=4.0 EG=1.16
+ CJO=61.21p M=1.83 VJ=4.64 FC=0.5 TT=80.0n BV=35.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB664/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=3.2f N=1.04 RS=119.64m XTI=4.0 EG=1.16
+ CJO=61.21p M=1.83 VJ=4.64 FC=0.5 TT=80.0n BV=35.3 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB669/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=6.0f N=1.04 RS=1.5 XTI=3.5 EG=1.16
+ CJO=79.64p M=2.167 VJ=6.467 FC=0.5 TT=120.0n BV=37.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB689/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=6.0f N=1.04 RS=1.5 XTI=3.5 EG=1.16
+ CJO=79.64p M=2.167 VJ=6.467 FC=0.5 TT=120.0n BV=37.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB804/SIE 100 200 300
*anode1:         100
*anode2:         200
*common cathode: 300
*Package SOT23_2:
LIND1     1   10   0.77nH
LIND2     2   20   0.77nH
CAP2     10   20   73fF  
CAP3      3   10   120fF 
CAP4      3   20   120fF 
LIND10   10  100   0.56nH
LIND20   20  200   0.56nH
LIND30    3  300   0.49nH
*internal diodes:
D1 1 3 D1
D2 2 3 D1
R1 1 3 120e9
R2 2 3 120e9
.MODEL D1 D(IS=2.3251f N=1.01 RS=310.0m XTI=3.0 EG=1.16
+ CJO=78.5149p M=0.475854 VJ=0.872356 FC=0.5 TT=137.0n
+ BV=22.5 IBV=0.7e-9)
.ENDS 
*$
*
.SUBCKT BB814/SIE 100 200 300
*anode1:         100
*anode2:         200
*common cathode: 300
*Package SOT23_2:
LIND1     1   10   0.77nH
LIND2     2   20   0.77nH
CAP2     10   20   73fF  
CAP3      3   10   120fF 
CAP4      3   20   120fF 
LIND10   10  100   0.56nH
LIND20   20  200   0.56nH
LIND30    3  300   0.49nH
*internal diodes:
D1 1 3 D1
D2 2 3 D1
R1 1 3 90e9
R2 2 3 90e9
.MODEL D1 D(IS=4.1f N=1.0 RS=260.0m XTI=3.5 EG=1.16
+ CJO=83.9p M=0.775 VJ=1.6 FC=0.5 TT=137.0n BV=33.5 IBV=1.0e-9)
.ENDS 
*$
*
.SUBCKT BB831/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=6.942e-16 N=1.0424 RS=150.0m XTI=3.5 EG=1.16
+ CJO=14.48p M=1.032 VJ=2.0093 FC=0.5 TT=80.0n BV=33.8 IBV=0.3n)
.ENDS 
*$
*
.SUBCKT BB833/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 150e9
.MODEL D1 D(IS=113.2f N=1.22 RS=120.0m XTI=3.0 EG=1.16
+ CJO=14.79p M=1.464 VJ=2.594 FC=0.5 TT=120.0n BV=43.9 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB835/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=2.58f N=1.046 RS=220.0m XTI=3.5 EG=1.16
+ CJO=13.314p M=2.1498 VJ=4.968 FC=0.5 TT=45.0n BV=39.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB837/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=0.7f N=1.0462 RS=200.0m XTI=3.5 EG=1.16
+ CJO=9.997p M=1.508 VJ=3.334 FC=0.5 TT=70.0n BV=39.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB857/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 50e9
.MODEL D1 D(IS=0.7f N=1.0462 RS=200.0m XTI=3.5 EG=1.16
+ CJO=9.997p M=1.508 VJ=3.334 FC=0.5 TT=70.0n BV=39.6 IBV=1.0n)
.ENDS 
*$
*
.SUBCKT BB914/SIE 100 200 300
*anode1:         100
*anode2:         200
*common cathode: 300
*Package SOT23_2:
LIND1     1   10   0.77nH
LIND2     2   20   0.77nH
CAP2     10   20   73fF  
CAP3      3   10   120fF 
CAP4      3   20   120fF 
LIND10   10  100   0.56nH
LIND20   20  200   0.56nH
LIND30    3  300   0.49nH
*internal diodes:
D1 1 3 D1
D2 2 3 D1
R1 1 3 150e9
R2 2 3 150e9
.MODEL D1 D(IS=4.8f N=1.01 RS=280.0m XTI=3.0 EG=1.16
+ CJO=84.7873p M=0.819203 VJ=1.57986 FC=0.5 TT=137n BV=35.5 IBV=0.3e-9)
.ENDS 
*$
*
.SUBCKT BBY51-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.06 RS=200.0m XTI=3.0 EG=1.16
+ CJO=7.318p M=0.9256 VJ=2.378 FC=0.5 TT=220.0n BV=10.6 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY51-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.06 RS=200.0m XTI=3.0 EG=1.16
+ CJO=7.318p M=0.9256 VJ=2.378 FC=0.5 TT=220.0n BV=10.6 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY52-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.1 RS=430.0m XTI=3.0 EG=1.16
+ CJO=2.49p M=0.71 VJ=1.559 FC=0.5 TT=220.0n BV=9.6 IBV=50.0n)
.ENDS 
*$
*
.SUBCKT BBY52-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 70e9
.MODEL D1 D(IS=0.6f N=1.1 RS=430.0m XTI=3.0 EG=1.16
+ CJO=2.49p M=0.71 VJ=1.559 FC=0.5 TT=220.0n BV=9.6 IBV=50.0n)
.ENDS 
*$
*
.SUBCKT BBY53-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.6f N=1.065 RS=200.0m XTI=3.0 EG=1.16
+ CJO=8.65p M=0.838 VJ=1.025 FC=0.5 TT=290.0n BV=16.5 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY53-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.6f N=1.065 RS=200.0m XTI=3.0 EG=1.16
+ CJO=8.65p M=0.838 VJ=1.025 FC=0.5 TT=290.0n BV=16.5 IBV=10.0n)
.ENDS 
*$
*
.SUBCKT BBY55-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.8f N=1.02 RS=120.0m XTI=3.5 EG=1.16
+ CJO=26.66p M=0.717 VJ=1.573 FC=0.5 TT=100.0n BV=25.8 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BBY55-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 100e9
.MODEL D1 D(IS=0.8f N=1.02 RS=120.0m XTI=3.5 EG=1.16
+ CJO=26.66p M=0.717 VJ=1.573 FC=0.5 TT=100.0n BV=25.8 IBV=0.5n)
.ENDS 
*$
*
.SUBCKT BBY56-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 80e9
.MODEL D1 D(IS=2.7f N=1.008 RS=80.0m XTI=3.5 EG=1.16
+ CJO=79.2p M=0.87 VJ=0.746 FC=0.5 TT=45.0n BV=12.5 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY56-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 80e9
.MODEL D1 D(IS=2.7f N=1.008 RS=80.0m XTI=3.5 EG=1.16
+ CJO=79.2p M=0.87 VJ=0.746 FC=0.5 TT=45.0n BV=12.5 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY57-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 30e9
.MODEL D1 D(IS=5.6f N=1.085 RS=95.86m XTI=3.5 EG=1.16
+ CJO=30.3p M=1.294 VJ=1.524 FC=0.5 TT=150.0n BV=20.0 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY57-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 30e9
.MODEL D1 D(IS=5.6f N=1.085 RS=95.86m XTI=3.5 EG=1.16
+ CJO=30.3p M=1.294 VJ=1.524 FC=0.5 TT=150.0n BV=20.0 IBV=100.0n)
.ENDS 
*$
*
.SUBCKT BBY58-03w/SIE 100 200
*Package SOD323:
L1       1   10  0.55nH 
C2      10    2  110fF  
L2      10  100  0.67nH 
L3      2   200  0.55nH 
*internal diode:
D1 1 2 D1
R1 1 2 15e9
.MODEL D1 D(IS=5.0f N=1.05 RS=160.0m XTI=3.0 EG=1.11
+ CJO=29.424p M=1.0836 VJ=1.472 FC=0.5 TT=45.0n BV=23.1 IBV=100.0n)
.ENDS
*$
*
.SUBCKT BBY58-02w/SIE 100 200
*Package SCD80:
LAIL1  1   10    0.45nH 
CACC2 10    2    90fF   
LAOL2 10  100    0.15nH 
LCOL3 2   200    0.1nH  
*internal diode:
D1 1 2 D1
R1 1 2 15e9
.MODEL D1 D(IS=5.0f N=1.05 RS=160.0m XTI=3.0 EG=1.11
+ CJO=29.424p M=1.0836 VJ=1.472 FC=0.5 TT=45.0n BV=23.1 IBV=100.0n)
.ENDS 
*$
*

********************************************
* BCR103      SUBCIRCUIT                   *
********************************************
.subckt BCR103/SIE 3 1 2
*                  C B E
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR108      SUBCIRCUIT                   *
********************************************
.subckt BCR108/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR108T     SUBCIRCUIT                   *
********************************************
.subckt BCR108T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR108W     SUBCIRCUIT                   *
********************************************
.subckt BCR108W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 2.2k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR112      SUBCIRCUIT                   *
********************************************
.subckt BCR112/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR112W     SUBCIRCUIT                   *
********************************************
.subckt BCR112W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 4.7k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR116      SUBCIRCUIT                   *
********************************************
.subckt BCR116/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR116W     SUBCIRCUIT                   *
********************************************
.subckt BCR116W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR119      SUBCIRCUIT                   *
********************************************
.subckt BCR119/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR119W     SUBCIRCUIT                   *
********************************************
.subckt BCR119W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR129      SUBCIRCUIT                   *
********************************************
.subckt BCR129/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR129T     SUBCIRCUIT                   *
********************************************
.subckt BCR129T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR133      SUBCIRCUIT                   *
********************************************
.subckt BCR133/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR133T     SUBCIRCUIT                   *
********************************************
.subckt BCR133T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR133W     SUBCIRCUIT                   *
********************************************
.subckt BCR133W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 10.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR135      SUBCIRCUIT                   *
********************************************
.subckt BCR135/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR135T     SUBCIRCUIT                   *
********************************************
.subckt BCR135T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR135W     SUBCIRCUIT                   *
********************************************
.subckt BCR135W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR139      SUBCIRCUIT                   *
********************************************
.subckt BCR139/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR141      SUBCIRCUIT                   *
********************************************
.subckt BCR141/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR141T     SUBCIRCUIT                   *
********************************************
.subckt BCR141T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR141W     SUBCIRCUIT                   *
********************************************
.subckt BCR141W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR142      SUBCIRCUIT                   *
********************************************
.subckt BCR142/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR142T     SUBCIRCUIT                   *
********************************************
.subckt BCR142T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR142W     SUBCIRCUIT                   *
********************************************
.subckt BCR142W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR146      SUBCIRCUIT                   *
********************************************
.subckt BCR146/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR146W     SUBCIRCUIT                   *
********************************************
.subckt BCR146W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR148      SUBCIRCUIT                   *
********************************************
.subckt BCR148/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR148T     SUBCIRCUIT                   *
********************************************
.subckt BCR148T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR148W     SUBCIRCUIT                   *
********************************************
.subckt BCR148W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0357
.ends 
*$
********************************************
* BCR153      SUBCIRCUIT                   *
********************************************
.subckt BCR153/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR158      SUBCIRCUIT                   *
********************************************
.subckt BCR158/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR158T     SUBCIRCUIT                   *
********************************************
.subckt BCR158T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR158W     SUBCIRCUIT                   *
********************************************
.subckt BCR158W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 2.2k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR162      SUBCIRCUIT                   *
********************************************
.subckt BCR162/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR162T     SUBCIRCUIT                   *
********************************************
.subckt BCR162T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR162W     SUBCIRCUIT                   *
********************************************
.subckt BCR162W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 4.7k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR166      SUBCIRCUIT                   *
********************************************
.subckt BCR166/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR166W     SUBCIRCUIT                   *
********************************************
.subckt BCR166W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR169      SUBCIRCUIT                   *
********************************************
.subckt BCR169/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR169W     SUBCIRCUIT                   *
********************************************
.subckt BCR169W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 4.7k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR179      SUBCIRCUIT                   *
********************************************
.subckt BCR179/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR183      SUBCIRCUIT                   *
********************************************
.subckt BCR183/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR183T     SUBCIRCUIT                   *
********************************************
.subckt BCR183T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR183W     SUBCIRCUIT                   *
********************************************
.subckt BCR183W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 10.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR185      SUBCIRCUIT                   *
********************************************
.subckt BCR185/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR185W     SUBCIRCUIT                   *
********************************************
.subckt BCR185W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 10.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR189      SUBCIRCUIT                   *
********************************************
.subckt BCR189/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR191      SUBCIRCUIT                   *
********************************************
.subckt BCR191/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR191W     SUBCIRCUIT                   *
********************************************
.subckt BCR191W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR192      SUBCIRCUIT                   *
********************************************
.subckt BCR192/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR192T     SUBCIRCUIT                   *
********************************************
.subckt BCR192T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 22.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR192W     SUBCIRCUIT                   *
********************************************
.subckt BCR192W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 22.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR196      SUBCIRCUIT                   *
********************************************
.subckt BCR196/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 22.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR196W     SUBCIRCUIT                   *
********************************************
.subckt BCR196W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 22.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR198      SUBCIRCUIT                   *
********************************************
.subckt BCR198/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR198T     SUBCIRCUIT                   *
********************************************
.subckt BCR198T/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 47.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR198W     SUBCIRCUIT                   *
********************************************
.subckt BCR198W/SIE 3 1 2
LBO   1  11       0.45n
LBI  11  12       0.50n
R1   12 111 RPLMOD 47.0k 
LEO   2  22       0.45n
LEI  22 222       0.50n
R2  111 222 RPLMOD 47.0k 
LCO   3  33       0.41n
CEB  11  22       0.06p
CCB  11  33       0.14p
CCE  33  22       0.14p
Q1   33 111  22   T0358
.ends 
*$
********************************************
* BCR503      SUBCIRCUIT                   *
********************************************
.subckt BCR503/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR505      SUBCIRCUIT                   *
********************************************
.subckt BCR505/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR512      SUBCIRCUIT                   *
********************************************
.subckt BCR512/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR519      SUBCIRCUIT                   *
********************************************
.subckt BCR519/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR521      SUBCIRCUIT                   *
********************************************
.subckt BCR521/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 1.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR523      SUBCIRCUIT                   *
********************************************
.subckt BCR523/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR533      SUBCIRCUIT                   *
********************************************
.subckt BCR533/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR553      SUBCIRCUIT                   *
********************************************
.subckt BCR553/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 2.2k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0221
.ends 
*$
********************************************
* BCR555      SUBCIRCUIT                   *
********************************************
.subckt BCR555/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 2.2k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR562      SUBCIRCUIT                   *
********************************************
.subckt BCR562/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 4.7k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR569      SUBCIRCUIT                   *
********************************************
.subckt BCR569/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 4.7k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 47.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR571      SUBCIRCUIT                   *
********************************************
.subckt BCR571/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 1.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR573      SUBCIRCUIT                   *
********************************************
.subckt BCR573/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 1.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$
********************************************
* BCR583      SUBCIRCUIT                   *
********************************************
.subckt BCR583/SIE 3 1 2
LBO   1  11        0.4n
LBI  11  12        0.5n
R1   12 111 RPLMOD 10.0k 
LEO   2  22        0.4n
LEI  22 222        0.5n
R2  111 222 RPLMOD 10.0k 
LCO   3  33        0.4n
CEB  11  22       0.05p
CCB  11  33       0.10p
CCE  33  22       0.10p
Q1   33 111  22   T0220
.ends 
*$

**************************************************************
* BCR08PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR08PN/SIE 100 200 300 400 500 600
*                    E1   B1   C2   E2   B2   C1
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR10PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR10PN/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10k 
R21   1   2 RPLMOD 10k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10k 
R22   4   5 RPLMOD 10k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR19PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR19PN/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR22PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR22PN/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 22k 
R21   1   2 RPLMOD 22k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 22k 
R22   4   5 RPLMOD 22k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR35PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR35PN/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR39PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR39PN/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR48PN       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR48PN/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR108S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR108S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR108U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR108U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR108UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR108UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR112S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR112S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR112U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR112U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR112UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR112UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR116S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR116S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR116U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR116U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR116UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR116UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR119S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR119S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR119U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR119U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR119UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR119UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR129S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR129S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR133S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR133S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR133U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR133U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR133UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR133UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR135S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR135S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR135U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR135U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR135UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR135UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR139U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR139U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR141S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR141S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR141U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR141U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR141UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR141UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR142U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR142U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR142UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR142UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR146U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR146U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR146UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR146UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR148S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR148S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR148U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR148U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0357
.ends 
*$
**************************************************************
* BCR148UPN     SUBCIRCUIT                                   *
**************************************************************
.subckt BCR148UPN/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0357
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR158S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR158S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR158U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR158U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 2.2k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 2.2k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR162U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR162U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 4.7k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR166U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR166U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR169S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR169S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR169U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR169U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 4.7k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 4.7k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
****************************************************************
* BCR179S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR179S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR183S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR183S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR183U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR183U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 10.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 10.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR185S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR185S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR185U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR185U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 10.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 10.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR189U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR189U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR191S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR191S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR191U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR191U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 22.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 22.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR192U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR192U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 22.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 22.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR198S       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR198S/SIE 100 200 300 400 500 600
L1O 100  10        0.4n
L2O 200  20        0.4n
L3O 300  30        0.5n
L4O 400  40        0.4n
L5O 500  50        0.4n
L6O 600  60        0.5n
C12  10  20       0.15p
C23  20  30       0.15p
C34  30  40       0.10p
C45  40  50       0.15p
C56  50  60       0.15p
C16  10  60       0.10p
L1I  10   1        0.6n
L4I  40   4        0.6n
L2I  20  22        0.6n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.6n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$
**************************************************************
* BCR198U       SUBCIRCUIT                                   *
**************************************************************
.subckt BCR198U/SIE 100 200 300 400 500 600
L1O 100  10        0.5n
L2O 200  20        0.5n
L3O 300  30        0.6n
L4O 400  40        0.5n
L5O 500  50        0.5n
L6O 600  60        0.6n
C12  10  20       0.10p
C23  20  30       0.10p
C34  30  40       0.10p
C45  40  50       0.10p
C56  50  60       0.10p
C16  10  60       0.10p
L1I  10   1        0.9n
L4I  40   4        0.9n
L2I  20  22        0.9n
R11  22   2 RPLMOD 47.0k 
R21   1   2 RPLMOD 47.0k 
L5I  50  55        0.9n
R12  55   5 RPLMOD 47.0k 
R22   4   5 RPLMOD 47.0k 
Q1   60   2   1   T0358
Q2   30   5   4   T0358
.ends 
*$

*---------------------------------------------------------------*
* connections:    gate                                          *
*                 | source                                      *
*                 | | drain                                     *
*                 | | |                                         *
*.subckt BS-170   1 2 3                                         *
*---------------------------------------------------------------*
 
 
*n-MOSFET*60V 300mA 5 Ohm*Add_in_Line
.SUBCKT BS170/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 1117M
D170 76 95 DREV
.MODEL DREV D CJO=0.025N RS=50M TT=30N IS=300P BV=60
M170 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.235 KP=0.158
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.09N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.287N M=0.539 VJ=0.985
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.7 KP=0.135
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 120mA 45 Ohm*Add_in_Line
.SUBCKT BSP125/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 593M
D125 76 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=80N IS=300P BV=600
M125 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.972 KP=0.185
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=1
M3 86 11 8 8 MSW
COX 11 8 0.012N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.012N M=0.409 VJ=0.981
CGS 76 11 0.085N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-18.35 KP=0.00175
LG 4 1 7N
.ENDS
*******
*Depl-MOS*200V 480mA 3.5 Ohm*Add_in_Line
.SUBCKT BSP149/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 578M
D149 76 97 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=35N IS=300P BV=200
M149 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.334 KP=1.022
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.08N
DGD 8 98 DCGD
.MODEL DCGD D CJO=59P M=0.542 VJ=0.979
CGS 76 99 225P
VGC 87 99 3
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-16.18 KP=0.34
LG 95 1 7N
.ENDS
*******
*p-MOSFET*60V 1700mA 0.35 Ohm*Add_in_Line
.SUBCKT BSP171/SIE 1 2 3
LS 5 2 7N
LD 102 3 5N
RG 4 95 33.1
RS 5 76 92M
D171 102 76 DREV
.MODEL DREV D CJO=1N RS=20M TT=100N IS=300P BV=60
M171 117 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.582 KP=0.858
M2 11 117 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.3
M3 117 11 8 8 MSW
COX 11 8 0.5N
DGD 117 8 DCGD
.MODEL DCGD D CJO=758P M=0.635 VJ=1.015
CGS 76 95 0.6N
V8 11 95 -14
RH 117 102 10M
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 1800mA 0.3 Ohm*Add_in_Line
.SUBCKT BSP295/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 130M
D295 76 95 DREV
.MODEL DREV D CJO=0.2N RS=50M TT=30N IS=300P BV=50
M295 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.38 KP=1.27
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.287N M=0.539 VJ=0.985
CGS 76 11 0.26N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.51 KP=1.7
LG 4 1 7N
.ENDS
*******
*n-MOSFET*500V 400mA 4 Ohm*Add_in_Line
.SUBCKT BSP299/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 8.9
RS 5 76 0.383
D299 76 97 DREV
.MODEL DREV D CJO=0.13N RS=20M TT=150N IS=300P BV=500
M299 99 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.946 KP=0.973
M2 96 99 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 99 96 8 8 MSW
COX 96 8 0.6N
DGD 8 99 DCGD
.MODEL DCGD D CJO=0.098N M=0.57 VJ=1.032
CGS 76 96 0.32N
MRDR 99 99 97 99 MVRD
.MODEL MVRD NMOS VTO=-27.83 KP=0.0138
LG 95 1 7N
.ENDS
*******
*p-MOSFET*50V 1100mA 0.8 Ohm*Add_in_Line
.SUBCKT BSP315/SIE 1 2 3
LS 5 2 7N
LD 102 3 5N
RG 4 95 5.5M
RS 5 76 252M
D315 102 76 DREV
.MODEL DREV D CJO=300P RS=20M TT=100N IS=300P BV=50
M315 102 95 76 76 MBUZ
.MODEL MBUZ PMOS  VTO=-1.246 KP=0.37
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 102 11 8 8 MSW
COX 11 8 180P
DGD 102 8 DCGD
.MODEL DCGD D CJO=527P M=0.605 VJ=0.913
CGS 76 95 215P
VGC 11 95 -20
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
LG 4 1 7N
.ENDS
*******
*p-MOSFET*100V 650mA 2.2 Ohm*Add_in_Line
.SUBCKT BSP316/SIE 1 2 3
LS 5 2 7N
LD 117 3 5N
RG 4 95 18.4
RS 5 76 485M
D316 117 76 DREV
.MODEL DREV D CJO=250P RS=20M TT=100N IS=300P BV=100
M316 116 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.415 KP=0.413
M2 11 116 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 116 11 8 8 MSW
COX 11 8 0.15N
DGD 116 8 DCGD
.MODEL DCGD D CJO=405P M=0.725 VJ=1.021
CGS 76 95 0.31N
R15 116 117 280M
V8 11 95 -12
LG 4 1 7N
.ENDS
*******
*p-MOSFET*200V 370mA 6 Ohm*Add_in_Line
.SUBCKT BSP317/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 95 5.5M
RS 5 76 322M
D317 86 76 DREV
.MODEL DREV D CJO=100P RS=20M TT=60N IS=300P BV=200
M317 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.419 KP=0.321
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 102 11 8 8 MSW
COX 11 8 340P
DGD 102 8 DCGD
.MODEL DCGD D CJO=98P M=0.477 VJ=0.971
CGS 76 95 225P
VGC 11 95 -13
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
MHELP 86 102 102 102 MVRD
.MODEL MVRD PMOS VTO=57.7 KP=7M
LG 4 1 7N
.ENDS
*******
*n-MOSFET*60V 2600mA 0.15 Ohm*Add_in_Line
.SUBCKT BSP318/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 8.2
RS 5 76 0.066
D318 76 97 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=150N IS=300P BV=60
M318 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.286 KP=14.9
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.6N
DGD 8 98 DCGD
.MODEL DCGD D CJO=343P M=0.505 VJ=1.032
CGS 76 99 0.55N
VGC 87 99 2
RD 98 97 0.045
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 3800mA 0.07 Ohm*Add_in_Line
.SUBCKT BSP319/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 15.5
RS 5 76 0.051
D318 76 97 DREV
.MODEL DREV D CJO=0.65N RS=20M TT=150N IS=300P BV=50
M319 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.851 KP=31.25
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.55N
DGD 8 98 DCGD
.MODEL DCGD D CJO=435P M=0.433 VJ=1.004
CGS 76 99 0.8N
VGC 87 99 4
RD 98 97 0.005
LG 95 1 7N
.ENDS
*******
*n-MOSFET*240V 320mA 8 Ohm*Add_in_Line
.SUBCKT BSP88/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 183M
D88 76 95 DREV
.MODEL DREV D CJO=0.05N RS=20M TT=20N IS=300P BV=240
M88 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=0.849 KP=0.149
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.025N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.025N M=0.454 VJ=0.974
CGS 76 11 0.08N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-8.953 KP=0.0305
LG 4 1 7N
.ENDS
*******
*n-MOSFET*240V 360mA 6 Ohm*Add_in_Line
.SUBCKT BSP89/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 249M
DSP89 76 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=30N IS=300P BV=240
MSP89 86 11 76 98 MBUZ
.MODEL MBUZ NMOS VTO=1.487 KP=0.225
M2 96 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 96 8 8 MSW
COX 96 8 0.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.04N M=0.495 VJ=0.98
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.76 KP=0.039
VGC 96 11 -3
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 220mA 6 Ohm*Add_in_Line
.SUBCKT BSS100/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 796M
D100 100 95 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=50N IS=300P BV=100
M100 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=1.162 KP=0.157
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.025N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.013N M=0.506 VJ=0.997
CGS 100 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-5.72 KP=0.07
V7 99 11 4.5
LG 76 11 7N
.ENDS
*******
*n-MOSFET*240V 130mA 16 Ohm*Add_in_Line
.SUBCKT BSS101/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 213M
D101 76 95 DREV
.MODEL DREV D CJO=0.017N RS=20M TT=20N IS=300P BV=240
M101 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.448 KP=0.104
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.09N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.012N M=0.383 VJ=0.948
CGS 76 11 0.055N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-9.707 KP=.015
LG 4 1 7N
.ENDS
*******
*p-MOSFET*50V 170mA 10 Ohm*Add_in_Line
.SUBCKT BSS110/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 3246M
D110 86 76 DREV
.MODEL DREV D CJO=0.035N RS=20M TT=60N IS=300P BV=50
M110 86 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.462 KP=0.04
M2 11 86 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.183N
DGD 86 8 DCGD
.MODEL DCGD D CJO=0.183N M=0.439 VJ=1.097
CGS 76 11 0.02N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 170mA 6 Ohm*Add_in_Line
.SUBCKT BSS119/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 59
RS 5 76 1.045
D119 76 97 DREV
.MODEL DREV D CJO=0.025N RS=20M TT=30N IS=300P BV=100
M119 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.999 KP=0.134
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.025N
DGD 8 98 DCGD
.MODEL DCGD D CJO=22.4P M=0.688 VJ=1.082
CGS 76 99 0.039N
VGC 87 99 2
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-4.859 KP=0.073
LG 95 1 7N
.ENDS
*******
*n-MOSFET*600V 100mA 45 Ohm*Add_in_Line
.SUBCKT BSS125/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 160M
D125 76 95 DREV
.MODEL DREV D CJO=0.02N RS=50M TT=150N IS=300P BV=600
M125 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.012 KP=0.168
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 0.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.011N M=0.371 VJ=0.969
CGS 76 11 0.095N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-17.18 KP=0.00215
LG 4 1 7N
.ENDS
*******
*Depl-MOS*240V 150mA 20 Ohm*Add_in_Line
.SUBCKT BSS129/SIE 1 2 3
LS 5 2 7N
LD 83 3 5N
RG 4 11 5
RS 5 76 1M
DBSS129 76 83 DREV
.MODEL DREV D CJO=30P RS=20M TT=50N IS=30P BV=240
+
MBSS129 90 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.30 KP=0.165
M2 11 90 8 8 MSW
.MODEL MSW NMOS VTO=5 KP=25
+
M3 90 11 8 8 MSW
COX 11 8 66P
DGD 8 90 DCGD
.MODEL DCGD D CJO=13.57P M=0.475 VJ=1.062
CGS 76 11 25P
RDR 90 83 2
LG 4 1 7N
.ENDS
*******
*Depl-MOS*600V 80mA 60 Ohm*Add_in_Line
.SUBCKT BSS135/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 392M
D135 76 97 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=50N IS=300P BV=600
M135 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-1.164 KP=0.159
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.025N
DGD 8 98 DCGD
.MODEL DCGD D CJO=37P M=0.833 VJ=1.147
CGS 76 99 0.065N
VGC 87 99 8
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-17.03 KP=0.0018
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 220mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS138/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 871M
D138 76 95 DREV
.MODEL DREV D CJO=0.06N RS=20M TT=15N IS=300P BV=50
M138 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.281 KP=0.186
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.08N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.062N M=0.791 VJ=1.174
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-48.9 KP=.045
LG 4 1 7N
.ENDS
*******
*n-MOSFET*65V 220mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS145/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 96 385M
D145 96 95 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=70N IS=300P BV=65
M145 86 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=1.93 KP=0.145
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.044N M=0.857 VJ=1.077
CGS 96 11 0.059N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-70.541 KP=0.034
LG 4 1 7N
.ENDS
*******
*Depl-MOS*250V 70mA 100 Ohm*Add_in_Line
.SUBCKT BSS229/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 40
RS 5 76 349M
D229 76 97 DREV
.MODEL DREV D CJO=0.02N RS=20M TT=50N IS=300P BV=250
M229 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=-0.85 KP=0.107
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.01N
DGD 8 98 DCGD
.MODEL DCGD D CJO=8P M=0.545 VJ=1.004
CGS 76 99 0.07N
VGC 87 99 5
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-8.608 KP=0.0046
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 1400mA 0.3 Ohm*Add_in_Line
.SUBCKT BSS295/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 137M
D295 100 95 DREV
.MODEL DREV D CJO=0.25N RS=20M TT=300N IS=300P BV=50
M295 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=1.174 KP=0.924
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.55N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.167N M=0.522 VJ=0.996
CGS 100 11 0.33N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-7.196 KP=5
V7 99 11 3.5
LG 76 11 7N
.ENDS
*******
*n-MOSFET*100V 800mA 0.8 Ohm*Add_in_Line
.SUBCKT BSS296/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 18.4
RS 5 76 0.163
D296 76 97 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=150N IS=300P BV=100
M296 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.28 KP=0.82
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.15N
DGD 8 98 DCGD
.MODEL DCGD D CJO=83.8P M=0.518 VJ=0.994
CGS 76 99 0.37N
VGC 87 99 4
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-8.21 KP=0.29
LG 95 1 7N
.ENDS
*******
*n-MOSFET*200V 480mA 2 Ohm*Add_in_Line
.SUBCKT BSS297/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 20.8
RS 5 76 0.092
D297 76 97 DREV
.MODEL DREV D CJO=0.22N RS=20M TT=150N IS=300P BV=200
M297 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.47 KP=0.998
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 87 8 8 MSW
COX 87 8 0.12N
DGD 8 98 DCGD
.MODEL DCGD D CJO=65.74P M=0.533 VJ=0.989
CGS 76 99 0.32N
VGC 87 99 4
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-9.5 KP=0.11
LG 95 1 7N
.ENDS
*******
*p-MOSFET*50V 130mA 10 Ohm*Add_in_Line
.SUBCKT BSS84/SIE 1 2 3
LS 5 2 7N
LD 87 3 5N
RG 4 11 5.5M
RS 5 76 3759M
D84 87 76 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=45N IS=300P BV=50
M84 87 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.585 KP=0.041
M2 11 87 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 87 11 8 8 MSW
COX 11 8 0.1N
DGD 87 8 DCGD
.MODEL DCGD D CJO=0.183N M=0.439 VJ=1.097
CGS 76 11 0.021N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*240V 290mA 6 Ohm*Add_in_Line
.SUBCKT BSS87/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 193M
D87 76 95 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=30N IS=300P BV=240
M87 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.475 KP=0.212
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.032N M=0.448 VJ=0.974
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.44 KP=0.026
LG 4 1 7N
.ENDS
*******
*n-MOSFET*240V 250mA 8 Ohm*Add_in_Line
.SUBCKT BSS88/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 1 76 5.5M
RS 5 100 242M
D88 100 95 DREV
.MODEL DREV D CJO=0.05N RS=20M TT=20N IS=300P BV=240
M88 86 11 100 100 MBUZ
.MODEL MBUZ NMOS VTO=0.782 KP=0.195
M2 99 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 99 8 8 MSW
COX 99 8 0.06N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.25N M=0.44 VJ=0.968
CGS 100 11 0.08N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-8.481 KP=0.037
V7 99 11 5.5
LG 76 11 7N
.ENDS
*******
*n-MOSFET*240V 290mA 6 Ohm*Add_in_Line
.SUBCKT BSS89/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 164M
DSS89 76 95 DREV
.MODEL DREV D CJO=0.04N RS=20M TT=30N IS=300P BV=240
MSS89 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.651 KP=0.227
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.035N M=0.493 VJ=0.983
CGS 76 11 0.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.86 KP=0.032
LG 4 1 7N
.ENDS
*******
*p-MOSFET*240V 150mA 20 Ohm*Add_in_Line
.SUBCKT BSS92/SIE  1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 5.5M
RS 5 76 1084M
D92 97 76 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=35N IS=300P BV=240
M92 98 99 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-1.721 KP=0.071
M2 87 98 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 98 87 8 8 MSW
COX 87 8 0.2N
DGD 98 8 DCGD
.MODEL DCGD D CJO=59P M=0.542 VJ=0.979
CGS 76 99 0.085N
VGC 87 99 -20
MHELP 98 98 97 98 MVRD
.MODEL MVRD PMOS VTO=31.5 KP=0.006
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 300mA 3.5 Ohm*Add_in_Line
.SUBCKT BSS98/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 663M
D98 76 95 DREV
.MODEL DREV D CJO=0.03N RS=20M TT=2.2N IS=300P BV=50
M98 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=1.099 KP=0.15
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.062N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.062N M=0.791 VJ=1.174
CGS 76 11 0.03N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-48.9 KP=.2
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ342KL/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 7.4
RS 5 76 0.01
D342 76 97 DREV
.MODEL DREV D CJO=6N RS=20M TT=150N IS=300P BV=50
M342 98 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.883 KP=17.8
M2 96 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 96 8 8 MSW
COX 96 8 15N
DGD 8 98 DCGD
.MODEL DCGD D CJO=3.6N M=0.548 VJ=1.027
CGS 76 96 8N
RD 98 97 0.0038
LG 95 1 7N
.ENDS
*******
*n-MOSFET*50V 42A 28mOhm*Add_in_Line
.SUBCKT BUZ12/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 24M
D12 76 86 DREV
.MODEL DREV D CJO=2N RS=20M TT=1.8N IS=300P BV=50
M12 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.516 KP=39.13
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 4N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.9N M=0.556 VJ=1.131
CGS 76 11 1.77N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*400V 15A 0.3 Ohm*Add_in_Line
.SUBCKT BUZ323/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 18M
D323 76 95 DREV
.MODEL DREV D CJO=0.7N RS=20M TT=40N IS=300P BV=400
M323 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.398 KP=16.36
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.649N M=0.555 VJ=1.006
CGS 76 11 2N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-13.58 KP=0.314
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 21A 85mOhm*Add_in_Line
.SUBCKT BUZ21/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 52M
D21 76 95 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=50N IS=300P BV=100
M21 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.644 KP=21.65
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.092N M=0.571 VJ=1.058
CGS 76 11 1.2N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.52 KP=12.5
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 23A 70mOhm*Add_in_Line
.SUBCKT BUZ10/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 51M
D10 76 95 DREV
.MODEL DREV D CJO=0.65N RS=20M TT=2.2N IS=300P BV=50
M10 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.287 KP=19.15
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.5N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.5N M=0.513 VJ=1.098
CGS 76 11 0.7N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*500V 8.5A 0.8 Ohm*Add_in_Line
.SUBCKT BUZ40B/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 20M
D40B 76 95 DREV
.MODEL DREV D CJO=0.5N RS=20M TT=400N IS=300P BV=500
M40B 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.813 KP=5.282
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.05N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.421N M=0.579 VJ=1.038
CGS 76 11 1.8N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.87 KP=0.112
LG 4 1 7N
.ENDS
*******
*n-MOSFET*800V 4A 2.5 Ohm*Add_in_Line
.SUBCKT BUZ81/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 23M
D81 76 95 DREV
.MODEL DREV D CJO=0.4N RS=20M TT=625N IS=300P BV=800
M81 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.463 KP=3.263
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.265N M=0.495 VJ=0.975
CGS 76 11 1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-24.99 KP=.022
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 13.5A 0.2 Ohm*Add_in_Line
.SUBCKT BUZ20/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 77M
D20 76 95 DREV
.MODEL DREV D CJO=0.35N RS=20M TT=100N IS=300P BV=100
M20 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.515 KP=7.547
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.560N M=0.556 VJ=1.056
CGS 76 11 0.46N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.71 KP=4
LG 4 1 7N
.ENDS
*******
*n-MOSFET*1000V 4.5A 2.6 Ohm*Add_in_Line
.SUBCKT BUZ358/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 64M
D358 76 95 DREV
.MODEL DREV D CJO=0.27N RS=20M TT=800N IS=300P BV=1000
M358 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.587 KP=15.84
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.75N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.553N M=0.541 VJ=1.016
CGS 76 11 2N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-41.34 KP=0.016
LG 4 1 7N
.ENDS
*******
*n-MOSFET*800V 3A 3 Ohm*Add_in_Line
.SUBCKT BUZ80A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 3.9
RS 5 76 51M
D80A 76 95 DREV
.MODEL DREV D CJO=0.45N RS=20M TT=1000N IS=300P BV=800
M80A 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.525 KP=2.996
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 2.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.171N M=0.545 VJ=1.022
CGS 76 11 1.55N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-26.5 KP=0.014
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ84A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 17M
D84A 76 95 DREV
.MODEL DREV D CJO=0.35N RS=20M TT=700N IS=300P BV=800
M84A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.736 KP=5.583
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.668N M=0.556 VJ=1.019
CGS 76 11 1.76N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-33.83 KP=0.029
LG 4 1 7N
.ENDS
*******
*p-MOSFET*50V 8A 0.3 Ohm*Add_in_Line
.SUBCKT BUZ171/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 128M
D171 86 76 DREV
.MODEL DREV D CJO=1.5N RS=20M TT=29N IS=300P BV=50
M171 86 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.245 KP=0.973
M2 11 86 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.313N
DGD 86 8 DCGD
.MODEL DCGD D CJO=1.313N M=0.521 VJ=0.7
CGS 76 11 0.85N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*500V 4.5A 1.5 Ohm*Add_in_Line
.SUBCKT BUZ41A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 31M
D41A 76 95 DREV
.MODEL DREV D CJO=0.28N RS=20M TT=500N IS=300P BV=500
M41A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.277 KP=7.765
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.209N M=0.564 VJ=1.035
CGS 76 11 0.79N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-17.57 KP=0.055
LG 4 1 7N
.ENDS
*******
*n-MOSFET*60V 12A 0.15 Ohm*Add_in_Line
.SUBCKT BUZ70/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 136M
D70 76 95 DREV
.MODEL DREV D CJO=0.4N RS=20M TT=8.3N IS=300P BV=60
M70 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.68 KP=13.67
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.7N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.213N M=0.45 VJ=1.03
CGS 76 11 0.35N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 14A 0.1 Ohm*Add_in_Line
.SUBCKT BUZ71L/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 64M
D71L 76 86 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=10.7N IS=300P BV=50
M71L 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.057 KP=26.47
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=1
M3 86 11 8 8 MSW
COX 11 8 0.15N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.373N M=0.484 VJ=1.048
CGS 76 11 0.55N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 23A 70mOhm*Add_in_Line
.SUBCKT BUZ10L/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 70M
D10L 76 86 DREV
.MODEL DREV D CJO=7N RS=20M TT=4N IS=300P BV=50
M10L 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.562 KP=1415
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.491N M=0.502 VJ=1.047
CGS 76 11 1.5N
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ64/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 30M
D64 76 95 DREV
.MODEL DREV D CJO=0.8N RS=20M TT=100N IS=300P BV=400
M64 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.737 KP=13.14
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.775N M=0.609 VJ=1.045
CGS 76 11 1.8N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-14.1 KP=0.27
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 14A 0.1 Ohm*Add_in_Line
.SUBCKT BUZ71/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 90M
D71 76 95 DREV
.MODEL DREV D CJO=0.48N RS=20M TT=7.1N IS=300P BV=50
M71 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.354 KP=20.7
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.9N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.340N M=0.480 VJ=1.099
CGS 76 11 0.4N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*1000V 3.4A 4 Ohm*Add_in_Line
.SUBCKT BUZ51/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 9.8
RS 5 76 1M
D51 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=300N IS=300P BV=1000
M51 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.994 KP=1.859
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.3
M3 86 11 8 8 MSW
COX 11 8 0.8N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.268N M=0.537 VJ=1.014
CGS 76 11 1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-40.65 KP=0.0075
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 8A 0.9 Ohm*Add_in_Line
.SUBCKT BUZ91A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 18M
D91A 76 95 DREV
.MODEL DREV D CJO=0.6N RS=50M TT=500N IS=300P BV=600
M91A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.725 KP=6.555
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.458N M=0.579 VJ=1.035
CGS 76 11 1.48N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-21.84 KP=0.069
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 3.3A 3 Ohm*Add_in_Line
.SUBCKT BUZ92/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 41M
D92 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=500N IS=300P BV=600
M92 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.875 KP=2.349
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.168N M=0.567 VJ=1.038
CGS 76 11 0.6N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-19.91 KP=0.027
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 12A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ344/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 22M
D344 76 95 DREV
.MODEL DREV D CJO=3N RS=20M TT=100N IS=300P BV=100
M344 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.36 KP=44.73
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=2.9N M=0.575 VJ=1.017
CGS 76 11 11N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-55.64 KP=3
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 60A 18mOhm*Add_in_Line
.SUBCKT BUZ100/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 95 14M
D100 95 86 DREV
.MODEL DREV D CJO=3N RS=20M TT=200N IS=300P BV=50
M100 76 11 95 95 MBUZ
.MODEL MBUZ NMOS VTO=3.85 KP=30.02
M2 11 76 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 76 11 8 8 MSW
COX 11 8 5N
DGD 8 76 DCGD
.MODEL DCGD D CJO=1.389N M=0.511 VJ=1.055
CGS 95 11 3.03N
MRDR 76 76 86 76 MVRD
.MODEL MVRD NMOS VTO=-84.79 KP=5.5
LG 4 1 7N
.ENDS
*******
*n-MOSFET*400V 11A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ61A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 3M
D61A 76 95 DREV
.MODEL DREV D CJO=0.4N RS=20M TT=400N IS=300P BV=400
M61A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.748 KP=5.122
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.505N M=0.537 VJ=0.988
CGS 76 11 1.49N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-14.22 KP=0.20
LG 4 1 7N
.ENDS
*******
*n-MOSFET*400V 3A 1.8 Ohm*Add_in_Line
.SUBCKT BUZ76/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 98M
D76 76 95 DREV
.MODEL DREV D CJO=0.12N RS=20M TT=800N IS=300P BV=400
M76 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.51 KP=2.422
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 .33N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.136N M=0.497 VJ=0.982
CGS 76 11 0.48N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-14.63 KP=0.06
LG 4 1 7N
.ENDS
*******
*n-MOSFET*800V 5.3A 2 Ohm*Add_in_Line
.SUBCKT BUZ356/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 53M
D356 76 95 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=300N IS=300P BV=800
M356 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.24 KP=6.863
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.365N M=0.48 VJ=0.96
CGS 76 11 4.3N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-25.73 KP=0.044
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 34A 55mOhm*Add_in_Line
.SUBCKT BUZ22/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 34M
D22 76 95 DREV
.MODEL DREV D CJO=0.7N RS=20M TT=10N IS=300P BV=100
M22 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.76 KP=16.39
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.264N M=0.52 VJ=0.991
CGS 76 11 1.27N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-16.44 KP=4.5
LG 4 1 7N
.ENDS
*******
*n-MOSFET*200V 21A 0.13 Ohm*Add_in_Line
.SUBCKT BUZ30A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 36M
D30A 76 95 DREV
.MODEL DREV D CJO=0.6N RS=20M TT=60N IS=300P BV=200
M30A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.316 KP=29.38
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.7N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.860N M=0.527 VJ=0.983
CGS 76 11 1.29N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-12.08 KP=1.4
LG 4 1 7N
.ENDS
*******
*n-MOSFET*400V 12.5A 0.35 Ohm*Add_in_Line
.SUBCKT BUZ325/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 24M
D325 76 95 DREV
.MODEL DREV D CJO=0.5N RS=20M TT=400N IS=300P BV=400
M30A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.232 KP=13.57
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.628N M=0.533 VJ=0.981
CGS 76 11 1.71N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.38 KP=0.25
LG 4 1 7N
.ENDS
*******
*n-MOSFET*400V 5.5A 1 Ohm*Add_in_Line
.SUBCKT BUZ60/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 19M
D60 76 95 DREV
.MODEL DREV D CJO=.25N RS=20M TT=900N IS=300P BV=400
M60 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.711 KP=3.721
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 .6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.275N M=0.515 VJ=0.981
CGS 76 11 0.76N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.02 KP=0.107
LG 4 1 7N
.ENDS
*******
*n-MOSFET*400V 10.5A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ326/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 24M
D326 76 95 DREV
.MODEL DREV D CJO=0.45N RS=20M TT=480N IS=300P BV=400
M326 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.329 KP=13.21
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.507N M=0.497 VJ=0.982
CGS 76 11 1.19N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-15.31 KP=0.23
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 30A 40mOhm*Add_in_Line
.SUBCKT BUZ11/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 76 22M
D11 76 86 DREV
.MODEL DREV D CJO=1.5N RS=20M TT=4.2N IS=300P BV=50
M11 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.315 KP=24.41
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 3N
DGD 8 95 DCGD
.MODEL DCGD D CJO=1.03N M=0.537 VJ=1.135
CGS 76 11 1.22N
M347 86 95 95 95 MVRD
.MODEL MVRD NMOS VTO=-15.6 KP=10.5
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 58A 18mOhm*Add_in_Line
.SUBCKT BUZ346/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 10M
D346 76 95 DREV
.MODEL DREV D CJO=5.2N RS=20M TT=5.2N IS=300P BV=50
M346 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.188 KP=86.71
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 13N
DGD 8 95 DCGD
.MODEL DCGD D CJO=3.25N M=0.61 VJ=1.054
CGS 76 11 4N
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ53A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 30M
D53A 76 95 DREV
.MODEL DREV D CJO=0.22N RS=20M TT=2000N IS=300P BV=1000
M53A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.294 KP=2.402
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.45N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.124N M=0.443 VJ=0.968
CGS 76 11 1.46N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-36.62 KP=0.007
LG 4 1 7N
.ENDS
*******
*p-MOSFET*50V 22A 0.15 Ohm*Add_in_Line
.SUBCKT BUZ271/SIE 1 2 3
LS 5 2 7N
LD 87 3 5N
RG 4 11 5.5M
RS 5 76 58M
D271 87 76 DREV
.MODEL DREV D CJO=2N RS=20M TT=200N IS=300P BV=50
M271 87 11 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.1 KP=1.956
M2 11 87 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 87 11 8 8 MSW
COX 11 8 4.3N
DGD 87 8 DCGD
.MODEL DCGD D CJO=4.659N M=0.855 VJ=1.046
CGS 76 11 2N
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 12A 0.5 Ohm*Add_in_Line
.SUBCKT BUZ334/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 3M
D334 76 95 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=500N IS=300P BV=600
M334 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.748 KP=6.535
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.826N M=0.604 VJ=1.014
CGS 76 11 3.02N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-23.94 KP=.098
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 42A 35mOhm*Add_in_Line
.SUBCKT BUZ12AL/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 7.4
RS 5 76 13M
D12AL 76 95 DREV
.MODEL DREV D CJO=2.5N RS=20M TT=20N IS=300P BV=50
M12AL 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.913 KP=73.81
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 6N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.64N M=0.564 VJ=1.036
CGS 76 11 2.1N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-28.82 KP=6
LG 4 1 7N
.ENDS
*******
*n-MOSFET*200V 7A 0.4 Ohm*Add_in_Line
.SUBCKT BUZ73L/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 6.3
RS 5 76 42M
D73L 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=100N IS=300P BV=200
M73L 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.941 KP=10.94
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 2.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.371N M=0.57 VJ=1.036
CGS 76 11 0.6N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.66 KP=.465
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ71LGE/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 9.3
RS 5 76 34M
D71L 76 95 DREV
.MODEL DREV D CJO=0.55N RS=20M TT=30N IS=300P BV=50
M71L 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=1.918 KP=15.59
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 2.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.411N M=0.507 VJ=1.042
CGS 76 11 0.55N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-30.7 KP=1.1
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 10A 0.2 Ohm*Add_in_Line
.SUBCKT BUZ72/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 96M
D72 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=50N IS=300P BV=100
M72 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.716 KP=4.828
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.423N M=0.568 VJ=1.053
CGS 76 11 0.36N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.58 KP=1.3
LG 4 1 7N
.ENDS
*******
*n-MOSFET*1000V 2.5A 5 Ohm*Add_in_Line
.SUBCKT BUZ311/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 91M
D311 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=2000N IS=300P BV=1000
M311 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.098 KP=3.683
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.35N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.115N M=0.438 VJ=0.968
CGS 76 11 1.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-65.26 KP=0.0034
LG 4 1 7N
.ENDS
*******
*n-MOSFET*1000V 2A 8 Ohm*Add_in_Line
.SUBCKT BUZ50B/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 107M
D50B 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=2000N IS=300P BV=1000
M50B 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.342 KP=4.093
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 86 11 8 8 MSW
COX 11 8 0.4N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.123N M=0.451 VJ=0.969
CGS 76 11 1.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-35.45 KP=0.0075
LG 4 1 7N
.ENDS
*******
*n-MOSFET*200V 7A 0.4 Ohm*Add_in_Line
.SUBCKT BUZ73/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 75M
D73 76 95 DREV
.MODEL DREV D CJO=0.28N RS=20M TT=200N IS=300P BV=200
M73 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.308 KP=8.528
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.348N M=0.544 VJ=1.056
CGS 76 11 0.47N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-9.182 KP=0.59
LG 4 1 7N
.ENDS
*******
*n-MOSFET*100V 41A 45 Ohm*Add_in_Line
.SUBCKT BUZ345/SIE 1 2 3
LS 5 2 7N
LD 87 3 5N
RG 4 11 5.5M
RS 5 76 36M
D345 76 87 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=4.5N IS=300P BV=100
M345 87 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.618 KP=31.3
M2 11 87 8 8 MSW
.MODEL MSW NMOS VTO=0.0005 KP=10
M3 87 11 8 8 MSW IC=300,0,0
COX 11 8 5.5N
DGD 8 87 DCGD
.MODEL DCGD D CJO=2.13N M=0.614 VJ=1.146
CGS 76 11 1.6N
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ220/SIE 1 2 3
LS 5 2 7N
LD 71 3 5N
RG 4 11 5.5M
RS 5 76 43M
D220 76 71 DREV
.MODEL DREV D CJO=580P RS=20M TT=121N IS=300P BV=900
M220 87 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.517 KP=4.781
M2 11 87 8 8 MSW
.MODEL MSW NMOS VTO=0.0005 KP=5
M3 87 11 8 8 MSW
COX 11 8 3.8N
DGD 8 87 DCGD
.MODEL DCGD D CJO=580P M=0.62 VJ=1.131
CGS 76 11 4.1N
MDR 71 87 87 87 MVARD
.MODEL MVARD NMOS VTO=-27.07 KP=.038
LG 4 1 7N
.ENDS
*******
*n-MOSFET*800V 1.5A 8 Ohm*Add_in_Line
.SUBCKT BUZ78/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 9.8
RS 5 76 155M
D78 76 95 DREV
.MODEL DREV D CJO=0.1N RS=20M TT=500N IS=300P BV=800
M78 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.649 KP=2.584
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.4
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.123N M=0.54 VJ=1.02
CGS 76 11 0.34N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-28.66 KP=0.007
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ10M/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 17.9
RS 5 76 0.018
D10M 76 97 DREV
.MODEL DREV D CJO=0.7N RS=20M TT=150N IS=300P BV=50
M10M 98 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.864 KP=8.138
M2 96 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 98 96 8 8 MSW
COX 96 8 2N
DGD 8 98 DCGD
.MODEL DCGD D CJO=0.371N M=0.467 VJ=1.029
CGS 76 96 0.7N
RD 98 97 0.025
LG 95 1 7N
.ENDS
*******
*n-MOSFET*800V 7.5A 1 Ohm*Add_in_Line
.SUBCKT BUZ305/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 5.8
RS 5 76 0.044
D305 76 97 DREV
.MODEL DREV D CJO=0.75N RS=20M TT=150N IS=300P BV=800
M305 99 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.617 KP=10.163
M2 96 99 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.5
M3 99 96 8 8 MSW
COX 96 8 4N
DGD 8 99 DCGD
.MODEL DCGD D CJO=0.735N M=0.549 VJ=0.996
CGS 76 96 2.1N
MRDR 99 99 97 99 MVRD
.MODEL MVRD NMOS VTO=-53.44 KP=0.022
LG 95 1 7N
.ENDS
*******
*p-MOSFET*100V 15A 0.3mOhm*Add_in_Line
.SUBCKT BUZ272/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 95 9.6
RS 5 76 56M
D272 86 76 DREV
.MODEL DREV D CJO=1.7N RS=20M TT=180N IS=300P BV=100
M272 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.149 KP=1.761
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=.5
M3 102 11 8 8 MSW
COX 11 8 700P
DGD 102 8 DCGD
.MODEL DCGD D CJO=692P M=0.659 VJ=1.029
CGS 76 95 2N
VGC 11 95 -10
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
MHELP 86 102 102 102 MVRD
.MODEL MVRD PMOS VTO=13 KP=0.8
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 2.7A 4 Ohm*Add_in_Line
.SUBCKT BUZ77A/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 99 6.8
RS 5 76 0.029
D77A 76 97 DREV
.MODEL DREV D CJO=0.25N RS=20M TT=800N IS=300P BV=600
M77A 98 99 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.909 KP=1.283
M2 87 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.4
M3 98 87 8 8 MSW
COX 87 8 0.17N
DGD 8 98 DCGD
.MODEL DCGD D CJO=116.75P M=0.553 VJ=1.017
CGS 76 99 0.34N
VGC 87 99 3
MHELP 98 98 97 98 MVRD
.MODEL MVRD NMOS VTO=-21.01 KP=0.018
LG 95 1 7N
.ENDS
*******
*n-MOSFET*200V 33A 70mOhm*Add_in_Line
.SUBCKT BUZ341/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 14M
D341 76 95 DREV
.MODEL DREV D CJO=0.9N RS=20M TT=30N IS=300P BV=200
M341 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.248 KP=26.86
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.7N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.547N M=0.522 VJ=0.977
CGS 76 11 2.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.85 KP=2.5
LG 4 1 7N
.ENDS
*******
*n-MOSFET*500V 8A 0.8 Ohm*Add_in_Line
.SUBCKT BUZ331/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 24M
D331 76 95 DREV
.MODEL DREV D CJO=0.4 RS=20M TT=600N IS=300P BV=500
M331 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.089 KP=9.144
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.353N M=0.498 VJ=0.983
CGS 76 11 1.24N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-17.9 KP=0.104
LG 4 1 7N
.ENDS
*******
*n-MOSFET*200V 22A 0.12 Ohm*Add_in_Line
.SUBCKT BUZ350/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 23M
D350 76 95 DREV
.MODEL DREV D CJO=.8N RS=20M TT=270N IS=300P BV=200
M350 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.366 KP=23.29
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=1.103N M=0.53 VJ=0.984
CGS 76 11 1.6N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.24 KP=1.65
LG 4 1 7N
.ENDS
*******
*n-MOSFET*1000V 2.5A 5 Ohm*Add_in_Line
.SUBCKT BUZ310/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 31M
D310 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=2000N IS=300P BV=1000
+
M310 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.118 KP=2.132
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.35N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.649N M=0.555 VJ=1.006
CGS 76 11 1.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-33.31 KP=0.007
LG 4 1 7N
.ENDS
*******
*n-MOSFET*200V 14.5A 0.2 Ohm*Add_in_Line
.SUBCKT BUZ31/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 28M
D31 76 95 DREV
.MODEL DREV D CJO=0.33N RS=20M TT=100N IS=300P BV=200
M31 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.048 KP=13.97
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.626N M=0.523 VJ=0.985
CGS 76 11 0.81N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-9.935 KP=1.08
LG 4 1 7N
.ENDS
*******
*n-MOSFET*600V 4.5A 1.6 Ohm*Add_in_Line
.SUBCKT BUZ90/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 20M
D90 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=750N IS=300P BV=600
M90 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.227 KP=4.485
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.5N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.197N M=0.48 VJ=0.977
CGS 76 11 0.7N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-24.69 KP=0.031
LG 4 1 7N
.ENDS
*******
*n-MOSFET*500V 13.5A 0.4 Ohm*Add_in_Line
.SUBCKT BUZ338/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 14M
D338 76 95 DREV
.MODEL DREV D CJO=0.65N RS=20M TT=500N IS=300P BV=500
M338 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.53 KP=15.731
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.867N M=0.578 VJ=1.016
CGS 76 11 2.5N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-19.18 KP=0.175
LG 4 1 7N
.ENDS
*******
*n-MOSFET*500V 2.1A 4 Ohm*Add_in_Line
.SUBCKT BUZ74A/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 76M
D74A 76 95 DREV
.MODEL DREV D CJO=0.15N RS=20M TT=500N IS=300P BV=500
M74A 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.835 KP=1.768
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 0.38N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.136N M=0.534 VJ=1.014
CGS 76 11 0.47N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-18.14 KP=0.032
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ45B/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 53M
D45B 76 95 DREV
.MODEL DREV D CJO=0.8N RS=20M TT=120N IS=300P BV=500
M45B 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.268 KP=9.404
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2.3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.753N M=0.575 VJ=1.046
CGS 76 11 4.15N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-18.48 KP=0.149
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ72GE/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 96M
D72 76 95 DREV
.MODEL DREV D CJO=0.3N RS=20M TT=50N IS=300P BV=100
M72 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.716 KP=4.828
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.423N M=0.568 VJ=1.053
CGS 76 11 0.36N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-11.58 KP=1.3
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ73AGE/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 60M
D73A 76 95 DREV
.MODEL DREV D CJO=0.2N RS=20M TT=100N IS=300P BV=200
M73 86 11 76 96 MBUZ
.MODEL MBUZ NMOS VTO=3.618 KP=3.398
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 1.2N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.279N M=0.60 VJ=0.965
CGS 76 11 0.36N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-10.05 KP=.33
LG 4 1 7N
.ENDS
*******
*p-MOSFET*200V 3.6A 1.5 Ohm*Add_in_Line
.SUBCKT BUZ173/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 95 5.5M
RS 5 76 129M
D173 86 76 DREV
.MODEL DREV D CJO=550P RS=20M TT=180N IS=300P BV=200
M173 102 95 76 76 MBUZ
.MODEL MBUZ PMOS VTO=-3.419 KP=0.986
M2 11 102 8 8 MSW
.MODEL MSW PMOS VTO=-0.001 KP=5
M3 102 11 8 8 MSW
COX 11 8 300P
DGD 102 8 DCGD
.MODEL DCGD D CJO=204P M=0.533 VJ=1.01
CGS 76 95 800P
VGC 11 95 -9
* BESCHREIBT EINE IMPLANTIERTE LADUNG (VERSCHIEBT DIE EINSATZSPANNUNG)
MHELP 86 102 102 102 MVRD
.MODEL MVRD PMOS VTO=14.79 KP=0.08
LG 4 1 7N
.ENDS
*******
*n-MOSFET**Add_in_Line
.SUBCKT BUZ11GE/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
RS 5 76 16M
D11 76 95 DREV
.MODEL DREV D CJO=1.35N RS=20M TT=100N IS=300P BV=50
M11 86 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.38 KP=15.04
M2 11 86 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 86 11 8 8 MSW
COX 11 8 3N
DGD 8 86 DCGD
.MODEL DCGD D CJO=0.936N M=0.544 VJ=1.099
CGS 76 11 1.05N
MRDR 86 86 95 86 MVRD
.MODEL MVRD NMOS VTO=-13.86 KP=8.8
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 29A 60mOhm*Add_in_Line
.SUBCKT BUZ101/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 96 4.987M
D101 96 86 DREV
.MODEL DREV D CJO=0.70294N RS=20M TT=30N IS=300P BV=50
M101 95 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=3.394 KP=7.926
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 0.99N
DGD 8 95 DCGD
.MODEL DCGD D CJO=0.9904N M=0.5 VJ=1
CGS 96 11 0.62085N
MHELP 95 95 86 95 MVRD
.MODEL MVRD NMOS VTO=-2.6 KP=17.1
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 42A 23mOhm*Add_in_Line
.SUBCKT BUZ102/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 96 13.21M
D102 96 86 DREV
.MODEL DREV D CJO=2.06393N RS=20M TT=30N IS=300P BV=50
M102 95 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=3.123 KP=21.57
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 4.096N
DGD 8 95 DCGD
.MODEL DCGD D CJO=2.5964N M=0.5 VJ=1
CGS 96 11 1.53485N
MHELP 95 95 86 95 MVRD
.MODEL MVRD NMOS VTO=-7.776 KP=13
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 60A 10mOhm*Add_in_Line
.SUBCKT BUZ342/SIE 1 2 3
LS 5 2 7N
LD 86 3 5N
RG 4 11 5.5M
RS 5 96 12.74M
D342 96 86 DREV
.MODEL DREV D CJO=7.49393N RS=20M TT=85N IS=300P BV=50
M342 95 11 96 96 MBUZ
.MODEL MBUZ NMOS VTO=4.137 KP=69.74
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=5
M3 95 11 8 8 MSW
COX 11 8 163.09N
DGD 8 95 DCGD
.MODEL DCGD D CJO=11.6664N M=0.5 VJ=1
CGS 96 11 7.23985N
MHELP 95 95 86 95 MVRD
.MODEL MVRD NMOS VTO=-11.8 KP=24
LG 4 1 7N
.ENDS
*******
*n-MOSFET*50V 17.5A 0.1 Ohm*Add_in_Line
.SUBCKT BUZ104/SIE 1 2 3
LS 5 2 7N
LD 97 3 5N
RG 95 96 7.4
RS 5 76 0.063
D104 76 97 DREV
.MODEL DREV D CJO=0.37N RS=20M TT=150N IS=300P BV=50
M104 98 96 76 76 MBUZ
.MODEL MBUZ NMOS VTO=3.5 KP=8.56
M2 96 98 8 8 MSW
.MODEL MSW NMOS VTO=0.001 KP=.1
M3 98 96 8 8 MSW
COX 96 8 0.83N
DGD 8 98 DCGD
.MODEL DCGD D CJO=0.5N M=0.548 VJ=1.027
CGS 76 96 .36N
RD 98 97 0.004
LG 95 1 7N
.ENDS
*******


*****************************************************************

*****************************************************************
*                                                               *
* MODELS FROM PREVIOUS VERSION OF LIBRARY NO LONGER DISTRIBUTED *
* BY VENDOR.                                                    *
*                                                               *
*****************************************************************
.MODEL BC558B/SIE PNP(
+       AF= 1.00E+00    BF= 2.38E+02    BR= 8.07E+00   CJC= 1.02E-11
+      CJE= 1.54E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 6.60E-01
+      IKF= 3.00E-01   IKR= 1.00E+00   IRB= 1.12E+00    IS= 1.69E-14
+      ISC= 1.00E-13   ISE= 1.00E-17   ITF= 9.50E-01    KF= 0.00E+00
+      MJC= 3.45E-01   MJE= 4.19E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 2.00E+00    NF= 1.01E+00    NR= 1.00E+00   PTF= 0.00E+00
+       RB= 5.00E+01   RBM= 1.00E+01    RC= 1.49E+00    RE= 9.50E-02
+       TF= 5.64E-10    TR= 0.00E+00   VAF= 1.00E+02   VAR= 5.00E+01
+      VJC= 3.00E-01   VJE= 8.00E-01   VJS= 7.50E-01   VTF= 1.47E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 5.51E+01   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BC548C/SIE NPN(
+       AF= 1.00E+00    BF= 4.66E+02    BR= 2.42E+00   CJC= 5.17E-12
+      CJE= 1.33E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 9.00E-01
+      IKF= 1.80E-01   IKR= 1.00E+00   IRB= 1.00E+01    IS= 1.95E-14
+      ISC= 1.00E-13   ISE= 1.31E-15   ITF= 1.03E+00    KF= 0.00E+00
+      MJC= 3.19E-01   MJE= 3.26E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.32E+00    NF= 9.93E-01    NR= 1.20E+00   PTF= 0.00E+00
+       RB= 2.65E+01   RBM= 1.00E+01    RC= 1.73E+00    RE= 1.00E+00
+       TF= 6.52E-10    TR= 0.00E+00   VAF= 9.17E+01   VAR= 2.47E+01
+      VJC= 3.39E-01   VJE= 6.32E-01   VJS= 7.50E-01   VTF= 1.65E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BC848C/SIE NPN(
+       AF= 1.00E+00    BF= 5.27E+02    BR= 5.38E+00   CJC= 5.26E-12
+      CJE= 1.25E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 8.75E-01
+      IKF= 2.04E-01   IKR= 1.00E+00   IRB= 2.57E+00    IS= 7.58E-15
+      ISC= 1.00E-13   ISE= 1.25E-15   ITF= 1.20E+00    KF= 0.00E+00
+      MJC= 3.38E-01   MJE= 3.31E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.40E+00    NF= 9.50E-01    NR= 1.01E+00   PTF= 0.00E+00
+       RB= 7.26E+00   RBM= 1.00E+01    RC= 1.66E+00    RE= 9.80E-01
+       TF= 6.64E-10    TR= 0.00E+00   VAF= 3.49E+01   VAR= 2.18E+01
+      VJC= 3.84E-01   VJE= 5.96E-01   VJS= 7.50E-01   VTF= 1.72E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BAT62/SIE   D(IS=120N RS=200 N=1.04 XTI=1.8 EG=.68
+ CJO=.35P M=.14 VJ=.4 FC=.5 BV=40 IBV=5U TT=25P)
* for 27C reverse current simulation use: GMIN=3e-8
* 20.12.1993 SIEMENS PD1 KURTH
*$
*****************************************************************
.MODEL BAT64/SIE D(
+       AF= 1.00E+00    BV= 3.00E+01   CJO= 6.59E-12    EG= 1.11E+00
+       FC= 5.00E-01   IBV= 1.00E-04    IS= 6.97E-09    KF= 0.00E+00
+        M= 3.96E-01     N= 1.01E+00    RS= 1.84E+00    TT= 1.00E-10
+       VJ= 3.42E-01   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BCW66G/SIE NPN(
+       AF= 1.00E+00    BF= 6.16E+02    BR= 2.64E+00   CJC= 3.14E-11
+      CJE= 6.75E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 3.18E-01   IKR= 1.00E+00   IRB= 2.14E-02    IS= 2.41E-13
+      ISC= 1.00E-10   ISE= 2.82E-15   ITF= 1.82E+00    KF= 0.00E+00
+      MJC= 4.89E-01   MJE= 4.09E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.12E+00    NF= 1.04E+00    NR= 1.08E+00   PTF= 0.00E+00
+       RB= 2.90E+01   RBM= 1.00E-02    RC= 3.09E-01    RE= 1.00E-02
+       TF= 8.68E-10    TR= 0.00E+00   VAF= 1.97E+02   VAR= 3.04E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 1.00E-01
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 4.67E+01   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BCW68G/SIE PNP(
+       AF= 1.00E+00    BF= 3.25E+02    BR= 1.45E+01   CJC= 4.28E-11
+      CJE= 3.79E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.14E-01   IKR= 1.00E+00   IRB= 4.50E+00    IS= 1.34E-13
+      ISC= 1.00E-10   ISE= 6.82E-16   ITF= 2.68E+00    KF= 0.00E+00
+      MJC= 4.75E-01   MJE= 7.00E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.16E+00    NF= 9.91E-01    NR= 1.00E+00   PTF= 0.00E+00
+       RB= 1.96E+01   RBM= 1.00E+01    RC= 3.90E-01    RE= 1.00E-02
+       TF= 6.85E-10    TR= 0.00E+00   VAF= 4.65E+01   VAR= 1.00E+01
+      VJC= 3.00E-01   VJE= 4.78E-01   VJS= 7.50E-01   VTF= 4.55E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.54E+01   XTI= 3.00E+00)
*$ 
*****************************************************************
.MODEL BCX70J/SIE NPN(
+       AF= 1.00E+00    BF= 3.20E+02    BR= 1.47E+01   CJC= 7.16E-12
+      CJE= 1.03E-11   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.79E-01   IKR= 1.00E+00   IRB= 3.37E-03    IS= 3.71E-13
+      ISC= 1.71E-13   ISE= 2.77E-15   ITF= 2.26E+00    KF= 0.00E+00
+      MJC= 4.60E-01   MJE= 3.86E-01   MJS= 3.30E-01    NC= 1.21E+00
+       NE= 1.37E+00    NF= 1.14E+00    NR= 1.21E+00   PTF= 0.00E+00
+       RB= 1.00E+02   RBM= 1.00E+01    RC= 1.75E+00    RE= 1.00E-02
+       TF= 5.65E-10    TR= 0.00E+00   VAF= 2.49E+02   VAR= 3.31E+01
+      VJC= 3.00E-01   VJE= 3.00E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.10E+02   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BCX71J/SIE PNP(
+       AF= 1.00E+00    BF= 3.72E+02    BR= 2.85E-02   CJC= 1.13E-11
+      CJE= 1.13E-10   CJS= 0.00E+00    EG= 1.11E+00    FC= 5.00E-01
+      IKF= 1.33E-01   IKR= 1.00E+00   IRB= 2.46E-03    IS= 1.63E-13
+      ISC= 7.42E-13   ISE= 4.39E-13   ITF= 2.78E+00    KF= 0.00E+00
+      MJC= 3.98E-01   MJE= 5.98E-01   MJS= 3.30E-01    NC= 1.52E+00
+       NE= 2.00E+00    NF= 1.06E+00    NR= 1.51E+00   PTF= 0.00E+00
+       RB= 5.00E+01   RBM= 1.00E+01    RC= 3.83E+00    RE= 1.00E-02
+       TF= 5.30E-10    TR= 0.00E+00   VAF= 2.68E+01   VAR= 1.00E+01
+      VJC= 3.00E-01   VJE= 7.38E-01   VJS= 7.50E-01   VTF= 9.99E+05
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 3.39E-01   XTI= 3.00E+00)
*$
*****************************************************************
.MODEL BF775A/SIE NPN(
+ BF = 312  BR = 1  NF = 0.97  NE = 2.6  NR = 1  NC = 2
+ IS = 2.2E-016  ISE = 2.1E-015  ISC = 1E-017  IKR = 0.5
+ XTI = 3  IKF = 0.02  RE = 0.9  RC = 3.2 RBM = 2.2
+ RB = 26  IRB = 0.25  TR = 0  TF = 0  ITF = 0
+ XTF = 0  VTF = 1E+030  FC = 0.5  VJE = 0.85  MJE = 0.33
+ CJE = 2.5E-012  XCJC = 0.3  CJC = 1E-014  VJC = 0.75
+ MJC = 0.33  XTB = 0  VAF = 36  VAR = 60)
*$
*****************************************************************
.MODEL BFQ74/SIE NPN(
+ BF = 312  BR = 1  NF = 0.97  NE = 2.6  NR = 1  NC = 2
+ IS = 2.2E-016  ISE = 2.1E-015  ISC = 1E-017  IKR = 0.5
+ XTI = 3  IKF = 0.02  RE = 0.9  RC = 3.2 RBM = 2.2
+ RB = 26  IRB = 0.25  TR = 0  TF = 0  ITF = 0
+ XTF = 0  VTF = 1E+030  FC = 0.5  VJE = 0.85  MJE = 0.33
+ CJE = 2.5E-012  XCJC = 0.3  CJC = 1E-014  VJC = 0.75
+ MJC = 0.33  XTB = 0  VAF = 36  VAR = 60)
*$
*****************************************************************
.MODEL BFQ82/SIE NPN(
+ BF = 100  BR = 1  NF = 0.96  NE = 2.43  NR = 1  NC = 2  VAF = 41
+ IS = 9.3E-016  ISE = 3.9E-015  ISC = 1E-017  IKR = 0.5  VAR = 217
+ IKF = 0.055  RE = 0.18  RC = 2.8  RBM = 0.82  RB = 29
+ IRB = 0.25  TR = 0  TF = 0  ITF = 0  XTF = 0  VTF = 1E+030
+ FC = 0.5  VJE = 0.85  MJE = 0.33  CJE = 2.4E-011  XCJC = 0.01
+ CJC = 5E-013  VJC = 0.75  MJC = 0.33  XTB = 0  XTI = 3)
*$
*****************************************************************
.MODEL BFQ181/SIE NPN(
+ BF = 100  BR = 1 NF = 1 NE = 4.95 NR = 1 NC = 2  VAF = 35
+ IS = 2.8E-016  ISE = 1.3E-014  ISC = 1E-017  IKR = 0.5
+ IKF = 0.018  RE = 1  RC = 4.5  RBM = 1.9 RB = 35.2  VAR = 360
+ IRB = 0.25  TR = 0  TF = 0  ITF = 0  XTF = 0  VTF = 1E+030
+ FC = 0.5  VJE = 0.85  MJE = 0.33  CJE = 1E-012  XCJC = 0.3
+ CJC = 1E-013  VJC = 0.75  MJC = 0.33  XTB = 0  XTI = 3)
*$
*****************************************************************
.MODEL BFQ182/SIE NPN(
+ BF = 70.22 BR = 1 NF = 0.9 NE = 1.775 NR = 1 NC = 2 VAF = 32.284
+ IS = 2E-016 ISE = 1.95E-015 ISC = 1E-017 IKR = 0.5 VAR = 3.22
+ IKF = 0.32 RE = 0.45 RC = 2.147 RBM = 0.9 RB = 9 IRB = 0.251
+ TR = 0 TF = 1.11E-11 ITF = 0.1 XTF = 19.761 VTF = 1.705
+ FC = 0.497 VJE = 1.02 MJE = 0.353 CJE = 8.66E-013 XCJC = 0.495
+ CJC = 1.2E-013 VJC = 0.629 MJC = 0.734 XTB = 0 XTI = 2)
*$
*****************************************************************
.MODEL BFQ196/SIE NPN(
+ BF = 141  BR = 1  NF = 0.95  NE = 2.17  NR = 1  NC = 2  VAF = 120
+ IS = 1.5E-015  ISE = 5.3E-015  ISC = 1E-017  IKR = 0.5  VAR = 365
+ IKF = 0.067  RE = 0.11  RC = 2.2  RBM = 1.8  RB = 20
+ IRB = 0.25  TR = 0  TF = 0  ITF = 0  XTF = 0  VTF = 1E+030
+ FC = 0.5  VJE = 0.85  MJE = 0.33  CJE = 3E-012  XCJC = 0.9
+ CJC = 1E-013  VJC = 0.75  MJC = 0.33  XTB = 0  XTI = 3)
*$
*****************************************************************
.MODEL BFS17P/SIE NPN(
+       AF= 1.00E+00    BF= 1.03E+02    BR= 1.73E-01   CJC= 1.26E-12
+      CJE= 1.42E-12   CJS= 0.00E+00    EG= 1.11E+00    FC= 9.00E-01
+      IKF= 5.04E-02   IKR= 1.00E+00   IRB= 1.00E+01    IS= 1.72E-17
+      ISC= 1.00E-13   ISE= 1.44E-15   ITF= 5.09E-01    KF= 0.00E+00
+      MJC= 2.00E-01   MJE= 2.00E-01   MJS= 3.30E-01    NC= 2.00E+00
+       NE= 1.33E+00    NF= 9.19E-01    NR= 1.00E+00   PTF= 0.00E+00
+       RB= 1.15E+01   RBM= 8.04E+00    RC= 2.60E+00    RE= 2.91E-02
+       TF= 4.90E-11    TR= 0.00E+00   VAF= 3.50E+01   VAR= 1.00E+01
+      VJC= 8.00E-01   VJE= 6.65E-01   VJS= 7.50E-01   VTF= 1.32E+00
+     XCJC= 1.00E+00   XTB= 0.00E+00   XTF= 1.00E+02   XTI= 3.00E+00)
*$
*****************************************************************
.SUBCKT BUZ11AL_2/SIE 1 2 3
LS 5 2 7N
LD 95 3 5N
RG 4 11 5.5M
D11AL 76 95 DREV
.MODEL DREV D CJO=1.2N RS=20M TT=7.7N IS=300P BV=50
M11 95 11 76 76 MBUZ
.MODEL MBUZ NMOS VTO=2.364 KP=95.23
M2 11 95 8 8 MSW
.MODEL MSW NMOS VTO=-27.16 KP=1.53
M3 95 11 8 8 MSW
COX 11 8 2.8N
DGD 8 95 DCGD
.MODEL DCGD D CJO=1.19N M=0.554 VJ=1.097
CGS 76 11 1.6N
LG 4 1 7N
.ENDS
*$
*****************************************************
.SUBCKT BUZ211/SIE 1 2 3
LS 5 2 7N
LD 7 3 5N
RG 4 11 5
RS 5 9 29M
GVR 7 12 POLY(1) 7 12 0 1.682 0 -0.003 0 5.762U 0 -3.717N
* VARIABLER DRAINWIDERSTAND POLY-APPROX. DER LEITWERTVARIATION
D211 9 7 DREV
.MODEL DREV D CJO=1.35N RS=20M TT=121N IS=300P BV=600
M211 12 11 9 9 MBUZ
.MODEL MBUZ NMOS VTO=3.61 KP=4.082
M2 11 12 8 8 MSW OFF
.MODEL MSW NMOS VTO=0.01 KP=10
M3 12 11 8 8 MSW OFF
COX 11 8 9.4N
DGD 8 12 DCGD
.MODEL DCGD D CJO=4.734N M=0.571 VJ=0.026
CGS 9 11 2.9N
RHELP 11 8 100MEG
LG 4 1 7N
.ENDS
*$
*****************************************************











